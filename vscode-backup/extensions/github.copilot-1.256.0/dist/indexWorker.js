"use strict";var Ni=Object.create;var rn=Object.defineProperty;var Pi=Object.getOwnPropertyDescriptor;var Ri=Object.getOwnPropertyNames;var Ci=Object.getPrototypeOf,Ai=Object.prototype.hasOwnProperty;var u=(n,e)=>rn(n,"name",{value:e,configurable:!0});var L=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Fi=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ri(e))!Ai.call(n,s)&&s!==t&&rn(n,s,{get:()=>e[s],enumerable:!(o=Pi(e,s))||o.enumerable});return n};var de=(n,e,t)=>(t=n!=null?Ni(Ci(n)):{},Fi(e||!n||!n.__esModule?rn(t,"default",{value:n,enumerable:!0}):t,n));var Kr=L(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.bytePairEncode=Y.BinaryMap=Y.binaryMapKey=void 0;var Hi=u((n,e,t)=>{let o=t-e,s=16777215>>>Math.max(0,(3-o)*8),a=(n[e+0]|n[e+1]<<8|n[e+2]<<16)&s,r=16777215>>>Math.min(31,Math.max(0,(6-o)*8)),i=(n[e+3]|n[e+4]<<8|n[e+5]<<16)&r;return a+16777216*i},"binaryMapKey");Y.binaryMapKey=Hi;var Ge=class Ge{constructor(){this.nested=new Map,this.final=new Map}get(e,t=0,o=e.length){var r;let s=o<6+t,a=(0,Y.binaryMapKey)(e,t,o);return s?this.final.get(a):(r=this.nested.get(a))==null?void 0:r.get(e,6+t,o)}set(e,t){let o=(0,Y.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(o,t);return}let a=this.nested.get(o);if(a instanceof Ge)a.set(e.subarray(6),t);else{let r=new Ge;r.set(e.subarray(6),t),this.nested.set(o,r)}}};u(Ge,"BinaryMap");var cn=Ge;Y.BinaryMap=cn;var X=new Int32Array(128),U=new Int32Array(128);function Vi(n,e,t){var l;if(t===1)return[e.get(n)];let o=2147483647,s=-1;for(;X.length<t*2;)U=new Int32Array(U.length*2),X=new Int32Array(X.length*2);for(let c=0;c<t-1;c++){let d=(l=e.get(n,c,c+2))!=null?l:2147483647;d<o&&(o=d,s=c),U[c]=c,X[c]=d}U[t-1]=t-1,X[t-1]=2147483647,U[t]=t,X[t]=2147483647;let a=t+1;function r(c,d=0){if(c+d+2<a){let m=e.get(n,U[c],U[c+d+2]);if(m!==void 0)return m}return 2147483647}for(u(r,"getRank");o!==2147483647;){X[U[s]]=r(s,1),s>0&&(X[U[s-1]]=r(s-1,1));for(let c=s+1;c<a-1;c++)U[c]=U[c+1];a--,s=-1,o=2147483647;for(let c=0;c<a-1;c++){let d=X[U[c]];X[U[c]]<o&&(o=d,s=c)}}let i=[];for(let c=0;c<a-1;c++)i.push(e.get(n,U[c],U[c+1]));return i}u(Vi,"bytePairEncode");Y.bytePairEncode=Vi});var Qr=L(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.makeTextEncoder=void 0;var _n=class _n{constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let t=this.encoder.encode(e);return this.length=t.length,t}};u(_n,"UniversalTextEncoder");var dn=_n,fn=class fn{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}};u(fn,"NodeTextEncoder");var mn=fn,Gi=u(()=>typeof Buffer<"u"?new mn:new dn,"makeTextEncoder");bt.makeTextEncoder=Gi});var Jr=L(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.LRUCache=void 0;var gn=class gn{constructor(e){this.size=e,this.nodes=new Map}get(e){let t=this.nodes.get(e);if(t)return this.moveToHead(t),t.value}set(e,t){let o=this.nodes.get(e);if(o)o.value=t,this.moveToHead(o);else{let s=new hn(e,t);this.nodes.set(e,s),this.addNode(s),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};u(gn,"LRUCache");var pn=gn;yt.LRUCache=pn;var bn=class bn{constructor(e,t){this.key=e,this.value=t}};u(bn,"Node");var hn=bn});var vn=L(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.TikTokenizer=void 0;var Zi=require("fs"),Ki=require("util"),wt=Kr(),Qi=Qr(),Ji=Jr();function Xi(n){let e=new Map;try{let o=Zi.readFileSync(n,"utf-8");return t(o),e}catch(o){throw new Error(`Failed to load from BPE encoder file stream: ${o}`)}function t(o){for(let s of o.split(/[\r\n]+/)){if(s.trim()==="")continue;let a=s.split(" ");if(a.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let r=new Uint8Array(Buffer.from(a[0],"base64")),i=parseInt(a[1]);if(!isNaN(i))e.set(r,i);else throw new Error(`Can't parse ${a[1]} to integer`)}}u(t,"processBpeRanks")}u(Xi,"loadTikTokenBpe");function Yi(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}u(Yi,"escapeRegExp");var wn=class wn{constructor(e,t,o,s=8192){this.textEncoder=(0,Qi.makeTextEncoder)(),this.textDecoder=new Ki.TextDecoder("utf-8"),this.cache=new Ji.LRUCache(s);let a=typeof e=="string"?Xi(e):e;this.init(a,t,o)}init(e,t,o){this.encoder=new wt.BinaryMap;for(let[s,a]of e)this.encoder.set(s,a);this.regex=new RegExp(o,"gu"),this.specialTokensRegex=new RegExp(Array.from(t.keys()).map(s=>Yi(s)).join("|")),this.specialTokensEncoder=t,this.decoder=new Map;for(let[s,a]of e)this.decoder.set(a,s);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[s,a]of t)this.specialTokensDecoder.set(a,s)}findNextSpecialToken(e,t,o){let s=t,a=null;if(o&&this.specialTokensRegex)for(;a=e.slice(s).match(this.specialTokensRegex),!(!a||o&&o.includes(a[0]));)s+=a.index+1;let r=a?s+a.index:e.length;return[a,r]}encode(e,t){let o=[],s=0;for(;;){let a,r;if([a,r]=this.findNextSpecialToken(e,s,t),r>s&&this.encodeByIndex(e,o,s,r),a){if(s=s+this.encodeSpecialToken(o,a),s>=e.length)break}else break}return o}encodeSpecialToken(e,t){var s;let o=(s=this.specialTokensEncoder)==null?void 0:s.get(t[0]);return e.push(o),t.index+t[0].length}encodeByIndex(e,t,o,s){let a,r=e.substring(o,s);for(this.regex.lastIndex=0;a=this.regex.exec(r);){let i=this.cache.get(a[0]);if(i)for(let l of i)t.push(l);else{let l=this.textEncoder.encode(a[0]),c=this.encoder.get(l,0,this.textEncoder.length);if(c!==void 0)t.push(c),this.cache.set(a[0],[c]);else{let d=(0,wt.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let m of d)t.push(m);this.cache.set(a[0],d)}}}}encodeTrimSuffixByIndex(e,t,o,s,a,r,i){let l,c=e.substring(o,s);for(this.regex.lastIndex=0;l=this.regex.exec(c);){let d=l[0],m=this.cache.get(d);if(m)if(r+m.length<=a)r+=m.length,i+=d.length,t.push(...m);else{let _=a-r;r+=_,i+=d.length,t.push(...m.slice(0,_));break}else{let _=this.textEncoder.encode(d),f=this.encoder.get(_,0,_.length);if(f!==void 0)if(this.cache.set(d,[f]),r+1<=a)r++,i+=d.length,t.push(f);else break;else{let p=(0,wt.bytePairEncode)(_,this.encoder,this.textEncoder.length);if(this.cache.set(d,p),r+p.length<=a){r+=p.length,i+=d.length;for(let h of p)t.push(h)}else{let h=a-r;r+=h,i+=d.length;for(let b=0;b<h;b++)t.push(p[b]);break}}}if(r>=a)break}return{tokenCount:r,encodeLength:i}}encodeTrimSuffix(e,t,o){let s=[],a=0,r=0,i=0;for(;;){let c,d;if([c,d]=this.findNextSpecialToken(e,a,o),d>a){let{tokenCount:m,encodeLength:_}=this.encodeTrimSuffixByIndex(e,s,a,d,t,r,i);if(r=m,i=_,r>=t)break}if(c!==null){if(r++,r<=t&&(a=a+this.encodeSpecialToken(s,c),i+=c[0].length,a>=e.length)||r>=t)break}else break}let l=i===e.length?e:e.slice(0,i);return{tokenIds:s,text:l}}encodeTrimPrefix(e,t,o){let s=[],a=0,r=0,i=0,l=new Map;for(l.set(r,i);;){let _,f;if([_,f]=this.findNextSpecialToken(e,a,o),f>a){let p,h=e.substring(a,f);for(this.regex.lastIndex=0;p=this.regex.exec(h);){let b=p[0],g=this.cache.get(b);if(g)r+=g.length,i+=b.length,s.push(...g),l.set(r,i);else{let T=this.textEncoder.encode(b),v=this.encoder.get(T);if(v!==void 0)this.cache.set(b,[v]),r++,i+=b.length,s.push(v),l.set(r,i);else{let E=(0,wt.bytePairEncode)(T,this.encoder,this.textEncoder.length);this.cache.set(b,E),r+=E.length,i+=b.length;for(let S of E)s.push(S);l.set(r,i)}}}}if(_!==null){if(a=a+this.encodeSpecialToken(s,_),r++,i+=_[0].length,l.set(r,i),a>=e.length)break}else break}if(r<=t)return{tokenIds:s,text:e};let c=r-t,d=0,m=0;for(let[_,f]of l)if(_>=c){d=_,m=f;break}if(d>t){let _=this.encode(e,o),f=_.slice(_.length-t);return{tokenIds:f,text:this.decode(f)}}return{tokenIds:s.slice(d),text:e.slice(m)}}decode(e){var o,s;let t=[];for(let a of e){let r=[],i=(o=this.decoder)==null?void 0:o.get(a);if(i!==void 0)r=Array.from(i);else{let l=(s=this.specialTokensDecoder)==null?void 0:s.get(a);if(l!==void 0){let c=this.textEncoder.encode(l);r=Array.from(c.subarray(0,this.textEncoder.length))}}t.push(...r)}return this.textDecoder.decode(new Uint8Array(t))}};u(wn,"TikTokenizer");var yn=wn;vt.TikTokenizer=yn});var ao=L(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.createTokenizer=P.createByEncoderName=P.createByModelName=P.getRegexByModel=P.getRegexByEncoder=P.getSpecialTokensByModel=P.getSpecialTokensByEncoder=P.MODEL_TO_ENCODING=void 0;var Et=require("fs"),Sn=require("path"),es=vn(),ts=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);P.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var St="<|endoftext|>",Xr="<|fim_prefix|>",Yr="<|fim_middle|>",eo="<|fim_suffix|>",to="<|endofprompt|>",Ze="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",no="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",ns=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],ro=ns.join("|");function En(n){let e="";if(P.MODEL_TO_ENCODING.has(n))e=P.MODEL_TO_ENCODING.get(n);else for(let[t,o]of ts)if(n.startsWith(t)){e=o;break}return e}u(En,"getEncoderFromModelName");async function rs(n,e){let t=await fetch(n);if(!t.ok)throw new Error(`Failed to fetch file from ${n}. Status code: ${t.status}`);let o=await t.text();Et.writeFileSync(e,o)}u(rs,"fetchAndSaveFile");function Tn(n){let e=new Map([[St,50256]]);switch(n){case"o200k_base":e=new Map([[St,199999],[to,200018]]);break;case"cl100k_base":e=new Map([[St,100257],[Xr,100258],[Yr,100259],[eo,100260],[to,100276]]);break;case"p50k_edit":e=new Map([[St,50256],[Xr,50281],[Yr,50282],[eo,50283]]);break;default:break}return e}u(Tn,"getSpecialTokensByEncoder");P.getSpecialTokensByEncoder=Tn;function os(n){let e=En(n);return Tn(e)}u(os,"getSpecialTokensByModel");P.getSpecialTokensByModel=os;function oo(n){switch(n){case"o200k_base":return ro;case"cl100k_base":return no;default:break}return Ze}u(oo,"getRegexByEncoder");P.getRegexByEncoder=oo;function is(n){let e=En(n);return oo(e)}u(is,"getRegexByModel");P.getRegexByModel=is;async function ss(n,e=null){return io(En(n),e)}u(ss,"createByModelName");P.createByModelName=ss;async function io(n,e=null){let t,o,s=Tn(n);switch(n){case"o200k_base":t=ro,o="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":t=no,o="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":t=Ze,o="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":t=Ze,o="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":t=Ze,o="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":t=Ze,o="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${n}]`)}e!==null&&(s=new Map([...s,...e]));let a=Sn.basename(o),r=Sn.resolve(__dirname,"..","model");Et.existsSync(r)||Et.mkdirSync(r,{recursive:!0});let i=Sn.resolve(r,a);return Et.existsSync(i)||(console.log(`Downloading file from ${o}`),await rs(o,i),console.log(`Saved file to ${i}`)),so(i,s,t)}u(io,"createByEncoderName");P.createByEncoderName=io;function so(n,e,t,o=8192){return new es.TikTokenizer(n,e,t,o)}u(so,"createTokenizer");P.createTokenizer=so});var lo=L(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.createTokenizer=R.createByEncoderName=R.createByModelName=R.getSpecialTokensByModel=R.getSpecialTokensByEncoder=R.getRegexByModel=R.getRegexByEncoder=R.MODEL_TO_ENCODING=R.TikTokenizer=void 0;var as=vn();Object.defineProperty(R,"TikTokenizer",{enumerable:!0,get:u(function(){return as.TikTokenizer},"get")});var se=ao();Object.defineProperty(R,"MODEL_TO_ENCODING",{enumerable:!0,get:u(function(){return se.MODEL_TO_ENCODING},"get")});Object.defineProperty(R,"getRegexByEncoder",{enumerable:!0,get:u(function(){return se.getRegexByEncoder},"get")});Object.defineProperty(R,"getRegexByModel",{enumerable:!0,get:u(function(){return se.getRegexByModel},"get")});Object.defineProperty(R,"getSpecialTokensByEncoder",{enumerable:!0,get:u(function(){return se.getSpecialTokensByEncoder},"get")});Object.defineProperty(R,"getSpecialTokensByModel",{enumerable:!0,get:u(function(){return se.getSpecialTokensByModel},"get")});Object.defineProperty(R,"createByModelName",{enumerable:!0,get:u(function(){return se.createByModelName},"get")});Object.defineProperty(R,"createByEncoderName",{enumerable:!0,get:u(function(){return se.createByEncoderName},"get")});Object.defineProperty(R,"createTokenizer",{enumerable:!0,get:u(function(){return se.createTokenizer},"get")})});var yo=L((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;let _Parser=class _Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=u((r,i)=>{throw i},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(r){return Module.locateFile?Module.locateFile(r,scriptDirectory):scriptDirectory+r}u(locateFile,"locateFile");function logExceptionOnExit(r){r instanceof ExitStatus||err("exiting due to exception: "+r)}if(u(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=u((r,i)=>(r=isFileURI(r)?new URL(r):nodePath.normalize(r),fs.readFileSync(r,i?void 0:"utf8")),"read_"),readBinary=u(r=>{var i=read_(r,!0);return i.buffer||(i=new Uint8Array(i)),i},"readBinary"),readAsync=u((r,i,l)=>{r=isFileURI(r)?new URL(r):nodePath.normalize(r),fs.readFile(r,function(c,d){c?l(c):i(d.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=u((r,i)=>{if(keepRuntimeAlive())throw process.exitCode=r,i;logExceptionOnExit(i),process.exit(r)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=u(r=>{var i=new XMLHttpRequest;return i.open("GET",r,!1),i.send(null),i.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=u(r=>{var i=new XMLHttpRequest;return i.open("GET",r,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)},"readBinary")),readAsync=u((r,i,l)=>{var c=new XMLHttpRequest;c.open("GET",r,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?i(c.response):l()},c.onerror=l,c.send(null)},"readAsync"),setWindowTitle=u(r=>document.title=r,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(r,i,l){for(var c=i+l,d=i;r[d]&&!(d>=c);)++d;if(d-i>16&&r.buffer&&UTF8Decoder)return UTF8Decoder.decode(r.subarray(i,d));for(var m="";i<d;){var _=r[i++];if(128&_){var f=63&r[i++];if((224&_)!=192){var p=63&r[i++];if((_=(240&_)==224?(15&_)<<12|f<<6|p:(7&_)<<18|f<<12|p<<6|63&r[i++])<65536)m+=String.fromCharCode(_);else{var h=_-65536;m+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else m+=String.fromCharCode((31&_)<<6|f)}else m+=String.fromCharCode(_)}return m}u(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(r,i){return r?UTF8ArrayToString(HEAPU8,r,i):""}u(UTF8ToString,"UTF8ToString");function stringToUTF8Array(r,i,l,c){if(!(c>0))return 0;for(var d=l,m=l+c-1,_=0;_<r.length;++_){var f=r.charCodeAt(_);if(f>=55296&&f<=57343&&(f=65536+((1023&f)<<10)|1023&r.charCodeAt(++_)),f<=127){if(l>=m)break;i[l++]=f}else if(f<=2047){if(l+1>=m)break;i[l++]=192|f>>6,i[l++]=128|63&f}else if(f<=65535){if(l+2>=m)break;i[l++]=224|f>>12,i[l++]=128|f>>6&63,i[l++]=128|63&f}else{if(l+3>=m)break;i[l++]=240|f>>18,i[l++]=128|f>>12&63,i[l++]=128|f>>6&63,i[l++]=128|63&f}}return i[l]=0,l-d}u(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(r,i,l){return stringToUTF8Array(r,HEAPU8,i,l)}u(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(r){for(var i=0,l=0;l<r.length;++l){var c=r.charCodeAt(l);c<=127?i++:c<=2047?i+=2:c>=55296&&c<=57343?(i+=4,++l):i+=3}return i}u(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(r){buffer=r,Module.HEAP8=HEAP8=new Int8Array(r),Module.HEAP16=HEAP16=new Int16Array(r),Module.HEAP32=HEAP32=new Int32Array(r),Module.HEAPU8=HEAPU8=new Uint8Array(r),Module.HEAPU16=HEAPU16=new Uint16Array(r),Module.HEAPU32=HEAPU32=new Uint32Array(r),Module.HEAPF32=HEAPF32=new Float32Array(r),Module.HEAPF64=HEAPF64=new Float64Array(r)}u(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}u(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}u(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}u(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}u(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}u(postRun,"postRun");function addOnPreRun(r){__ATPRERUN__.unshift(r)}u(addOnPreRun,"addOnPreRun");function addOnInit(r){__ATINIT__.unshift(r)}u(addOnInit,"addOnInit");function addOnPostRun(r){__ATPOSTRUN__.unshift(r)}u(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(r){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}u(addRunDependency,"addRunDependency");function removeRunDependency(r){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var i=dependenciesFulfilled;dependenciesFulfilled=null,i()}}u(removeRunDependency,"removeRunDependency");function abort(r){throw Module.onAbort&&Module.onAbort(r),err(r="Aborted("+r+")"),ABORT=!0,EXITSTATUS=1,r+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(r)}u(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(r){return r.startsWith(dataURIPrefix)}u(isDataURI,"isDataURI");function isFileURI(r){return r.startsWith("file://")}u(isFileURI,"isFileURI");function getBinary(r){try{if(r==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(r);throw"both async and sync fetching of the wasm failed"}catch(i){abort(i)}}u(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(r){if(!r.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return r.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(r,i){readAsync(wasmBinaryFile,function(l){r(new Uint8Array(l))},i)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}u(getBinaryPromise,"getBinaryPromise");function createWasm(){var r={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function i(d,m){var _=d.exports;_=relocateExports(_,1024);var f=getDylinkMetadata(m);f.neededDynlibs&&(dynamicLibraries=f.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(_,"main"),Module.asm=_,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}u(i,"t");function l(d){i(d.instance,d.module)}u(l,"r");function c(d){return getBinaryPromise().then(function(m){return WebAssembly.instantiate(m,r)}).then(function(m){return m}).then(d,function(m){err("failed to asynchronously prepare wasm: "+m),abort(m)})}if(u(c,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(r,i)}catch(d){return err("Module.instantiateWasm callback failed with error: "+d),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?c(l):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(d){return WebAssembly.instantiateStreaming(d,r).then(l,function(m){return err("wasm streaming compile failed: "+m),err("falling back to ArrayBuffer instantiation"),c(l)})}),{}}u(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(r){this.name="ExitStatus",this.message="Program terminated with exit("+r+")",this.status=r}u(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:u(function(r,i){var l=GOT[i];return l||(l=GOT[i]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(i)||(l.required=!0),l},"get")};function callRuntimeCallbacks(r){for(;r.length>0;)r.shift()(Module)}u(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(r){var i=0,l=0;function c(){for(var M=0,w=1;;){var N=r[i++];if(M+=(127&N)*w,w*=128,!(128&N))break}return M}u(c,"_");function d(){var M=c();return UTF8ArrayToString(r,(i+=M)-M,M)}u(d,"n");function m(M,w){if(M)throw new Error(w)}u(m,"s");var _="dylink.0";if(r instanceof WebAssembly.Module){var f=WebAssembly.Module.customSections(r,_);f.length===0&&(_="dylink",f=WebAssembly.Module.customSections(r,_)),m(f.length===0,"need dylink section"),l=(r=new Uint8Array(f[0])).length}else{m(new Uint32Array(new Uint8Array(r.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),m(r[8]!==0,"need the dylink section to be first"),i=9;var p=c();l=i+p,_=d()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(_=="dylink"){h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();for(var b=c(),g=0;g<b;++g){var T=d();h.neededDynlibs.push(T)}}else for(m(_!=="dylink.0");i<l;){var v=r[i++],E=c();if(v===1)h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();else if(v===2)for(b=c(),g=0;g<b;++g)T=d(),h.neededDynlibs.push(T);else if(v===3)for(var S=c();S--;){var I=d();256&c()&&h.tlsExports.add(I)}else if(v===4)for(S=c();S--;)d(),I=d(),(3&c())==1&&h.weakImports.add(I);else i+=E}return h}u(getDylinkMetadata,"getDylinkMetadata");function getValue(r,i="i8"){switch(i.endsWith("*")&&(i="*"),i){case"i1":case"i8":return HEAP8[r>>0];case"i16":return HEAP16[r>>1];case"i32":case"i64":return HEAP32[r>>2];case"float":return HEAPF32[r>>2];case"double":return HEAPF64[r>>3];case"*":return HEAPU32[r>>2];default:abort("invalid type for getValue: "+i)}return null}u(getValue,"getValue");function asmjsMangle(r){return r.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(r)?r:"_"+r}u(asmjsMangle,"asmjsMangle");function mergeLibSymbols(r,i){for(var l in r)if(r.hasOwnProperty(l)){asmLibraryArg.hasOwnProperty(l)||(asmLibraryArg[l]=r[l]);var c=asmjsMangle(l);Module.hasOwnProperty(c)||(Module[c]=r[l]),l=="__main_argc_argv"&&(Module._main=r[l])}}u(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(r,i,l){var c=Module["dynCall_"+r];return l&&l.length?c.apply(null,[i].concat(l)):c.call(null,i)}u(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(r){var i=wasmTableMirror[r];return i||(r>=wasmTableMirror.length&&(wasmTableMirror.length=r+1),wasmTableMirror[r]=i=wasmTable.get(r)),i}u(getWasmTableEntry,"getWasmTableEntry");function dynCall(r,i,l){return r.includes("j")?dynCallLegacy(r,i,l):getWasmTableEntry(i).apply(null,l)}u(dynCall,"dynCall");function createInvokeFunction(r){return function(){var i=stackSave();try{return dynCall(r,arguments[0],Array.prototype.slice.call(arguments,1))}catch(l){if(stackRestore(i),l!==l+0)throw l;_setThrew(1,0)}}}u(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(r,i){return HEAPU8.fill(0,r,r+i),r}u(zeroMemory,"zeroMemory");function getMemory(r){if(runtimeInitialized)return zeroMemory(_malloc(r),r);var i=___heap_base,l=i+r+15&-16;return ___heap_base=l,GOT.__heap_base.value=l,i}u(getMemory,"getMemory");function isInternalSym(r){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(r)}u(isInternalSym,"isInternalSym");function uleb128Encode(r,i){r<128?i.push(r):i.push(r%128|128,r>>7)}u(uleb128Encode,"uleb128Encode");function sigToWasmTypes(r){for(var i={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},l={parameters:[],results:r[0]=="v"?[]:[i[r[0]]]},c=1;c<r.length;++c)l.parameters.push(i[r[c]]),r[c]==="j"&&l.parameters.push("i32");return l}u(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(r,i){var l=r.slice(0,1),c=r.slice(1),d={i:127,p:127,j:126,f:125,d:124};i.push(96),uleb128Encode(c.length,i);for(var m=0;m<c.length;++m)i.push(d[c[m]]);l=="v"?i.push(0):i.push(1,d[l])}u(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(r,i){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(i),r);var l=[1];generateFuncType(i,l);var c=[0,97,115,109,1,0,0,0,1];uleb128Encode(l.length,c),c.push.apply(c,l),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var d=new WebAssembly.Module(new Uint8Array(c));return new WebAssembly.Instance(d,{e:{f:r}}).exports.f}u(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(r,i){if(functionsInTableMap)for(var l=r;l<r+i;l++){var c=getWasmTableEntry(l);c&&functionsInTableMap.set(c,l)}}u(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(r){throw r instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":r}return wasmTable.length-1}u(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(r,i){wasmTable.set(r,i),wasmTableMirror[r]=wasmTable.get(r)}u(setWasmTableEntry,"setWasmTableEntry");function addFunction(r,i){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(r))return functionsInTableMap.get(r);var l=getEmptyTableSlot();try{setWasmTableEntry(l,r)}catch(c){if(!(c instanceof TypeError))throw c;setWasmTableEntry(l,convertJsFunctionToWasm(r,i))}return functionsInTableMap.set(r,l),l}u(addFunction,"addFunction");function updateGOT(r,i){for(var l in r)if(!isInternalSym(l)){var c=r[l];l.startsWith("orig$")&&(l=l.split("$")[1],i=!0),GOT[l]||(GOT[l]=new WebAssembly.Global({value:"i32",mutable:!0})),(i||GOT[l].value==0)&&(typeof c=="function"?GOT[l].value=addFunction(c):typeof c=="number"?GOT[l].value=c:err("unhandled export type for `"+l+"`: "+typeof c))}}u(updateGOT,"updateGOT");function relocateExports(r,i,l){var c={};for(var d in r){var m=r[d];typeof m=="object"&&(m=m.value),typeof m=="number"&&(m+=i),c[d]=m}return updateGOT(c,l),c}u(relocateExports,"relocateExports");function resolveGlobalSymbol(r,i){var l;return i&&(l=asmLibraryArg["orig$"+r]),l||(l=asmLibraryArg[r])&&l.stub&&(l=void 0),l||(l=Module[asmjsMangle(r)]),!l&&r.startsWith("invoke_")&&(l=createInvokeFunction(r.split("_")[1])),l}u(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(r,i){return Math.ceil(r/i)*i}u(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(r){var i=resolveGlobalSymbol(r,!1);return i||(i=moduleExports[r]),i}u(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:u(function(r,i){switch(i){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(i in asmLibraryArg)return asmLibraryArg[i];var l;return i in r||(r[i]=function(){return l||(l=resolveSymbol(i)),l.apply(null,arguments)}),r[i]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(u(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(u(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(r){return postInstantiation(r.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return u(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(r,i){return r.then(function(){return loadDynamicLibrary(i,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(r){loadDynamicLibrary(r,flags)}),loadModule())}u(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(r,i,l){i=i||{global:!0,nodelete:!0};var c=LDSO.loadedLibsByName[r];if(c)return i.global&&!c.global&&(c.global=!0,c.module!=="loading"&&mergeLibSymbols(c.module,r)),i.nodelete&&c.refcount!==1/0&&(c.refcount=1/0),c.refcount++,l&&(LDSO.loadedLibsByHandle[l]=c),!i.loadAsync||Promise.resolve(!0);function d(f){if(i.fs&&i.fs.findObject(f)){var p=i.fs.readFile(f,{encoding:"binary"});return p instanceof Uint8Array||(p=new Uint8Array(p)),i.loadAsync?Promise.resolve(p):p}if(f=locateFile(f),i.loadAsync)return new Promise(function(h,b){readAsync(f,g=>h(new Uint8Array(g)),b)});if(!readBinary)throw new Error(f+": file not found, and synchronous loading of external files is not available");return readBinary(f)}u(d,"n");function m(){if(typeof preloadedWasm<"u"&&preloadedWasm[r]){var f=preloadedWasm[r];return i.loadAsync?Promise.resolve(f):f}return i.loadAsync?d(r).then(function(p){return loadWebAssemblyModule(p,i,l)}):loadWebAssemblyModule(d(r),i,l)}u(m,"s");function _(f){c.global&&mergeLibSymbols(f,r),c.module=f}return u(_,"a"),c={refcount:i.nodelete?1/0:1,name:r,module:"loading",global:i.global},LDSO.loadedLibsByName[r]=c,l&&(LDSO.loadedLibsByHandle[l]=c),i.loadAsync?m().then(function(f){return _(f),!0}):(_(m()),!0)}u(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var r in GOT)if(GOT[r].value==0){var i=resolveGlobalSymbol(r,!0);if(!i&&!GOT[r].required)continue;if(typeof i=="function")GOT[r].value=addFunction(i,i.sig);else{if(typeof i!="number")throw new Error("bad export type for `"+r+"`: "+typeof i);GOT[r].value=i}}}u(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(r,i){return r.then(function(){return loadDynamicLibrary(i,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}u(preloadDylibs,"preloadDylibs");function setValue(r,i,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":HEAP8[r>>0]=i;break;case"i16":HEAP16[r>>1]=i;break;case"i32":HEAP32[r>>2]=i;break;case"i64":tempI64=[i>>>0,(tempDouble=i,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r>>2]=tempI64[0],HEAP32[r+4>>2]=tempI64[1];break;case"float":HEAPF32[r>>2]=i;break;case"double":HEAPF64[r>>3]=i;break;case"*":HEAPU32[r>>2]=i;break;default:abort("invalid type for setValue: "+l)}}u(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}u(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}u(_abort,"_abort");function _emscripten_date_now(){return Date.now()}u(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(r,i,l){HEAPU8.copyWithin(r,i,i+l)}u(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}u(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(r){try{return wasmMemory.grow(r-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}u(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(r){var i=HEAPU8.length;r>>>=0;var l=getHeapMax();if(r>l)return!1;for(var c=1;c<=4;c*=2){var d=i*(1+.2/c);if(d=Math.min(d,r+100663296),emscripten_realloc_buffer(Math.min(l,(m=Math.max(r,d))+((_=65536)-m%_)%_)))return!0}var m,_;return!1}u(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var r=process.hrtime();return 1e3*r[0]+r[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:u(function(r,i,l){if(PATH.isAbs(i))return i;var c;if(r===-100?c=FS.cwd():c=SYSCALLS.getStreamFromFD(r).path,i.length==0){if(!l)throw new FS.ErrnoError(44);return c}return PATH.join2(c,i)},"calculateAt"),doStat:u(function(r,i,l){try{var c=r(i)}catch(f){if(f&&f.node&&PATH.normalize(i)!==PATH.normalize(FS.getPath(f.node)))return-54;throw f}HEAP32[l>>2]=c.dev,HEAP32[l+8>>2]=c.ino,HEAP32[l+12>>2]=c.mode,HEAPU32[l+16>>2]=c.nlink,HEAP32[l+20>>2]=c.uid,HEAP32[l+24>>2]=c.gid,HEAP32[l+28>>2]=c.rdev,tempI64=[c.size>>>0,(tempDouble=c.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+40>>2]=tempI64[0],HEAP32[l+44>>2]=tempI64[1],HEAP32[l+48>>2]=4096,HEAP32[l+52>>2]=c.blocks;var d=c.atime.getTime(),m=c.mtime.getTime(),_=c.ctime.getTime();return tempI64=[Math.floor(d/1e3)>>>0,(tempDouble=Math.floor(d/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+56>>2]=tempI64[0],HEAP32[l+60>>2]=tempI64[1],HEAPU32[l+64>>2]=d%1e3*1e3,tempI64=[Math.floor(m/1e3)>>>0,(tempDouble=Math.floor(m/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+72>>2]=tempI64[0],HEAP32[l+76>>2]=tempI64[1],HEAPU32[l+80>>2]=m%1e3*1e3,tempI64=[Math.floor(_/1e3)>>>0,(tempDouble=Math.floor(_/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+88>>2]=tempI64[0],HEAP32[l+92>>2]=tempI64[1],HEAPU32[l+96>>2]=_%1e3*1e3,tempI64=[c.ino>>>0,(tempDouble=c.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+104>>2]=tempI64[0],HEAP32[l+108>>2]=tempI64[1],0},"doStat"),doMsync:u(function(r,i,l,c,d){if(!FS.isFile(i.node.mode))throw new FS.ErrnoError(43);if(2&c)return 0;var m=HEAPU8.slice(r,r+l);FS.msync(i,m,d,l,c)},"doMsync"),varargs:void 0,get:u(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:u(function(r){return UTF8ToString(r)},"getStr"),getStreamFromFD:u(function(r){var i=FS.getStream(r);if(!i)throw new FS.ErrnoError(8);return i},"getStreamFromFD")};function _proc_exit(r){EXITSTATUS=r,keepRuntimeAlive()||(Module.onExit&&Module.onExit(r),ABORT=!0),quit_(r,new ExitStatus(r))}u(_proc_exit,"_proc_exit");function exitJS(r,i){EXITSTATUS=r,_proc_exit(r)}u(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(r){try{var i=SYSCALLS.getStreamFromFD(r);return FS.close(i),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}u(_fd_close,"_fd_close");function convertI32PairToI53Checked(r,i){return i+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*i:NaN}u(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(r,i,l,c,d){try{var m=convertI32PairToI53Checked(i,l);if(isNaN(m))return 61;var _=SYSCALLS.getStreamFromFD(r);return FS.llseek(_,m,c),tempI64=[_.position>>>0,(tempDouble=_.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[d>>2]=tempI64[0],HEAP32[d+4>>2]=tempI64[1],_.getdents&&m===0&&c===0&&(_.getdents=null),0}catch(f){if(typeof FS>"u"||!(f instanceof FS.ErrnoError))throw f;return f.errno}}u(_fd_seek,"_fd_seek");function doWritev(r,i,l,c){for(var d=0,m=0;m<l;m++){var _=HEAPU32[i>>2],f=HEAPU32[i+4>>2];i+=8;var p=FS.write(r,HEAP8,_,f,c);if(p<0)return-1;d+=p,c!==void 0&&(c+=p)}return d}u(doWritev,"doWritev");function _fd_write(r,i,l,c){try{var d=doWritev(SYSCALLS.getStreamFromFD(r),i,l);return HEAPU32[c>>2]=d,0}catch(m){if(typeof FS>"u"||!(m instanceof FS.ErrnoError))throw m;return m.errno}}u(_fd_write,"_fd_write");function _tree_sitter_log_callback(r,i){if(currentLogCallback){let l=UTF8ToString(i);currentLogCallback(l,r!==0)}}u(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(r,i,l,c,d){var m=currentParseCallback(i,{row:l,column:c});typeof m=="string"?(setValue(d,m.length,"i32"),stringToUTF16(m,r,10240)):setValue(d,0,"i32")}u(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(r){if(r instanceof ExitStatus||r=="unwind")return EXITSTATUS;quit_(1,r)}u(handleException,"handleException");function allocateUTF8OnStack(r){var i=lengthBytesUTF8(r)+1,l=stackAlloc(i);return stringToUTF8Array(r,HEAP8,l,i),l}u(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(r,i,l){if(l===void 0&&(l=2147483647),l<2)return 0;for(var c=i,d=(l-=2)<2*r.length?l/2:r.length,m=0;m<d;++m){var _=r.charCodeAt(m);HEAP16[i>>1]=_,i+=2}return HEAP16[i>>1]=0,i-c}u(stringToUTF16,"stringToUTF16");function AsciiToString(r){for(var i="";;){var l=HEAPU8[r++>>0];if(!l)return i;i+=String.fromCharCode(l)}}u(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(r){var i=Module._main;if(i){(r=r||[]).unshift(thisProgram);var l=r.length,c=stackAlloc(4*(l+1)),d=c>>2;r.forEach(_=>{HEAP32[d++]=allocateUTF8OnStack(_)}),HEAP32[d]=0;try{var m=i(l,c);return exitJS(m,!0),m}catch(_){return handleException(_)}}}u(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=u(function r(){calledRun||run(),calledRun||(dependenciesFulfilled=r)},"e");var dylibsLoaded=!1;function run(r){function i(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(r),postRun()))}u(i,"t"),r=r||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),i()},1)):i()))}if(u(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;let n=class n{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(i){let l;if(i){if(i.constructor!==Language)throw new Error("Argument must be a Language");{l=i[0];let c=C._ts_language_version(l);if(c<MIN_COMPATIBLE_VERSION||VERSION<c)throw new Error(`Incompatible language version ${c}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else l=0,i=null;return this.language=i,C._ts_parser_set_language(this[0],l),this}getLanguage(){return this.language}parse(i,l,c){if(typeof i=="string")currentParseCallback=u((p,h,b)=>i.slice(p,b),"currentParseCallback");else{if(typeof i!="function")throw new Error("Argument must be a string or a function");currentParseCallback=i}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let d=0,m=0;if(c&&c.includedRanges){d=c.includedRanges.length,m=C._calloc(d,SIZE_OF_RANGE);let p=m;for(let h=0;h<d;h++)marshalRange(p,c.includedRanges[h]),p+=SIZE_OF_RANGE}let _=C._ts_parser_parse_wasm(this[0],this[1],l?l[0]:0,m,d);if(!_)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let f=new Tree(INTERNAL,_,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,f}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(i){C._ts_parser_set_timeout_micros(this[0],i)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(i){if(i){if(typeof i!="function")throw new Error("Logger callback must be a function")}else i=null;return this.logCallback=i,this}getLogger(){return this.logCallback}};u(n,"ParserImpl");let ParserImpl=n,e=class e{constructor(i,l,c,d){assertInternal(i),this[0]=l,this.language=c,this.textCallback=d}copy(){let i=C._ts_tree_copy(this[0]);return new e(INTERNAL,i,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(i){marshalEdit(i),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(i){if(i.constructor!==e)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],i[0]);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(l);if(l>0){let m=c;for(let _=0;_<l;_++)d[_]=unmarshalRange(m),m+=SIZE_OF_RANGE;C._free(c)}return d}};u(e,"Tree");let Tree=e,t=class t{constructor(i,l){assertInternal(i),this.tree=l}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(i){return this.id===i.id}child(i){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],i),unmarshalNode(this.tree)}namedChild(i){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],i),unmarshalNode(this.tree)}childForFieldId(i){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],i),unmarshalNode(this.tree)}childForFieldName(i){let l=this.tree.language.fields.indexOf(i);if(l!==-1)return this.childForFieldId(l)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let i=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(i),i>0){let c=l;for(let d=0;d<i;d++)this._children[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(l)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let i=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(i),i>0){let c=l;for(let d=0;d<i;d++)this._namedChildren[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(l)}}return this._namedChildren}descendantsOfType(i,l,c){Array.isArray(i)||(i=[i]),l||(l=ZERO_POINT),c||(c=ZERO_POINT);let d=[],m=this.tree.language.types;for(let b=0,g=m.length;b<g;b++)i.includes(m[b])&&d.push(b);let _=C._malloc(SIZE_OF_INT*d.length);for(let b=0,g=d.length;b<g;b++)setValue(_+b*SIZE_OF_INT,d[b],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],_,d.length,l.row,l.column,c.row,c.column);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),h=new Array(f);if(f>0){let b=p;for(let g=0;g<f;g++)h[g]=unmarshalNode(this.tree,b),b+=SIZE_OF_NODE}return C._free(p),C._free(_),h}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(i,l=i){if(typeof i!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,i,"i32"),setValue(c+SIZE_OF_INT,l,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(i,l=i){if(typeof i!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,i,"i32"),setValue(c+SIZE_OF_INT,l,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(i,l=i){if(!isPoint(i)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,i),marshalPoint(c+SIZE_OF_POINT,l),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(i,l=i){if(!isPoint(i)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,i),marshalPoint(c+SIZE_OF_POINT,l),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let i=C._ts_node_to_string_wasm(this.tree[0]),l=AsciiToString(i);return C._free(i),l}};u(t,"Node");let Node=t,o=class o{constructor(i,l){assertInternal(i),this.tree=l,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(i){marshalNode(i),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let i=C._ts_tree_cursor_start_index_wasm(this.tree[0]),l=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,i,l)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let i=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),i===1}gotoNextSibling(){marshalTreeCursor(this);let i=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),i===1}gotoParent(){marshalTreeCursor(this);let i=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),i===1}};u(o,"TreeCursor");let TreeCursor=o,s=class s{constructor(i,l){assertInternal(i),this[0]=l,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let c=0,d=this.types.length;c<d;c++)C._ts_language_symbol_type(this[0],c)<2&&(this.types[c]=UTF8ToString(C._ts_language_symbol_name(this[0],c)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let c=0,d=this.fields.length;c<d;c++){let m=C._ts_language_field_name_for_id(this[0],c);this.fields[c]=m!==0?UTF8ToString(m):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(i){let l=this.fields.indexOf(i);return l!==-1?l:null}fieldNameForId(i){return this.fields[i]||null}idForNodeType(i,l){let c=lengthBytesUTF8(i),d=C._malloc(c+1);stringToUTF8(i,d,c+1);let m=C._ts_language_symbol_for_name(this[0],d,c,l);return C._free(d),m||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(i){let l=C._ts_language_symbol_name(this[0],i);return l?UTF8ToString(l):null}nodeTypeIsNamed(i){return!!C._ts_language_type_is_named_wasm(this[0],i)}nodeTypeIsVisible(i){return!!C._ts_language_type_is_visible_wasm(this[0],i)}query(i){let l=lengthBytesUTF8(i),c=C._malloc(l+1);stringToUTF8(i,c,l+1);let d=C._ts_query_new(this[0],c,l,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!d){let S=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),I=UTF8ToString(c,getValue(TRANSFER_BUFFER,"i32")).length,M=i.substr(I,100).split(`
`)[0],w,N=M.match(QUERY_WORD_REGEX)[0];switch(S){case 2:w=new RangeError(`Bad node name '${N}'`);break;case 3:w=new RangeError(`Bad field name '${N}'`);break;case 4:w=new RangeError(`Bad capture name @${N}`);break;case 5:w=new TypeError(`Bad pattern structure at offset ${I}: '${M}'...`),N="";break;default:w=new SyntaxError(`Bad syntax at offset ${I}: '${M}'...`),N=""}throw w.index=I,w.length=N.length,C._free(c),w}let m=C._ts_query_string_count(d),_=C._ts_query_capture_count(d),f=C._ts_query_pattern_count(d),p=new Array(_),h=new Array(m);for(let S=0;S<_;S++){let I=C._ts_query_capture_name_for_id(d,S,TRANSFER_BUFFER),M=getValue(TRANSFER_BUFFER,"i32");p[S]=UTF8ToString(I,M)}for(let S=0;S<m;S++){let I=C._ts_query_string_value_for_id(d,S,TRANSFER_BUFFER),M=getValue(TRANSFER_BUFFER,"i32");h[S]=UTF8ToString(I,M)}let b=new Array(f),g=new Array(f),T=new Array(f),v=new Array(f),E=new Array(f);for(let S=0;S<f;S++){let I=C._ts_query_predicates_for_pattern(d,S,TRANSFER_BUFFER),M=getValue(TRANSFER_BUFFER,"i32");v[S]=[],E[S]=[];let w=[],N=I;for(let $e=0;$e<M;$e++){let Wr=getValue(N,"i32");N+=SIZE_OF_INT;let zr=getValue(N,"i32");if(N+=SIZE_OF_INT,Wr===PREDICATE_STEP_TYPE_CAPTURE)w.push({type:"capture",name:p[zr]});else if(Wr===PREDICATE_STEP_TYPE_STRING)w.push({type:"string",value:h[zr]});else if(w.length>0){if(w[0].type!=="string")throw new Error("Predicates must begin with a literal value");let je=w[0].value,He=!0;switch(je){case"not-eq?":He=!1;case"eq?":if(w.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(w.length-1));if(w[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${w[1].value}"`);if(w[2].type==="capture"){let ne=w[1].name,Se=w[2].name;E[S].push(function(tn){let Ee,nn;for(let _t of tn)_t.name===ne&&(Ee=_t.node),_t.name===Se&&(nn=_t.node);return Ee===void 0||nn===void 0||Ee.text===nn.text===He})}else{let ne=w[1].name,Se=w[2].value;E[S].push(function(tn){for(let Ee of tn)if(Ee.name===ne)return Ee.node.text===Se===He;return!0})}break;case"not-match?":He=!1;case"match?":if(w.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${w.length-1}.`);if(w[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${w[1].value}".`);if(w[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${w[2].value}.`);let Li=w[1].name,ki=new RegExp(w[2].value);E[S].push(function(ne){for(let Se of ne)if(Se.name===Li)return ki.test(Se.node.text)===He;return!0});break;case"set!":if(w.length<2||w.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${w.length-1}.`);if(w.some(ne=>ne.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');b[S]||(b[S]={}),b[S][w[1].value]=w[2]?w[2].value:null;break;case"is?":case"is-not?":if(w.length<2||w.length>3)throw new Error(`Wrong number of arguments to \`#${je}\` predicate. Expected 1 or 2. Got ${w.length-1}.`);if(w.some(ne=>ne.type!=="string"))throw new Error(`Arguments to \`#${je}\` predicate must be a strings.".`);let en=je==="is?"?g:T;en[S]||(en[S]={}),en[S][w[1].value]=w[2]?w[2].value:null;break;default:v[S].push({operator:je,operands:w.slice(1)})}w.length=0}}Object.freeze(b[S]),Object.freeze(g[S]),Object.freeze(T[S])}return C._free(c),new Query(INTERNAL,d,p,E,v,Object.freeze(b),Object.freeze(g),Object.freeze(T))}static load(i){let l;if(i instanceof Uint8Array)l=Promise.resolve(i);else{let d=i;if(typeof process<"u"&&process.versions&&process.versions.node){let m=require("fs");l=Promise.resolve(m.readFileSync(d))}else l=fetch(d).then(m=>m.arrayBuffer().then(_=>{if(m.ok)return new Uint8Array(_);{let f=new TextDecoder("utf-8").decode(_);throw new Error(`Language.load failed with status ${m.status}.

${f}`)}}))}let c=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return l.then(d=>c(d,{loadAsync:!0})).then(d=>{let m=Object.keys(d),_=m.find(p=>LANGUAGE_FUNCTION_REGEX.test(p)&&!p.includes("external_scanner_"));_||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(m,null,2)}`);let f=d[_]();return new s(INTERNAL,f)})}};u(s,"Language");let Language=s,a=class a{constructor(i,l,c,d,m,_,f,p){assertInternal(i),this[0]=l,this.captureNames=c,this.textPredicates=d,this.predicates=m,this.setProperties=_,this.assertedProperties=f,this.refutedProperties=p,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(i,l,c,d){l||(l=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let m=d.matchLimit;if(m===void 0)m=0;else if(typeof m!="number")throw new Error("Arguments must be numbers");marshalNode(i),C._ts_query_matches_wasm(this[0],i.tree[0],l.row,l.column,c.row,c.column,m);let _=getValue(TRANSFER_BUFFER,"i32"),f=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=new Array(_);this.exceededMatchLimit=!!p;let b=0,g=f;for(let T=0;T<_;T++){let v=getValue(g,"i32");g+=SIZE_OF_INT;let E=getValue(g,"i32");g+=SIZE_OF_INT;let S=new Array(E);if(g=unmarshalCaptures(this,i.tree,g,S),this.textPredicates[v].every(I=>I(S))){h[b++]={pattern:v,captures:S};let I=this.setProperties[v];I&&(h[T].setProperties=I);let M=this.assertedProperties[v];M&&(h[T].assertedProperties=M);let w=this.refutedProperties[v];w&&(h[T].refutedProperties=w)}}return h.length=b,C._free(f),h}captures(i,l,c,d){l||(l=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let m=d.matchLimit;if(m===void 0)m=0;else if(typeof m!="number")throw new Error("Arguments must be numbers");marshalNode(i),C._ts_query_captures_wasm(this[0],i.tree[0],l.row,l.column,c.row,c.column,m);let _=getValue(TRANSFER_BUFFER,"i32"),f=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=[];this.exceededMatchLimit=!!p;let b=[],g=f;for(let T=0;T<_;T++){let v=getValue(g,"i32");g+=SIZE_OF_INT;let E=getValue(g,"i32");g+=SIZE_OF_INT;let S=getValue(g,"i32");if(g+=SIZE_OF_INT,b.length=E,g=unmarshalCaptures(this,i.tree,g,b),this.textPredicates[v].every(I=>I(b))){let I=b[S],M=this.setProperties[v];M&&(I.setProperties=M);let w=this.assertedProperties[v];w&&(I.assertedProperties=w);let N=this.refutedProperties[v];N&&(I.refutedProperties=N),h.push(I)}}return C._free(f),h}predicatesForPattern(i){return this.predicates[i]}didExceedMatchLimit(){return this.exceededMatchLimit}};u(a,"Query");let Query=a;function getText(r,i,l){let c=l-i,d=r.textCallback(i,null,l);for(i+=d.length;i<l;){let m=r.textCallback(i,null,l);if(!(m&&m.length>0))break;i+=m.length,d+=m}return i>l&&(d=d.slice(0,c)),d}u(getText,"getText");function unmarshalCaptures(r,i,l,c){for(let d=0,m=c.length;d<m;d++){let _=getValue(l,"i32"),f=unmarshalNode(i,l+=SIZE_OF_INT);l+=SIZE_OF_NODE,c[d]={name:r.captureNames[_],node:f}}return l}u(unmarshalCaptures,"unmarshalCaptures");function assertInternal(r){if(r!==INTERNAL)throw new Error("Illegal constructor")}u(assertInternal,"assertInternal");function isPoint(r){return r&&typeof r.row=="number"&&typeof r.column=="number"}u(isPoint,"isPoint");function marshalNode(r){let i=TRANSFER_BUFFER;setValue(i,r.id,"i32"),i+=SIZE_OF_INT,setValue(i,r.startIndex,"i32"),i+=SIZE_OF_INT,setValue(i,r.startPosition.row,"i32"),i+=SIZE_OF_INT,setValue(i,r.startPosition.column,"i32"),i+=SIZE_OF_INT,setValue(i,r[0],"i32")}u(marshalNode,"marshalNode");function unmarshalNode(r,i=TRANSFER_BUFFER){let l=getValue(i,"i32");if(l===0)return null;let c=getValue(i+=SIZE_OF_INT,"i32"),d=getValue(i+=SIZE_OF_INT,"i32"),m=getValue(i+=SIZE_OF_INT,"i32"),_=getValue(i+=SIZE_OF_INT,"i32"),f=new Node(INTERNAL,r);return f.id=l,f.startIndex=c,f.startPosition={row:d,column:m},f[0]=_,f}u(unmarshalNode,"unmarshalNode");function marshalTreeCursor(r,i=TRANSFER_BUFFER){setValue(i+0*SIZE_OF_INT,r[0],"i32"),setValue(i+1*SIZE_OF_INT,r[1],"i32"),setValue(i+2*SIZE_OF_INT,r[2],"i32")}u(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(r){r[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),r[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),r[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}u(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(r,i){setValue(r,i.row,"i32"),setValue(r+SIZE_OF_INT,i.column,"i32")}u(marshalPoint,"marshalPoint");function unmarshalPoint(r){return{row:getValue(r,"i32"),column:getValue(r+SIZE_OF_INT,"i32")}}u(unmarshalPoint,"unmarshalPoint");function marshalRange(r,i){marshalPoint(r,i.startPosition),marshalPoint(r+=SIZE_OF_POINT,i.endPosition),setValue(r+=SIZE_OF_POINT,i.startIndex,"i32"),setValue(r+=SIZE_OF_INT,i.endIndex,"i32"),r+=SIZE_OF_INT}u(marshalRange,"marshalRange");function unmarshalRange(r){let i={};return i.startPosition=unmarshalPoint(r),r+=SIZE_OF_POINT,i.endPosition=unmarshalPoint(r),r+=SIZE_OF_POINT,i.startIndex=getValue(r,"i32"),r+=SIZE_OF_INT,i.endIndex=getValue(r,"i32"),i}u(unmarshalRange,"unmarshalRange");function marshalEdit(r){let i=TRANSFER_BUFFER;marshalPoint(i,r.startPosition),i+=SIZE_OF_POINT,marshalPoint(i,r.oldEndPosition),i+=SIZE_OF_POINT,marshalPoint(i,r.newEndPosition),i+=SIZE_OF_POINT,setValue(i,r.startIndex,"i32"),i+=SIZE_OF_INT,setValue(i,r.oldEndIndex,"i32"),i+=SIZE_OF_INT,setValue(i,r.newEndIndex,"i32"),i+=SIZE_OF_INT}u(marshalEdit,"marshalEdit");for(let r of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(_Parser.prototype,r,{value:ParserImpl.prototype[r],enumerable:!1,writable:!1});_Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}};u(_Parser,"Parser");let Parser=_Parser;return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Io=L(Hn=>{var xo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Hn.encode=function(n){if(0<=n&&n<xo.length)return xo[n];throw new TypeError("Must be between 0 and 63: "+n)};Hn.decode=function(n){var e=65,t=90,o=97,s=122,a=48,r=57,i=43,l=47,c=26,d=52;return e<=n&&n<=t?n-e:o<=n&&n<=s?n-o+c:a<=n&&n<=r?n-a+d:n==i?62:n==l?63:-1}});var Zn=L(Gn=>{var Mo=Io(),Vn=5,Lo=1<<Vn,ko=Lo-1,No=Lo;function As(n){return n<0?(-n<<1)+1:(n<<1)+0}u(As,"toVLQSigned");function Fs(n){var e=(n&1)===1,t=n>>1;return e?-t:t}u(Fs,"fromVLQSigned");Gn.encode=u(function(e){var t="",o,s=As(e);do o=s&ko,s>>>=Vn,s>0&&(o|=No),t+=Mo.encode(o);while(s>0);return t},"base64VLQ_encode");Gn.decode=u(function(e,t,o){var s=e.length,a=0,r=0,i,l;do{if(t>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(l=Mo.decode(e.charCodeAt(t++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(l&No),l&=ko,a=a+(l<<r),r+=Vn}while(i);o.value=Fs(a),o.rest=t},"base64VLQ_decode")});var Re=L(B=>{function Os(n,e,t){if(e in n)return n[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}u(Os,"getArg");B.getArg=Os;var Po=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Ds=/^data:.+\,.+$/;function et(n){var e=n.match(Po);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}u(et,"urlParse");B.urlParse=et;function Ne(n){var e="";return n.scheme&&(e+=n.scheme+":"),e+="//",n.auth&&(e+=n.auth+"@"),n.host&&(e+=n.host),n.port&&(e+=":"+n.port),n.path&&(e+=n.path),e}u(Ne,"urlGenerate");B.urlGenerate=Ne;function Kn(n){var e=n,t=et(n);if(t){if(!t.path)return n;e=t.path}for(var o=B.isAbsolute(e),s=e.split(/\/+/),a,r=0,i=s.length-1;i>=0;i--)a=s[i],a==="."?s.splice(i,1):a===".."?r++:r>0&&(a===""?(s.splice(i+1,r),r=0):(s.splice(i,2),r--));return e=s.join("/"),e===""&&(e=o?"/":"."),t?(t.path=e,Ne(t)):e}u(Kn,"normalize");B.normalize=Kn;function Ro(n,e){n===""&&(n="."),e===""&&(e=".");var t=et(e),o=et(n);if(o&&(n=o.path||"/"),t&&!t.scheme)return o&&(t.scheme=o.scheme),Ne(t);if(t||e.match(Ds))return e;if(o&&!o.host&&!o.path)return o.host=e,Ne(o);var s=e.charAt(0)==="/"?e:Kn(n.replace(/\/+$/,"")+"/"+e);return o?(o.path=s,Ne(o)):s}u(Ro,"join");B.join=Ro;B.isAbsolute=function(n){return n.charAt(0)==="/"||Po.test(n)};function Bs(n,e){n===""&&(n="."),n=n.replace(/\/$/,"");for(var t=0;e.indexOf(n+"/")!==0;){var o=n.lastIndexOf("/");if(o<0||(n=n.slice(0,o),n.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(n.length+1)}u(Bs,"relative");B.relative=Bs;var Co=function(){var n=Object.create(null);return!("__proto__"in n)}();function Ao(n){return n}u(Ao,"identity");function Us(n){return Fo(n)?"$"+n:n}u(Us,"toSetString");B.toSetString=Co?Ao:Us;function Ws(n){return Fo(n)?n.slice(1):n}u(Ws,"fromSetString");B.fromSetString=Co?Ao:Ws;function Fo(n){if(!n)return!1;var e=n.length;if(e<9||n.charCodeAt(e-1)!==95||n.charCodeAt(e-2)!==95||n.charCodeAt(e-3)!==111||n.charCodeAt(e-4)!==116||n.charCodeAt(e-5)!==111||n.charCodeAt(e-6)!==114||n.charCodeAt(e-7)!==112||n.charCodeAt(e-8)!==95||n.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(n.charCodeAt(t)!==36)return!1;return!0}u(Fo,"isProtoString");function zs(n,e,t){var o=Pe(n.source,e.source);return o!==0||(o=n.originalLine-e.originalLine,o!==0)||(o=n.originalColumn-e.originalColumn,o!==0||t)||(o=n.generatedColumn-e.generatedColumn,o!==0)||(o=n.generatedLine-e.generatedLine,o!==0)?o:Pe(n.name,e.name)}u(zs,"compareByOriginalPositions");B.compareByOriginalPositions=zs;function qs(n,e,t){var o=n.generatedLine-e.generatedLine;return o!==0||(o=n.generatedColumn-e.generatedColumn,o!==0||t)||(o=Pe(n.source,e.source),o!==0)||(o=n.originalLine-e.originalLine,o!==0)||(o=n.originalColumn-e.originalColumn,o!==0)?o:Pe(n.name,e.name)}u(qs,"compareByGeneratedPositionsDeflated");B.compareByGeneratedPositionsDeflated=qs;function Pe(n,e){return n===e?0:n===null?1:e===null?-1:n>e?1:-1}u(Pe,"strcmp");function $s(n,e){var t=n.generatedLine-e.generatedLine;return t!==0||(t=n.generatedColumn-e.generatedColumn,t!==0)||(t=Pe(n.source,e.source),t!==0)||(t=n.originalLine-e.originalLine,t!==0)||(t=n.originalColumn-e.originalColumn,t!==0)?t:Pe(n.name,e.name)}u($s,"compareByGeneratedPositionsInflated");B.compareByGeneratedPositionsInflated=$s;function js(n){return JSON.parse(n.replace(/^\)]}'[^\n]*\n/,""))}u(js,"parseSourceMapInput");B.parseSourceMapInput=js;function Hs(n,e,t){if(e=e||"",n&&(n[n.length-1]!=="/"&&e[0]!=="/"&&(n+="/"),e=n+e),t){var o=et(t);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var s=o.path.lastIndexOf("/");s>=0&&(o.path=o.path.substring(0,s+1))}e=Ro(Ne(o),e)}return Kn(e)}u(Hs,"computeSourceURL");B.computeSourceURL=Hs});var Xn=L(Oo=>{var Qn=Re(),Jn=Object.prototype.hasOwnProperty,fe=typeof Map<"u";function oe(){this._array=[],this._set=fe?new Map:Object.create(null)}u(oe,"ArraySet");oe.fromArray=u(function(e,t){for(var o=new oe,s=0,a=e.length;s<a;s++)o.add(e[s],t);return o},"ArraySet_fromArray");oe.prototype.size=u(function(){return fe?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");oe.prototype.add=u(function(e,t){var o=fe?e:Qn.toSetString(e),s=fe?this.has(e):Jn.call(this._set,o),a=this._array.length;(!s||t)&&this._array.push(e),s||(fe?this._set.set(e,a):this._set[o]=a)},"ArraySet_add");oe.prototype.has=u(function(e){if(fe)return this._set.has(e);var t=Qn.toSetString(e);return Jn.call(this._set,t)},"ArraySet_has");oe.prototype.indexOf=u(function(e){if(fe){var t=this._set.get(e);if(t>=0)return t}else{var o=Qn.toSetString(e);if(Jn.call(this._set,o))return this._set[o]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");oe.prototype.at=u(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");oe.prototype.toArray=u(function(){return this._array.slice()},"ArraySet_toArray");Oo.ArraySet=oe});var Uo=L(Bo=>{var Do=Re();function Vs(n,e){var t=n.generatedLine,o=e.generatedLine,s=n.generatedColumn,a=e.generatedColumn;return o>t||o==t&&a>=s||Do.compareByGeneratedPositionsInflated(n,e)<=0}u(Vs,"generatedPositionAfter");function Ct(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}u(Ct,"MappingList");Ct.prototype.unsortedForEach=u(function(e,t){this._array.forEach(e,t)},"MappingList_forEach");Ct.prototype.add=u(function(e){Vs(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");Ct.prototype.toArray=u(function(){return this._sorted||(this._array.sort(Do.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Bo.MappingList=Ct});var Yn=L(Wo=>{var tt=Zn(),A=Re(),At=Xn().ArraySet,Gs=Uo().MappingList;function j(n){n||(n={}),this._file=A.getArg(n,"file",null),this._sourceRoot=A.getArg(n,"sourceRoot",null),this._skipValidation=A.getArg(n,"skipValidation",!1),this._sources=new At,this._names=new At,this._mappings=new Gs,this._sourcesContents=null}u(j,"SourceMapGenerator");j.prototype._version=3;j.fromSourceMap=u(function(e){var t=e.sourceRoot,o=new j({file:e.file,sourceRoot:t});return e.eachMapping(function(s){var a={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(a.source=s.source,t!=null&&(a.source=A.relative(t,a.source)),a.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(a.name=s.name)),o.addMapping(a)}),e.sources.forEach(function(s){var a=s;t!==null&&(a=A.relative(t,s)),o._sources.has(a)||o._sources.add(a);var r=e.sourceContentFor(s);r!=null&&o.setSourceContent(s,r)}),o},"SourceMapGenerator_fromSourceMap");j.prototype.addMapping=u(function(e){var t=A.getArg(e,"generated"),o=A.getArg(e,"original",null),s=A.getArg(e,"source",null),a=A.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,o,s,a),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:s,name:a})},"SourceMapGenerator_addMapping");j.prototype.setSourceContent=u(function(e,t){var o=e;this._sourceRoot!=null&&(o=A.relative(this._sourceRoot,o)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[A.toSetString(o)]=t):this._sourcesContents&&(delete this._sourcesContents[A.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");j.prototype.applySourceMap=u(function(e,t,o){var s=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var a=this._sourceRoot;a!=null&&(s=A.relative(a,s));var r=new At,i=new At;this._mappings.unsortedForEach(function(l){if(l.source===s&&l.originalLine!=null){var c=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});c.source!=null&&(l.source=c.source,o!=null&&(l.source=A.join(o,l.source)),a!=null&&(l.source=A.relative(a,l.source)),l.originalLine=c.line,l.originalColumn=c.column,c.name!=null&&(l.name=c.name))}var d=l.source;d!=null&&!r.has(d)&&r.add(d);var m=l.name;m!=null&&!i.has(m)&&i.add(m)},this),this._sources=r,this._names=i,e.sources.forEach(function(l){var c=e.sourceContentFor(l);c!=null&&(o!=null&&(l=A.join(o,l)),a!=null&&(l=A.relative(a,l)),this.setSourceContent(l,c))},this)},"SourceMapGenerator_applySourceMap");j.prototype._validateMapping=u(function(e,t,o,s){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!o&&!s)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:o,original:t,name:s}))}},"SourceMapGenerator_validateMapping");j.prototype._serializeMappings=u(function(){for(var e=0,t=1,o=0,s=0,a=0,r=0,i="",l,c,d,m,_=this._mappings.toArray(),f=0,p=_.length;f<p;f++){if(c=_[f],l="",c.generatedLine!==t)for(e=0;c.generatedLine!==t;)l+=";",t++;else if(f>0){if(!A.compareByGeneratedPositionsInflated(c,_[f-1]))continue;l+=","}l+=tt.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(m=this._sources.indexOf(c.source),l+=tt.encode(m-r),r=m,l+=tt.encode(c.originalLine-1-s),s=c.originalLine-1,l+=tt.encode(c.originalColumn-o),o=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),l+=tt.encode(d-a),a=d)),i+=l}return i},"SourceMapGenerator_serializeMappings");j.prototype._generateSourcesContent=u(function(e,t){return e.map(function(o){if(!this._sourcesContents)return null;t!=null&&(o=A.relative(t,o));var s=A.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)},"SourceMapGenerator_generateSourcesContent");j.prototype.toJSON=u(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");j.prototype.toString=u(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");Wo.SourceMapGenerator=j});var zo=L(pe=>{pe.GREATEST_LOWER_BOUND=1;pe.LEAST_UPPER_BOUND=2;function er(n,e,t,o,s,a){var r=Math.floor((e-n)/2)+n,i=s(t,o[r],!0);return i===0?r:i>0?e-r>1?er(r,e,t,o,s,a):a==pe.LEAST_UPPER_BOUND?e<o.length?e:-1:r:r-n>1?er(n,r,t,o,s,a):a==pe.LEAST_UPPER_BOUND?r:n<0?-1:n}u(er,"recursiveSearch");pe.search=u(function(e,t,o,s){if(t.length===0)return-1;var a=er(-1,t.length,e,t,o,s||pe.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&o(t[a],t[a-1],!0)===0;)--a;return a},"search")});var $o=L(qo=>{function tr(n,e,t){var o=n[e];n[e]=n[t],n[t]=o}u(tr,"swap");function Zs(n,e){return Math.round(n+Math.random()*(e-n))}u(Zs,"randomIntInRange");function nr(n,e,t,o){if(t<o){var s=Zs(t,o),a=t-1;tr(n,s,o);for(var r=n[o],i=t;i<o;i++)e(n[i],r)<=0&&(a+=1,tr(n,a,i));tr(n,a+1,i);var l=a+1;nr(n,e,t,l-1),nr(n,e,l+1,o)}}u(nr,"doQuickSort");qo.quickSort=function(n,e){nr(n,e,0,n.length-1)}});var Ho=L(Ft=>{var y=Re(),rr=zo(),Ce=Xn().ArraySet,Ks=Zn(),nt=$o().quickSort;function k(n,e){var t=n;return typeof n=="string"&&(t=y.parseSourceMapInput(n)),t.sections!=null?new K(t,e):new O(t,e)}u(k,"SourceMapConsumer");k.fromSourceMap=function(n,e){return O.fromSourceMap(n,e)};k.prototype._version=3;k.prototype.__generatedMappings=null;Object.defineProperty(k.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:u(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});k.prototype.__originalMappings=null;Object.defineProperty(k.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:u(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});k.prototype._charIsMappingSeparator=u(function(e,t){var o=e.charAt(t);return o===";"||o===","},"SourceMapConsumer_charIsMappingSeparator");k.prototype._parseMappings=u(function(e,t){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");k.GENERATED_ORDER=1;k.ORIGINAL_ORDER=2;k.GREATEST_LOWER_BOUND=1;k.LEAST_UPPER_BOUND=2;k.prototype.eachMapping=u(function(e,t,o){var s=t||null,a=o||k.GENERATED_ORDER,r;switch(a){case k.GENERATED_ORDER:r=this._generatedMappings;break;case k.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;r.map(function(l){var c=l.source===null?null:this._sources.at(l.source);return c=y.computeSourceURL(i,c,this._sourceMapURL),{source:c,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,s)},"SourceMapConsumer_eachMapping");k.prototype.allGeneratedPositionsFor=u(function(e){var t=y.getArg(e,"line"),o={source:y.getArg(e,"source"),originalLine:t,originalColumn:y.getArg(e,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var s=[],a=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,rr.LEAST_UPPER_BOUND);if(a>=0){var r=this._originalMappings[a];if(e.column===void 0)for(var i=r.originalLine;r&&r.originalLine===i;)s.push({line:y.getArg(r,"generatedLine",null),column:y.getArg(r,"generatedColumn",null),lastColumn:y.getArg(r,"lastGeneratedColumn",null)}),r=this._originalMappings[++a];else for(var l=r.originalColumn;r&&r.originalLine===t&&r.originalColumn==l;)s.push({line:y.getArg(r,"generatedLine",null),column:y.getArg(r,"generatedColumn",null),lastColumn:y.getArg(r,"lastGeneratedColumn",null)}),r=this._originalMappings[++a]}return s},"SourceMapConsumer_allGeneratedPositionsFor");Ft.SourceMapConsumer=k;function O(n,e){var t=n;typeof n=="string"&&(t=y.parseSourceMapInput(n));var o=y.getArg(t,"version"),s=y.getArg(t,"sources"),a=y.getArg(t,"names",[]),r=y.getArg(t,"sourceRoot",null),i=y.getArg(t,"sourcesContent",null),l=y.getArg(t,"mappings"),c=y.getArg(t,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);r&&(r=y.normalize(r)),s=s.map(String).map(y.normalize).map(function(d){return r&&y.isAbsolute(r)&&y.isAbsolute(d)?y.relative(r,d):d}),this._names=Ce.fromArray(a.map(String),!0),this._sources=Ce.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(d){return y.computeSourceURL(r,d,e)}),this.sourceRoot=r,this.sourcesContent=i,this._mappings=l,this._sourceMapURL=e,this.file=c}u(O,"BasicSourceMapConsumer");O.prototype=Object.create(k.prototype);O.prototype.consumer=k;O.prototype._findSourceIndex=function(n){var e=n;if(this.sourceRoot!=null&&(e=y.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==n)return t;return-1};O.fromSourceMap=u(function(e,t){var o=Object.create(O.prototype),s=o._names=Ce.fromArray(e._names.toArray(),!0),a=o._sources=Ce.fromArray(e._sources.toArray(),!0);o.sourceRoot=e._sourceRoot,o.sourcesContent=e._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=e._file,o._sourceMapURL=t,o._absoluteSources=o._sources.toArray().map(function(f){return y.computeSourceURL(o.sourceRoot,f,t)});for(var r=e._mappings.toArray().slice(),i=o.__generatedMappings=[],l=o.__originalMappings=[],c=0,d=r.length;c<d;c++){var m=r[c],_=new jo;_.generatedLine=m.generatedLine,_.generatedColumn=m.generatedColumn,m.source&&(_.source=a.indexOf(m.source),_.originalLine=m.originalLine,_.originalColumn=m.originalColumn,m.name&&(_.name=s.indexOf(m.name)),l.push(_)),i.push(_)}return nt(o.__originalMappings,y.compareByOriginalPositions),o},"SourceMapConsumer_fromSourceMap");O.prototype._version=3;Object.defineProperty(O.prototype,"sources",{get:u(function(){return this._absoluteSources.slice()},"get")});function jo(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}u(jo,"Mapping");O.prototype._parseMappings=u(function(e,t){for(var o=1,s=0,a=0,r=0,i=0,l=0,c=e.length,d=0,m={},_={},f=[],p=[],h,b,g,T,v;d<c;)if(e.charAt(d)===";")o++,d++,s=0;else if(e.charAt(d)===",")d++;else{for(h=new jo,h.generatedLine=o,T=d;T<c&&!this._charIsMappingSeparator(e,T);T++);if(b=e.slice(d,T),g=m[b],g)d+=b.length;else{for(g=[];d<T;)Ks.decode(e,d,_),v=_.value,d=_.rest,g.push(v);if(g.length===2)throw new Error("Found a source, but no line and column");if(g.length===3)throw new Error("Found a source and line, but no column");m[b]=g}h.generatedColumn=s+g[0],s=h.generatedColumn,g.length>1&&(h.source=i+g[1],i+=g[1],h.originalLine=a+g[2],a=h.originalLine,h.originalLine+=1,h.originalColumn=r+g[3],r=h.originalColumn,g.length>4&&(h.name=l+g[4],l+=g[4])),p.push(h),typeof h.originalLine=="number"&&f.push(h)}nt(p,y.compareByGeneratedPositionsDeflated),this.__generatedMappings=p,nt(f,y.compareByOriginalPositions),this.__originalMappings=f},"SourceMapConsumer_parseMappings");O.prototype._findMapping=u(function(e,t,o,s,a,r){if(e[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[o]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return rr.search(e,t,a,r)},"SourceMapConsumer_findMapping");O.prototype.computeColumnSpans=u(function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var o=this._generatedMappings[e+1];if(t.generatedLine===o.generatedLine){t.lastGeneratedColumn=o.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");O.prototype.originalPositionFor=u(function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},o=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",y.compareByGeneratedPositionsDeflated,y.getArg(e,"bias",k.GREATEST_LOWER_BOUND));if(o>=0){var s=this._generatedMappings[o];if(s.generatedLine===t.generatedLine){var a=y.getArg(s,"source",null);a!==null&&(a=this._sources.at(a),a=y.computeSourceURL(this.sourceRoot,a,this._sourceMapURL));var r=y.getArg(s,"name",null);return r!==null&&(r=this._names.at(r)),{source:a,line:y.getArg(s,"originalLine",null),column:y.getArg(s,"originalColumn",null),name:r}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");O.prototype.hasContentsOfAllSources=u(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");O.prototype.sourceContentFor=u(function(e,t){if(!this.sourcesContent)return null;var o=this._findSourceIndex(e);if(o>=0)return this.sourcesContent[o];var s=e;this.sourceRoot!=null&&(s=y.relative(this.sourceRoot,s));var a;if(this.sourceRoot!=null&&(a=y.urlParse(this.sourceRoot))){var r=s.replace(/^file:\/\//,"");if(a.scheme=="file"&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!a.path||a.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(t)return null;throw new Error('"'+s+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");O.prototype.generatedPositionFor=u(function(e){var t=y.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var o={source:t,originalLine:y.getArg(e,"line"),originalColumn:y.getArg(e,"column")},s=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,y.getArg(e,"bias",k.GREATEST_LOWER_BOUND));if(s>=0){var a=this._originalMappings[s];if(a.source===o.source)return{line:y.getArg(a,"generatedLine",null),column:y.getArg(a,"generatedColumn",null),lastColumn:y.getArg(a,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");Ft.BasicSourceMapConsumer=O;function K(n,e){var t=n;typeof n=="string"&&(t=y.parseSourceMapInput(n));var o=y.getArg(t,"version"),s=y.getArg(t,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new Ce,this._names=new Ce;var a={line:-1,column:0};this._sections=s.map(function(r){if(r.url)throw new Error("Support for url field in sections not implemented.");var i=y.getArg(r,"offset"),l=y.getArg(i,"line"),c=y.getArg(i,"column");if(l<a.line||l===a.line&&c<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=i,{generatedOffset:{generatedLine:l+1,generatedColumn:c+1},consumer:new k(y.getArg(r,"map"),e)}})}u(K,"IndexedSourceMapConsumer");K.prototype=Object.create(k.prototype);K.prototype.constructor=k;K.prototype._version=3;Object.defineProperty(K.prototype,"sources",{get:u(function(){for(var n=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)n.push(this._sections[e].consumer.sources[t]);return n},"get")});K.prototype.originalPositionFor=u(function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},o=rr.search(t,this._sections,function(a,r){var i=a.generatedLine-r.generatedOffset.generatedLine;return i||a.generatedColumn-r.generatedOffset.generatedColumn}),s=this._sections[o];return s?s.consumer.originalPositionFor({line:t.generatedLine-(s.generatedOffset.generatedLine-1),column:t.generatedColumn-(s.generatedOffset.generatedLine===t.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");K.prototype.hasContentsOfAllSources=u(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");K.prototype.sourceContentFor=u(function(e,t){for(var o=0;o<this._sections.length;o++){var s=this._sections[o],a=s.consumer.sourceContentFor(e,!0);if(a)return a}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");K.prototype.generatedPositionFor=u(function(e){for(var t=0;t<this._sections.length;t++){var o=this._sections[t];if(o.consumer._findSourceIndex(y.getArg(e,"source"))!==-1){var s=o.consumer.generatedPositionFor(e);if(s){var a={line:s.line+(o.generatedOffset.generatedLine-1),column:s.column+(o.generatedOffset.generatedLine===s.line?o.generatedOffset.generatedColumn-1:0)};return a}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");K.prototype._parseMappings=u(function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var s=this._sections[o],a=s.consumer._generatedMappings,r=0;r<a.length;r++){var i=a[r],l=s.consumer._sources.at(i.source);l=y.computeSourceURL(s.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var c=null;i.name&&(c=s.consumer._names.at(i.name),this._names.add(c),c=this._names.indexOf(c));var d={source:l,generatedLine:i.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:i.generatedColumn+(s.generatedOffset.generatedLine===i.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:i.originalLine,originalColumn:i.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}nt(this.__generatedMappings,y.compareByGeneratedPositionsDeflated),nt(this.__originalMappings,y.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");Ft.IndexedSourceMapConsumer=K});var Go=L(Vo=>{var Qs=Yn().SourceMapGenerator,Ot=Re(),Js=/(\r?\n)/,Xs=10,Ae="$$$isSourceNode$$$";function $(n,e,t,o,s){this.children=[],this.sourceContents={},this.line=n==null?null:n,this.column=e==null?null:e,this.source=t==null?null:t,this.name=s==null?null:s,this[Ae]=!0,o!=null&&this.add(o)}u($,"SourceNode");$.fromStringWithSourceMap=u(function(e,t,o){var s=new $,a=e.split(Js),r=0,i=u(function(){var _=p(),f=p()||"";return _+f;function p(){return r<a.length?a[r++]:void 0}},"shiftNextLine"),l=1,c=0,d=null;return t.eachMapping(function(_){if(d!==null)if(l<_.generatedLine)m(d,i()),l++,c=0;else{var f=a[r]||"",p=f.substr(0,_.generatedColumn-c);a[r]=f.substr(_.generatedColumn-c),c=_.generatedColumn,m(d,p),d=_;return}for(;l<_.generatedLine;)s.add(i()),l++;if(c<_.generatedColumn){var f=a[r]||"";s.add(f.substr(0,_.generatedColumn)),a[r]=f.substr(_.generatedColumn),c=_.generatedColumn}d=_},this),r<a.length&&(d&&m(d,i()),s.add(a.splice(r).join(""))),t.sources.forEach(function(_){var f=t.sourceContentFor(_);f!=null&&(o!=null&&(_=Ot.join(o,_)),s.setSourceContent(_,f))}),s;function m(_,f){if(_===null||_.source===void 0)s.add(f);else{var p=o?Ot.join(o,_.source):_.source;s.add(new $(_.originalLine,_.originalColumn,p,f,_.name))}}u(m,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");$.prototype.add=u(function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[Ae]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");$.prototype.prepend=u(function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[Ae]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");$.prototype.walk=u(function(e){for(var t,o=0,s=this.children.length;o<s;o++)t=this.children[o],t[Ae]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");$.prototype.join=u(function(e){var t,o,s=this.children.length;if(s>0){for(t=[],o=0;o<s-1;o++)t.push(this.children[o]),t.push(e);t.push(this.children[o]),this.children=t}return this},"SourceNode_join");$.prototype.replaceRight=u(function(e,t){var o=this.children[this.children.length-1];return o[Ae]?o.replaceRight(e,t):typeof o=="string"?this.children[this.children.length-1]=o.replace(e,t):this.children.push("".replace(e,t)),this},"SourceNode_replaceRight");$.prototype.setSourceContent=u(function(e,t){this.sourceContents[Ot.toSetString(e)]=t},"SourceNode_setSourceContent");$.prototype.walkSourceContents=u(function(e){for(var t=0,o=this.children.length;t<o;t++)this.children[t][Ae]&&this.children[t].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),t=0,o=s.length;t<o;t++)e(Ot.fromSetString(s[t]),this.sourceContents[s[t]])},"SourceNode_walkSourceContents");$.prototype.toString=u(function(){var e="";return this.walk(function(t){e+=t}),e},"SourceNode_toString");$.prototype.toStringWithSourceMap=u(function(e){var t={code:"",line:1,column:0},o=new Qs(e),s=!1,a=null,r=null,i=null,l=null;return this.walk(function(c,d){t.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((a!==d.source||r!==d.line||i!==d.column||l!==d.name)&&o.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name}),a=d.source,r=d.line,i=d.column,l=d.name,s=!0):s&&(o.addMapping({generated:{line:t.line,column:t.column}}),a=null,s=!1);for(var m=0,_=c.length;m<_;m++)c.charCodeAt(m)===Xs?(t.line++,t.column=0,m+1===_?(a=null,s=!1):s&&o.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name})):t.column++}),this.walkSourceContents(function(c,d){o.setSourceContent(c,d)}),{code:t.code,map:o}},"SourceNode_toStringWithSourceMap");Vo.SourceNode=$});var Zo=L(Dt=>{Dt.SourceMapGenerator=Yn().SourceMapGenerator;Dt.SourceMapConsumer=Ho().SourceMapConsumer;Dt.SourceNode=Go().SourceNode});var Qo=L((Lm,Ko)=>{var Ys=Object.prototype.toString,or=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function ea(n){return Ys.call(n).slice(8,-1)==="ArrayBuffer"}u(ea,"isArrayBuffer");function ta(n,e,t){e>>>=0;var o=n.byteLength-e;if(o<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=o;else if(t>>>=0,t>o)throw new RangeError("'length' is out of bounds");return or?Buffer.from(n.slice(e,e+t)):new Buffer(new Uint8Array(n.slice(e,e+t)))}u(ta,"fromArrayBuffer");function na(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return or?Buffer.from(n,e):new Buffer(n,e)}u(na,"fromString");function ra(n,e,t){if(typeof n=="number")throw new TypeError('"value" argument must not be a number');return ea(n)?ta(n,e,t):typeof n=="string"?na(n,e):or?Buffer.from(n):new Buffer(n)}u(ra,"bufferFrom");Ko.exports=ra});var oi=L((ge,lr)=>{var oa=Zo().SourceMapConsumer,ir=require("path"),ee;try{ee=require("fs"),(!ee.existsSync||!ee.readFileSync)&&(ee=null)}catch{}var ia=Qo();function Jo(n,e){return n.require(e)}u(Jo,"dynamicRequire");var Xo=!1,Yo=!1,sr=!1,rt="auto",he={},ot={},sa=/^data:application\/json[^,]+base64,/,le=[],ue=[];function ur(){return rt==="browser"?!0:rt==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}u(ur,"isInBrowser");function aa(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}u(aa,"hasGlobalProcessEventEmitter");function la(){return typeof process=="object"&&process!==null?process.version:""}u(la,"globalProcessVersion");function ua(){if(typeof process=="object"&&process!==null)return process.stderr}u(ua,"globalProcessStderr");function ca(n){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(n)}u(ca,"globalProcessExit");function Bt(n){return function(e){for(var t=0;t<n.length;t++){var o=n[t](e);if(o)return o}return null}}u(Bt,"handlerExec");var cr=Bt(le);le.push(function(n){if(n=n.trim(),/^file:/.test(n)&&(n=n.replace(/file:\/\/\/(\w:)?/,function(o,s){return s?"":"/"})),n in he)return he[n];var e="";try{if(ee)ee.existsSync(n)&&(e=ee.readFileSync(n,"utf8"));else{var t=new XMLHttpRequest;t.open("GET",n,!1),t.send(null),t.readyState===4&&t.status===200&&(e=t.responseText)}}catch{}return he[n]=e});function ar(n,e){if(!n)return e;var t=ir.dirname(n),o=/^\w+:\/\/[^\/]*/.exec(t),s=o?o[0]:"",a=t.slice(s.length);return s&&/^\/\w\:/.test(a)?(s+="/",s+ir.resolve(t.slice(s.length),e).replace(/\\/g,"/")):s+ir.resolve(t.slice(s.length),e)}u(ar,"supportRelativeURL");function da(n){var e;if(ur())try{var t=new XMLHttpRequest;t.open("GET",n,!1),t.send(null),e=t.readyState===4?t.responseText:null;var o=t.getResponseHeader("SourceMap")||t.getResponseHeader("X-SourceMap");if(o)return o}catch{}e=cr(n);for(var s=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,a,r;r=s.exec(e);)a=r;return a?a[1]:null}u(da,"retrieveSourceMapURL");var dr=Bt(ue);ue.push(function(n){var e=da(n);if(!e)return null;var t;if(sa.test(e)){var o=e.slice(e.indexOf(",")+1);t=ia(o,"base64").toString(),e=n}else e=ar(n,e),t=cr(e);return t?{url:e,map:t}:null});function mr(n){var e=ot[n.source];if(!e){var t=dr(n.source);t?(e=ot[n.source]={url:t.url,map:new oa(t.map)},e.map.sourcesContent&&e.map.sources.forEach(function(s,a){var r=e.map.sourcesContent[a];if(r){var i=ar(e.url,s);he[i]=r}})):e=ot[n.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var o=e.map.originalPositionFor(n);if(o.source!==null)return o.source=ar(e.url,o.source),o}return n}u(mr,"mapSourcePosition");function ti(n){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(n);if(e){var t=mr({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+t.source+":"+t.line+":"+(t.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(n),e?"eval at "+e[1]+" ("+ti(e[2])+")":n}u(ti,"mapEvalOrigin");function ma(){var n,e="";if(this.isNative())e="native";else{n=this.getScriptNameOrSourceURL(),!n&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),n?e+=n:e+="<anonymous>";var t=this.getLineNumber();if(t!=null){e+=":"+t;var o=this.getColumnNumber();o&&(e+=":"+o)}}var s="",a=this.getFunctionName(),r=!0,i=this.isConstructor(),l=!(this.isToplevel()||i);if(l){var c=this.getTypeName();c==="[object Object]"&&(c="null");var d=this.getMethodName();a?(c&&a.indexOf(c)!=0&&(s+=c+"."),s+=a,d&&a.indexOf("."+d)!=a.length-d.length-1&&(s+=" [as "+d+"]")):s+=c+"."+(d||"<anonymous>")}else i?s+="new "+(a||"<anonymous>"):a?s+=a:(s+=e,r=!1);return r&&(s+=" ("+e+")"),s}u(ma,"CallSiteToString");function ei(n){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(function(t){e[t]=/^(?:is|get)/.test(t)?function(){return n[t].call(n)}:n[t]}),e.toString=ma,e}u(ei,"cloneCallSite");function ni(n,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),n.isNative())return e.curPosition=null,n;var t=n.getFileName()||n.getScriptNameOrSourceURL();if(t){var o=n.getLineNumber(),s=n.getColumnNumber()-1,a=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,r=a.test(la())?0:62;o===1&&s>r&&!ur()&&!n.isEval()&&(s-=r);var i=mr({source:t,line:o,column:s});e.curPosition=i,n=ei(n);var l=n.getFunctionName;return n.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},n.getFileName=function(){return i.source},n.getLineNumber=function(){return i.line},n.getColumnNumber=function(){return i.column+1},n.getScriptNameOrSourceURL=function(){return i.source},n}var c=n.isEval()&&n.getEvalOrigin();return c&&(c=ti(c),n=ei(n),n.getEvalOrigin=function(){return c}),n}u(ni,"wrapCallSite");function _a(n,e){sr&&(he={},ot={});for(var t=n.name||"Error",o=n.message||"",s=t+": "+o,a={nextPosition:null,curPosition:null},r=[],i=e.length-1;i>=0;i--)r.push(`
    at `+ni(e[i],a)),a.nextPosition=a.curPosition;return a.curPosition=a.nextPosition=null,s+r.reverse().join("")}u(_a,"prepareStackTrace");function ri(n){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(n.stack);if(e){var t=e[1],o=+e[2],s=+e[3],a=he[t];if(!a&&ee&&ee.existsSync(t))try{a=ee.readFileSync(t,"utf8")}catch{a=""}if(a){var r=a.split(/(?:\r\n|\r|\n)/)[o-1];if(r)return t+":"+o+`
`+r+`
`+new Array(s).join(" ")+"^"}}return null}u(ri,"getErrorSource");function fa(n){var e=ri(n),t=ua();t&&t._handle&&t._handle.setBlocking&&t._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(n.stack),ca(1)}u(fa,"printErrorAndExit");function pa(){var n=process.emit;process.emit=function(e){if(e==="uncaughtException"){var t=arguments[1]&&arguments[1].stack,o=this.listeners(e).length>0;if(t&&!o)return fa(arguments[1])}return n.apply(this,arguments)}}u(pa,"shimEmitUncaughtException");var ha=le.slice(0),ga=ue.slice(0);ge.wrapCallSite=ni;ge.getErrorSource=ri;ge.mapSourcePosition=mr;ge.retrieveSourceMap=dr;ge.install=function(n){if(n=n||{},n.environment&&(rt=n.environment,["node","browser","auto"].indexOf(rt)===-1))throw new Error("environment "+rt+" was unknown. Available options are {auto, browser, node}");if(n.retrieveFile&&(n.overrideRetrieveFile&&(le.length=0),le.unshift(n.retrieveFile)),n.retrieveSourceMap&&(n.overrideRetrieveSourceMap&&(ue.length=0),ue.unshift(n.retrieveSourceMap)),n.hookRequire&&!ur()){var e=Jo(lr,"module"),t=e.prototype._compile;t.__sourceMapSupport||(e.prototype._compile=function(a,r){return he[r]=a,ot[r]=void 0,t.call(this,a,r)},e.prototype._compile.__sourceMapSupport=!0)}if(sr||(sr="emptyCacheBetweenOperations"in n?n.emptyCacheBetweenOperations:!1),Xo||(Xo=!0,Error.prepareStackTrace=_a),!Yo){var o="handleUncaughtExceptions"in n?n.handleUncaughtExceptions:!0;try{var s=Jo(lr,"worker_threads");s.isMainThread===!1&&(o=!1)}catch{}o&&aa()&&(Yo=!0,pa())}};ge.resetRetrieveHandlers=function(){le.length=0,ue.length=0,le=ha.slice(0),ue=ga.slice(0),dr=Bt(ue),cr=Bt(le)}});var ii=L(()=>{oi().install()});var pi=L((uf,fi)=>{var kr=require("fs"),Gt=require("path"),mt=Gt.join,Ia=Gt.dirname,mi=kr.accessSync&&function(n){try{kr.accessSync(n)}catch{return!1}return!0}||kr.existsSync||Gt.existsSync,_i={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function Ma(n){typeof n=="string"?n={bindings:n}:n||(n={}),Object.keys(_i).map(function(l){l in n||(n[l]=_i[l])}),n.module_root||(n.module_root=La(__filename)),Gt.extname(n.bindings)!=".node"&&(n.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,t=[],o=0,s=n.try.length,a,r,i;o<s;o++){a=mt.apply(null,n.try[o].map(function(l){return n[l]||l})),t.push(a);try{return r=n.path?e.resolve(a):e(a),n.path||(r.path=a),r}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw i=new Error(`Could not locate the bindings file. Tried:
`+t.map(function(l){return n.arrow+l}).join(`
`)),i.tries=t,i}u(Ma,"bindings");fi.exports=Ma;function La(n){for(var e=Ia(n),t;;){if(e==="."&&(e=process.cwd()),mi(mt(e,"dist")))return mt(e,"dist");if(mi(mt(e,"compiled")))return e;if(t===e)throw new Error('Could not find module root given file: "'+n+'". Do you have a `dist` or `compiled` directory? ');t=e,e=mt(e,"..")}}u(La,"getRoot")});var gi=L((df,hi)=>{hi.exports=pi()("node_sqlite3.node")});var wi=L(yi=>{var ka=require("util");function Na(n,e,t){let o=n[e];n[e]=function(){let s=new Error,a=n.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(i){return ka.inspect(i,!1,0)}).join(", ")+")";typeof t>"u"&&(t=-1),t<0&&(t+=arguments.length);let r=arguments[t];return typeof arguments[t]=="function"&&(arguments[t]=u(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=bi(l).join(`
`),l.stack+=`
--> in `+a,l.stack+=`
`+bi(s).slice(1).join(`
`),l.__augmented=!0),r.apply(this,arguments)},"replacement")),o.apply(this,arguments)}}u(Na,"extendTrace");yi.extendTrace=Na;function bi(n){return n.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}u(bi,"filter")});var Ti=L((Si,Ei)=>{var Pa=require("path"),G=gi(),Ue=require("events").EventEmitter;Ei.exports=Si=G;function We(n){return function(e){let t,o=Array.prototype.slice.call(arguments,1);if(typeof o[o.length-1]=="function"){let a=o[o.length-1];t=u(function(r){r&&a(r)},"errBack")}let s=new Zt(this,e,t);return n.call(this,s,o)}}u(We,"normalizeMethod");function Pr(n,e){for(let t in e.prototype)n.prototype[t]=e.prototype[t]}u(Pr,"inherits");G.cached={Database:u(function(n,e,t){if(n===""||n===":memory:")return new W(n,e,t);let o;if(n=Pa.resolve(n),!G.cached.objects[n])o=G.cached.objects[n]=new W(n,e,t);else{o=G.cached.objects[n];let a=typeof e=="number"?t:e;if(typeof a=="function"){let r=function(){a.call(o,null)};var s=r;u(r,"cb"),o.open?process.nextTick(r):o.once("open",r)}}return o},"Database"),objects:{}};var W=G.Database,Zt=G.Statement,Nr=G.Backup;Pr(W,Ue);Pr(Zt,Ue);Pr(Nr,Ue);W.prototype.prepare=We(function(n,e){return e.length?n.bind.apply(n,e):n});W.prototype.run=We(function(n,e){return n.run.apply(n,e).finalize(),this});W.prototype.get=We(function(n,e){return n.get.apply(n,e).finalize(),this});W.prototype.all=We(function(n,e){return n.all.apply(n,e).finalize(),this});W.prototype.each=We(function(n,e){return n.each.apply(n,e).finalize(),this});W.prototype.map=We(function(n,e){return n.map.apply(n,e).finalize(),this});W.prototype.backup=function(){let n;return arguments.length<=2?n=new Nr(this,arguments[0],"main","main",!0,arguments[1]):n=new Nr(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),n.retryErrors=[G.BUSY,G.LOCKED],n};Zt.prototype.map=function(){let n=Array.prototype.slice.call(arguments),e=n.pop();return n.push(function(t,o){if(t)return e(t);let s={};if(o.length){let a=Object.keys(o[0]),r=a[0];if(a.length>2)for(let i=0;i<o.length;i++)s[o[i][r]]=o[i];else{let i=a[1];for(let l=0;l<o.length;l++)s[o[l][r]]=o[l][i]}}e(t,s)}),this.all.apply(this,n)};var vi=!1,Rr=["trace","profile","change"];W.prototype.addListener=W.prototype.on=function(n){let e=Ue.prototype.addListener.apply(this,arguments);return Rr.indexOf(n)>=0&&this.configure(n,!0),e};W.prototype.removeListener=function(n){let e=Ue.prototype.removeListener.apply(this,arguments);return Rr.indexOf(n)>=0&&!this._events[n]&&this.configure(n,!1),e};W.prototype.removeAllListeners=function(n){let e=Ue.prototype.removeAllListeners.apply(this,arguments);return Rr.indexOf(n)>=0&&this.configure(n,!1),e};G.verbose=function(){if(!vi){let n=wi();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){n.extendTrace(W.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){n.extendTrace(Zt.prototype,e)}),vi=!0}return G}});var on=class on{constructor(){this.items=[]}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};u(on,"Stack");var ft=on;function sn(n,e,t){return{type:"virtual",indentation:n,subs:e,label:t}}u(sn,"virtualNode");function an(n){return{type:"top",indentation:-1,subs:n!=null?n:[]}}u(an,"topNode");function z(n){return n.type==="blank"}u(z,"isBlank");function Te(n){return n.type==="line"}u(Te,"isLine");function me(n){return n.type==="virtual"}u(me,"isVirtual");function qr(n,e){return J(n,t=>{t.label=t.label?e(t.label)?void 0:t.label:void 0},"bottomUp"),n}u(qr,"clearLabelsIf");function J(n,e,t){function o(s){t==="topDown"&&e(s),s.subs.forEach(a=>{o(a)}),t==="bottomUp"&&e(s)}u(o,"_visit"),o(n)}u(J,"visitTree");function pt(n,e,t){let o=u(a=>{if(t!==void 0&&t(a))return a;{let r=a.subs.map(o).filter(i=>i!==void 0);return a.subs=r,e(a)}},"rebuild"),s=o(n);return s!==void 0?s:an()}u(pt,"rebuildTree");function ht(n,e){function t(o){if(Te(o)){let s=e.find(a=>a.matches(o.sourceLine));s&&(o.label=s.label)}}u(t,"visitor"),J(n,t,"bottomUp")}u(ht,"labelLines");function gt(n){function e(t){if(me(t)&&t.label===void 0){let o=t.subs.filter(s=>!z(s));o.length===1&&(t.label=o[0].label)}}u(e,"visitor"),J(n,e,"bottomUp")}u(gt,"labelVirtualInherited");function Ve(n){return Object.keys(n).map(e=>{let t;return n[e].test?t=u(o=>n[e].test(o),"matches"):t=n[e],{matches:t,label:e}})}u(Ve,"buildLabelRules");function $r(n){let t=pt(n,u(function(o){if(o.subs.length===0||o.subs.findIndex(r=>r.label==="closer"||r.label==="opener")===-1)return o;let s=[],a;for(let r=0;r<o.subs.length;r++){let i=o.subs[r],l=o.subs[r-1];if(i.label==="opener"&&l!==void 0&&Te(l))l.subs.push(i),i.subs.forEach(c=>l.subs.push(c)),i.subs=[];else if(i.label==="closer"&&a!==void 0&&(Te(i)||me(i))&&i.indentation>=a.indentation){let c=s.length-1;for(;c>0&&z(s[c]);)c-=1;if(a.subs.push(...s.splice(c+1)),i.subs.length>0){let d=a.subs.findIndex(p=>p.label!=="newVirtual"),m=a.subs.slice(0,d),_=a.subs.slice(d),f=_.length>0?[sn(i.indentation,_,"newVirtual")]:[];a.subs=[...m,...f,i]}else a.subs.push(i)}else s.push(i),z(i)||(a=i)}return o.subs=s,o},"rebuilder"));return qr(n,o=>o==="newVirtual"),t}u($r,"combineClosersAndOpeners");function jr(n,e=z,t){return pt(n,u(function(s){if(s.subs.length<=1)return s;let a=[],r=[],i,l=!1;function c(d=!1){if(i!==void 0&&(a.length>0||!d)){let m=sn(i,r,t);a.push(m)}else r.forEach(m=>a.push(m))}u(c,"flushBlockIntoNewSubs");for(let d=0;d<s.subs.length;d++){let m=s.subs[d],_=e(m);!_&&l&&(c(),r=[]),l=_,r.push(m),z(m)||(i=i!=null?i:m.indentation)}return c(!0),s.subs=a,s},"rebuilder"))}u(jr,"groupBlocks");function xe(n){return pt(n,u(function(t){return me(t)&&t.label===void 0&&t.subs.length<=1?t.subs.length===0?void 0:t.subs[0]:(t.subs.length===1&&me(t.subs[0])&&t.subs[0].label===void 0&&(t.subs=t.subs[0].subs),t)},"rebuilder"))}u(xe,"flattenVirtual");var Di={opener:/^[[({]/,closer:/^[\])}]/},tl=Ve(Di),Bi={};function ln(n,e){Bi[n]=e}u(ln,"registerLanguageSpecificParser");var Ui={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},Wi=Ve(Ui);function Hr(n){let e=n;return ht(e,Wi),e=$r(e),e=xe(e),gt(e),J(e,t=>{if(t.label==="class"||t.label==="interface")for(let o of t.subs)!z(o)&&(o.label===void 0||o.label==="annotation")&&(o.label="member")},"bottomUp"),e}u(Hr,"processJava");var zi={heading:/^# /,subheading:/^## /,subsubheading:/### /},qi=Ve(zi);function Vr(n){let e=n;if(ht(e,qi),z(e))return e;function t(a){if(a.label==="heading")return 1;if(a.label==="subheading")return 2;if(a.label==="subsubheading")return 3}u(t,"headingLevel");let o=[e],s=[...e.subs];e.subs=[];for(let a of s){let r=t(a);if(r===void 0||z(a))o[o.length-1].subs.push(a);else{for(;o.length<r;)o.push(o[o.length-1]);for(o[r-1].subs.push(a),o[r]=a;o.length>r+1;)o.pop()}}return e=jr(e),e=xe(e),gt(e),e}u(Vr,"processMarkdown");ln("markdown",Vr);ln("java",Hr);var un=class un extends Error{constructor(t,o){super(t);this.cause=o;this.code="CopilotPromptLoadFailure"}};u(un,"CopilotPromptLoadFailure");var ie=un;var Ie=de(lo()),co=require("fs"),mo=require("path");var uo=new Map;function Ke(n="cl100k_base"){let e=uo.get(n);return e!==void 0||(n==="mock"?e=new In:e=new xn(n),uo.set(n,e)),e}u(Ke,"getTokenizer");function ls(n){if(!n.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=(0,co.readFileSync)(n,"utf-8"),t=new Map;for(let o of e.split(`
`)){if(!o)continue;let s=Buffer.from(o,"base64");t.set(s,t.size)}return t}u(ls,"parseTikTokenNoIndex");var Mn=class Mn{constructor(e){try{this._tokenizer=(0,Ie.createTokenizer)(ls((0,mo.join)(__dirname,`./resources/${e}.tiktoken.noindex`)),(0,Ie.getSpecialTokensByEncoder)(e),(0,Ie.getRegexByEncoder)(e),32768)}catch(t){throw t instanceof Error?new ie("Could not load tokenizer",t):t}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(o=>this.detokenize([o]))}takeLastTokens(e,t){if(t<=0)return"";let o=4,s=1,a=Math.min(e.length,t*o),r=e.slice(-a),i=this.tokenize(r);for(;i.length<t+2&&a<e.length;)a=Math.min(e.length,a+t*s),r=e.slice(-a),i=this.tokenize(r);return i.length<t?e:(i=i.slice(-t),this.detokenize(i))}takeFirstTokens(e,t){if(t<=0)return{text:"",tokens:[]};let o=4,s=1,a=Math.min(e.length,t*o),r=e.slice(0,a),i=this.tokenize(r);for(;i.length<t+2&&a<e.length;)a=Math.min(e.length,a+t*s),r=e.slice(0,a),i=this.tokenize(r);return i.length<t?{text:e,tokens:i}:(i=i.slice(0,t),{text:this.detokenize(i),tokens:i})}takeLastLinesTokens(e,t){let o=this.takeLastTokens(e,t);if(o.length===e.length||e[e.length-o.length-1]===`
`)return o;let s=o.indexOf(`
`);return o.substring(s+1)}};u(Mn,"TTokenizer");var xn=Mn,Ln=class Ln{constructor(){this.hash=u(e=>{let t=0;for(let o=0;o<e.length;o++){let s=e.charCodeAt(o);t=(t<<5)-t+s,t&=t&65535}return t},"hash")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(t=>t.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,t){return this.tokenizeStrings(e).slice(-t).join("")}takeFirstTokens(e,t){let o=this.tokenizeStrings(e).slice(0,t);return{text:o.join(""),tokens:o.map(this.hash)}}takeLastLinesTokens(e,t){let o=this.takeLastTokens(e,t);if(o.length===e.length||e[e.length-o.length-1]===`
`)return o;let s=o.indexOf(`
`);return o.substring(s+1)}};u(Ln,"MockTokenizer");var In=Ln;function Z(){}u(Z,"Diff");Z.prototype={diff:u(function(e,t){var o,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.callback;typeof s=="function"&&(a=s,s={});var r=this;function i(E){return E=r.postProcess(E,s),a?(setTimeout(function(){a(E)},0),!0):E}u(i,"done"),e=this.castInput(e,s),t=this.castInput(t,s),e=this.removeEmpty(this.tokenize(e,s)),t=this.removeEmpty(this.tokenize(t,s));var l=t.length,c=e.length,d=1,m=l+c;s.maxEditLength!=null&&(m=Math.min(m,s.maxEditLength));var _=(o=s.timeout)!==null&&o!==void 0?o:1/0,f=Date.now()+_,p=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(p[0],t,e,0,s);if(p[0].oldPos+1>=c&&h+1>=l)return i(_o(r,p[0].lastComponent,t,e,r.useLongestToken));var b=-1/0,g=1/0;function T(){for(var E=Math.max(b,-d);E<=Math.min(g,d);E+=2){var S=void 0,I=p[E-1],M=p[E+1];I&&(p[E-1]=void 0);var w=!1;if(M){var N=M.oldPos-E;w=M&&0<=N&&N<l}var $e=I&&I.oldPos+1<c;if(!w&&!$e){p[E]=void 0;continue}if(!$e||w&&I.oldPos<M.oldPos?S=r.addToPath(M,!0,!1,0,s):S=r.addToPath(I,!1,!0,1,s),h=r.extractCommon(S,t,e,E,s),S.oldPos+1>=c&&h+1>=l)return i(_o(r,S.lastComponent,t,e,r.useLongestToken));p[E]=S,S.oldPos+1>=c&&(g=Math.min(g,E-1)),h+1>=l&&(b=Math.max(b,E+1))}d++}if(u(T,"execEditLength"),a)u(function E(){setTimeout(function(){if(d>m||Date.now()>f)return a();T()||E()},0)},"exec")();else for(;d<=m&&Date.now()<=f;){var v=T();if(v)return v}},"diff"),addToPath:u(function(e,t,o,s,a){var r=e.lastComponent;return r&&!a.oneChangePerToken&&r.added===t&&r.removed===o?{oldPos:e.oldPos+s,lastComponent:{count:r.count+1,added:t,removed:o,previousComponent:r.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:t,removed:o,previousComponent:r}}},"addToPath"),extractCommon:u(function(e,t,o,s,a){for(var r=t.length,i=o.length,l=e.oldPos,c=l-s,d=0;c+1<r&&l+1<i&&this.equals(o[l+1],t[c+1],a);)c++,l++,d++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!a.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,c},"extractCommon"),equals:u(function(e,t,o){return o.comparator?o.comparator(e,t):e===t||o.ignoreCase&&e.toLowerCase()===t.toLowerCase()},"equals"),removeEmpty:u(function(e){for(var t=[],o=0;o<e.length;o++)e[o]&&t.push(e[o]);return t},"removeEmpty"),castInput:u(function(e){return e},"castInput"),tokenize:u(function(e){return Array.from(e)},"tokenize"),join:u(function(e){return e.join("")},"join"),postProcess:u(function(e){return e},"postProcess")};function _o(n,e,t,o,s){for(var a=[],r;e;)a.push(e),r=e.previousComponent,delete e.previousComponent,e=r;a.reverse();for(var i=0,l=a.length,c=0,d=0;i<l;i++){var m=a[i];if(m.removed)m.value=n.join(o.slice(d,d+m.count)),d+=m.count;else{if(!m.added&&s){var _=t.slice(c,c+m.count);_=_.map(function(f,p){var h=o[d+p];return h.length>f.length?h:f}),m.value=n.join(_)}else m.value=n.join(t.slice(c,c+m.count));c+=m.count,m.added||(d+=m.count)}}return a}u(_o,"buildValues");var Su=new Z;function fo(n,e){var t;for(t=0;t<n.length&&t<e.length;t++)if(n[t]!=e[t])return n.slice(0,t);return n.slice(0,t)}u(fo,"longestCommonPrefix");function po(n,e){var t;if(!n||!e||n[n.length-1]!=e[e.length-1])return"";for(t=0;t<n.length&&t<e.length;t++)if(n[n.length-(t+1)]!=e[e.length-(t+1)])return n.slice(-t);return n.slice(-t)}u(po,"longestCommonSuffix");function kn(n,e,t){if(n.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+n.slice(e.length)}u(kn,"replacePrefix");function Nn(n,e,t){if(!e)return n+t;if(n.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return n.slice(0,-e.length)+t}u(Nn,"replaceSuffix");function Qe(n,e){return kn(n,e,"")}u(Qe,"removePrefix");function Tt(n,e){return Nn(n,e,"")}u(Tt,"removeSuffix");function ho(n,e){return e.slice(0,us(n,e))}u(ho,"maximumOverlap");function us(n,e){var t=0;n.length>e.length&&(t=n.length-e.length);var o=e.length;n.length<e.length&&(o=n.length);var s=Array(o),a=0;s[0]=0;for(var r=1;r<o;r++){for(e[r]==e[a]?s[r]=s[a]:s[r]=a;a>0&&e[r]!=e[a];)a=s[a];e[r]==e[a]&&a++}a=0;for(var i=t;i<n.length;i++){for(;a>0&&n[i]!=e[a];)a=s[a];n[i]==e[a]&&a++}return a}u(us,"overlapCount");var xt="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",cs=new RegExp("[".concat(xt,"]+|\\s+|[^").concat(xt,"]"),"ug"),It=new Z;It.equals=function(n,e,t){return t.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n.trim()===e.trim()};It.tokenize=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(n),function(a){return a.segment})}else t=n.match(cs)||[];var o=[],s=null;return t.forEach(function(a){/\s/.test(a)?s==null?o.push(a):o.push(o.pop()+a):/\s/.test(s)?o[o.length-1]==s?o.push(o.pop()+a):o.push(s+a):o.push(a),s=a}),o};It.join=function(n){return n.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};It.postProcess=function(n,e){if(!n||e.oneChangePerToken)return n;var t=null,o=null,s=null;return n.forEach(function(a){a.added?o=a:a.removed?s=a:((o||s)&&go(t,s,o,a),t=a,o=null,s=null)}),(o||s)&&go(t,s,o,null),n};function go(n,e,t,o){if(e&&t){var s=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],r=t.value.match(/^\s*/)[0],i=t.value.match(/\s*$/)[0];if(n){var l=fo(s,r);n.value=Nn(n.value,r,l),e.value=Qe(e.value,l),t.value=Qe(t.value,l)}if(o){var c=po(a,i);o.value=kn(o.value,i,c),e.value=Tt(e.value,c),t.value=Tt(t.value,c)}}else if(t)n&&(t.value=t.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(n&&o){var d=o.value.match(/^\s*/)[0],m=e.value.match(/^\s*/)[0],_=e.value.match(/\s*$/)[0],f=fo(d,m);e.value=Qe(e.value,f);var p=po(Qe(d,f),_);e.value=Tt(e.value,p),o.value=kn(o.value,d,p),n.value=Nn(n.value,d,d.slice(0,d.length-p.length))}else if(o){var h=o.value.match(/^\s*/)[0],b=e.value.match(/\s*$/)[0],g=ho(b,h);e.value=Tt(e.value,g)}else if(n){var T=n.value.match(/\s*$/)[0],v=e.value.match(/^\s*/)[0],E=ho(T,v);e.value=Qe(e.value,E)}}u(go,"dedupeWhitespaceInChangeObjects");var ds=new Z;ds.tokenize=function(n){var e=new RegExp("(\\r?\\n)|[".concat(xt,"]+|[^\\S\\n\\r]+|[^").concat(xt,"]"),"ug");return n.match(e)||[]};var An=new Z;An.tokenize=function(n,e){e.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var t=[],o=n.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var s=0;s<o.length;s++){var a=o[s];s%2&&!e.newlineIsToken?t[t.length-1]+=a:t.push(a)}return t};An.equals=function(n,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!n.includes(`
`))&&(n=n.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(n.endsWith(`
`)&&(n=n.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Z.prototype.equals.call(this,n,e,t)};var ms=new Z;ms.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var _s=new Z;_s.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function Pn(n){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(n)}u(Pn,"_typeof");var Je=new Z;Je.useLongestToken=!0;Je.tokenize=An.tokenize;Je.castInput=function(n,e){var t=e.undefinedReplacement,o=e.stringifyReplacer,s=o===void 0?function(a,r){return typeof r>"u"?t:r}:o;return typeof n=="string"?n:JSON.stringify(Rn(n,null,null,s),s,"  ")};Je.equals=function(n,e,t){return Z.prototype.equals.call(Je,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};function Rn(n,e,t,o,s){e=e||[],t=t||[],o&&(n=o(s,n));var a;for(a=0;a<e.length;a+=1)if(e[a]===n)return t[a];var r;if(Object.prototype.toString.call(n)==="[object Array]"){for(e.push(n),r=new Array(n.length),t.push(r),a=0;a<n.length;a+=1)r[a]=Rn(n[a],e,t,o,s);return e.pop(),t.pop(),r}if(n&&n.toJSON&&(n=n.toJSON()),Pn(n)==="object"&&n!==null){e.push(n),r={},t.push(r);var i=[],l;for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&i.push(l);for(i.sort(),a=0;a<i.length;a+=1)l=i[a],r[l]=Rn(n[l],e,t,o,l);e.pop(),t.pop()}else r=n;return r}u(Rn,"canonicalize");var Cn=new Z;Cn.tokenize=function(n){return n.slice()};Cn.join=Cn.removeEmpty=function(n){return n};var gs={tokenizerName:"cl100k_base"};function bs(n){return{...gs,...n}}u(bs,"cursorContextOptions");function Me(n,e={}){let t=bs(e),o=Ke(t.tokenizerName);if(t.maxLineCount!==void 0&&t.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(t.maxTokenLength!==void 0&&t.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(t.maxLineCount===0||t.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:t.tokenizerName};let s=n.source.slice(0,n.offset);return t.maxLineCount!==void 0&&(s=s.split(`
`).slice(-t.maxLineCount).join(`
`)),t.maxTokenLength!==void 0&&(s=o.takeLastLinesTokens(s,t.maxTokenLength)),{context:s,lineCount:s.split(`
`).length,tokenLength:o.tokenLength(s),tokenizerName:t.tokenizerName}}u(Me,"getCursorContext");var Dn=class Dn{constructor(e){this.keys=[];this.cache={};this.size=e}put(e,t){var o;if(this.cache[e]=t,this.keys.length>this.size){this.keys.push(e);let s=(o=this.keys.shift())!=null?o:"";delete this.cache[s]}}get(e){return this.cache[e]}};u(Dn,"FifoCache");var Fn=Dn;var Bn=class Bn{constructor(e){var t;this.stopsForLanguage=(t=Ss.get(e.languageId))!=null?t:vs}tokenize(e){return new Set(ys(e).filter(t=>!this.stopsForLanguage.has(t)))}};u(Bn,"Tokenizer");var On=Bn,bo=new Fn(20),Un=class Un{constructor(e){this.referenceDoc=e,this.tokenizer=new On(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){var e;return(e=this.referenceTokensCache)!=null?e:this.referenceTokensCache=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,t="descending"){return t=="ascending"?e.sort((o,s)=>o.score>s.score?1:-1):t=="descending"?e.sort((o,s)=>o.score>s.score?-1:1):e}async retrieveAllSnippets(e,t="descending"){var c;let o=[];if(e.source.length===0||(await this.referenceTokens).size===0)return o;let s=e.source.split(`
`),a=this.id()+":"+e.source,r=(c=bo.get(a))!=null?c:[],i=r.length==0,l=i?s.map(d=>this.tokenizer.tokenize(d),this.tokenizer):[];for(let[d,[m,_]]of this.getWindowsDelineations(s).entries()){if(i){let h=new Set;l.slice(m,_).forEach(b=>b.forEach(g=>h.add(g),h)),r.push(h)}let f=r[d],p=this.similarityScore(f,await this.referenceTokens);if(o.length&&m>0&&o[o.length-1].endLine>m){o[o.length-1].score<p&&(o[o.length-1].score=p,o[o.length-1].startLine=m,o[o.length-1].endLine=_);continue}o.push({score:p,startLine:m,endLine:_})}return i&&bo.put(a,r),this.sortScoredSnippets(o,t)}findMatches(e,t){return this.findBestMatch(e,t)}async findBestMatch(e,t){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let o=e.source.split(`
`),s=await this.retrieveAllSnippets(e,"descending");if(s.length===0)return[];let a=[];for(let r=0;r<s.length&&r<t;r++)if(s[r].score!==0){let i=o.slice(s[r].startLine,s[r].endLine).join(`
`);a.push({snippet:i,semantics:"snippet",provider:"similar-files",...s[r]})}return a}};u(Un,"WindowedMatcher");var Le=Un;function ys(n){return n.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}u(ys,"splitIntoWords");var ws=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),vs=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...ws]),Ss=new Map([]);function Mt(n,e){let t=[],o=e.length;if(o==0)return[];if(o<n)return[[0,o]];for(let s=0;s<o-n+1;s++)t.push([s,s+n]);return t}u(Mt,"getBasicWindowDelineations");var Xe=class Xe extends Le{constructor(e,t){super(e),this.windowLength=t}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return Mt(this.windowLength,e)}_getCursorContextInfo(e){return Me(e,{maxLineCount:this.windowLength})}similarityScore(e,t){return Es(e,t)}};u(Xe,"FixedWindowSizeJaccardMatcher"),Xe.FACTORY=u(e=>({to:u(t=>new Xe(t,e),"to")}),"FACTORY");var Lt=Xe;function Es(n,e){let t=new Set;return n.forEach(o=>{e.has(o)&&t.add(o)}),t.size/(n.size+e.size-t.size)}u(Es,"computeScore");var vo=require("fs"),kt=de(require("path")),Nt=de(yo());var wo={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp"};function So(n){if(!(n in wo))throw new Error(`Unrecognized language: ${n}`);return wo[n]}u(So,"languageIdToWasmLanguage");var Wn=new Map;async function Ts(n){let e,t=kt.default.resolve(kt.default.extname(__filename)!==".ts"?__dirname:kt.default.resolve(__dirname,"../../dist"),`tree-sitter-${n}.wasm`);try{e=await vo.promises.readFile(t)}catch(o){throw o instanceof Error&&"code"in o&&typeof o.code=="string"&&o.name==="Error"?new ie(`Could not load tree-sitter-${n}.wasm`,o):o}return Nt.default.Language.load(e)}u(Ts,"loadWasmLanguage");function xs(n){let e=So(n);if(!Wn.has(e)){let t=Ts(e);Wn.set(e,t)}return Wn.get(e)}u(xs,"getLanguage");var qn=class qn extends Error{constructor(t,o){super(t);this.cause=o}};u(qn,"WrappedError");var zn=qn;async function _e(n,e){await Nt.default.init();let t;try{t=new Nt.default}catch(a){throw a&&typeof a=="object"&&"message"in a&&typeof a.message=="string"&&a.message.includes("table index is out of bounds")?new zn(`Could not init Parse for language <${n}>`,a):a}let o=await xs(n);t.setLanguage(o);let s=t.parse(e);return t.delete(),s}u(_e,"parseTreeSitter");function Is(n,e){let t=[];for(let o of n){if(!o[1]){let s=e.tree.getLanguage();o[1]=s.query(o[0])}t.push(...o[1].matches(e))}return t}u(Is,"innerQuery");var Ms=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function Eo(n){return Is([Ms],n).length==1}u(Eo,"queryPythonIsDocstring");var ae=class ae extends Le{constructor(e,t){super(e),this.windowLength=t}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return Mt(this.windowLength,e)}_getCursorContextInfo(e){return Me(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=ae.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){var s;let e=(s=await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))==null?void 0:s.startIndex,t=this.referenceDoc.offset,o=e?this.referenceDoc.source.slice(e,t):Me(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(o)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,t){return Ls(e,t)}async getEnclosingMemberStart(e,t){var s;let o;try{o=await _e(this.referenceDoc.languageId,e);let a=o.rootNode.namedDescendantForIndex(t);for(;a&&!(ae.isMember(a)||ae.isBlock(a));)a=(s=a.parent)!=null?s:void 0;return a}finally{o==null||o.delete()}}static isMember(e){switch(e==null?void 0:e.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e==null?void 0:e.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};u(ae,"BlockTokenSubsetMatcher"),ae.FACTORY=u(e=>({to:u(t=>new ae(t,e),"to")}),"FACTORY");var Pt=ae;function Ls(n,e){let t=new Set;return e.forEach(o=>{n.has(o)&&t.add(o)}),t.size}u(Ls,"computeScore");function ks(n,e){return(e.useSubsetMatching?Pt.FACTORY(e.snippetLength):Lt.FACTORY(e.snippetLength)).to(n)}u(ks,"getMatcher");async function To(n,e,t){let o=ks(n,t);return t.maxTopSnippets===0?[]:(await e.filter(a=>a.source.length<t.maxCharPerFile&&a.source.length>0).slice(0,t.maxNumberOfFiles).reduce(async(a,r)=>(await a).concat((await o.findMatches(r,t.maxSnippetsPerFile)).map(i=>({relativePath:r.relativePath,...i}))),Promise.resolve([]))).filter(a=>a.score&&a.snippet&&a.score>t.threshold).sort((a,r)=>a.score-r.score).slice(-t.maxTopSnippets)}u(To,"getSimilarSnippets");var Ps=500,qc=8192-Ps;var Ut=de(require("path")),te=require("worker_threads");function ba(n){return new Promise(e=>{setTimeout(()=>e(`delay: ${n}`),n)})}u(ba,"sleep");var si=["getSimilarSnippets","sleep"],fr=class fr{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=To;this.sleep=ba;var e;!te.isMainThread&&((e=te.workerData)!=null&&e.port)&&(ii(),process.cwd=()=>te.workerData.cwd,this.configureWorkerResponse(te.workerData.port))}initWorker(){let{port1:e,port2:t}=new te.MessageChannel;this.port=e,this.worker=new te.Worker(Ut.default.resolve(Ut.default.extname(__filename)!==".ts"?__dirname:Ut.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:t,cwd:process.cwd()},transferList:[t]}),this.port.on("message",o=>this.handleMessage(o)),this.port.on("error",o=>this.handleError(o))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let e of si)this.fns.set(e,this[e]),this.proxy(e)}unproxyFunctions(){for(let e of si){let t=this.fns.get(e);if(t)this[e]=t;else throw new Error(`Unproxy function not found: ${e}`)}}configureWorkerResponse(e){this.port=e,this.port.on("message",t=>void this.onMessage(t))}async onMessage({id:e,fn:t,args:o}){let s=this[t];if(!s)throw new Error(`Function not found: ${t}`);try{let a=await s.apply(this,o);this.port.postMessage({id:e,res:a})}catch(a){if(!(a instanceof Error))throw a;typeof a.code=="string"?this.port.postMessage({id:e,err:a,code:a.code}):this.port.postMessage({id:e,err:a})}}handleMessage({id:e,err:t,code:o,res:s}){let a=this.handlers.get(e);a&&(this.handlers.delete(e),t?(t.code=o,a.reject(t)):a.resolve(s))}handleError(e){var o;console.log(e);let t;if(e instanceof Error){t=e,t.code==="MODULE_NOT_FOUND"&&((o=t.message)!=null&&o.endsWith("workerProxy.js'"))&&(t=new ie("Failed to load workerProxy.js"));let s=new Error().stack;t.stack&&(s!=null&&s.match(/^Error\n/))&&(t.stack+=s.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&e.name==="ExitStatus"&&"status"in e&&typeof e.status=="number"?(t=new Error(`workerProxy.js exited with status ${e.status}`),t.code=`CopilotPromptWorkerExit${e.status}`):t=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let s of this.handlers.values())s.reject(t);throw t}proxy(e){this[e]=function(...t){let o=this.nextHandlerId++;return new Promise((s,a)=>{var r;this.handlers.set(o,{resolve:s,reject:a}),(r=this.port)==null||r.postMessage({id:o,fn:e,args:t})})}}};u(fr,"WorkerProxy");var _r=fr,ya=new _r;var pr=class pr{constructor(e,t,o){this.languageId=e;this.nodeMatch=t;this.nodeTypesWithBlockOrStmtChild=o}async getNodeMatchAtPosition(e,t,o){let s=await _e(this.languageId,e);try{let r=s.rootNode.descendantForIndex(t);for(;r;){let i=this.nodeMatch[r.type];if(i){if(!this.nodeTypesWithBlockOrStmtChild.has(r.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(r.type),c=l==""?r.namedChildren[0]:r.childForFieldName(l);if((c==null?void 0:c.type)==i)break}r=r.parent}return r?o(r):void 0}finally{s.delete()}}getNextBlockAtPosition(e,t,o){return this.getNodeMatchAtPosition(e,t,s=>{let a=s.children.reverse().find(r=>r.type==this.nodeMatch[s.type]);if(a){if(this.languageId=="python"&&a.parent){let r=a.parent.type==":"?a.parent.parent:a.parent,i=r==null?void 0:r.nextSibling;for(;i&&i.type=="comment";){let l=i.startPosition.row==a.endPosition.row&&i.startPosition.column>=a.endPosition.column,c=i.startPosition.row>r.endPosition.row&&i.startPosition.column>r.startPosition.column;if(l||c)a=i,i=i.nextSibling;else break}}if(!(a.endIndex>=a.tree.rootNode.endIndex-1&&(a.hasError()||a.parent.hasError())))return o(a)}})}async isBlockBodyFinished(e,t,o){let s=(e+t).trimEnd(),a=await this.getNextBlockAtPosition(s,o,r=>r.endIndex);if(a!==void 0&&a<s.length){let r=a-e.length;return r>0?r:void 0}}getNodeStart(e,t){let o=e.trimEnd();return this.getNodeMatchAtPosition(o,t,s=>s.startIndex)}};u(pr,"BaseBlockParser");var Wt=pr,hr=class hr extends Wt{constructor(t,o,s,a,r){super(t,a,r);this.blockEmptyMatch=o;this.lineMatch=s}isBlockStart(t){return this.lineMatch.test(t.trimStart())}async isBlockBodyEmpty(t,o){let s=await this.getNextBlockAtPosition(t,o,a=>{a.startIndex<o&&(o=a.startIndex);let r=t.substring(o,a.endIndex).trim();return r==""||r.replace(/\s/g,"")==this.blockEmptyMatch});return s===void 0||s}async isEmptyBlockStart(t,o){return o=li(t,o),this.isBlockStart(va(t,o))&&this.isBlockBodyEmpty(t,o)}};u(hr,"RegexBasedBlockParser");var zt=hr;function va(n,e){let t=n.lastIndexOf(`
`,e-1),o=n.indexOf(`
`,e);return o<0&&(o=n.length),n.slice(t+1,o)}u(va,"getLineAtOffset");function li(n,e){let t=e;for(;t>0&&/\s/.test(n.charAt(t-1));)t--;return t}u(li,"rewindToNearestNonWs");function ai(n,e){let t=n.startIndex,o=n.startIndex-n.startPosition.column,s=e.substring(o,t);if(/^\s*$/.test(s))return s}u(ai,"indent");function Sa(n,e,t){if(e.startPosition.row<=n.startPosition.row)return!1;let o=ai(n,t),s=ai(e,t);return o!==void 0&&s!==void 0&&o.startsWith(s)}u(Sa,"outdented");var gr=class gr extends Wt{constructor(t,o,s,a,r,i,l){super(t,o,s);this.startKeywords=a;this.blockNodeType=r;this.emptyStatementType=i;this.curlyBraceLanguage=l}isBlockEmpty(t,o){var a,r;let s=t.text.trim();return this.curlyBraceLanguage&&(s.startsWith("{")&&(s=s.slice(1)),s.endsWith("}")&&(s=s.slice(0,-1)),s=s.trim()),!!(s.length==0||this.languageId=="python"&&(((a=t.parent)==null?void 0:a.type)=="class_definition"||((r=t.parent)==null?void 0:r.type)=="function_definition")&&t.children.length==1&&Eo(t.parent))}async isEmptyBlockStart(t,o){var a,r,i,l;if(o>t.length)throw new RangeError("Invalid offset");for(let c=o;c<t.length&&t.charAt(c)!=`
`;c++)if(/\S/.test(t.charAt(c)))return!1;o=li(t,o);let s=await _e(this.languageId,t);try{let c=s.rootNode.descendantForIndex(o-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let p=c;for(;p.parent;){if(p.type=="function_signature"||p.type=="method_signature"){let h=c.nextSibling;return h&&p.hasError()&&Sa(p,h,t)?!0:!p.children.find(g=>g.type==";")&&p.endIndex<=o}p=p.parent}}let d=null,m=null,_=null,f=c;for(;f!=null;){if(f.type==this.blockNodeType){m=f;break}if(this.nodeMatch[f.type]){_=f;break}if(f.type=="ERROR"){d=f;break}f=f.parent}if(m!=null){if(!m.parent||!this.nodeMatch[m.parent.type])return!1;if(this.languageId=="python"){let p=m.previousSibling;if(p!=null&&p.hasError()&&(p.text.startsWith('"""')||p.text.startsWith("'''")))return!0}return this.isBlockEmpty(m,o)}if(d!=null){if(((a=d.previousSibling)==null?void 0:a.type)=="module"||((r=d.previousSibling)==null?void 0:r.type)=="internal_module"||((i=d.previousSibling)==null?void 0:i.type)=="def")return!0;let p=[...d.children].reverse(),h=p.find(g=>this.startKeywords.includes(g.type)),b=p.find(g=>g.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(b=(l=p.find(v=>v.hasError()))==null?void 0:l.children.find(v=>v.type=="block"));let g,T=0;for(let v of d.children){if(v.type==":"&&T==0){g=v;break}v.type=="("&&(T+=1),v.type==")"&&(T-=1)}if(g&&h.endIndex<=g.startIndex&&g.nextSibling){if(h.type=="def"){let v=g.nextSibling;if(v.type=='"'||v.type=="'"||v.type=="ERROR"&&(v.text=='"""'||v.text=="'''"))return!0}return!1}break}case"javascript":{let g=p.find(E=>E.type=="formal_parameters");if(h.type=="class"&&g)return!0;let T=p.find(E=>E.type=="{");if(T&&T.startIndex>h.endIndex&&T.nextSibling!=null||p.find(E=>E.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let g=p.find(v=>v.type=="{");if(g&&g.startIndex>h.endIndex&&g.nextSibling!=null||p.find(v=>v.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return b&&b.startIndex>h.endIndex?this.isBlockEmpty(b,o):!0}}if(_!=null){let p=this.nodeMatch[_.type],h=_.children.slice().reverse().find(b=>b.type==p);if(h)return this.isBlockEmpty(h,o);if(this.nodeTypesWithBlockOrStmtChild.has(_.type)){let b=this.nodeTypesWithBlockOrStmtChild.get(_.type),g=b==""?_.children[0]:_.childForFieldName(b);if(g&&g.type!=this.blockNodeType&&g.type!=this.emptyStatementType)return!1}return!0}return!1}finally{s.delete()}}};u(gr,"TreeSitterBasedBlockParser");var be=gr,s_={python:new be("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new be("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new be("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new be("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new zt("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new zt("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new be("csharp",{},new Map([]),[],"block",null,!0)};var Fe=class Fe{constructor(e,t){this.start=e,this.length=t}static fromBounds(e,t){return new Fe(e,t-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,t){let o=[],s=this.start;for(s=ci(e,e.length,s),ui(o,t);s<this.end;)e[s]!=="\r"&&e[s]!==`
`?o.push(e[s++]):e[s]==="\r"&&s<e.length&&e[s+1]!==`
`||e[s]===`
`?(o.push(`
`),s=ci(e,e.length,++s),ui(o,t)):s++;return o.join("")}};u(Fe,"TextRange"),Fe.empty=new Fe(0,0);var Q=Fe;function ui(n,e){for(let t=0;t<e;t++)n.push(" ")}u(ui,"appendIndent");function ci(n,e,t){for(;t<e&&(n[t]===" "||n[t]==="	");)t++;return t}u(ci,"consumeIndent");var br=class br{constructor(e,t,o,s,a,r,i,l,c){this.fileName=e;this.fullyQualifiedName=t;this.unqualifiedName=o;this.commentRange=s;this.nameRange=a;this.bodyRange=r;this.extentRange=i;this.kind=l;this.refKind=c}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}};u(br,"SymbolRange");var Oe=br,it=class it{constructor(){this.queriesCache=new Map}async executeQuery(e,t,o){let s;try{s=await _e(this.languageId,t);let a=s.getLanguage(),i=this.getOrCreateQuery(a,o).matches(s.rootNode),l=new ft,c=[];for(let d of i){let m=this.createSymbolRange(l,e,t,d.captures);m&&c.push(m)}return c}finally{s==null||s.delete()}}getOrCreateQuery(e,t){let o=this.queriesCache.get(t);return o||(o=e.query(t),this.queriesCache.set(t,o)),o}createSymbolRange(e,t,o,s){let a=0,r=0,i=0,l=0,c=0,d=0,m=0,_=0,f=null;for(let b=0;b<s.length;b++){let g=s[b].name;g==="name"?(c=s[b].node.startIndex,d=s[b].node.endIndex):g==="reference"?(c=s[b].node.startIndex,d=s[b].node.endIndex,i=s[b].node.startIndex,l=s[b].node.endIndex,f=g):g==="body"?(m=s[b].node.startIndex,_=s[b].node.endIndex):g==="comment"?(a=a===0?s[b].node.startIndex:Math.min(a,s[b].node.startIndex),r=Math.max(r,s[b].node.endIndex)):(i=s[b].node.startIndex,l=s[b].node.endIndex,f=g)}f==="definition.module.filescoped"&&(_=o.length,l=_);let p=Q.fromBounds(i,l),h=i>0||l>0||c>0||d>0?new Oe(t,"","",Q.fromBounds(a,r),Q.fromBounds(c,d),Q.fromBounds(m,_),p,it.kindFromString(f),0):null;return h?(it.updateScopesForSymbol(e,h),new Oe(t,this.createNameFromScopes(o,e.toArray()),h.nameRange.getText(o),h.commentRange,h.nameRange,h.bodyRange,h.extentRange,h.kind,0)):null}static updateScopesForSymbol(e,t){var o;for(;e.tryPeek()&&!((o=e.peek())!=null&&o.extentRange.containsRange(t.extentRange));)e.pop();e.push(t)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;default:throw new Error("NotSupportedException")}}};u(it,"SymbolExtractorBase");var st=it;var yr=class yr extends st{get languageId(){return"python"}extractSymbols(e,t){return this.executeQuery(e,t,Ea)}createNameFromScopes(e,t){return t.map(o=>o.nameRange.getText(e)).join(".")}};u(yr,"PythonSymbolExtractor");var qt=yr,wr=class wr extends st{get languageId(){return"python"}createNameFromScopes(e,t){return t.length>0?t[t.length-1].nameRange.getText(e):""}extractReferences(e,t){return this.executeQuery(e,t,Ta)}async extractLocalReferences(e,t,o){let s=await this.executeQuery(e,t,xa),a=s.filter(l=>l.kind!==9),r=s.filter(l=>l.kind===9&&l.extentRange.containsRange(o)),i=[];for(let l of r)i.push(...a.filter(c=>l.extentRange.containsRange(c.extentRange)));return i}};u(wr,"PythonReferenceExtractor");var $t=wr,Ea=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,Ta=`
(call function: (_) @name) @reference
`,xa=`
(call function: (_) @name) @reference
`;var di=[new qt],K_=[new $t];var vr=class vr{async getContextAtPositionAsync(e,t,o,s){throw new Error("Not implemented")}};u(vr,"SyntaxAwareContextRetrieval");var jt=vr;var ye={Id:"id"},H={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},x={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};var Er=class Er{constructor(e,t,o){this.tableName=e;this.createOptimizations=t;this.extraCreateDeclarations=o;this.primaryKey=new Sr(ye.Id)}createTableQueries(){var e;return(e=this.createTableString)!=null||(this.createTableString=this.generateCreateTableString()),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(t=>t.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,t){var s;(s=this.cachedInsertQueryStrings)!=null||(this.cachedInsertQueryStrings=this.generateInsertQueryStrings());let o=[this.cachedInsertQueryStrings.prefix,Array(t).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&o.push("ON CONFLICT DO NOTHING"),o.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}};u(Er,"SQLTableQueryGenerator");var Ht=Er,De=class De extends Ht{constructor(){super(De.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${De.tableName}' ('${H.FilePath}');`]);this.fields=[new ct(H.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new q(H.LastWriteTimeUtc,{notNull:!0})]}};u(De,"DocumentQueryGenerator"),De.tableName="Document";var at=De,we=class we extends Ht{constructor(){super(we.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${we.tableName}' ('${x.DocumentId}', '${x.ExtentStart}', '${x.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${we.tableName}' ('${x.UnqualifiedName}');`],`FOREIGN KEY(${x.DocumentId}) REFERENCES Document(${ye.Id}) ON DELETE CASCADE`);this.fields=[new q(x.DocumentId),new ct(x.FullyQualifiedName,{notNull:!0}),new ct(x.UnqualifiedName,{notNull:!0,collate:!0,noCase:!0}),new q(x.CommentStart,{notNull:!0}),new q(x.CommentLength,{notNull:!0}),new q(x.NameStart,{notNull:!0}),new q(x.NameLength,{notNull:!0}),new q(x.BodyStart,{notNull:!0}),new q(x.BodyLength,{notNull:!0}),new q(x.ExtentStart,{notNull:!0}),new q(x.ExtentLength,{notNull:!0}),new q(x.SymbolKind,{notNull:!0}),new q(x.RefKind,{notNull:!0})]}};u(we,"SymbolQueryGenerator"),we.tableName="Symbol";var lt=we,Tr=class Tr{constructor(e,t){this.name=e;var o;this.notNull=(o=t==null?void 0:t.notNull)!=null?o:!1}};u(Tr,"SQLField");var ut=Tr,xr=class xr extends ut{constructor(e,t){var o,s,a;super(e,{notNull:t==null?void 0:t.notNull}),this.collate=(o=t==null?void 0:t.collate)!=null?o:!1,this.noCase=(s=t==null?void 0:t.noCase)!=null?s:!1,this.unique=(a=t==null?void 0:t.unique)!=null?a:!1}initColumnString(){let e=this.collate?"COLLATE":void 0,t=this.noCase?"NOCASE":void 0,o=this.notNull?"NOT NULL":void 0,s=this.unique?"UNIQUE":void 0,a=[e,t,o,s].filter(r=>r).join(" ");return`'${this.name}' VARCHAR(500) ${a}`}};u(xr,"StringColumn");var ct=xr,Ir=class Ir extends ut{initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}};u(Ir,"NumberColumn");var q=Ir,Mr=class Mr extends ut{initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};u(Mr,"NumberPrimaryKeyColumn");var Sr=Mr;var Lr=class Lr{constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let t=await e;return await this.create(t),t}async create(e){let t=u(s=>new Promise((a,r)=>{e.run(s,i=>{i?r(i):a()})}),"runQuery"),o=this.queryGenerator.createTableQueries();for(let s of o)await t(s)}async insert(e,t){let o=await this.init;return new Promise((s,a)=>{let r=this.queryGenerator.insertQuery(t,e.length);o.run(r,e.map(i=>Object.values(i)).flat(),function(i){i?a(i):s(this)})})}async getAllRows(){let e=await this.init;return V(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[])}async deleteRow(e){let t=await this.init;return V(t,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${ye.Id} = ?`,[e])}};u(Lr,"SQLTable");var Vt=Lr,Be=class Be extends Vt{createQueryGenerator(){return new at}async updateTimestamp(e,t){let o=await this.init;await V(o,`UPDATE ${Be.tableName} SET ${H.LastWriteTimeUtc} = ? WHERE ${H.FilePath} = ?`,[t,e])}async deleteAllWithPath(e){let t=await this.init;await V(t,`DELETE FROM ${Be.tableName} WHERE ${H.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let t=await this.init;return V(t,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${H.FilePath} = ?`,[e])}};u(Be,"DocumentTable"),Be.tableName=at.tableName;var ce=Be,dt=class dt extends Vt{createQueryGenerator(){return new lt}async clearAllSymbolsFromDocument(e){let t=await this.init;return V(t,`DELETE FROM ${dt.tableName} WHERE ${x.DocumentId} = ?`,[e])}};u(dt,"SymbolTable"),dt.tableName=lt.tableName;var D=dt;async function V(n,e,t){return new Promise((o,s)=>n.all(e,t,(a,r)=>{a&&s(a),o(r)}))}u(V,"runPromisifiedDBQuery");var xi=de(Ti());var Cr=class Cr{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${ce.tableName} ON ${D.tableName}.${x.DocumentId} = ${ce.tableName}.${ye.Id}`;this.db=this.initDb(e),this.documentTable=new ce(this.db),this.symbolTable=new D(this.db)}async initDb(e){let t=await new Promise((o,s)=>{let a=new xi.Database(e,r=>{r?(console.error("Error opening database",r),s(r)):o(a)})});return await V(t,"pragma journal_mode=wal",[]),await V(t,"pragma synchronous=normal",[]),await V(t,"pragma optimize=0x10002",[]),await V(t,"pragma foreign_keys = ON",[]),t}async close(){let e=await this.db;return await this.documentTable.init,await this.symbolTable.init,new Promise((t,o)=>{e.close(s=>s?o(s):t())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,t){return await this.query([`SELECT * FROM ${D.tableName}`,this.innerJoinStatement,`WHERE ${x.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${x.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,t])}async querySymbolsUsingUnqualifiedNames(e){let t=e.map(()=>"?").join(", ");return await this.query([`SELECT * FROM ${D.tableName}`,this.innerJoinStatement,`WHERE ${x.UnqualifiedName} IN (${t})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${D.tableName}`,this.innerJoinStatement,`WHERE ${x.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,t){return this.query([`SELECT * FROM ${D.tableName}`,this.innerJoinStatement,`WHERE ${ce.tableName}.${H.FilePath} = ? AND ${D.tableName}.${x.ExtentStart} <= ? AND (${D.tableName}.${x.ExtentStart} + ${D.tableName}.${x.ExtentLength}) >= ?`].join(`
`),[e,t,t])}async querySymbolsContainedByRange(e,t,o){return this.query([`SELECT * FROM ${D.tableName}`,this.innerJoinStatement,`WHERE ${ce.tableName}.${H.FilePath} = ? AND ${D.tableName}.${x.ExtentStart} >= ? AND (${D.tableName}.${x.ExtentStart} + ${D.tableName}.${x.ExtentLength}) <= ?`,`ORDER BY ${D.tableName}.${x.ExtentStart}`].join(`
`),[e,t,o])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,t,o=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:t}],o)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,t){return this.documentTable.updateTimestamp(e,t)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,t){let o=await this.db;return await this.documentTable.init,await this.symbolTable.init,V(o,e,t)}};u(Cr,"DocumentSymbolDatabase");var Kt=Cr;var Ar=class Ar{constructor(e){this.database=new Kt(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,t,o){e=e.toLowerCase();let s=await this.getOrCreateDocumentAsync(e,t);await this.database.clearAllSymbolsFromDocument(s.id),await this.database.insertSymbols(o.map(a=>({documentId:s.id,fullyQualifiedName:a.fullyQualifiedName,unqualifiedName:a.unqualifiedName,commentStart:a.commentRange.start,commentLength:a.commentRange.length,nameStart:a.nameRange.start,nameLength:a.nameRange.length,bodyStart:a.bodyRange.start,bodyLength:a.bodyRange.length,extentStart:a.extentRange.start,extentLength:a.extentRange.length,symbolKind:a.kind,refKind:a.refKind}))),await this.database.updateDocumentTimestamp(e,t)}async addDocumentsAsync(e){for(let t of e)t=t.toLowerCase(),await this.database.insertDocument(t,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,t){return await this.database.updateDocumentTimestamp(e.toLowerCase(),t)}async fuzzyMatchSymbolsAsync(e,t){return ze(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,t))}async findPotentialDefinitionsAsync(e,t){let o=[],a=0;for(;a<e.length;){let r=e.slice(a,a+500);a+=500;let i=await this.database.querySymbolsUsingUnqualifiedNames(r);o.push(...i)}if(!t){let r=new Set(e),i=o.filter(l=>r.has(l.unqualifiedName));return ze(i)}return ze(o)}async getDefinitionsAsync(e){return ze(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,t){let o=await this.database.querySymbolsContainingPosition(e.toLowerCase(),t);return ze(o)}async findSymbolsContainedByRangeAsync(e,t,o){return ze(await this.database.querySymbolsContainedByRange(e.toLowerCase(),t,o))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let t=await this.database.getDocument(e);if(t!=null&&t.at(0))return t[0]}async getOrCreateDocumentAsync(e,t){let o=await this.database.getDocument(e);if(o!=null&&o.at(0))return o[0];await this.database.insertDocument(e,t,!0);let s=await this.database.getDocument(e);if(!s)throw Error("Unable to insert document");return s[0]}};u(Ar,"SQLStorageReaderWriter");var Qt=Ar;function ze(n){return n.map(e=>new Oe(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Q(e.commentStart,e.commentLength),new Q(e.nameStart,e.nameLength),new Q(e.bodyStart,e.bodyLength),new Q(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}u(ze,"symbolsToSymbolRanges");var Ii=de(require("fs")),Xt=de(require("fs/promises"));var Fr=class Fr{constructor(e,t){this.storage=new Qt(e),this.symbolExtractors=t}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,t){if(!Ii.existsSync(e)){await this.storage.deleteDocumentAsync(e);return}let s=(await Xt.stat(e)).mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=s)return;let r=this.symbolExtractors.find(c=>c.languageId==t);if(!r)return;let i=(await Xt.readFile(e)).toString(),l=await r.extractSymbols(e,i);await this.storage.insertOrReplaceDocumentSymbolsAsync(e,s,l)}};u(Fr,"Index");var Jt=Fr;function Mi(n){let e=n;return typeof(e==null?void 0:e.databasePath)=="string"&&typeof(e==null?void 0:e.cwd)=="string"}u(Mi,"isIndexWorkerData");var Dr=class Dr{constructor(e){this.id=e}};u(Dr,"IndexMessage");var Or=Dr;var Br=class Br extends Or{constructor(t,o,s){super(t);this.operation="response";this.error=o,this.data=s}};u(Br,"ResponseMessage");var ve=Br;var qe=require("worker_threads");var Yt=class Yt{constructor(e,t){this.index=new Jt(t,di),this.contextRetrieval=new jt,e.on("message",o=>void Yt.dispatchMessage(o,this.index,this.contextRetrieval))}static async dispatchMessage(e,t,o){try{if(e.operation==="addOrInvalidated"){let s=e;await t.indexFile(s.filePath,s.languageId),F==null||F.postMessage(new ve(e.id,void 0,void 0))}else if(e.operation==="getContext"){let s=e,a=await o.getContextAtPositionAsync(s.filePath,s.code,s.offset,s.languageId);F==null||F.postMessage(new ve(e.id,void 0,a))}else e.operation==="exit"?(await t.dispose(),F==null||F.postMessage(new ve(e.id,void 0,void 0)),F==null||F.close()):F==null||F.postMessage(new Error(`Unknown operation: ${e.operation}`))}catch(s){if(!(s instanceof Error))throw s;F==null||F.postMessage(new ve(e.id,s,void 0))}}};u(Yt,"IndexWorker");var Ur=Yt,F=qe.parentPort;if(!F)throw new Error("This module should only be used in a worker thread.");if(!Mi(qe.workerData))throw new Error("Worker data must provide a valid database path.");var Ra=qe.workerData.cwd;process.cwd=()=>Ra;new Ur(F,qe.workerData.databasePath);
//# sourceMappingURL=indexWorker.js.map
