var cg=Object.create;var ar=Object.defineProperty,lg=Object.defineProperties,ug=Object.getOwnPropertyDescriptor,hg=Object.getOwnPropertyDescriptors,pg=Object.getOwnPropertyNames,Qc=Object.getOwnPropertySymbols,fg=Object.getPrototypeOf,el=Object.prototype.hasOwnProperty,dg=Object.prototype.propertyIsEnumerable;var Zc=(r,t,e)=>t in r?ar(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,_=(r,t)=>{for(var e in t||(t={}))el.call(t,e)&&Zc(r,e,t[e]);if(Qc)for(var e of Qc(t))dg.call(t,e)&&Zc(r,e,t[e]);return r},Se=(r,t)=>lg(r,hg(t));var mg=(r,t)=>()=>(r&&(t=r(r=0)),t);var S=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),yg=(r,t)=>{for(var e in t)ar(r,e,{get:t[e],enumerable:!0})},tl=(r,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of pg(t))!el.call(r,i)&&i!==e&&ar(r,i,{get:()=>t[i],enumerable:!(s=ug(t,i))||s.enumerable});return r};var ie=(r,t,e)=>(e=r!=null?cg(fg(r)):{},tl(t||!r||!r.__esModule?ar(e,"default",{value:r,enumerable:!0}):e,r)),gg=r=>tl(ar({},"__esModule",{value:!0}),r);var d=mg(()=>{});var pr=S((S1,Nl)=>{d();var ex="2.0.0",tx=Number.MAX_SAFE_INTEGER||9007199254740991,sx=16;Nl.exports={SEMVER_SPEC_VERSION:ex,MAX_LENGTH:256,MAX_SAFE_INTEGER:tx,MAX_SAFE_COMPONENT_LENGTH:sx}});var fr=S((v1,kl)=>{d();var rx=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};kl.exports=rx});var Gt=S((Ct,_l)=>{d();var{MAX_SAFE_COMPONENT_LENGTH:Pa}=pr(),ix=fr();Ct=_l.exports={};var nx=Ct.re=[],N=Ct.src=[],k=Ct.t={},ax=0,$=(r,t,e)=>{let s=ax++;ix(r,s,t),k[r]=s,N[s]=t,nx[s]=new RegExp(t,e?"g":void 0)};$("NUMERICIDENTIFIER","0|[1-9]\\d*");$("NUMERICIDENTIFIERLOOSE","[0-9]+");$("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");$("MAINVERSION",`(${N[k.NUMERICIDENTIFIER]})\\.(${N[k.NUMERICIDENTIFIER]})\\.(${N[k.NUMERICIDENTIFIER]})`);$("MAINVERSIONLOOSE",`(${N[k.NUMERICIDENTIFIERLOOSE]})\\.(${N[k.NUMERICIDENTIFIERLOOSE]})\\.(${N[k.NUMERICIDENTIFIERLOOSE]})`);$("PRERELEASEIDENTIFIER",`(?:${N[k.NUMERICIDENTIFIER]}|${N[k.NONNUMERICIDENTIFIER]})`);$("PRERELEASEIDENTIFIERLOOSE",`(?:${N[k.NUMERICIDENTIFIERLOOSE]}|${N[k.NONNUMERICIDENTIFIER]})`);$("PRERELEASE",`(?:-(${N[k.PRERELEASEIDENTIFIER]}(?:\\.${N[k.PRERELEASEIDENTIFIER]})*))`);$("PRERELEASELOOSE",`(?:-?(${N[k.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${N[k.PRERELEASEIDENTIFIERLOOSE]})*))`);$("BUILDIDENTIFIER","[0-9A-Za-z-]+");$("BUILD",`(?:\\+(${N[k.BUILDIDENTIFIER]}(?:\\.${N[k.BUILDIDENTIFIER]})*))`);$("FULLPLAIN",`v?${N[k.MAINVERSION]}${N[k.PRERELEASE]}?${N[k.BUILD]}?`);$("FULL",`^${N[k.FULLPLAIN]}$`);$("LOOSEPLAIN",`[v=\\s]*${N[k.MAINVERSIONLOOSE]}${N[k.PRERELEASELOOSE]}?${N[k.BUILD]}?`);$("LOOSE",`^${N[k.LOOSEPLAIN]}$`);$("GTLT","((?:<|>)?=?)");$("XRANGEIDENTIFIERLOOSE",`${N[k.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);$("XRANGEIDENTIFIER",`${N[k.NUMERICIDENTIFIER]}|x|X|\\*`);$("XRANGEPLAIN",`[v=\\s]*(${N[k.XRANGEIDENTIFIER]})(?:\\.(${N[k.XRANGEIDENTIFIER]})(?:\\.(${N[k.XRANGEIDENTIFIER]})(?:${N[k.PRERELEASE]})?${N[k.BUILD]}?)?)?`);$("XRANGEPLAINLOOSE",`[v=\\s]*(${N[k.XRANGEIDENTIFIERLOOSE]})(?:\\.(${N[k.XRANGEIDENTIFIERLOOSE]})(?:\\.(${N[k.XRANGEIDENTIFIERLOOSE]})(?:${N[k.PRERELEASELOOSE]})?${N[k.BUILD]}?)?)?`);$("XRANGE",`^${N[k.GTLT]}\\s*${N[k.XRANGEPLAIN]}$`);$("XRANGELOOSE",`^${N[k.GTLT]}\\s*${N[k.XRANGEPLAINLOOSE]}$`);$("COERCE",`(^|[^\\d])(\\d{1,${Pa}})(?:\\.(\\d{1,${Pa}}))?(?:\\.(\\d{1,${Pa}}))?(?:$|[^\\d])`);$("COERCERTL",N[k.COERCE],!0);$("LONETILDE","(?:~>?)");$("TILDETRIM",`(\\s*)${N[k.LONETILDE]}\\s+`,!0);Ct.tildeTrimReplace="$1~";$("TILDE",`^${N[k.LONETILDE]}${N[k.XRANGEPLAIN]}$`);$("TILDELOOSE",`^${N[k.LONETILDE]}${N[k.XRANGEPLAINLOOSE]}$`);$("LONECARET","(?:\\^)");$("CARETTRIM",`(\\s*)${N[k.LONECARET]}\\s+`,!0);Ct.caretTrimReplace="$1^";$("CARET",`^${N[k.LONECARET]}${N[k.XRANGEPLAIN]}$`);$("CARETLOOSE",`^${N[k.LONECARET]}${N[k.XRANGEPLAINLOOSE]}$`);$("COMPARATORLOOSE",`^${N[k.GTLT]}\\s*(${N[k.LOOSEPLAIN]})$|^$`);$("COMPARATOR",`^${N[k.GTLT]}\\s*(${N[k.FULLPLAIN]})$|^$`);$("COMPARATORTRIM",`(\\s*)${N[k.GTLT]}\\s*(${N[k.LOOSEPLAIN]}|${N[k.XRANGEPLAIN]})`,!0);Ct.comparatorTrimReplace="$1$2$3";$("HYPHENRANGE",`^\\s*(${N[k.XRANGEPLAIN]})\\s+-\\s+(${N[k.XRANGEPLAIN]})\\s*$`);$("HYPHENRANGELOOSE",`^\\s*(${N[k.XRANGEPLAINLOOSE]})\\s+-\\s+(${N[k.XRANGEPLAINLOOSE]})\\s*$`);$("STAR","(<|>)?=?\\s*\\*");$("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");$("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var dr=S((w1,Ol)=>{d();var ox=["includePrerelease","loose","rtl"],cx=r=>r?typeof r!="object"?{loose:!0}:ox.filter(t=>r[t]).reduce((t,e)=>(t[e]=!0,t),{}):{};Ol.exports=cx});var Pi=S((A1,Ml)=>{d();var Ll=/^[0-9]+$/,Dl=(r,t)=>{let e=Ll.test(r),s=Ll.test(t);return e&&s&&(r=+r,t=+t),r===t?0:e&&!s?-1:s&&!e?1:r<t?-1:1},lx=(r,t)=>Dl(t,r);Ml.exports={compareIdentifiers:Dl,rcompareIdentifiers:lx}});var ge=S((C1,$l)=>{d();var Ti=fr(),{MAX_LENGTH:Fl,MAX_SAFE_INTEGER:bi}=pr(),{re:Rl,t:Bl}=Gt(),ux=dr(),{compareIdentifiers:Is}=Pi(),$e=class{constructor(t,e){if(e=ux(e),t instanceof $e){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>Fl)throw new TypeError(`version is longer than ${Fl} characters`);Ti("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;let s=t.trim().match(e.loose?Rl[Bl.LOOSE]:Rl[Bl.FULL]);if(!s)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>bi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>bi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>bi||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let n=+i;if(n>=0&&n<bi)return n}return i}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ti("SemVer.compare",this.version,this.options,t),!(t instanceof $e)){if(typeof t=="string"&&t===this.version)return 0;t=new $e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof $e||(t=new $e(t,this.options)),Is(this.major,t.major)||Is(this.minor,t.minor)||Is(this.patch,t.patch)}comparePre(t){if(t instanceof $e||(t=new $e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{let s=this.prerelease[e],i=t.prerelease[e];if(Ti("prerelease compare",e,s,i),s===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(s===void 0)return-1;if(s===i)continue;return Is(s,i)}while(++e)}compareBuild(t){t instanceof $e||(t=new $e(t,this.options));let e=0;do{let s=this.build[e],i=t.build[e];if(Ti("prerelease compare",e,s,i),s===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(s===void 0)return-1;if(s===i)continue;return Is(s,i)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}e&&(Is(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};$l.exports=$e});var Ht=S((I1,Wl)=>{d();var{MAX_LENGTH:hx}=pr(),{re:jl,t:Ul}=Gt(),ql=ge(),px=dr(),fx=(r,t)=>{if(t=px(t),r instanceof ql)return r;if(typeof r!="string"||r.length>hx||!(t.loose?jl[Ul.LOOSE]:jl[Ul.FULL]).test(r))return null;try{return new ql(r,t)}catch{return null}};Wl.exports=fx});var zl=S((N1,Vl)=>{d();var dx=Ht(),mx=(r,t)=>{let e=dx(r,t);return e?e.version:null};Vl.exports=mx});var Hl=S((k1,Gl)=>{d();var yx=Ht(),gx=(r,t)=>{let e=yx(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};Gl.exports=gx});var Jl=S((_1,Xl)=>{d();var Kl=ge(),xx=(r,t,e,s)=>{typeof e=="string"&&(s=e,e=void 0);try{return new Kl(r instanceof Kl?r.version:r,e).inc(t,s).version}catch{return null}};Xl.exports=xx});var We=S((O1,Ql)=>{d();var Yl=ge(),Px=(r,t,e)=>new Yl(r,e).compare(new Yl(t,e));Ql.exports=Px});var Ei=S((L1,Zl)=>{d();var Tx=We(),bx=(r,t,e)=>Tx(r,t,e)===0;Zl.exports=bx});var su=S((D1,tu)=>{d();var eu=Ht(),Ex=Ei(),Sx=(r,t)=>{if(Ex(r,t))return null;{let e=eu(r),s=eu(t),i=e.prerelease.length||s.prerelease.length,n=i?"pre":"",a=i?"prerelease":"";for(let o in e)if((o==="major"||o==="minor"||o==="patch")&&e[o]!==s[o])return n+o;return a}};tu.exports=Sx});var iu=S((M1,ru)=>{d();var vx=ge(),wx=(r,t)=>new vx(r,t).major;ru.exports=wx});var au=S((F1,nu)=>{d();var Ax=ge(),Cx=(r,t)=>new Ax(r,t).minor;nu.exports=Cx});var cu=S((R1,ou)=>{d();var Ix=ge(),Nx=(r,t)=>new Ix(r,t).patch;ou.exports=Nx});var uu=S((B1,lu)=>{d();var kx=Ht(),_x=(r,t)=>{let e=kx(r,t);return e&&e.prerelease.length?e.prerelease:null};lu.exports=_x});var pu=S(($1,hu)=>{d();var Ox=We(),Lx=(r,t,e)=>Ox(t,r,e);hu.exports=Lx});var du=S((j1,fu)=>{d();var Dx=We(),Mx=(r,t)=>Dx(r,t,!0);fu.exports=Mx});var Si=S((U1,yu)=>{d();var mu=ge(),Fx=(r,t,e)=>{let s=new mu(r,e),i=new mu(t,e);return s.compare(i)||s.compareBuild(i)};yu.exports=Fx});var xu=S((q1,gu)=>{d();var Rx=Si(),Bx=(r,t)=>r.sort((e,s)=>Rx(e,s,t));gu.exports=Bx});var Tu=S((W1,Pu)=>{d();var $x=Si(),jx=(r,t)=>r.sort((e,s)=>$x(s,e,t));Pu.exports=jx});var mr=S((V1,bu)=>{d();var Ux=We(),qx=(r,t,e)=>Ux(r,t,e)>0;bu.exports=qx});var vi=S((z1,Eu)=>{d();var Wx=We(),Vx=(r,t,e)=>Wx(r,t,e)<0;Eu.exports=Vx});var Ta=S((G1,Su)=>{d();var zx=We(),Gx=(r,t,e)=>zx(r,t,e)!==0;Su.exports=Gx});var wi=S((H1,vu)=>{d();var Hx=We(),Kx=(r,t,e)=>Hx(r,t,e)>=0;vu.exports=Kx});var Ai=S((K1,wu)=>{d();var Xx=We(),Jx=(r,t,e)=>Xx(r,t,e)<=0;wu.exports=Jx});var ba=S((X1,Au)=>{d();var Yx=Ei(),Qx=Ta(),Zx=mr(),e0=wi(),t0=vi(),s0=Ai(),r0=(r,t,e,s)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return Yx(r,e,s);case"!=":return Qx(r,e,s);case">":return Zx(r,e,s);case">=":return e0(r,e,s);case"<":return t0(r,e,s);case"<=":return s0(r,e,s);default:throw new TypeError(`Invalid operator: ${t}`)}};Au.exports=r0});var Iu=S((J1,Cu)=>{d();var i0=ge(),n0=Ht(),{re:Ci,t:Ii}=Gt(),a0=(r,t)=>{if(r instanceof i0)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(Ci[Ii.COERCE]);else{let s;for(;(s=Ci[Ii.COERCERTL].exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||s.index+s[0].length!==e.index+e[0].length)&&(e=s),Ci[Ii.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;Ci[Ii.COERCERTL].lastIndex=-1}return e===null?null:n0(`${e[2]}.${e[3]||"0"}.${e[4]||"0"}`,t)};Cu.exports=a0});var ku=S((Y1,Nu)=>{"use strict";d();Nu.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Ou=S((Q1,_u)=>{"use strict";d();_u.exports=X;X.Node=Kt;X.create=X;function X(r){var t=this;if(t instanceof X||(t=new X),t.tail=null,t.head=null,t.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var e=0,s=arguments.length;e<s;e++)t.push(arguments[e]);return t}X.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var t=r.next,e=r.prev;return t&&(t.prev=e),e&&(e.next=t),r===this.head&&(this.head=t),r===this.tail&&(this.tail=e),r.list.length--,r.next=null,r.prev=null,r.list=null,t};X.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var t=this.head;r.list=this,r.next=t,t&&(t.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};X.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var t=this.tail;r.list=this,r.prev=t,t&&(t.next=r),this.tail=r,this.head||(this.head=r),this.length++}};X.prototype.push=function(){for(var r=0,t=arguments.length;r<t;r++)c0(this,arguments[r]);return this.length};X.prototype.unshift=function(){for(var r=0,t=arguments.length;r<t;r++)l0(this,arguments[r]);return this.length};X.prototype.pop=function(){if(!!this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};X.prototype.shift=function(){if(!!this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};X.prototype.forEach=function(r,t){t=t||this;for(var e=this.head,s=0;e!==null;s++)r.call(t,e.value,s,this),e=e.next};X.prototype.forEachReverse=function(r,t){t=t||this;for(var e=this.tail,s=this.length-1;e!==null;s--)r.call(t,e.value,s,this),e=e.prev};X.prototype.get=function(r){for(var t=0,e=this.head;e!==null&&t<r;t++)e=e.next;if(t===r&&e!==null)return e.value};X.prototype.getReverse=function(r){for(var t=0,e=this.tail;e!==null&&t<r;t++)e=e.prev;if(t===r&&e!==null)return e.value};X.prototype.map=function(r,t){t=t||this;for(var e=new X,s=this.head;s!==null;)e.push(r.call(t,s.value,this)),s=s.next;return e};X.prototype.mapReverse=function(r,t){t=t||this;for(var e=new X,s=this.tail;s!==null;)e.push(r.call(t,s.value,this)),s=s.prev;return e};X.prototype.reduce=function(r,t){var e,s=this.head;if(arguments.length>1)e=t;else if(this.head)s=this.head.next,e=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;s!==null;i++)e=r(e,s.value,i),s=s.next;return e};X.prototype.reduceReverse=function(r,t){var e,s=this.tail;if(arguments.length>1)e=t;else if(this.tail)s=this.tail.prev,e=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;s!==null;i--)e=r(e,s.value,i),s=s.prev;return e};X.prototype.toArray=function(){for(var r=new Array(this.length),t=0,e=this.head;e!==null;t++)r[t]=e.value,e=e.next;return r};X.prototype.toArrayReverse=function(){for(var r=new Array(this.length),t=0,e=this.tail;e!==null;t++)r[t]=e.value,e=e.prev;return r};X.prototype.slice=function(r,t){t=t||this.length,t<0&&(t+=this.length),r=r||0,r<0&&(r+=this.length);var e=new X;if(t<r||t<0)return e;r<0&&(r=0),t>this.length&&(t=this.length);for(var s=0,i=this.head;i!==null&&s<r;s++)i=i.next;for(;i!==null&&s<t;s++,i=i.next)e.push(i.value);return e};X.prototype.sliceReverse=function(r,t){t=t||this.length,t<0&&(t+=this.length),r=r||0,r<0&&(r+=this.length);var e=new X;if(t<r||t<0)return e;r<0&&(r=0),t>this.length&&(t=this.length);for(var s=this.length,i=this.tail;i!==null&&s>t;s--)i=i.prev;for(;i!==null&&s>r;s--,i=i.prev)e.push(i.value);return e};X.prototype.splice=function(r,t,...e){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var s=0,i=this.head;i!==null&&s<r;s++)i=i.next;for(var n=[],s=0;i&&s<t;s++)n.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var s=0;s<e.length;s++)i=o0(this,i,e[s]);return n};X.prototype.reverse=function(){for(var r=this.head,t=this.tail,e=r;e!==null;e=e.prev){var s=e.prev;e.prev=e.next,e.next=s}return this.head=t,this.tail=r,this};function o0(r,t,e){var s=t===r.head?new Kt(e,null,t,r):new Kt(e,t,t.next,r);return s.next===null&&(r.tail=s),s.prev===null&&(r.head=s),r.length++,s}function c0(r,t){r.tail=new Kt(t,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function l0(r,t){r.head=new Kt(t,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Kt(r,t,e,s){if(!(this instanceof Kt))return new Kt(r,t,e,s);this.list=s,this.value=r,t?(t.next=this,this.prev=t):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}try{ku()(X)}catch{}});var Ru=S((Z1,Fu)=>{"use strict";d();var u0=Ou(),Xt=Symbol("max"),ct=Symbol("length"),Ns=Symbol("lengthCalculator"),gr=Symbol("allowStale"),Jt=Symbol("maxAge"),ot=Symbol("dispose"),Lu=Symbol("noDisposeOnSet"),pe=Symbol("lruList"),He=Symbol("cache"),Mu=Symbol("updateAgeOnGet"),Ea=()=>1,va=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let e=this[Xt]=t.max||1/0,s=t.length||Ea;if(this[Ns]=typeof s!="function"?Ea:s,this[gr]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Jt]=t.maxAge||0,this[ot]=t.dispose,this[Lu]=t.noDisposeOnSet||!1,this[Mu]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Xt]=t||1/0,yr(this)}get max(){return this[Xt]}set allowStale(t){this[gr]=!!t}get allowStale(){return this[gr]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Jt]=t,yr(this)}get maxAge(){return this[Jt]}set lengthCalculator(t){typeof t!="function"&&(t=Ea),t!==this[Ns]&&(this[Ns]=t,this[ct]=0,this[pe].forEach(e=>{e.length=this[Ns](e.value,e.key),this[ct]+=e.length})),yr(this)}get lengthCalculator(){return this[Ns]}get length(){return this[ct]}get itemCount(){return this[pe].length}rforEach(t,e){e=e||this;for(let s=this[pe].tail;s!==null;){let i=s.prev;Du(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[pe].head;s!==null;){let i=s.next;Du(this,t,s,e),s=i}}keys(){return this[pe].toArray().map(t=>t.key)}values(){return this[pe].toArray().map(t=>t.value)}reset(){this[ot]&&this[pe]&&this[pe].length&&this[pe].forEach(t=>this[ot](t.key,t.value)),this[He]=new Map,this[pe]=new u0,this[ct]=0}dump(){return this[pe].map(t=>Ni(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[pe]}set(t,e,s){if(s=s||this[Jt],s&&typeof s!="number")throw new TypeError("maxAge must be a number");let i=s?Date.now():0,n=this[Ns](e,t);if(this[He].has(t)){if(n>this[Xt])return ks(this,this[He].get(t)),!1;let c=this[He].get(t).value;return this[ot]&&(this[Lu]||this[ot](t,c.value)),c.now=i,c.maxAge=s,c.value=e,this[ct]+=n-c.length,c.length=n,this.get(t),yr(this),!0}let a=new wa(t,e,n,i,s);return a.length>this[Xt]?(this[ot]&&this[ot](t,e),!1):(this[ct]+=a.length,this[pe].unshift(a),this[He].set(t,this[pe].head),yr(this),!0)}has(t){if(!this[He].has(t))return!1;let e=this[He].get(t).value;return!Ni(this,e)}get(t){return Sa(this,t,!0)}peek(t){return Sa(this,t,!1)}pop(){let t=this[pe].tail;return t?(ks(this,t),t.value):null}del(t){ks(this,this[He].get(t))}load(t){this.reset();let e=Date.now();for(let s=t.length-1;s>=0;s--){let i=t[s],n=i.e||0;if(n===0)this.set(i.k,i.v);else{let a=n-e;a>0&&this.set(i.k,i.v,a)}}}prune(){this[He].forEach((t,e)=>Sa(this,e,!1))}},Sa=(r,t,e)=>{let s=r[He].get(t);if(s){let i=s.value;if(Ni(r,i)){if(ks(r,s),!r[gr])return}else e&&(r[Mu]&&(s.value.now=Date.now()),r[pe].unshiftNode(s));return i.value}},Ni=(r,t)=>{if(!t||!t.maxAge&&!r[Jt])return!1;let e=Date.now()-t.now;return t.maxAge?e>t.maxAge:r[Jt]&&e>r[Jt]},yr=r=>{if(r[ct]>r[Xt])for(let t=r[pe].tail;r[ct]>r[Xt]&&t!==null;){let e=t.prev;ks(r,t),t=e}},ks=(r,t)=>{if(t){let e=t.value;r[ot]&&r[ot](e.key,e.value),r[ct]-=e.length,r[He].delete(e.key),r[pe].removeNode(t)}},wa=class{constructor(t,e,s,i,n){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=n||0}},Du=(r,t,e,s)=>{let i=e.value;Ni(r,i)&&(ks(r,e),r[gr]||(i=void 0)),i&&t.call(s,i.value,i.key,r)};Fu.exports=va});var Ve=S((eA,Uu)=>{d();var Yt=class{constructor(t,e){if(e=p0(e),t instanceof Yt)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Yt(t.raw,e);if(t instanceof Aa)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(i=>!$u(i[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&g0(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let s=`parseRange:${Object.keys(this.options).join(",")}:${t}`,i=Bu.get(s);if(i)return i;let n=this.options.loose,a=n?Oe[we.HYPHENRANGELOOSE]:Oe[we.HYPHENRANGE];t=t.replace(a,C0(this.options.includePrerelease)),ae("hyphen replace",t),t=t.replace(Oe[we.COMPARATORTRIM],d0),ae("comparator trim",t),t=t.replace(Oe[we.TILDETRIM],m0),t=t.replace(Oe[we.CARETTRIM],y0),t=t.split(/\s+/).join(" ");let o=t.split(" ").map(h=>x0(h,this.options)).join(" ").split(/\s+/).map(h=>A0(h,this.options));n&&(o=o.filter(h=>(ae("loose invalid filter",h,this.options),!!h.match(Oe[we.COMPARATORLOOSE])))),ae("range list",o);let c=new Map,u=o.map(h=>new Aa(h,this.options));for(let h of u){if($u(h))return[h];c.set(h.value,h)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return Bu.set(s,l),l}intersects(t,e){if(!(t instanceof Yt))throw new TypeError("a Range is required");return this.set.some(s=>ju(s,e)&&t.set.some(i=>ju(i,e)&&s.every(n=>i.every(a=>n.intersects(a,e)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new f0(t,this.options)}catch{return!1}for(let e=0;e<this.set.length;e++)if(I0(this.set[e],t,this.options))return!0;return!1}};Uu.exports=Yt;var h0=Ru(),Bu=new h0({max:1e3}),p0=dr(),Aa=xr(),ae=fr(),f0=ge(),{re:Oe,t:we,comparatorTrimReplace:d0,tildeTrimReplace:m0,caretTrimReplace:y0}=Gt(),$u=r=>r.value==="<0.0.0-0",g0=r=>r.value==="",ju=(r,t)=>{let e=!0,s=r.slice(),i=s.pop();for(;e&&s.length;)e=s.every(n=>i.intersects(n,t)),i=s.pop();return e},x0=(r,t)=>(ae("comp",r,t),r=b0(r,t),ae("caret",r),r=P0(r,t),ae("tildes",r),r=S0(r,t),ae("xrange",r),r=w0(r,t),ae("stars",r),r),Ae=r=>!r||r.toLowerCase()==="x"||r==="*",P0=(r,t)=>r.trim().split(/\s+/).map(e=>T0(e,t)).join(" "),T0=(r,t)=>{let e=t.loose?Oe[we.TILDELOOSE]:Oe[we.TILDE];return r.replace(e,(s,i,n,a,o)=>{ae("tilde",r,s,i,n,a,o);let c;return Ae(i)?c="":Ae(n)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Ae(a)?c=`>=${i}.${n}.0 <${i}.${+n+1}.0-0`:o?(ae("replaceTilde pr",o),c=`>=${i}.${n}.${a}-${o} <${i}.${+n+1}.0-0`):c=`>=${i}.${n}.${a} <${i}.${+n+1}.0-0`,ae("tilde return",c),c})},b0=(r,t)=>r.trim().split(/\s+/).map(e=>E0(e,t)).join(" "),E0=(r,t)=>{ae("caret",r,t);let e=t.loose?Oe[we.CARETLOOSE]:Oe[we.CARET],s=t.includePrerelease?"-0":"";return r.replace(e,(i,n,a,o,c)=>{ae("caret",r,i,n,a,o,c);let u;return Ae(n)?u="":Ae(a)?u=`>=${n}.0.0${s} <${+n+1}.0.0-0`:Ae(o)?n==="0"?u=`>=${n}.${a}.0${s} <${n}.${+a+1}.0-0`:u=`>=${n}.${a}.0${s} <${+n+1}.0.0-0`:c?(ae("replaceCaret pr",c),n==="0"?a==="0"?u=`>=${n}.${a}.${o}-${c} <${n}.${a}.${+o+1}-0`:u=`>=${n}.${a}.${o}-${c} <${n}.${+a+1}.0-0`:u=`>=${n}.${a}.${o}-${c} <${+n+1}.0.0-0`):(ae("no pr"),n==="0"?a==="0"?u=`>=${n}.${a}.${o}${s} <${n}.${a}.${+o+1}-0`:u=`>=${n}.${a}.${o}${s} <${n}.${+a+1}.0-0`:u=`>=${n}.${a}.${o} <${+n+1}.0.0-0`),ae("caret return",u),u})},S0=(r,t)=>(ae("replaceXRanges",r,t),r.split(/\s+/).map(e=>v0(e,t)).join(" ")),v0=(r,t)=>{r=r.trim();let e=t.loose?Oe[we.XRANGELOOSE]:Oe[we.XRANGE];return r.replace(e,(s,i,n,a,o,c)=>{ae("xRange",r,s,i,n,a,o,c);let u=Ae(n),l=u||Ae(a),h=l||Ae(o),p=h;return i==="="&&p&&(i=""),c=t.includePrerelease?"-0":"",u?i===">"||i==="<"?s="<0.0.0-0":s="*":i&&p?(l&&(a=0),o=0,i===">"?(i=">=",l?(n=+n+1,a=0,o=0):(a=+a+1,o=0)):i==="<="&&(i="<",l?n=+n+1:a=+a+1),i==="<"&&(c="-0"),s=`${i+n}.${a}.${o}${c}`):l?s=`>=${n}.0.0${c} <${+n+1}.0.0-0`:h&&(s=`>=${n}.${a}.0${c} <${n}.${+a+1}.0-0`),ae("xRange return",s),s})},w0=(r,t)=>(ae("replaceStars",r,t),r.trim().replace(Oe[we.STAR],"")),A0=(r,t)=>(ae("replaceGTE0",r,t),r.trim().replace(Oe[t.includePrerelease?we.GTE0PRE:we.GTE0],"")),C0=r=>(t,e,s,i,n,a,o,c,u,l,h,p,f)=>(Ae(s)?e="":Ae(i)?e=`>=${s}.0.0${r?"-0":""}`:Ae(n)?e=`>=${s}.${i}.0${r?"-0":""}`:a?e=`>=${e}`:e=`>=${e}${r?"-0":""}`,Ae(u)?c="":Ae(l)?c=`<${+u+1}.0.0-0`:Ae(h)?c=`<${u}.${+l+1}.0-0`:p?c=`<=${u}.${l}.${h}-${p}`:r?c=`<${u}.${l}.${+h+1}-0`:c=`<=${c}`,`${e} ${c}`.trim()),I0=(r,t,e)=>{for(let s=0;s<r.length;s++)if(!r[s].test(t))return!1;if(t.prerelease.length&&!e.includePrerelease){for(let s=0;s<r.length;s++)if(ae(r[s].semver),r[s].semver!==Aa.ANY&&r[s].semver.prerelease.length>0){let i=r[s].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var xr=S((tA,Gu)=>{d();var Pr=Symbol("SemVer ANY"),_s=class{static get ANY(){return Pr}constructor(t,e){if(e=N0(e),t instanceof _s){if(t.loose===!!e.loose)return t;t=t.value}Ia("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Pr?this.value="":this.value=this.operator+this.semver.version,Ia("comp",this)}parse(t){let e=this.options.loose?qu[Wu.COMPARATORLOOSE]:qu[Wu.COMPARATOR],s=t.match(e);if(!s)throw new TypeError(`Invalid comparator: ${t}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new Vu(s[2],this.options.loose):this.semver=Pr}toString(){return this.value}test(t){if(Ia("Comparator.test",t,this.options.loose),this.semver===Pr||t===Pr)return!0;if(typeof t=="string")try{t=new Vu(t,this.options)}catch{return!1}return Ca(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof _s))throw new TypeError("a Comparator is required");if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new zu(t.value,e).test(this.value);if(t.operator==="")return t.value===""?!0:new zu(this.value,e).test(t.semver);let s=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),n=this.semver.version===t.semver.version,a=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),o=Ca(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=Ca(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return s||i||n&&a||o||c}};Gu.exports=_s;var N0=dr(),{re:qu,t:Wu}=Gt(),Ca=ba(),Ia=fr(),Vu=ge(),zu=Ve()});var Tr=S((sA,Hu)=>{d();var k0=Ve(),_0=(r,t,e)=>{try{t=new k0(t,e)}catch{return!1}return t.test(r)};Hu.exports=_0});var Xu=S((rA,Ku)=>{d();var O0=Ve(),L0=(r,t)=>new O0(r,t).set.map(e=>e.map(s=>s.value).join(" ").trim().split(" "));Ku.exports=L0});var Yu=S((iA,Ju)=>{d();var D0=ge(),M0=Ve(),F0=(r,t,e)=>{let s=null,i=null,n=null;try{n=new M0(t,e)}catch{return null}return r.forEach(a=>{n.test(a)&&(!s||i.compare(a)===-1)&&(s=a,i=new D0(s,e))}),s};Ju.exports=F0});var Zu=S((nA,Qu)=>{d();var R0=ge(),B0=Ve(),$0=(r,t,e)=>{let s=null,i=null,n=null;try{n=new B0(t,e)}catch{return null}return r.forEach(a=>{n.test(a)&&(!s||i.compare(a)===1)&&(s=a,i=new R0(s,e))}),s};Qu.exports=$0});var sh=S((aA,th)=>{d();var Na=ge(),j0=Ve(),eh=mr(),U0=(r,t)=>{r=new j0(r,t);let e=new Na("0.0.0");if(r.test(e)||(e=new Na("0.0.0-0"),r.test(e)))return e;e=null;for(let s=0;s<r.set.length;++s){let i=r.set[s],n=null;i.forEach(a=>{let o=new Na(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!n||eh(o,n))&&(n=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),n&&(!e||eh(e,n))&&(e=n)}return e&&r.test(e)?e:null};th.exports=U0});var ih=S((oA,rh)=>{d();var q0=Ve(),W0=(r,t)=>{try{return new q0(r,t).range||"*"}catch{return null}};rh.exports=W0});var ki=S((cA,ch)=>{d();var V0=ge(),oh=xr(),{ANY:z0}=oh,G0=Ve(),H0=Tr(),nh=mr(),ah=vi(),K0=Ai(),X0=wi(),J0=(r,t,e,s)=>{r=new V0(r,s),t=new G0(t,s);let i,n,a,o,c;switch(e){case">":i=nh,n=K0,a=ah,o=">",c=">=";break;case"<":i=ah,n=X0,a=nh,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(H0(r,t,s))return!1;for(let u=0;u<t.set.length;++u){let l=t.set[u],h=null,p=null;if(l.forEach(f=>{f.semver===z0&&(f=new oh(">=0.0.0")),h=h||f,p=p||f,i(f.semver,h.semver,s)?h=f:a(f.semver,p.semver,s)&&(p=f)}),h.operator===o||h.operator===c||(!p.operator||p.operator===o)&&n(r,p.semver))return!1;if(p.operator===c&&a(r,p.semver))return!1}return!0};ch.exports=J0});var uh=S((lA,lh)=>{d();var Y0=ki(),Q0=(r,t,e)=>Y0(r,t,">",e);lh.exports=Q0});var ph=S((uA,hh)=>{d();var Z0=ki(),eP=(r,t,e)=>Z0(r,t,"<",e);hh.exports=eP});var mh=S((hA,dh)=>{d();var fh=Ve(),tP=(r,t,e)=>(r=new fh(r,e),t=new fh(t,e),r.intersects(t));dh.exports=tP});var gh=S((pA,yh)=>{d();var sP=Tr(),rP=We();yh.exports=(r,t,e)=>{let s=[],i=null,n=null,a=r.sort((l,h)=>rP(l,h,e));for(let l of a)sP(l,t,e)?(n=l,i||(i=l)):(n&&s.push([i,n]),n=null,i=null);i&&s.push([i,null]);let o=[];for(let[l,h]of s)l===h?o.push(l):!h&&l===a[0]?o.push("*"):h?l===a[0]?o.push(`<=${h}`):o.push(`${l} - ${h}`):o.push(`>=${l}`);let c=o.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t}});var Eh=S((fA,bh)=>{d();var xh=Ve(),_i=xr(),{ANY:ka}=_i,br=Tr(),_a=We(),iP=(r,t,e={})=>{if(r===t)return!0;r=new xh(r,e),t=new xh(t,e);let s=!1;e:for(let i of r.set){for(let n of t.set){let a=nP(i,n,e);if(s=s||a!==null,a)continue e}if(s)return!1}return!0},nP=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===ka){if(t.length===1&&t[0].semver===ka)return!0;e.includePrerelease?r=[new _i(">=0.0.0-0")]:r=[new _i(">=0.0.0")]}if(t.length===1&&t[0].semver===ka){if(e.includePrerelease)return!0;t=[new _i(">=0.0.0")]}let s=new Set,i,n;for(let f of r)f.operator===">"||f.operator===">="?i=Ph(i,f,e):f.operator==="<"||f.operator==="<="?n=Th(n,f,e):s.add(f.semver);if(s.size>1)return null;let a;if(i&&n){if(a=_a(i.semver,n.semver,e),a>0)return null;if(a===0&&(i.operator!==">="||n.operator!=="<="))return null}for(let f of s){if(i&&!br(f,String(i),e)||n&&!br(f,String(n),e))return null;for(let y of t)if(!br(f,String(y),e))return!1;return!0}let o,c,u,l,h=n&&!e.includePrerelease&&n.semver.prerelease.length?n.semver:!1,p=i&&!e.includePrerelease&&i.semver.prerelease.length?i.semver:!1;h&&h.prerelease.length===1&&n.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(let f of t){if(l=l||f.operator===">"||f.operator===">=",u=u||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(o=Ph(i,f,e),o===f&&o!==i)return!1}else if(i.operator===">="&&!br(i.semver,String(f),e))return!1}if(n){if(h&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===h.major&&f.semver.minor===h.minor&&f.semver.patch===h.patch&&(h=!1),f.operator==="<"||f.operator==="<="){if(c=Th(n,f,e),c===f&&c!==n)return!1}else if(n.operator==="<="&&!br(n.semver,String(f),e))return!1}if(!f.operator&&(n||i)&&a!==0)return!1}return!(i&&u&&!n&&a!==0||n&&l&&!i&&a!==0||p||h)},Ph=(r,t,e)=>{if(!r)return t;let s=_a(r.semver,t.semver,e);return s>0?r:s<0||t.operator===">"&&r.operator===">="?t:r},Th=(r,t,e)=>{if(!r)return t;let s=_a(r.semver,t.semver,e);return s<0?r:s>0||t.operator==="<"&&r.operator==="<="?t:r};bh.exports=iP});var vh=S((dA,Sh)=>{d();var Oa=Gt();Sh.exports={re:Oa.re,src:Oa.src,tokens:Oa.t,SEMVER_SPEC_VERSION:pr().SEMVER_SPEC_VERSION,SemVer:ge(),compareIdentifiers:Pi().compareIdentifiers,rcompareIdentifiers:Pi().rcompareIdentifiers,parse:Ht(),valid:zl(),clean:Hl(),inc:Jl(),diff:su(),major:iu(),minor:au(),patch:cu(),prerelease:uu(),compare:We(),rcompare:pu(),compareLoose:du(),compareBuild:Si(),sort:xu(),rsort:Tu(),gt:mr(),lt:vi(),eq:Ei(),neq:Ta(),gte:wi(),lte:Ai(),cmp:ba(),coerce:Iu(),Comparator:xr(),Range:Ve(),satisfies:Tr(),toComparators:Xu(),maxSatisfying:Yu(),minSatisfying:Zu(),minVersion:sh(),validRange:ih(),outside:ki(),gtr:uh(),ltr:ph(),intersects:mh(),simplifyRange:gh(),subset:Eh()}});var Le=S(Da=>{"use strict";d();Da.fromCallback=function(r){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")r.apply(this,t);else return new Promise((e,s)=>{r.call(this,...t,(i,n)=>i!=null?s(i):e(n))})},"name",{value:r.name})};Da.fromPromise=function(r){return Object.defineProperty(function(...t){let e=t[t.length-1];if(typeof e!="function")return r.apply(this,t);r.apply(this,t.slice(0,-1)).then(s=>e(null,s),e)},"name",{value:r.name})}});var Ah=S((gA,wh)=>{d();var It=require("constants"),pP=process.cwd,Oi=null,fP=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Oi||(Oi=pP.call(process)),Oi};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Ma=process.chdir,process.chdir=function(r){Oi=null,Ma.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ma));var Ma;wh.exports=dP;function dP(r){It.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(r),r.lutimes||e(r),r.chown=n(r.chown),r.fchown=n(r.fchown),r.lchown=n(r.lchown),r.chmod=s(r.chmod),r.fchmod=s(r.fchmod),r.lchmod=s(r.lchmod),r.chownSync=a(r.chownSync),r.fchownSync=a(r.fchownSync),r.lchownSync=a(r.lchownSync),r.chmodSync=i(r.chmodSync),r.fchmodSync=i(r.fchmodSync),r.lchmodSync=i(r.lchmodSync),r.stat=o(r.stat),r.fstat=o(r.fstat),r.lstat=o(r.lstat),r.statSync=c(r.statSync),r.fstatSync=c(r.fstatSync),r.lstatSync=c(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(l,h,p){p&&process.nextTick(p)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(l,h,p,f){f&&process.nextTick(f)},r.lchownSync=function(){}),fP==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:function(l){function h(p,f,y){var x=Date.now(),T=0;l(p,f,function E(g){if(g&&(g.code==="EACCES"||g.code==="EPERM")&&Date.now()-x<6e4){setTimeout(function(){r.stat(f,function(b,w){b&&b.code==="ENOENT"?l(p,f,E):y(g)})},T),T<100&&(T+=10);return}y&&y(g)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h}(r.rename)),r.read=typeof r.read!="function"?r.read:function(l){function h(p,f,y,x,T,E){var g;if(E&&typeof E=="function"){var b=0;g=function(w,C,z){if(w&&w.code==="EAGAIN"&&b<10)return b++,l.call(r,p,f,y,x,T,g);E.apply(this,arguments)}}return l.call(r,p,f,y,x,T,g)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h}(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:function(l){return function(h,p,f,y,x){for(var T=0;;)try{return l.call(r,h,p,f,y,x)}catch(E){if(E.code==="EAGAIN"&&T<10){T++;continue}throw E}}}(r.readSync);function t(l){l.lchmod=function(h,p,f){l.open(h,It.O_WRONLY|It.O_SYMLINK,p,function(y,x){if(y){f&&f(y);return}l.fchmod(x,p,function(T){l.close(x,function(E){f&&f(T||E)})})})},l.lchmodSync=function(h,p){var f=l.openSync(h,It.O_WRONLY|It.O_SYMLINK,p),y=!0,x;try{x=l.fchmodSync(f,p),y=!1}finally{if(y)try{l.closeSync(f)}catch{}else l.closeSync(f)}return x}}function e(l){It.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(h,p,f,y){l.open(h,It.O_SYMLINK,function(x,T){if(x){y&&y(x);return}l.futimes(T,p,f,function(E){l.close(T,function(g){y&&y(E||g)})})})},l.lutimesSync=function(h,p,f){var y=l.openSync(h,It.O_SYMLINK),x,T=!0;try{x=l.futimesSync(y,p,f),T=!1}finally{if(T)try{l.closeSync(y)}catch{}else l.closeSync(y)}return x}):l.futimes&&(l.lutimes=function(h,p,f,y){y&&process.nextTick(y)},l.lutimesSync=function(){})}function s(l){return l&&function(h,p,f){return l.call(r,h,p,function(y){u(y)&&(y=null),f&&f.apply(this,arguments)})}}function i(l){return l&&function(h,p){try{return l.call(r,h,p)}catch(f){if(!u(f))throw f}}}function n(l){return l&&function(h,p,f,y){return l.call(r,h,p,f,function(x){u(x)&&(x=null),y&&y.apply(this,arguments)})}}function a(l){return l&&function(h,p,f){try{return l.call(r,h,p,f)}catch(y){if(!u(y))throw y}}}function o(l){return l&&function(h,p,f){typeof p=="function"&&(f=p,p=null);function y(x,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),f&&f.apply(this,arguments)}return p?l.call(r,h,p,y):l.call(r,h,y)}}function c(l){return l&&function(h,p){var f=p?l.call(r,h,p):l.call(r,h);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function u(l){if(!l||l.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(l.code==="EINVAL"||l.code==="EPERM"))}}});var Nh=S((xA,Ih)=>{d();var Ch=require("stream").Stream;Ih.exports=mP;function mP(r){return{ReadStream:t,WriteStream:e};function t(s,i){if(!(this instanceof t))return new t(s,i);Ch.call(this);var n=this;this.path=s,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),o=0,c=a.length;o<c;o++){var u=a[o];this[u]=i[u]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}r.open(this.path,this.flags,this.mode,function(l,h){if(l){n.emit("error",l),n.readable=!1;return}n.fd=h,n.emit("open",h),n._read()})}function e(s,i){if(!(this instanceof e))return new e(s,i);Ch.call(this),this.path=s,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var n=Object.keys(i),a=0,o=n.length;a<o;a++){var c=n[a];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var _h=S((PA,kh)=>{"use strict";d();kh.exports=gP;var yP=Object.getPrototypeOf||function(r){return r.__proto__};function gP(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var t={__proto__:yP(r)};else var t=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}});var Ce=S((TA,Ba)=>{d();var oe=require("fs"),xP=Ah(),PP=Nh(),TP=_h(),Li=require("util"),me,Mi;typeof Symbol=="function"&&typeof Symbol.for=="function"?(me=Symbol.for("graceful-fs.queue"),Mi=Symbol.for("graceful-fs.previous")):(me="___graceful-fs.queue",Mi="___graceful-fs.previous");function bP(){}function Dh(r,t){Object.defineProperty(r,me,{get:function(){return t}})}var Qt=bP;Li.debuglog?Qt=Li.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Qt=function(){var r=Li.format.apply(Li,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)});oe[me]||(Oh=global[me]||[],Dh(oe,Oh),oe.close=function(r){function t(e,s){return r.call(oe,e,function(i){i||Lh(),typeof s=="function"&&s.apply(this,arguments)})}return Object.defineProperty(t,Mi,{value:r}),t}(oe.close),oe.closeSync=function(r){function t(e){r.apply(oe,arguments),Lh()}return Object.defineProperty(t,Mi,{value:r}),t}(oe.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Qt(oe[me]),require("assert").equal(oe[me].length,0)}));var Oh;global[me]||Dh(global,oe[me]);Ba.exports=Fa(TP(oe));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!oe.__patched&&(Ba.exports=Fa(oe),oe.__patched=!0);function Fa(r){xP(r),r.gracefulify=Fa,r.createReadStream=C,r.createWriteStream=z;var t=r.readFile;r.readFile=e;function e(v,B,M){return typeof B=="function"&&(M=B,B=null),J(v,B,M);function J(se,W,G,Q){return t(se,W,function(Z){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?Os([J,[se,W,G],Z,Q||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var s=r.writeFile;r.writeFile=i;function i(v,B,M,J){return typeof M=="function"&&(J=M,M=null),se(v,B,M,J);function se(W,G,Q,Z,le){return s(W,G,Q,function(ee){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Os([se,[W,G,Q,Z],ee,le||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var n=r.appendFile;n&&(r.appendFile=a);function a(v,B,M,J){return typeof M=="function"&&(J=M,M=null),se(v,B,M,J);function se(W,G,Q,Z,le){return n(W,G,Q,function(ee){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Os([se,[W,G,Q,Z],ee,le||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var o=r.copyFile;o&&(r.copyFile=c);function c(v,B,M,J){return typeof M=="function"&&(J=M,M=0),se(v,B,M,J);function se(W,G,Q,Z,le){return o(W,G,Q,function(ee){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Os([se,[W,G,Q,Z],ee,le||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var u=r.readdir;r.readdir=h;var l=/^v[0-5]\./;function h(v,B,M){typeof B=="function"&&(M=B,B=null);var J=l.test(process.version)?function(G,Q,Z,le){return u(G,se(G,Q,Z,le))}:function(G,Q,Z,le){return u(G,Q,se(G,Q,Z,le))};return J(v,B,M);function se(W,G,Q,Z){return function(le,ee){le&&(le.code==="EMFILE"||le.code==="ENFILE")?Os([J,[W,G,Q],le,Z||Date.now(),Date.now()]):(ee&&ee.sort&&ee.sort(),typeof Q=="function"&&Q.call(this,le,ee))}}}if(process.version.substr(0,4)==="v0.8"){var p=PP(r);E=p.ReadStream,b=p.WriteStream}var f=r.ReadStream;f&&(E.prototype=Object.create(f.prototype),E.prototype.open=g);var y=r.WriteStream;y&&(b.prototype=Object.create(y.prototype),b.prototype.open=w),Object.defineProperty(r,"ReadStream",{get:function(){return E},set:function(v){E=v},enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:function(){return b},set:function(v){b=v},enumerable:!0,configurable:!0});var x=E;Object.defineProperty(r,"FileReadStream",{get:function(){return x},set:function(v){x=v},enumerable:!0,configurable:!0});var T=b;Object.defineProperty(r,"FileWriteStream",{get:function(){return T},set:function(v){T=v},enumerable:!0,configurable:!0});function E(v,B){return this instanceof E?(f.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function g(){var v=this;K(v.path,v.flags,v.mode,function(B,M){B?(v.autoClose&&v.destroy(),v.emit("error",B)):(v.fd=M,v.emit("open",M),v.read())})}function b(v,B){return this instanceof b?(y.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function w(){var v=this;K(v.path,v.flags,v.mode,function(B,M){B?(v.destroy(),v.emit("error",B)):(v.fd=M,v.emit("open",M))})}function C(v,B){return new r.ReadStream(v,B)}function z(v,B){return new r.WriteStream(v,B)}var q=r.open;r.open=K;function K(v,B,M,J){return typeof M=="function"&&(J=M,M=null),se(v,B,M,J);function se(W,G,Q,Z,le){return q(W,G,Q,function(ee,ta){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Os([se,[W,G,Q,Z],ee,le||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}return r}function Os(r){Qt("ENQUEUE",r[0].name,r[1]),oe[me].push(r),Ra()}var Di;function Lh(){for(var r=Date.now(),t=0;t<oe[me].length;++t)oe[me][t].length>2&&(oe[me][t][3]=r,oe[me][t][4]=r);Ra()}function Ra(){if(clearTimeout(Di),Di=void 0,oe[me].length!==0){var r=oe[me].shift(),t=r[0],e=r[1],s=r[2],i=r[3],n=r[4];if(i===void 0)Qt("RETRY",t.name,e),t.apply(null,e);else if(Date.now()-i>=6e4){Qt("TIMEOUT",t.name,e);var a=e.pop();typeof a=="function"&&a.call(null,s)}else{var o=Date.now()-n,c=Math.max(n-i,1),u=Math.min(c*1.2,100);o>=u?(Qt("RETRY",t.name,e),t.apply(null,e.concat([i]))):oe[me].push(r)}Di===void 0&&(Di=setTimeout(Ra,0))}}});var Zt=S(Nt=>{"use strict";d();var Mh=Le().fromCallback,De=Ce(),EP=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof De[r]=="function");Object.assign(Nt,De);EP.forEach(r=>{Nt[r]=Mh(De[r])});Nt.exists=function(r,t){return typeof t=="function"?De.exists(r,t):new Promise(e=>De.exists(r,e))};Nt.read=function(r,t,e,s,i,n){return typeof n=="function"?De.read(r,t,e,s,i,n):new Promise((a,o)=>{De.read(r,t,e,s,i,(c,u,l)=>{if(c)return o(c);a({bytesRead:u,buffer:l})})})};Nt.write=function(r,t,...e){return typeof e[e.length-1]=="function"?De.write(r,t,...e):new Promise((s,i)=>{De.write(r,t,...e,(n,a,o)=>{if(n)return i(n);s({bytesWritten:a,buffer:o})})})};typeof De.writev=="function"&&(Nt.writev=function(r,t,...e){return typeof e[e.length-1]=="function"?De.writev(r,t,...e):new Promise((s,i)=>{De.writev(r,t,...e,(n,a,o)=>{if(n)return i(n);s({bytesWritten:a,buffers:o})})})});typeof De.realpath.native=="function"?Nt.realpath.native=Mh(De.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Rh=S((EA,Fh)=>{"use strict";d();var SP=require("path");Fh.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(SP.parse(t).root,""))){let s=new Error(`Path contains invalid characters: ${t}`);throw s.code="EINVAL",s}}});var Uh=S((SA,$a)=>{"use strict";d();var Bh=Zt(),{checkPath:$h}=Rh(),jh=r=>{let t={mode:511};return typeof r=="number"?r:_(_({},t),r).mode};$a.exports.makeDir=async(r,t)=>($h(r),Bh.mkdir(r,{mode:jh(t),recursive:!0}));$a.exports.makeDirSync=(r,t)=>($h(r),Bh.mkdirSync(r,{mode:jh(t),recursive:!0}))});var Ke=S((vA,qh)=>{"use strict";d();var vP=Le().fromPromise,{makeDir:wP,makeDirSync:ja}=Uh(),Ua=vP(wP);qh.exports={mkdirs:Ua,mkdirsSync:ja,mkdirp:Ua,mkdirpSync:ja,ensureDir:Ua,ensureDirSync:ja}});var kt=S((wA,Vh)=>{"use strict";d();var AP=Le().fromPromise,Wh=Zt();function CP(r){return Wh.access(r).then(()=>!0).catch(()=>!1)}Vh.exports={pathExists:AP(CP),pathExistsSync:Wh.existsSync}});var qa=S((AA,zh)=>{"use strict";d();var Ls=Ce();function IP(r,t,e,s){Ls.open(r,"r+",(i,n)=>{if(i)return s(i);Ls.futimes(n,t,e,a=>{Ls.close(n,o=>{s&&s(a||o)})})})}function NP(r,t,e){let s=Ls.openSync(r,"r+");return Ls.futimesSync(s,t,e),Ls.closeSync(s)}zh.exports={utimesMillis:IP,utimesMillisSync:NP}});var es=S((CA,Kh)=>{"use strict";d();var Ds=Zt(),fe=require("path"),kP=require("util");function _P(r,t,e){let s=e.dereference?i=>Ds.stat(i,{bigint:!0}):i=>Ds.lstat(i,{bigint:!0});return Promise.all([s(r),s(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,n])=>({srcStat:i,destStat:n}))}function OP(r,t,e){let s,i=e.dereference?a=>Ds.statSync(a,{bigint:!0}):a=>Ds.lstatSync(a,{bigint:!0}),n=i(r);try{s=i(t)}catch(a){if(a.code==="ENOENT")return{srcStat:n,destStat:null};throw a}return{srcStat:n,destStat:s}}function LP(r,t,e,s,i){kP.callbackify(_P)(r,t,s,(n,a)=>{if(n)return i(n);let{srcStat:o,destStat:c}=a;if(c){if(Er(o,c)){let u=fe.basename(r),l=fe.basename(t);return e==="move"&&u!==l&&u.toLowerCase()===l.toLowerCase()?i(null,{srcStat:o,destStat:c,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(o.isDirectory()&&!c.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${r}'.`));if(!o.isDirectory()&&c.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${r}'.`))}return o.isDirectory()&&Wa(r,t)?i(new Error(Fi(r,t,e))):i(null,{srcStat:o,destStat:c})})}function DP(r,t,e,s){let{srcStat:i,destStat:n}=OP(r,t,s);if(n){if(Er(i,n)){let a=fe.basename(r),o=fe.basename(t);if(e==="move"&&a!==o&&a.toLowerCase()===o.toLowerCase())return{srcStat:i,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${r}'.`);if(!i.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${r}'.`)}if(i.isDirectory()&&Wa(r,t))throw new Error(Fi(r,t,e));return{srcStat:i,destStat:n}}function Gh(r,t,e,s,i){let n=fe.resolve(fe.dirname(r)),a=fe.resolve(fe.dirname(e));if(a===n||a===fe.parse(a).root)return i();Ds.stat(a,{bigint:!0},(o,c)=>o?o.code==="ENOENT"?i():i(o):Er(t,c)?i(new Error(Fi(r,e,s))):Gh(r,t,a,s,i))}function Hh(r,t,e,s){let i=fe.resolve(fe.dirname(r)),n=fe.resolve(fe.dirname(e));if(n===i||n===fe.parse(n).root)return;let a;try{a=Ds.statSync(n,{bigint:!0})}catch(o){if(o.code==="ENOENT")return;throw o}if(Er(t,a))throw new Error(Fi(r,e,s));return Hh(r,t,n,s)}function Er(r,t){return t.ino&&t.dev&&t.ino===r.ino&&t.dev===r.dev}function Wa(r,t){let e=fe.resolve(r).split(fe.sep).filter(i=>i),s=fe.resolve(t).split(fe.sep).filter(i=>i);return e.reduce((i,n,a)=>i&&s[a]===n,!0)}function Fi(r,t,e){return`Cannot ${e} '${r}' to a subdirectory of itself, '${t}'.`}Kh.exports={checkPaths:LP,checkPathsSync:DP,checkParentPaths:Gh,checkParentPathsSync:Hh,isSrcSubdir:Wa,areIdentical:Er}});var sp=S((IA,tp)=>{"use strict";d();var Me=Ce(),Sr=require("path"),MP=Ke().mkdirs,FP=kt().pathExists,RP=qa().utimesMillis,vr=es();function BP(r,t,e,s){typeof e=="function"&&!s?(s=e,e={}):typeof e=="function"&&(e={filter:e}),s=s||function(){},e=e||{},e.clobber="clobber"in e?!!e.clobber:!0,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),vr.checkPaths(r,t,"copy",e,(i,n)=>{if(i)return s(i);let{srcStat:a,destStat:o}=n;vr.checkParentPaths(r,a,t,"copy",c=>c?s(c):e.filter?Yh(Xh,o,r,t,e,s):Xh(o,r,t,e,s))})}function Xh(r,t,e,s,i){let n=Sr.dirname(e);FP(n,(a,o)=>{if(a)return i(a);if(o)return Ri(r,t,e,s,i);MP(n,c=>c?i(c):Ri(r,t,e,s,i))})}function Yh(r,t,e,s,i,n){Promise.resolve(i.filter(e,s)).then(a=>a?r(t,e,s,i,n):n(),a=>n(a))}function $P(r,t,e,s,i){return s.filter?Yh(Ri,r,t,e,s,i):Ri(r,t,e,s,i)}function Ri(r,t,e,s,i){(s.dereference?Me.stat:Me.lstat)(t,(a,o)=>a?i(a):o.isDirectory()?GP(o,r,t,e,s,i):o.isFile()||o.isCharacterDevice()||o.isBlockDevice()?jP(o,r,t,e,s,i):o.isSymbolicLink()?XP(r,t,e,s,i):o.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):o.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function jP(r,t,e,s,i,n){return t?UP(r,e,s,i,n):Qh(r,e,s,i,n)}function UP(r,t,e,s,i){if(s.overwrite)Me.unlink(e,n=>n?i(n):Qh(r,t,e,s,i));else return s.errorOnExist?i(new Error(`'${e}' already exists`)):i()}function Qh(r,t,e,s,i){Me.copyFile(t,e,n=>n?i(n):s.preserveTimestamps?qP(r.mode,t,e,i):Bi(e,r.mode,i))}function qP(r,t,e,s){return WP(r)?VP(e,r,i=>i?s(i):Jh(r,t,e,s)):Jh(r,t,e,s)}function WP(r){return(r&128)===0}function VP(r,t,e){return Bi(r,t|128,e)}function Jh(r,t,e,s){zP(t,e,i=>i?s(i):Bi(e,r,s))}function Bi(r,t,e){return Me.chmod(r,t,e)}function zP(r,t,e){Me.stat(r,(s,i)=>s?e(s):RP(t,i.atime,i.mtime,e))}function GP(r,t,e,s,i,n){return t?Zh(e,s,i,n):HP(r.mode,e,s,i,n)}function HP(r,t,e,s,i){Me.mkdir(e,n=>{if(n)return i(n);Zh(t,e,s,a=>a?i(a):Bi(e,r,i))})}function Zh(r,t,e,s){Me.readdir(r,(i,n)=>i?s(i):ep(n,r,t,e,s))}function ep(r,t,e,s,i){let n=r.pop();return n?KP(r,n,t,e,s,i):i()}function KP(r,t,e,s,i,n){let a=Sr.join(e,t),o=Sr.join(s,t);vr.checkPaths(a,o,"copy",i,(c,u)=>{if(c)return n(c);let{destStat:l}=u;$P(l,a,o,i,h=>h?n(h):ep(r,e,s,i,n))})}function XP(r,t,e,s,i){Me.readlink(t,(n,a)=>{if(n)return i(n);if(s.dereference&&(a=Sr.resolve(process.cwd(),a)),r)Me.readlink(e,(o,c)=>o?o.code==="EINVAL"||o.code==="UNKNOWN"?Me.symlink(a,e,i):i(o):(s.dereference&&(c=Sr.resolve(process.cwd(),c)),vr.isSrcSubdir(a,c)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${c}'.`)):r.isDirectory()&&vr.isSrcSubdir(c,a)?i(new Error(`Cannot overwrite '${c}' with '${a}'.`)):JP(a,e,i)));else return Me.symlink(a,e,i)})}function JP(r,t,e){Me.unlink(t,s=>s?e(s):Me.symlink(r,t,e))}tp.exports=BP});var op=S((NA,ap)=>{"use strict";d();var xe=Ce(),wr=require("path"),YP=Ke().mkdirsSync,QP=qa().utimesMillisSync,Ar=es();function ZP(r,t,e){typeof e=="function"&&(e={filter:e}),e=e||{},e.clobber="clobber"in e?!!e.clobber:!0,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:s,destStat:i}=Ar.checkPathsSync(r,t,"copy",e);return Ar.checkParentPathsSync(r,s,t,"copy"),eT(i,r,t,e)}function eT(r,t,e,s){if(s.filter&&!s.filter(t,e))return;let i=wr.dirname(e);return xe.existsSync(i)||YP(i),rp(r,t,e,s)}function tT(r,t,e,s){if(!(s.filter&&!s.filter(t,e)))return rp(r,t,e,s)}function rp(r,t,e,s){let n=(s.dereference?xe.statSync:xe.lstatSync)(t);if(n.isDirectory())return cT(n,r,t,e,s);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return sT(n,r,t,e,s);if(n.isSymbolicLink())return hT(r,t,e,s);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function sT(r,t,e,s,i){return t?rT(r,e,s,i):ip(r,e,s,i)}function rT(r,t,e,s){if(s.overwrite)return xe.unlinkSync(e),ip(r,t,e,s);if(s.errorOnExist)throw new Error(`'${e}' already exists`)}function ip(r,t,e,s){return xe.copyFileSync(t,e),s.preserveTimestamps&&iT(r.mode,t,e),Va(e,r.mode)}function iT(r,t,e){return nT(r)&&aT(e,r),oT(t,e)}function nT(r){return(r&128)===0}function aT(r,t){return Va(r,t|128)}function Va(r,t){return xe.chmodSync(r,t)}function oT(r,t){let e=xe.statSync(r);return QP(t,e.atime,e.mtime)}function cT(r,t,e,s,i){return t?np(e,s,i):lT(r.mode,e,s,i)}function lT(r,t,e,s){return xe.mkdirSync(e),np(t,e,s),Va(e,r)}function np(r,t,e){xe.readdirSync(r).forEach(s=>uT(s,r,t,e))}function uT(r,t,e,s){let i=wr.join(t,r),n=wr.join(e,r),{destStat:a}=Ar.checkPathsSync(i,n,"copy",s);return tT(a,i,n,s)}function hT(r,t,e,s){let i=xe.readlinkSync(t);if(s.dereference&&(i=wr.resolve(process.cwd(),i)),r){let n;try{n=xe.readlinkSync(e)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return xe.symlinkSync(i,e);throw a}if(s.dereference&&(n=wr.resolve(process.cwd(),n)),Ar.isSrcSubdir(i,n))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${n}'.`);if(xe.statSync(e).isDirectory()&&Ar.isSrcSubdir(n,i))throw new Error(`Cannot overwrite '${n}' with '${i}'.`);return pT(i,e)}else return xe.symlinkSync(i,e)}function pT(r,t){return xe.unlinkSync(t),xe.symlinkSync(r,t)}ap.exports=ZP});var $i=S((kA,cp)=>{"use strict";d();var fT=Le().fromCallback;cp.exports={copy:fT(sp()),copySync:op()}});var gp=S((_A,yp)=>{"use strict";d();var lp=Ce(),fp=require("path"),re=require("assert"),Cr=process.platform==="win32";function dp(r){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(e=>{r[e]=r[e]||lp[e],e=e+"Sync",r[e]=r[e]||lp[e]}),r.maxBusyTries=r.maxBusyTries||3}function za(r,t,e){let s=0;typeof t=="function"&&(e=t,t={}),re(r,"rimraf: missing path"),re.strictEqual(typeof r,"string","rimraf: path should be a string"),re.strictEqual(typeof e,"function","rimraf: callback function required"),re(t,"rimraf: invalid options argument provided"),re.strictEqual(typeof t,"object","rimraf: options should be object"),dp(t),up(r,t,function i(n){if(n){if((n.code==="EBUSY"||n.code==="ENOTEMPTY"||n.code==="EPERM")&&s<t.maxBusyTries){s++;let a=s*100;return setTimeout(()=>up(r,t,i),a)}n.code==="ENOENT"&&(n=null)}e(n)})}function up(r,t,e){re(r),re(t),re(typeof e=="function"),t.lstat(r,(s,i)=>{if(s&&s.code==="ENOENT")return e(null);if(s&&s.code==="EPERM"&&Cr)return hp(r,t,s,e);if(i&&i.isDirectory())return ji(r,t,s,e);t.unlink(r,n=>{if(n){if(n.code==="ENOENT")return e(null);if(n.code==="EPERM")return Cr?hp(r,t,n,e):ji(r,t,n,e);if(n.code==="EISDIR")return ji(r,t,n,e)}return e(n)})})}function hp(r,t,e,s){re(r),re(t),re(typeof s=="function"),t.chmod(r,438,i=>{i?s(i.code==="ENOENT"?null:e):t.stat(r,(n,a)=>{n?s(n.code==="ENOENT"?null:e):a.isDirectory()?ji(r,t,e,s):t.unlink(r,s)})})}function pp(r,t,e){let s;re(r),re(t);try{t.chmodSync(r,438)}catch(i){if(i.code==="ENOENT")return;throw e}try{s=t.statSync(r)}catch(i){if(i.code==="ENOENT")return;throw e}s.isDirectory()?Ui(r,t,e):t.unlinkSync(r)}function ji(r,t,e,s){re(r),re(t),re(typeof s=="function"),t.rmdir(r,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?dT(r,t,s):i&&i.code==="ENOTDIR"?s(e):s(i)})}function dT(r,t,e){re(r),re(t),re(typeof e=="function"),t.readdir(r,(s,i)=>{if(s)return e(s);let n=i.length,a;if(n===0)return t.rmdir(r,e);i.forEach(o=>{za(fp.join(r,o),t,c=>{if(!a){if(c)return e(a=c);--n===0&&t.rmdir(r,e)}})})})}function mp(r,t){let e;t=t||{},dp(t),re(r,"rimraf: missing path"),re.strictEqual(typeof r,"string","rimraf: path should be a string"),re(t,"rimraf: missing options"),re.strictEqual(typeof t,"object","rimraf: options should be object");try{e=t.lstatSync(r)}catch(s){if(s.code==="ENOENT")return;s.code==="EPERM"&&Cr&&pp(r,t,s)}try{e&&e.isDirectory()?Ui(r,t,null):t.unlinkSync(r)}catch(s){if(s.code==="ENOENT")return;if(s.code==="EPERM")return Cr?pp(r,t,s):Ui(r,t,s);if(s.code!=="EISDIR")throw s;Ui(r,t,s)}}function Ui(r,t,e){re(r),re(t);try{t.rmdirSync(r)}catch(s){if(s.code==="ENOTDIR")throw e;if(s.code==="ENOTEMPTY"||s.code==="EEXIST"||s.code==="EPERM")mT(r,t);else if(s.code!=="ENOENT")throw s}}function mT(r,t){if(re(r),re(t),t.readdirSync(r).forEach(e=>mp(fp.join(r,e),t)),Cr){let e=Date.now();do try{return t.rmdirSync(r,t)}catch{}while(Date.now()-e<500)}else return t.rmdirSync(r,t)}yp.exports=za;za.sync=mp});var Ir=S((OA,Pp)=>{"use strict";d();var qi=Ce(),yT=Le().fromCallback,xp=gp();function gT(r,t){if(qi.rm)return qi.rm(r,{recursive:!0,force:!0},t);xp(r,t)}function xT(r){if(qi.rmSync)return qi.rmSync(r,{recursive:!0,force:!0});xp.sync(r)}Pp.exports={remove:yT(gT),removeSync:xT}});var Cp=S((LA,Ap)=>{"use strict";d();var PT=Le().fromPromise,Ep=Zt(),Sp=require("path"),vp=Ke(),wp=Ir(),Tp=PT(async function(t){let e;try{e=await Ep.readdir(t)}catch{return vp.mkdirs(t)}return Promise.all(e.map(s=>wp.remove(Sp.join(t,s))))});function bp(r){let t;try{t=Ep.readdirSync(r)}catch{return vp.mkdirsSync(r)}t.forEach(e=>{e=Sp.join(r,e),wp.removeSync(e)})}Ap.exports={emptyDirSync:bp,emptydirSync:bp,emptyDir:Tp,emptydir:Tp}});var _p=S((DA,kp)=>{"use strict";d();var TT=Le().fromCallback,Ip=require("path"),_t=Ce(),Np=Ke();function bT(r,t){function e(){_t.writeFile(r,"",s=>{if(s)return t(s);t()})}_t.stat(r,(s,i)=>{if(!s&&i.isFile())return t();let n=Ip.dirname(r);_t.stat(n,(a,o)=>{if(a)return a.code==="ENOENT"?Np.mkdirs(n,c=>{if(c)return t(c);e()}):t(a);o.isDirectory()?e():_t.readdir(n,c=>{if(c)return t(c)})})})}function ET(r){let t;try{t=_t.statSync(r)}catch{}if(t&&t.isFile())return;let e=Ip.dirname(r);try{_t.statSync(e).isDirectory()||_t.readdirSync(e)}catch(s){if(s&&s.code==="ENOENT")Np.mkdirsSync(e);else throw s}_t.writeFileSync(r,"")}kp.exports={createFile:TT(bT),createFileSync:ET}});var Fp=S((MA,Mp)=>{"use strict";d();var ST=Le().fromCallback,Op=require("path"),Ot=Ce(),Lp=Ke(),vT=kt().pathExists,{areIdentical:Dp}=es();function wT(r,t,e){function s(i,n){Ot.link(i,n,a=>{if(a)return e(a);e(null)})}Ot.lstat(t,(i,n)=>{Ot.lstat(r,(a,o)=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),e(a);if(n&&Dp(o,n))return e(null);let c=Op.dirname(t);vT(c,(u,l)=>{if(u)return e(u);if(l)return s(r,t);Lp.mkdirs(c,h=>{if(h)return e(h);s(r,t)})})})})}function AT(r,t){let e;try{e=Ot.lstatSync(t)}catch{}try{let n=Ot.lstatSync(r);if(e&&Dp(n,e))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}let s=Op.dirname(t);return Ot.existsSync(s)||Lp.mkdirsSync(s),Ot.linkSync(r,t)}Mp.exports={createLink:ST(wT),createLinkSync:AT}});var Bp=S((FA,Rp)=>{"use strict";d();var Lt=require("path"),Nr=Ce(),CT=kt().pathExists;function IT(r,t,e){if(Lt.isAbsolute(r))return Nr.lstat(r,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),e(s)):e(null,{toCwd:r,toDst:r}));{let s=Lt.dirname(t),i=Lt.join(s,r);return CT(i,(n,a)=>n?e(n):a?e(null,{toCwd:i,toDst:r}):Nr.lstat(r,o=>o?(o.message=o.message.replace("lstat","ensureSymlink"),e(o)):e(null,{toCwd:r,toDst:Lt.relative(s,r)})))}}function NT(r,t){let e;if(Lt.isAbsolute(r)){if(e=Nr.existsSync(r),!e)throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}else{let s=Lt.dirname(t),i=Lt.join(s,r);if(e=Nr.existsSync(i),e)return{toCwd:i,toDst:r};if(e=Nr.existsSync(r),!e)throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:Lt.relative(s,r)}}}Rp.exports={symlinkPaths:IT,symlinkPathsSync:NT}});var Up=S((RA,jp)=>{"use strict";d();var $p=Ce();function kT(r,t,e){if(e=typeof t=="function"?t:e,t=typeof t=="function"?!1:t,t)return e(null,t);$p.lstat(r,(s,i)=>{if(s)return e(null,"file");t=i&&i.isDirectory()?"dir":"file",e(null,t)})}function _T(r,t){let e;if(t)return t;try{e=$p.lstatSync(r)}catch{return"file"}return e&&e.isDirectory()?"dir":"file"}jp.exports={symlinkType:kT,symlinkTypeSync:_T}});var Xp=S((BA,Kp)=>{"use strict";d();var OT=Le().fromCallback,Wp=require("path"),Xe=Zt(),Vp=Ke(),LT=Vp.mkdirs,DT=Vp.mkdirsSync,zp=Bp(),MT=zp.symlinkPaths,FT=zp.symlinkPathsSync,Gp=Up(),RT=Gp.symlinkType,BT=Gp.symlinkTypeSync,$T=kt().pathExists,{areIdentical:Hp}=es();function jT(r,t,e,s){s=typeof e=="function"?e:s,e=typeof e=="function"?!1:e,Xe.lstat(t,(i,n)=>{!i&&n.isSymbolicLink()?Promise.all([Xe.stat(r),Xe.stat(t)]).then(([a,o])=>{if(Hp(a,o))return s(null);qp(r,t,e,s)}):qp(r,t,e,s)})}function qp(r,t,e,s){MT(r,t,(i,n)=>{if(i)return s(i);r=n.toDst,RT(n.toCwd,e,(a,o)=>{if(a)return s(a);let c=Wp.dirname(t);$T(c,(u,l)=>{if(u)return s(u);if(l)return Xe.symlink(r,t,o,s);LT(c,h=>{if(h)return s(h);Xe.symlink(r,t,o,s)})})})})}function UT(r,t,e){let s;try{s=Xe.lstatSync(t)}catch{}if(s&&s.isSymbolicLink()){let o=Xe.statSync(r),c=Xe.statSync(t);if(Hp(o,c))return}let i=FT(r,t);r=i.toDst,e=BT(i.toCwd,e);let n=Wp.dirname(t);return Xe.existsSync(n)||DT(n),Xe.symlinkSync(r,t,e)}Kp.exports={createSymlink:OT(jT),createSymlinkSync:UT}});var rf=S(($A,sf)=>{"use strict";d();var{createFile:Jp,createFileSync:Yp}=_p(),{createLink:Qp,createLinkSync:Zp}=Fp(),{createSymlink:ef,createSymlinkSync:tf}=Xp();sf.exports={createFile:Jp,createFileSync:Yp,ensureFile:Jp,ensureFileSync:Yp,createLink:Qp,createLinkSync:Zp,ensureLink:Qp,ensureLinkSync:Zp,createSymlink:ef,createSymlinkSync:tf,ensureSymlink:ef,ensureSymlinkSync:tf}});var Wi=S((jA,nf)=>{d();function qT(r,{EOL:t=`
`,finalEOL:e=!0,replacer:s=null,spaces:i}={}){let n=e?t:"";return JSON.stringify(r,s,i).replace(/\n/g,t)+n}function WT(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r.replace(/^\uFEFF/,"")}nf.exports={stringify:qT,stripBom:WT}});var lf=S((UA,cf)=>{d();var Ms;try{Ms=Ce()}catch{Ms=require("fs")}var Vi=Le(),{stringify:af,stripBom:of}=Wi();async function VT(r,t={}){typeof t=="string"&&(t={encoding:t});let e=t.fs||Ms,s="throws"in t?t.throws:!0,i=await Vi.fromCallback(e.readFile)(r,t);i=of(i);let n;try{n=JSON.parse(i,t?t.reviver:null)}catch(a){if(s)throw a.message=`${r}: ${a.message}`,a;return null}return n}var zT=Vi.fromPromise(VT);function GT(r,t={}){typeof t=="string"&&(t={encoding:t});let e=t.fs||Ms,s="throws"in t?t.throws:!0;try{let i=e.readFileSync(r,t);return i=of(i),JSON.parse(i,t.reviver)}catch(i){if(s)throw i.message=`${r}: ${i.message}`,i;return null}}async function HT(r,t,e={}){let s=e.fs||Ms,i=af(t,e);await Vi.fromCallback(s.writeFile)(r,i,e)}var KT=Vi.fromPromise(HT);function XT(r,t,e={}){let s=e.fs||Ms,i=af(t,e);return s.writeFileSync(r,i,e)}var JT={readFile:zT,readFileSync:GT,writeFile:KT,writeFileSync:XT};cf.exports=JT});var hf=S((qA,uf)=>{"use strict";d();var zi=lf();uf.exports={readJson:zi.readFile,readJsonSync:zi.readFileSync,writeJson:zi.writeFile,writeJsonSync:zi.writeFileSync}});var Gi=S((WA,df)=>{"use strict";d();var YT=Le().fromCallback,kr=Ce(),pf=require("path"),ff=Ke(),QT=kt().pathExists;function ZT(r,t,e,s){typeof e=="function"&&(s=e,e="utf8");let i=pf.dirname(r);QT(i,(n,a)=>{if(n)return s(n);if(a)return kr.writeFile(r,t,e,s);ff.mkdirs(i,o=>{if(o)return s(o);kr.writeFile(r,t,e,s)})})}function eb(r,...t){let e=pf.dirname(r);if(kr.existsSync(e))return kr.writeFileSync(r,...t);ff.mkdirsSync(e),kr.writeFileSync(r,...t)}df.exports={outputFile:YT(ZT),outputFileSync:eb}});var yf=S((VA,mf)=>{"use strict";d();var{stringify:tb}=Wi(),{outputFile:sb}=Gi();async function rb(r,t,e={}){let s=tb(t,e);await sb(r,s,e)}mf.exports=rb});var xf=S((zA,gf)=>{"use strict";d();var{stringify:ib}=Wi(),{outputFileSync:nb}=Gi();function ab(r,t,e){let s=ib(t,e);nb(r,s,e)}gf.exports=ab});var Tf=S((GA,Pf)=>{"use strict";d();var ob=Le().fromPromise,Ie=hf();Ie.outputJson=ob(yf());Ie.outputJsonSync=xf();Ie.outputJSON=Ie.outputJson;Ie.outputJSONSync=Ie.outputJsonSync;Ie.writeJSON=Ie.writeJson;Ie.writeJSONSync=Ie.writeJsonSync;Ie.readJSON=Ie.readJson;Ie.readJSONSync=Ie.readJsonSync;Pf.exports=Ie});var wf=S((HA,vf)=>{"use strict";d();var cb=Ce(),Ha=require("path"),lb=$i().copy,Sf=Ir().remove,ub=Ke().mkdirp,hb=kt().pathExists,bf=es();function pb(r,t,e,s){typeof e=="function"&&(s=e,e={}),e=e||{};let i=e.overwrite||e.clobber||!1;bf.checkPaths(r,t,"move",e,(n,a)=>{if(n)return s(n);let{srcStat:o,isChangingCase:c=!1}=a;bf.checkParentPaths(r,o,t,"move",u=>{if(u)return s(u);if(fb(t))return Ef(r,t,i,c,s);ub(Ha.dirname(t),l=>l?s(l):Ef(r,t,i,c,s))})})}function fb(r){let t=Ha.dirname(r);return Ha.parse(t).root===t}function Ef(r,t,e,s,i){if(s)return Ga(r,t,e,i);if(e)return Sf(t,n=>n?i(n):Ga(r,t,e,i));hb(t,(n,a)=>n?i(n):a?i(new Error("dest already exists.")):Ga(r,t,e,i))}function Ga(r,t,e,s){cb.rename(r,t,i=>i?i.code!=="EXDEV"?s(i):db(r,t,e,s):s())}function db(r,t,e,s){lb(r,t,{overwrite:e,errorOnExist:!0},n=>n?s(n):Sf(r,s))}vf.exports=pb});var kf=S((KA,Nf)=>{"use strict";d();var Cf=Ce(),Xa=require("path"),mb=$i().copySync,If=Ir().removeSync,yb=Ke().mkdirpSync,Af=es();function gb(r,t,e){e=e||{};let s=e.overwrite||e.clobber||!1,{srcStat:i,isChangingCase:n=!1}=Af.checkPathsSync(r,t,"move",e);return Af.checkParentPathsSync(r,i,t,"move"),xb(t)||yb(Xa.dirname(t)),Pb(r,t,s,n)}function xb(r){let t=Xa.dirname(r);return Xa.parse(t).root===t}function Pb(r,t,e,s){if(s)return Ka(r,t,e);if(e)return If(t),Ka(r,t,e);if(Cf.existsSync(t))throw new Error("dest already exists.");return Ka(r,t,e)}function Ka(r,t,e){try{Cf.renameSync(r,t)}catch(s){if(s.code!=="EXDEV")throw s;return Tb(r,t,e)}}function Tb(r,t,e){return mb(r,t,{overwrite:e,errorOnExist:!0}),If(r)}Nf.exports=gb});var Of=S((XA,_f)=>{"use strict";d();var bb=Le().fromCallback;_f.exports={move:bb(wf()),moveSync:kf()}});var Ja=S((JA,Lf)=>{"use strict";d();Lf.exports=_(_(_(_(_(_(_(_(_(_({},Zt()),$i()),Cp()),rf()),Tf()),Ke()),Of()),Gi()),kt()),Ir())});var Qa=S(Pe=>{"use strict";d();var Df=Pe&&Pe.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator];return t?t.call(r):typeof __values=="function"?__values(r):r[Symbol.iterator]()},Fs=Pe&&Pe.__await||function(r){return this instanceof Fs?(this.v=r,this):new Fs(r)},Eb=Pe&&Pe.__asyncGenerator||function(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=e.apply(r,t||[]),i,n=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){s[p]&&(i[p]=function(f){return new Promise(function(y,x){n.push([p,f,y,x])>1||o(p,f)})})}function o(p,f){try{c(s[p](f))}catch(y){h(n[0][3],y)}}function c(p){p.value instanceof Fs?Promise.resolve(p.value.v).then(u,l):h(n[0][2],p)}function u(p){o("next",p)}function l(p){o("throw",p)}function h(p,f){p(f),n.shift(),n.length&&o(n[0][0],n[0][1])}};Object.defineProperty(Pe,"__esModule",{value:!0});var Sb=require("stream"),Ya=class extends Sb.Readable{constructor(t){super(),this._str=t,this._done=!1}_read(){this._done||(this._done=!0,this.push(this._str),this.push(null))}};Pe.StringStream=Ya;function vb(r,t="utf8"){return new Promise((e,s)=>{r.setEncoding(t);let i="";r.on("data",function(n){i+=n}),r.on("end",function(){e(i)}),r.on("error",function(n){s(n)})})}Pe.readableToString=vb;function wb(r){return Eb(this,arguments,function*(){if(!Symbol.asyncIterator)throw new Error("Current JavaScript engine does not support asynchronous iterables");if(!(Symbol.asyncIterator in r))throw new Error("Parameter is not an asynchronous iterable");let e="";try{for(var s=Df(r),i;i=yield Fs(s.next()),!i.done;){e+=yield Fs(i.value);let c;for(;(c=e.indexOf(`
`))>=0;)yield e.slice(0,c+1),e=e.slice(c+1)}}catch(o){n={error:o}}finally{try{i&&!i.done&&(a=s.return)&&(yield Fs(a.call(s)))}finally{if(n)throw n.error}}e.length>0&&(yield e);var n,a})}Pe.chunksToLinesAsync=wb;async function Ab(r){let t=new Array;try{for(var e=Df(r),s;s=await e.next(),!s.done;){let a=await s.value;t.push(a)}}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=e.return)&&await n.call(e)}finally{if(i)throw i.error}}return t;var i,n}Pe.asyncIterableToArray=Ab;var Cb=/\r?\n$/u;function Ib(r){let t=Cb.exec(r);return t?r.slice(0,t.index):r}Pe.chomp=Ib;function Nb(r,t,e="utf8"){return Mf(r,s=>r.write(t,e,s))}Pe.streamWrite=Nb;function kb(r){return Mf(r,t=>r.end(t))}Pe.streamEnd=kb;function Mf(r,t){return new Promise((e,s)=>{let i=a=>{r.removeListener("error",i),s(a)};r.addListener("error",i),t(()=>{r.removeListener("error",i),e(void 0)})})}function _b(r){return new Promise((t,e)=>{r.once("exit",(s,i)=>{s===0?t(void 0):e(new Error("Exit with error code: "+s))}),r.once("error",s=>{e(s)})})}Pe.onExit=_b});var Yf=S((pC,Jf)=>{d();Jf.exports=function(r,t){for(var e=[],s=0;s<r.length;s++){var i=t(r[s],s);Ub(i)?e.push.apply(e,i):e.push(i)}return e};var Ub=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"}});var sd=S((fC,td)=>{"use strict";d();td.exports=Zf;function Zf(r,t,e){r instanceof RegExp&&(r=Qf(r,e)),t instanceof RegExp&&(t=Qf(t,e));var s=ed(r,t,e);return s&&{start:s[0],end:s[1],pre:e.slice(0,s[0]),body:e.slice(s[0]+r.length,s[1]),post:e.slice(s[1]+t.length)}}function Qf(r,t){var e=t.match(r);return e?e[0]:null}Zf.range=ed;function ed(r,t,e){var s,i,n,a,o,c=e.indexOf(r),u=e.indexOf(t,c+1),l=c;if(c>=0&&u>0){if(r===t)return[c,u];for(s=[],n=e.length;l>=0&&!o;)l==c?(s.push(l),c=e.indexOf(r,l+1)):s.length==1?o=[s.pop(),u]:(i=s.pop(),i<n&&(n=i,a=u),u=e.indexOf(t,l+1)),l=c<u&&c>=0?c:u;s.length&&(o=[n,a])}return o}});var ud=S((dC,ld)=>{d();var qb=Yf(),rd=sd();ld.exports=zb;var id="\0SLASH"+Math.random()+"\0",nd="\0OPEN"+Math.random()+"\0",ro="\0CLOSE"+Math.random()+"\0",ad="\0COMMA"+Math.random()+"\0",od="\0PERIOD"+Math.random()+"\0";function so(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function Wb(r){return r.split("\\\\").join(id).split("\\{").join(nd).split("\\}").join(ro).split("\\,").join(ad).split("\\.").join(od)}function Vb(r){return r.split(id).join("\\").split(nd).join("{").split(ro).join("}").split(ad).join(",").split(od).join(".")}function cd(r){if(!r)return[""];var t=[],e=rd("{","}",r);if(!e)return r.split(",");var s=e.pre,i=e.body,n=e.post,a=s.split(",");a[a.length-1]+="{"+i+"}";var o=cd(n);return n.length&&(a[a.length-1]+=o.shift(),a.push.apply(a,o)),t.push.apply(t,a),t}function zb(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),js(Wb(r),!0).map(Vb)):[]}function Gb(r){return"{"+r+"}"}function Hb(r){return/^-?0\d/.test(r)}function Kb(r,t){return r<=t}function Xb(r,t){return r>=t}function js(r,t){var e=[],s=rd("{","}",r);if(!s||/\$$/.test(s.pre))return[r];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),n=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),a=i||n,o=s.body.indexOf(",")>=0;if(!a&&!o)return s.post.match(/,.*\}/)?(r=s.pre+"{"+s.body+ro+s.post,js(r)):[r];var c;if(a)c=s.body.split(/\.\./);else if(c=cd(s.body),c.length===1&&(c=js(c[0],!1).map(Gb),c.length===1)){var l=s.post.length?js(s.post,!1):[""];return l.map(function(M){return s.pre+c[0]+M})}var u=s.pre,l=s.post.length?js(s.post,!1):[""],h;if(a){var p=so(c[0]),f=so(c[1]),y=Math.max(c[0].length,c[1].length),x=c.length==3?Math.abs(so(c[2])):1,T=Kb,E=f<p;E&&(x*=-1,T=Xb);var g=c.some(Hb);h=[];for(var b=p;T(b,f);b+=x){var w;if(n)w=String.fromCharCode(b),w==="\\"&&(w="");else if(w=String(b),g){var C=y-w.length;if(C>0){var z=new Array(C+1).join("0");b<0?w="-"+z+w.slice(1):w=z+w}}h.push(w)}}else h=qb(c,function(B){return js(B,!1)});for(var q=0;q<h.length;q++)for(var K=0;K<l.length;K++){var v=u+h[q]+l[K];(!t||a||v)&&e.push(v)}return e}});var oo=S((mC,md)=>{d();md.exports=je;je.Minimatch=ye;var Or=function(){try{return require("path")}catch{}}()||{sep:"/"};je.sep=Or.sep;var ao=je.GLOBSTAR=ye.GLOBSTAR={},Jb=ud(),hd={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},io="[^/]",no=io+"*?",Yb="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Qb="(?:(?!(?:\\/|^)\\.).)*?",pd=Zb("().*{}+?[]^$\\!");function Zb(r){return r.split("").reduce(function(t,e){return t[e]=!0,t},{})}var fd=/\/+/;je.filter=eE;function eE(r,t){return t=t||{},function(e,s,i){return je(e,r,t)}}function Mt(r,t){t=t||{};var e={};return Object.keys(r).forEach(function(s){e[s]=r[s]}),Object.keys(t).forEach(function(s){e[s]=t[s]}),e}je.defaults=function(r){if(!r||typeof r!="object"||!Object.keys(r).length)return je;var t=je,e=function(i,n,a){return t(i,n,Mt(r,a))};return e.Minimatch=function(i,n){return new t.Minimatch(i,Mt(r,n))},e.Minimatch.defaults=function(i){return t.defaults(Mt(r,i)).Minimatch},e.filter=function(i,n){return t.filter(i,Mt(r,n))},e.defaults=function(i){return t.defaults(Mt(r,i))},e.makeRe=function(i,n){return t.makeRe(i,Mt(r,n))},e.braceExpand=function(i,n){return t.braceExpand(i,Mt(r,n))},e.match=function(s,i,n){return t.match(s,i,Mt(r,n))},e};ye.defaults=function(r){return je.defaults(r).Minimatch};function je(r,t,e){return sn(t),e||(e={}),!e.nocomment&&t.charAt(0)==="#"?!1:new ye(t,e).match(r)}function ye(r,t){if(!(this instanceof ye))return new ye(r,t);sn(r),t||(t={}),r=r.trim(),!t.allowWindowsEscape&&Or.sep!=="/"&&(r=r.split(Or.sep).join("/")),this.options=t,this.set=[],this.pattern=r,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}ye.prototype.debug=function(){};ye.prototype.make=tE;function tE(){var r=this.pattern,t=this.options;if(!t.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();var e=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,e),e=this.globParts=e.map(function(s){return s.split(fd)}),this.debug(this.pattern,e),e=e.map(function(s,i,n){return s.map(this.parse,this)},this),this.debug(this.pattern,e),e=e.filter(function(s){return s.indexOf(!1)===-1}),this.debug(this.pattern,e),this.set=e}ye.prototype.parseNegate=sE;function sE(){var r=this.pattern,t=!1,e=this.options,s=0;if(!e.nonegate){for(var i=0,n=r.length;i<n&&r.charAt(i)==="!";i++)t=!t,s++;s&&(this.pattern=r.substr(s)),this.negate=t}}je.braceExpand=function(r,t){return dd(r,t)};ye.prototype.braceExpand=dd;function dd(r,t){return t||(this instanceof ye?t=this.options:t={}),r=typeof r>"u"?this.pattern:r,sn(r),t.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:Jb(r)}var rE=1024*64,sn=function(r){if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>rE)throw new TypeError("pattern is too long")};ye.prototype.parse=iE;var tn={};function iE(r,t){sn(r);var e=this.options;if(r==="**")if(e.noglobstar)r="*";else return ao;if(r==="")return"";var s="",i=!!e.nocase,n=!1,a=[],o=[],c,u=!1,l=-1,h=-1,p=r.charAt(0)==="."?"":e.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function y(){if(c){switch(c){case"*":s+=no,i=!0;break;case"?":s+=io,i=!0;break;default:s+="\\"+c;break}f.debug("clearStateChar %j %j",c,s),c=!1}}for(var x=0,T=r.length,E;x<T&&(E=r.charAt(x));x++){if(this.debug("%s	%s %s %j",r,x,s,E),n&&pd[E]){s+="\\"+E,n=!1;continue}switch(E){case"/":return!1;case"\\":y(),n=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,x,s,E),u){this.debug("  in class"),E==="!"&&x===h+1&&(E="^"),s+=E;continue}f.debug("call clearStateChar %j",c),y(),c=E,e.noext&&y();continue;case"(":if(u){s+="(";continue}if(!c){s+="\\(";continue}a.push({type:c,start:x-1,reStart:s.length,open:hd[c].open,close:hd[c].close}),s+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,s),c=!1;continue;case")":if(u||!a.length){s+="\\)";continue}y(),i=!0;var g=a.pop();s+=g.close,g.type==="!"&&o.push(g),g.reEnd=s.length;continue;case"|":if(u||!a.length||n){s+="\\|",n=!1;continue}y(),s+="|";continue;case"[":if(y(),u){s+="\\"+E;continue}u=!0,h=x,l=s.length,s+=E;continue;case"]":if(x===h+1||!u){s+="\\"+E,n=!1;continue}var b=r.substring(h+1,x);try{RegExp("["+b+"]")}catch{var w=this.parse(b,tn);s=s.substr(0,l)+"\\["+w[0]+"\\]",i=i||w[1],u=!1;continue}i=!0,u=!1,s+=E;continue;default:y(),n?n=!1:pd[E]&&!(E==="^"&&u)&&(s+="\\"),s+=E}}for(u&&(b=r.substr(h+1),w=this.parse(b,tn),s=s.substr(0,l)+"\\["+w[0],i=i||w[1]),g=a.pop();g;g=a.pop()){var C=s.slice(g.reStart+g.open.length);this.debug("setting tail",s,g),C=C.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ta,Yc,sa){return sa||(sa="\\"),Yc+Yc+sa+"|"}),this.debug(`tail=%j
   %s`,C,C,g,s);var z=g.type==="*"?no:g.type==="?"?io:"\\"+g.type;i=!0,s=s.slice(0,g.reStart)+z+"\\("+C}y(),n&&(s+="\\\\");var q=!1;switch(s.charAt(0)){case"[":case".":case"(":q=!0}for(var K=o.length-1;K>-1;K--){var v=o[K],B=s.slice(0,v.reStart),M=s.slice(v.reStart,v.reEnd-8),J=s.slice(v.reEnd-8,v.reEnd),se=s.slice(v.reEnd);J+=se;var W=B.split("(").length-1,G=se;for(x=0;x<W;x++)G=G.replace(/\)[+*?]?/,"");se=G;var Q="";se===""&&t!==tn&&(Q="$");var Z=B+M+se+Q+J;s=Z}if(s!==""&&i&&(s="(?=.)"+s),q&&(s=p+s),t===tn)return[s,i];if(!i)return aE(r);var le=e.nocase?"i":"";try{var ee=new RegExp("^"+s+"$",le)}catch{return new RegExp("$.")}return ee._glob=r,ee._src=s,ee}je.makeRe=function(r,t){return new ye(r,t||{}).makeRe()};ye.prototype.makeRe=nE;function nE(){if(this.regexp||this.regexp===!1)return this.regexp;var r=this.set;if(!r.length)return this.regexp=!1,this.regexp;var t=this.options,e=t.noglobstar?no:t.dot?Yb:Qb,s=t.nocase?"i":"",i=r.map(function(n){return n.map(function(a){return a===ao?e:typeof a=="string"?oE(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,s)}catch{this.regexp=!1}return this.regexp}je.match=function(r,t,e){e=e||{};var s=new ye(t,e);return r=r.filter(function(i){return s.match(i)}),s.options.nonull&&!r.length&&r.push(t),r};ye.prototype.match=function(t,e){if(typeof e>"u"&&(e=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;var s=this.options;Or.sep!=="/"&&(t=t.split(Or.sep).join("/")),t=t.split(fd),this.debug(this.pattern,"split",t);var i=this.set;this.debug(this.pattern,"set",i);var n,a;for(a=t.length-1;a>=0&&(n=t[a],!n);a--);for(a=0;a<i.length;a++){var o=i[a],c=t;s.matchBase&&o.length===1&&(c=[n]);var u=this.matchOne(c,o,e);if(u)return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate};ye.prototype.matchOne=function(r,t,e){var s=this.options;this.debug("matchOne",{this:this,file:r,pattern:t}),this.debug("matchOne",r.length,t.length);for(var i=0,n=0,a=r.length,o=t.length;i<a&&n<o;i++,n++){this.debug("matchOne loop");var c=t[n],u=r[i];if(this.debug(t,c,u),c===!1)return!1;if(c===ao){this.debug("GLOBSTAR",[t,c,u]);var l=i,h=n+1;if(h===o){for(this.debug("** at the end");i<a;i++)if(r[i]==="."||r[i]===".."||!s.dot&&r[i].charAt(0)===".")return!1;return!0}for(;l<a;){var p=r[l];if(this.debug(`
globstar while`,r,l,t,h,p),this.matchOne(r.slice(l),t.slice(h),e))return this.debug("globstar found match!",l,a,p),!0;if(p==="."||p===".."||!s.dot&&p.charAt(0)==="."){this.debug("dot detected!",r,l,t,h);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(e&&(this.debug(`
>>> no match, partial?`,r,l,t,h),l===a))}var f;if(typeof c=="string"?(f=u===c,this.debug("string match",c,u,f)):(f=u.match(c),this.debug("pattern match",c,u,f)),!f)return!1}if(i===a&&n===o)return!0;if(i===a)return e;if(n===o)return i===a-1&&r[i]==="";throw new Error("wtf?")};function aE(r){return r.replace(/\\(.)/g,"$1")}function oE(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var nm=S(zr=>{"use strict";d();Object.defineProperty(zr,"__esModule",{value:!0});var yd={sourceType:"script",sourceFilename:void 0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0};function cE(r){if(r&&r.annexB!=null&&r.annexB!==!1)throw new Error("The `annexB` option can only be set to `false`.");let t={};for(let e of Object.keys(yd))t[e]=r&&r[e]!=null?r[e]:yd[e];return t}var us=class{constructor(t,e){this.token=void 0,this.preserveSpace=void 0,this.token=t,this.preserveSpace=!!e}},te={brace:new us("{"),j_oTag:new us("<tag"),j_cTag:new us("</tag"),j_expr:new us("<tag>...</tag>",!0)};te.template=new us("`",!0);var j=!0,A=!0,co=!0,Lr=!0,Ft=!0,lE=!0,hn=class{constructor(t,e={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.rightAssociative=!!e.rightAssociative,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop!=null?e.binop:null,this.updateContext=null}},jo=new Map;function V(r,t={}){t.keyword=r;let e=O(r,t);return jo.set(r,e),e}function ke(r,t){return O(r,{beforeExpr:j,binop:t})}var Br=-1,ht=[],Uo=[],qo=[],Wo=[],Vo=[],zo=[];function O(r,t={}){var e,s,i,n;return++Br,Uo.push(r),qo.push((e=t.binop)!=null?e:-1),Wo.push((s=t.beforeExpr)!=null?s:!1),Vo.push((i=t.startsExpr)!=null?i:!1),zo.push((n=t.prefix)!=null?n:!1),ht.push(new hn(r,t)),Br}function U(r,t={}){var e,s,i,n;return++Br,jo.set(r,Br),Uo.push(r),qo.push((e=t.binop)!=null?e:-1),Wo.push((s=t.beforeExpr)!=null?s:!1),Vo.push((i=t.startsExpr)!=null?i:!1),zo.push((n=t.prefix)!=null?n:!1),ht.push(new hn("name",t)),Br}var uE={bracketL:O("[",{beforeExpr:j,startsExpr:A}),bracketHashL:O("#[",{beforeExpr:j,startsExpr:A}),bracketBarL:O("[|",{beforeExpr:j,startsExpr:A}),bracketR:O("]"),bracketBarR:O("|]"),braceL:O("{",{beforeExpr:j,startsExpr:A}),braceBarL:O("{|",{beforeExpr:j,startsExpr:A}),braceHashL:O("#{",{beforeExpr:j,startsExpr:A}),braceR:O("}"),braceBarR:O("|}"),parenL:O("(",{beforeExpr:j,startsExpr:A}),parenR:O(")"),comma:O(",",{beforeExpr:j}),semi:O(";",{beforeExpr:j}),colon:O(":",{beforeExpr:j}),doubleColon:O("::",{beforeExpr:j}),dot:O("."),question:O("?",{beforeExpr:j}),questionDot:O("?."),arrow:O("=>",{beforeExpr:j}),template:O("template"),ellipsis:O("...",{beforeExpr:j}),backQuote:O("`",{startsExpr:A}),dollarBraceL:O("${",{beforeExpr:j,startsExpr:A}),templateTail:O("...`",{startsExpr:A}),templateNonTail:O("...${",{beforeExpr:j,startsExpr:A}),at:O("@"),hash:O("#",{startsExpr:A}),interpreterDirective:O("#!..."),eq:O("=",{beforeExpr:j,isAssign:Lr}),assign:O("_=",{beforeExpr:j,isAssign:Lr}),slashAssign:O("_=",{beforeExpr:j,isAssign:Lr}),xorAssign:O("_=",{beforeExpr:j,isAssign:Lr}),moduloAssign:O("_=",{beforeExpr:j,isAssign:Lr}),incDec:O("++/--",{prefix:Ft,postfix:lE,startsExpr:A}),bang:O("!",{beforeExpr:j,prefix:Ft,startsExpr:A}),tilde:O("~",{beforeExpr:j,prefix:Ft,startsExpr:A}),doubleCaret:O("^^",{startsExpr:A}),doubleAt:O("@@",{startsExpr:A}),pipeline:ke("|>",0),nullishCoalescing:ke("??",1),logicalOR:ke("||",1),logicalAND:ke("&&",2),bitwiseOR:ke("|",3),bitwiseXOR:ke("^",4),bitwiseAND:ke("&",5),equality:ke("==/!=/===/!==",6),lt:ke("</>/<=/>=",7),gt:ke("</>/<=/>=",7),relational:ke("</>/<=/>=",7),bitShift:ke("<</>>/>>>",8),bitShiftL:ke("<</>>/>>>",8),bitShiftR:ke("<</>>/>>>",8),plusMin:O("+/-",{beforeExpr:j,binop:9,prefix:Ft,startsExpr:A}),modulo:O("%",{binop:10,startsExpr:A}),star:O("*",{binop:10}),slash:ke("/",10),exponent:O("**",{beforeExpr:j,binop:11,rightAssociative:!0}),_in:V("in",{beforeExpr:j,binop:7}),_instanceof:V("instanceof",{beforeExpr:j,binop:7}),_break:V("break"),_case:V("case",{beforeExpr:j}),_catch:V("catch"),_continue:V("continue"),_debugger:V("debugger"),_default:V("default",{beforeExpr:j}),_else:V("else",{beforeExpr:j}),_finally:V("finally"),_function:V("function",{startsExpr:A}),_if:V("if"),_return:V("return",{beforeExpr:j}),_switch:V("switch"),_throw:V("throw",{beforeExpr:j,prefix:Ft,startsExpr:A}),_try:V("try"),_var:V("var"),_const:V("const"),_with:V("with"),_new:V("new",{beforeExpr:j,startsExpr:A}),_this:V("this",{startsExpr:A}),_super:V("super",{startsExpr:A}),_class:V("class",{startsExpr:A}),_extends:V("extends",{beforeExpr:j}),_export:V("export"),_import:V("import",{startsExpr:A}),_null:V("null",{startsExpr:A}),_true:V("true",{startsExpr:A}),_false:V("false",{startsExpr:A}),_typeof:V("typeof",{beforeExpr:j,prefix:Ft,startsExpr:A}),_void:V("void",{beforeExpr:j,prefix:Ft,startsExpr:A}),_delete:V("delete",{beforeExpr:j,prefix:Ft,startsExpr:A}),_do:V("do",{isLoop:co,beforeExpr:j}),_for:V("for",{isLoop:co}),_while:V("while",{isLoop:co}),_as:U("as",{startsExpr:A}),_assert:U("assert",{startsExpr:A}),_async:U("async",{startsExpr:A}),_await:U("await",{startsExpr:A}),_from:U("from",{startsExpr:A}),_get:U("get",{startsExpr:A}),_let:U("let",{startsExpr:A}),_meta:U("meta",{startsExpr:A}),_of:U("of",{startsExpr:A}),_sent:U("sent",{startsExpr:A}),_set:U("set",{startsExpr:A}),_static:U("static",{startsExpr:A}),_using:U("using",{startsExpr:A}),_yield:U("yield",{startsExpr:A}),_asserts:U("asserts",{startsExpr:A}),_checks:U("checks",{startsExpr:A}),_exports:U("exports",{startsExpr:A}),_global:U("global",{startsExpr:A}),_implements:U("implements",{startsExpr:A}),_intrinsic:U("intrinsic",{startsExpr:A}),_infer:U("infer",{startsExpr:A}),_is:U("is",{startsExpr:A}),_mixins:U("mixins",{startsExpr:A}),_proto:U("proto",{startsExpr:A}),_require:U("require",{startsExpr:A}),_satisfies:U("satisfies",{startsExpr:A}),_keyof:U("keyof",{startsExpr:A}),_readonly:U("readonly",{startsExpr:A}),_unique:U("unique",{startsExpr:A}),_abstract:U("abstract",{startsExpr:A}),_declare:U("declare",{startsExpr:A}),_enum:U("enum",{startsExpr:A}),_module:U("module",{startsExpr:A}),_namespace:U("namespace",{startsExpr:A}),_interface:U("interface",{startsExpr:A}),_type:U("type",{startsExpr:A}),_opaque:U("opaque",{startsExpr:A}),name:O("name",{startsExpr:A}),string:O("string",{startsExpr:A}),num:O("num",{startsExpr:A}),bigint:O("bigint",{startsExpr:A}),decimal:O("decimal",{startsExpr:A}),regexp:O("regexp",{startsExpr:A}),privateName:O("#name",{startsExpr:A}),eof:O("eof"),jsxName:O("jsxName"),jsxText:O("jsxText",{beforeExpr:!0}),jsxTagStart:O("jsxTagStart",{startsExpr:!0}),jsxTagEnd:O("jsxTagEnd"),placeholder:O("%%",{startsExpr:!0})};function H(r){return r>=93&&r<=130}function hE(r){return r<=92}function Ze(r){return r>=58&&r<=130}function Ld(r){return r>=58&&r<=134}function pE(r){return Wo[r]}function yo(r){return Vo[r]}function fE(r){return r>=29&&r<=33}function gd(r){return r>=127&&r<=129}function dE(r){return r>=90&&r<=92}function Go(r){return r>=58&&r<=92}function mE(r){return r>=39&&r<=59}function yE(r){return r===34}function gE(r){return zo[r]}function xE(r){return r>=119&&r<=121}function PE(r){return r>=122&&r<=128}function $t(r){return Uo[r]}function on(r){return qo[r]}function TE(r){return r===57}function pn(r){return r>=24&&r<=25}function ut(r){return ht[r]}ht[8].updateContext=r=>{r.pop()},ht[5].updateContext=ht[7].updateContext=ht[23].updateContext=r=>{r.push(te.brace)},ht[22].updateContext=r=>{r[r.length-1]===te.template?r.pop():r.push(te.template)},ht[140].updateContext=r=>{r.push(te.j_expr,te.j_oTag)};function fn(r,t){if(r==null)return{};var e={},s=Object.keys(r),i,n;for(n=0;n<s.length;n++)i=s[n],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}var et=class{constructor(t,e,s){this.line=void 0,this.column=void 0,this.index=void 0,this.line=t,this.column=e,this.index=s}},Js=class{constructor(t,e){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=t,this.end=e}};function _e(r,t){let{line:e,column:s,index:i}=r;return new et(e,s+t,i+t)}var go={SyntaxError:"BABEL_PARSER_SYNTAX_ERROR",SourceTypeModuleError:"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED"},bE=(r,t=r.length-1)=>({get(){return r.reduce((e,s)=>e[s],this)},set(e){r.reduce((s,i,n)=>n===t?s[i]=e:s[i],this)}}),EE=(r,t,e)=>Object.keys(e).map(s=>[s,e[s]]).filter(([,s])=>!!s).map(([s,i])=>[s,typeof i=="function"?{value:i,enumerable:!1}:typeof i.reflect=="string"?Object.assign({},i,bE(i.reflect.split("."))):i]).reduce((s,[i,n])=>Object.defineProperty(s,i,Object.assign({configurable:!0},n)),Object.assign(new r,t)),SE={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code:go.SourceTypeModuleError},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code:go.SourceTypeModuleError}},xd={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},xo=({type:r,prefix:t})=>r==="UpdateExpression"?xd.UpdateExpression[String(t)]:xd[r],vE={AccessorIsGenerator:({kind:r})=>`A ${r}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:r})=>`Missing initializer in ${r} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:r})=>`\`${r}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:r,exportName:t})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${r}' as '${t}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:r})=>`'${r==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:r})=>`Unsyntactic ${r==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportBindingIsString:({importName:r})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${r}" as foo }\`?`,ImportCallArgumentTrailingComma:"Trailing comma is disallowed inside import(...) arguments.",ImportCallArity:({maxArgumentCount:r})=>`\`import()\` requires exactly ${r===1?"one argument":"one or two arguments"}.`,ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:r})=>`Expected number in radix ${r}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:r})=>`Escape sequence in keyword ${r}.`,InvalidIdentifier:({identifierName:r})=>`Invalid identifier ${r}.`,InvalidLhs:({ancestor:r})=>`Invalid left-hand side in ${xo(r)}.`,InvalidLhsBinding:({ancestor:r})=>`Binding invalid left-hand side in ${xo(r)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:r})=>`Unexpected character '${r}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:r})=>`Private name #${r} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:r})=>`Label '${r}' is already declared.`,LetInLexicalBinding:"'let' is not allowed to be used as a name in 'let' or 'const' declarations.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:r})=>`This experimental syntax requires enabling the parser plugin: ${r.map(t=>JSON.stringify(t)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:r})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${r.map(t=>JSON.stringify(t)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:r})=>`Duplicate key "${r}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:r})=>`An export name cannot include a lone surrogate, found '\\u${r.toString(16)}'.`,ModuleExportUndefined:({localName:r})=>`Export '${r}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:r})=>`Private names are only allowed in property accesses (\`obj.#${r}\`) or in \`in\` expressions (\`#${r} in obj\`).`,PrivateNameRedeclaration:({identifierName:r})=>`Duplicate private name #${r}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:r})=>`Unexpected keyword '${r}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:r})=>`Unexpected reserved word '${r}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:r,unexpected:t})=>`Unexpected token${t?` '${t}'.`:""}${r?`, expected "${r}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script`.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:r,onlyValidPropertyName:t})=>`The only valid meta property for ${r} is ${r}.${t}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:r})=>`Identifier '${r}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},wE={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:r})=>`Assigning to '${r}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:r})=>`Binding '${r}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."},AE=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]),CE={PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:r})=>`Invalid topic token ${r}. In order to use ${r} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${r}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:r})=>`Hack-style pipe body cannot be an unparenthesized ${xo({type:r})}; please wrap it in parentheses.`,PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'},IE=["toMessage"],NE=["message"];function kE(r){let{toMessage:t}=r,e=fn(r,IE);return function s({loc:i,details:n}){return EE(SyntaxError,Object.assign({},e,{loc:i}),{clone(a={}){let o=a.loc||{};return s({loc:new et("line"in o?o.line:this.loc.line,"column"in o?o.column:this.loc.column,"index"in o?o.index:this.loc.index),details:Object.assign({},this.details,a.details)})},details:{value:n,enumerable:!1},message:{get(){return`${t(this.details)} (${this.loc.line}:${this.loc.column})`},set(a){Object.defineProperty(this,"message",{value:a})}},pos:{reflect:"loc.index",enumerable:!0},missingPlugin:"missingPlugin"in n&&{reflect:"details.missingPlugin",enumerable:!0}})}}function ft(r,t){if(Array.isArray(r))return s=>ft(s,r[0]);let e={};for(let s of Object.keys(r)){let i=r[s],n=typeof i=="string"?{message:()=>i}:typeof i=="function"?{message:i}:i,{message:a}=n,o=fn(n,NE),c=typeof a=="string"?()=>a:a;e[s]=kE(Object.assign({code:go.SyntaxError,reasonCode:s,toMessage:c},t?{syntaxPlugin:t}:{},o))}return e}var m=Object.assign({},ft(SE),ft(vE),ft(wE),ft`pipelineOperator`(CE)),{defineProperty:_E}=Object,Pd=(r,t)=>_E(r,t,{enumerable:!1,value:r[t]});function Dr(r){return r.loc.start&&Pd(r.loc.start,"index"),r.loc.end&&Pd(r.loc.end,"index"),r}var OE=r=>class extends r{parse(){let e=Dr(super.parse());return this.options.tokens&&(e.tokens=e.tokens.map(Dr)),e}parseRegExpLiteral({pattern:e,flags:s}){let i=null;try{i=new RegExp(e,s)}catch{}let n=this.estreeParseLiteral(i);return n.regex={pattern:e,flags:s},n}parseBigIntLiteral(e){let s;try{s=BigInt(e)}catch{s=null}let i=this.estreeParseLiteral(s);return i.bigint=String(i.value||e),i}parseDecimalLiteral(e){let i=this.estreeParseLiteral(null);return i.decimal=String(i.value||e),i}estreeParseLiteral(e){return this.parseLiteral(e,"Literal")}parseStringLiteral(e){return this.estreeParseLiteral(e)}parseNumericLiteral(e){return this.estreeParseLiteral(e)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(e){return this.estreeParseLiteral(e)}directiveToStmt(e){let s=e.value;delete e.value,s.type="Literal",s.raw=s.extra.raw,s.value=s.extra.expressionValue;let i=e;return i.type="ExpressionStatement",i.expression=s,i.directive=s.extra.rawValue,delete s.extra,i}initFunction(e,s){super.initFunction(e,s),e.expression=!1}checkDeclaration(e){e!=null&&this.isObjectProperty(e)?this.checkDeclaration(e.value):super.checkDeclaration(e)}getObjectOrClassMethodParams(e){return e.value.params}isValidDirective(e){var s;return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&!((s=e.expression.extra)!=null&&s.parenthesized)}parseBlockBody(e,s,i,n,a){super.parseBlockBody(e,s,i,n,a);let o=e.directives.map(c=>this.directiveToStmt(c));e.body=o.concat(e.body),delete e.directives}pushClassMethod(e,s,i,n,a,o){this.parseMethod(s,i,n,a,o,"ClassMethod",!0),s.typeParameters&&(s.value.typeParameters=s.typeParameters,delete s.typeParameters),e.body.push(s)}parsePrivateName(){let e=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(e):e}convertPrivateNameToPrivateIdentifier(e){let s=super.getPrivateNameSV(e);return e=e,delete e.id,e.name=s,e.type="PrivateIdentifier",e}isPrivateName(e){return this.getPluginOption("estree","classFeatures")?e.type==="PrivateIdentifier":super.isPrivateName(e)}getPrivateNameSV(e){return this.getPluginOption("estree","classFeatures")?e.name:super.getPrivateNameSV(e)}parseLiteral(e,s){let i=super.parseLiteral(e,s);return i.raw=i.extra.raw,delete i.extra,i}parseFunctionBody(e,s,i=!1){super.parseFunctionBody(e,s,i),e.expression=e.body.type!=="BlockStatement"}parseMethod(e,s,i,n,a,o,c=!1){let u=this.startNode();return u.kind=e.kind,u=super.parseMethod(u,s,i,n,a,o,c),u.type="FunctionExpression",delete u.kind,e.value=u,o==="ClassPrivateMethod"&&(e.computed=!1),this.finishNode(e,"MethodDefinition")}parseClassProperty(...e){let s=super.parseClassProperty(...e);return this.getPluginOption("estree","classFeatures")&&(s.type="PropertyDefinition"),s}parseClassPrivateProperty(...e){let s=super.parseClassPrivateProperty(...e);return this.getPluginOption("estree","classFeatures")&&(s.type="PropertyDefinition",s.computed=!1),s}parseObjectMethod(e,s,i,n,a){let o=super.parseObjectMethod(e,s,i,n,a);return o&&(o.type="Property",o.kind==="method"&&(o.kind="init"),o.shorthand=!1),o}parseObjectProperty(e,s,i,n){let a=super.parseObjectProperty(e,s,i,n);return a&&(a.kind="init",a.type="Property"),a}isValidLVal(e,s,i){return e==="Property"?"value":super.isValidLVal(e,s,i)}isAssignable(e,s){return e!=null&&this.isObjectProperty(e)?this.isAssignable(e.value,s):super.isAssignable(e,s)}toAssignable(e,s=!1){if(e!=null&&this.isObjectProperty(e)){let{key:i,value:n}=e;this.isPrivateName(i)&&this.classScope.usePrivateName(this.getPrivateNameSV(i),i.loc.start),this.toAssignable(n,s)}else super.toAssignable(e,s)}toAssignableObjectExpressionProp(e,s,i){e.kind==="get"||e.kind==="set"?this.raise(m.PatternHasAccessor,{at:e.key}):e.method?this.raise(m.PatternHasMethod,{at:e.key}):super.toAssignableObjectExpressionProp(e,s,i)}finishCallExpression(e,s){let i=super.finishCallExpression(e,s);if(i.callee.type==="Import"){if(i.type="ImportExpression",i.source=i.arguments[0],this.hasPlugin("importAssertions")){var n;i.attributes=(n=i.arguments[1])!=null?n:null}delete i.arguments,delete i.callee}return i}toReferencedArguments(e){e.type!=="ImportExpression"&&super.toReferencedArguments(e)}parseExport(e,s){let i=this.state.lastTokStartLoc,n=super.parseExport(e,s);switch(n.type){case"ExportAllDeclaration":n.exported=null;break;case"ExportNamedDeclaration":n.specifiers.length===1&&n.specifiers[0].type==="ExportNamespaceSpecifier"&&(n.type="ExportAllDeclaration",n.exported=n.specifiers[0].exported,delete n.specifiers);case"ExportDefaultDeclaration":{var a;let{declaration:o}=n;(o==null?void 0:o.type)==="ClassDeclaration"&&((a=o.decorators)==null?void 0:a.length)>0&&o.start===n.start&&this.resetStartLocation(n,i)}break}return n}parseSubscript(e,s,i,n){let a=super.parseSubscript(e,s,i,n);if(n.optionalChainMember){if((a.type==="OptionalMemberExpression"||a.type==="OptionalCallExpression")&&(a.type=a.type.substring(8)),n.stop){let o=this.startNodeAtNode(a);return o.expression=a,this.finishNode(o,"ChainExpression")}}else(a.type==="MemberExpression"||a.type==="CallExpression")&&(a.optional=!1);return a}hasPropertyAsPrivateName(e){return e.type==="ChainExpression"&&(e=e.expression),super.hasPropertyAsPrivateName(e)}isObjectProperty(e){return e.type==="Property"&&e.kind==="init"&&!e.method}isObjectMethod(e){return e.method||e.kind==="get"||e.kind==="set"}finishNodeAt(e,s,i){return Dr(super.finishNodeAt(e,s,i))}resetStartLocation(e,s){super.resetStartLocation(e,s),Dr(e)}resetEndLocation(e,s=this.state.lastTokEndLoc){super.resetEndLocation(e,s),Dr(e)}},Ho="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",Dd="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",LE=new RegExp("["+Ho+"]"),DE=new RegExp("["+Ho+Dd+"]");Ho=Dd=null;var Md=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],ME=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function Po(r,t){let e=65536;for(let s=0,i=t.length;s<i;s+=2){if(e+=t[s],e>r)return!1;if(e+=t[s+1],e>=r)return!0}return!1}function pt(r){return r<65?r===36:r<=90?!0:r<97?r===95:r<=122?!0:r<=65535?r>=170&&LE.test(String.fromCharCode(r)):Po(r,Md)}function zs(r){return r<48?r===36:r<58?!0:r<65?!1:r<=90?!0:r<97?r===95:r<=122?!0:r<=65535?r>=170&&DE.test(String.fromCharCode(r)):Po(r,Md)||Po(r,ME)}var Ko={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},FE=new Set(Ko.keyword),RE=new Set(Ko.strict),BE=new Set(Ko.strictBind);function Fd(r,t){return t&&r==="await"||r==="enum"}function Rd(r,t){return Fd(r,t)||RE.has(r)}function Bd(r){return BE.has(r)}function $d(r,t){return Rd(r,t)||Bd(r)}function $E(r){return FE.has(r)}function jE(r,t,e){return r===64&&t===64&&pt(e)}var UE=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function qE(r){return UE.has(r)}var qs=0,Ws=1,dt=2,Xo=4,jd=8,dn=16,Ud=32,hs=64,mn=128,Gs=256,rn=Ws|dt|mn|Gs,tt=1,fs=2,qd=4,ps=8,cn=16,Wd=64,yn=128,To=256,bo=512,Jo=1024,Eo=2048,$r=4096,bn=8192,Vd=tt|fs|ps|yn|bn,Hs=tt|0|ps|bn,WE=tt|0|ps|0,gn=tt|0|qd|0,zd=tt|0|cn|0,VE=0|fs|0|yn,zE=0|fs|0|0,Gd=tt|fs|ps|To|bn,Td=0|Jo,Bt=0|Wd,GE=tt|0|0|Wd,HE=Gd|bo,KE=0|Jo,bd=0|fs|0|$r,XE=Eo,xn=4,Yo=2,Qo=1,lo=Yo|Qo,JE=Yo|xn,YE=Qo|xn,QE=Yo,ZE=Qo,uo=0,Ur=class{constructor(t){this.var=new Set,this.lexical=new Set,this.functions=new Set,this.flags=t}},qr=class{constructor(t,e){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=t,this.inModule=e}get inTopLevel(){return(this.currentScope().flags&Ws)>0}get inFunction(){return(this.currentVarScopeFlags()&dt)>0}get allowSuper(){return(this.currentThisScopeFlags()&dn)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&Ud)>0}get inClass(){return(this.currentThisScopeFlags()&hs)>0}get inClassAndNotInNonArrowFunction(){let t=this.currentThisScopeFlags();return(t&hs)>0&&(t&dt)===0}get inStaticBlock(){for(let t=this.scopeStack.length-1;;t--){let{flags:e}=this.scopeStack[t];if(e&mn)return!0;if(e&(rn|hs))return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&dt)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(t){return new Ur(t)}enter(t){this.scopeStack.push(this.createScope(t))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(t){return!!(t.flags&(dt|mn)||!this.parser.inModule&&t.flags&Ws)}declareName(t,e,s){let i=this.currentScope();if(e&ps||e&cn)this.checkRedeclarationInScope(i,t,e,s),e&cn?i.functions.add(t):i.lexical.add(t),e&ps&&this.maybeExportDefined(i,t);else if(e&qd)for(let n=this.scopeStack.length-1;n>=0&&(i=this.scopeStack[n],this.checkRedeclarationInScope(i,t,e,s),i.var.add(t),this.maybeExportDefined(i,t),!(i.flags&rn));--n);this.parser.inModule&&i.flags&Ws&&this.undefinedExports.delete(t)}maybeExportDefined(t,e){this.parser.inModule&&t.flags&Ws&&this.undefinedExports.delete(e)}checkRedeclarationInScope(t,e,s,i){this.isRedeclaredInScope(t,e,s)&&this.parser.raise(m.VarRedeclaration,{at:i,identifierName:e})}isRedeclaredInScope(t,e,s){return s&tt?s&ps?t.lexical.has(e)||t.functions.has(e)||t.var.has(e):s&cn?t.lexical.has(e)||!this.treatFunctionsAsVarInScope(t)&&t.var.has(e):t.lexical.has(e)&&!(t.flags&jd&&t.lexical.values().next().value===e)||!this.treatFunctionsAsVarInScope(t)&&t.functions.has(e):!1}checkLocalExport(t){let{name:e}=t,s=this.scopeStack[0];!s.lexical.has(e)&&!s.var.has(e)&&!s.functions.has(e)&&this.undefinedExports.set(e,t.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let t=this.scopeStack.length-1;;t--){let{flags:e}=this.scopeStack[t];if(e&rn)return e}}currentThisScopeFlags(){for(let t=this.scopeStack.length-1;;t--){let{flags:e}=this.scopeStack[t];if(e&(rn|hs)&&!(e&Xo))return e}}},So=class extends Ur{constructor(...t){super(...t),this.declareFunctions=new Set}},vo=class extends qr{createScope(t){return new So(t)}declareName(t,e,s){let i=this.currentScope();if(e&Eo){this.checkRedeclarationInScope(i,t,e,s),this.maybeExportDefined(i,t),i.declareFunctions.add(t);return}super.declareName(t,e,s)}isRedeclaredInScope(t,e,s){return super.isRedeclaredInScope(t,e,s)?!0:s&Eo?!t.declareFunctions.has(e)&&(t.lexical.has(e)||t.functions.has(e)):!1}checkLocalExport(t){this.scopeStack[0].declareFunctions.has(t.name)||super.checkLocalExport(t)}},wo=class{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}hasPlugin(t){if(typeof t=="string")return this.plugins.has(t);{let[e,s]=t;if(!this.hasPlugin(e))return!1;let i=this.plugins.get(e);for(let n of Object.keys(s))if((i==null?void 0:i[n])!==s[n])return!1;return!0}}getPluginOption(t,e){var s;return(s=this.plugins.get(t))==null?void 0:s[e]}};function Hd(r,t){r.trailingComments===void 0?r.trailingComments=t:r.trailingComments.unshift(...t)}function eS(r,t){r.leadingComments===void 0?r.leadingComments=t:r.leadingComments.unshift(...t)}function Wr(r,t){r.innerComments===void 0?r.innerComments=t:r.innerComments.unshift(...t)}function Mr(r,t,e){let s=null,i=t.length;for(;s===null&&i>0;)s=t[--i];s===null||s.start>e.start?Wr(r,e.comments):Hd(s,e.comments)}var Ao=class extends wo{addComment(t){this.filename&&(t.loc.filename=this.filename),this.state.comments.push(t)}processComment(t){let{commentStack:e}=this.state,s=e.length;if(s===0)return;let i=s-1,n=e[i];n.start===t.end&&(n.leadingNode=t,i--);let{start:a}=t;for(;i>=0;i--){let o=e[i],c=o.end;if(c>a)o.containingNode=t,this.finalizeComment(o),e.splice(i,1);else{c===a&&(o.trailingNode=t);break}}}finalizeComment(t){let{comments:e}=t;if(t.leadingNode!==null||t.trailingNode!==null)t.leadingNode!==null&&Hd(t.leadingNode,e),t.trailingNode!==null&&eS(t.trailingNode,e);else{let{containingNode:s,start:i}=t;if(this.input.charCodeAt(i-1)===44)switch(s.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":Mr(s,s.properties,t);break;case"CallExpression":case"OptionalCallExpression":Mr(s,s.arguments,t);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":Mr(s,s.params,t);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":Mr(s,s.elements,t);break;case"ExportNamedDeclaration":case"ImportDeclaration":Mr(s,s.specifiers,t);break;default:Wr(s,e)}else Wr(s,e)}}finalizeRemainingComments(){let{commentStack:t}=this.state;for(let e=t.length-1;e>=0;e--)this.finalizeComment(t[e]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(t){let{commentStack:e}=this.state,{length:s}=e;if(s===0)return;let i=e[s-1];i.leadingNode===t&&(i.leadingNode=null)}takeSurroundingComments(t,e,s){let{commentStack:i}=this.state,n=i.length;if(n===0)return;let a=n-1;for(;a>=0;a--){let o=i[a],c=o.end;if(o.start===s)o.leadingNode=t;else if(c===e)o.trailingNode=t;else if(c<e)break}}},Zo=/\r\n?|[\n\u2028\u2029]/,nn=new RegExp(Zo.source,"g");function jr(r){switch(r){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}var ho=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ln=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g,Ed=new RegExp("(?=("+ln.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");function tS(r){switch(r){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var Vr=class{constructor(){this.strict=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.maybeInArrowParameters=!1,this.inType=!1,this.noAnonFunctionType=!1,this.hasFlowComment=!1,this.isAmbientContext=!1,this.inAbstractClass=!1,this.inDisallowConditionalTypesContext=!1,this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.soloAwait=!1,this.inFSharpPipelineDirectBody=!1,this.labels=[],this.comments=[],this.commentStack=[],this.pos=0,this.type=137,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.lastTokStart=0,this.context=[te.brace],this.canStartJSXElement=!0,this.containsEsc=!1,this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}init({strictMode:t,sourceType:e,startLine:s,startColumn:i}){this.strict=t===!1?!1:t===!0?!0:e==="module",this.curLine=s,this.lineStart=-i,this.startLoc=this.endLoc=new et(s,i,0)}curPosition(){return new et(this.curLine,this.pos-this.lineStart,this.pos)}clone(t){let e=new Vr,s=Object.keys(this);for(let i=0,n=s.length;i<n;i++){let a=s[i],o=this[a];!t&&Array.isArray(o)&&(o=o.slice()),e[a]=o}return e}},sS=function(t){return t>=48&&t<=57},Sd={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},an={bin:r=>r===48||r===49,oct:r=>r>=48&&r<=55,dec:r=>r>=48&&r<=57,hex:r=>r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102};function vd(r,t,e,s,i,n){let a=e,o=s,c=i,u="",l=null,h=e,{length:p}=t;for(;;){if(e>=p){n.unterminated(a,o,c),u+=t.slice(h,e);break}let f=t.charCodeAt(e);if(rS(r,f,t,e)){u+=t.slice(h,e);break}if(f===92){u+=t.slice(h,e);let y=iS(t,e,s,i,r==="template",n);y.ch===null&&!l?l={pos:e,lineStart:s,curLine:i}:u+=y.ch,{pos:e,lineStart:s,curLine:i}=y,h=e}else f===8232||f===8233?(++e,++i,s=e):f===10||f===13?r==="template"?(u+=t.slice(h,e)+`
`,++e,f===13&&t.charCodeAt(e)===10&&++e,++i,h=s=e):n.unterminated(a,o,c):++e}return{pos:e,str:u,firstInvalidLoc:l,lineStart:s,curLine:i,containsInvalid:!!l}}function rS(r,t,e,s){return r==="template"?t===96||t===36&&e.charCodeAt(s+1)===123:t===(r==="double"?34:39)}function iS(r,t,e,s,i,n){let a=!i;t++;let o=u=>({pos:t,ch:u,lineStart:e,curLine:s}),c=r.charCodeAt(t++);switch(c){case 110:return o(`
`);case 114:return o("\r");case 120:{let u;return{code:u,pos:t}=Co(r,t,e,s,2,!1,a,n),o(u===null?null:String.fromCharCode(u))}case 117:{let u;return{code:u,pos:t}=Xd(r,t,e,s,a,n),o(u===null?null:String.fromCodePoint(u))}case 116:return o("	");case 98:return o("\b");case 118:return o("\v");case 102:return o("\f");case 13:r.charCodeAt(t)===10&&++t;case 10:e=t,++s;case 8232:case 8233:return o("");case 56:case 57:if(i)return o(null);n.strictNumericEscape(t-1,e,s);default:if(c>=48&&c<=55){let u=t-1,h=r.slice(u,t+2).match(/^[0-7]+/)[0],p=parseInt(h,8);p>255&&(h=h.slice(0,-1),p=parseInt(h,8)),t+=h.length-1;let f=r.charCodeAt(t);if(h!=="0"||f===56||f===57){if(i)return o(null);n.strictNumericEscape(u,e,s)}return o(String.fromCharCode(p))}return o(String.fromCharCode(c))}}function Co(r,t,e,s,i,n,a,o){let c=t,u;return{n:u,pos:t}=Kd(r,t,e,s,16,i,n,!1,o,!a),u===null&&(a?o.invalidEscapeSequence(c,e,s):t=c-1),{code:u,pos:t}}function Kd(r,t,e,s,i,n,a,o,c,u){let l=t,h=i===16?Sd.hex:Sd.decBinOct,p=i===16?an.hex:i===10?an.dec:i===8?an.oct:an.bin,f=!1,y=0;for(let x=0,T=n==null?1/0:n;x<T;++x){let E=r.charCodeAt(t),g;if(E===95&&o!=="bail"){let b=r.charCodeAt(t-1),w=r.charCodeAt(t+1);if(o){if(Number.isNaN(w)||!p(w)||h.has(b)||h.has(w)){if(u)return{n:null,pos:t};c.unexpectedNumericSeparator(t,e,s)}}else{if(u)return{n:null,pos:t};c.numericSeparatorInEscapeSequence(t,e,s)}++t;continue}if(E>=97?g=E-97+10:E>=65?g=E-65+10:sS(E)?g=E-48:g=1/0,g>=i){if(g<=9&&u)return{n:null,pos:t};if(g<=9&&c.invalidDigit(t,e,s,i))g=0;else if(a)g=0,f=!0;else break}++t,y=y*i+g}return t===l||n!=null&&t-l!==n||f?{n:null,pos:t}:{n:y,pos:t}}function Xd(r,t,e,s,i,n){let a=r.charCodeAt(t),o;if(a===123){if(++t,{code:o,pos:t}=Co(r,t,e,s,r.indexOf("}",t)-t,!0,i,n),++t,o!==null&&o>1114111)if(i)n.invalidCodePoint(t,e,s);else return{code:null,pos:t}}else({code:o,pos:t}=Co(r,t,e,s,4,!1,i,n));return{code:o,pos:t}}var nS=["at"],aS=["at"];function Fr(r,t,e){return new et(e,r-t,r)}var oS=new Set([103,109,115,105,121,117,100,118]),Qe=class{constructor(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,this.loc=new Js(t.startLoc,t.endLoc)}},Io=class extends Ao{constructor(t,e){super(),this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(s,i,n,a)=>this.options.errorRecovery?(this.raise(m.InvalidDigit,{at:Fr(s,i,n),radix:a}),!0):!1,numericSeparatorInEscapeSequence:this.errorBuilder(m.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(m.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(m.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(m.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(s,i,n)=>{this.recordStrictModeErrors(m.StrictNumericEscape,{at:Fr(s,i,n)})},unterminated:(s,i,n)=>{throw this.raise(m.UnterminatedString,{at:Fr(s-1,i,n)})}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(m.StrictNumericEscape),unterminated:(s,i,n)=>{throw this.raise(m.UnterminatedTemplate,{at:Fr(s,i,n)})}}),this.state=new Vr,this.state.init(t),this.input=e,this.length=e.length,this.isLookahead=!1}pushToken(t){this.tokens.length=this.state.tokensLength,this.tokens.push(t),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new Qe(this.state)),this.state.lastTokStart=this.state.start,this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(t){return this.match(t)?(this.next(),!0):!1}match(t){return this.state.type===t}createLookaheadState(t){return{pos:t.pos,value:null,type:t.type,start:t.start,end:t.end,context:[this.curContext()],inType:t.inType,startLoc:t.startLoc,lastTokEndLoc:t.lastTokEndLoc,curLine:t.curLine,lineStart:t.lineStart,curPosition:t.curPosition}}lookahead(){let t=this.state;this.state=this.createLookaheadState(t),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;let e=this.state;return this.state=t,e}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(t){return ho.lastIndex=t,ho.test(this.input)?ho.lastIndex:t}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(t){return ln.lastIndex=t,ln.test(this.input)?ln.lastIndex:t}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(t){let e=this.input.charCodeAt(t);if((e&64512)===55296&&++t<this.input.length){let s=this.input.charCodeAt(t);(s&64512)===56320&&(e=65536+((e&1023)<<10)+(s&1023))}return e}setStrict(t){this.state.strict=t,t&&(this.state.strictErrors.forEach(([e,s])=>this.raise(e,{at:s})),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length){this.finishToken(137);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(t){let e;this.isLookahead||(e=this.state.curPosition());let s=this.state.pos,i=this.input.indexOf(t,s+2);if(i===-1)throw this.raise(m.UnterminatedComment,{at:this.state.curPosition()});for(this.state.pos=i+t.length,nn.lastIndex=s+2;nn.test(this.input)&&nn.lastIndex<=i;)++this.state.curLine,this.state.lineStart=nn.lastIndex;if(this.isLookahead)return;let n={type:"CommentBlock",value:this.input.slice(s+2,i),start:s,end:i+t.length,loc:new Js(e,this.state.curPosition())};return this.options.tokens&&this.pushToken(n),n}skipLineComment(t){let e=this.state.pos,s;this.isLookahead||(s=this.state.curPosition());let i=this.input.charCodeAt(this.state.pos+=t);if(this.state.pos<this.length)for(;!jr(i)&&++this.state.pos<this.length;)i=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;let n=this.state.pos,a=this.input.slice(e+t,n),o={type:"CommentLine",value:a,start:e,end:n,loc:new Js(s,this.state.curPosition())};return this.options.tokens&&this.pushToken(o),o}skipSpace(){let t=this.state.pos,e=[];e:for(;this.state.pos<this.length;){let s=this.input.charCodeAt(this.state.pos);switch(s){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{let i=this.skipBlockComment("*/");i!==void 0&&(this.addComment(i),this.options.attachComment&&e.push(i));break}case 47:{let i=this.skipLineComment(2);i!==void 0&&(this.addComment(i),this.options.attachComment&&e.push(i));break}default:break e}break;default:if(tS(s))++this.state.pos;else if(s===45&&!this.inModule&&this.options.annexB){let i=this.state.pos;if(this.input.charCodeAt(i+1)===45&&this.input.charCodeAt(i+2)===62&&(t===0||this.state.lineStart>t)){let n=this.skipLineComment(3);n!==void 0&&(this.addComment(n),this.options.attachComment&&e.push(n))}else break e}else if(s===60&&!this.inModule&&this.options.annexB){let i=this.state.pos;if(this.input.charCodeAt(i+1)===33&&this.input.charCodeAt(i+2)===45&&this.input.charCodeAt(i+3)===45){let n=this.skipLineComment(4);n!==void 0&&(this.addComment(n),this.options.attachComment&&e.push(n))}else break e}else break e}}if(e.length>0){let s=this.state.pos,i={start:t,end:s,comments:e,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(i)}}finishToken(t,e){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();let s=this.state.type;this.state.type=t,this.state.value=e,this.isLookahead||this.updateContext(s)}replaceToken(t){this.state.type=t,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;let t=this.state.pos+1,e=this.codePointAtPos(t);if(e>=48&&e<=57)throw this.raise(m.UnexpectedDigitAfterHash,{at:this.state.curPosition()});if(e===123||e===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(e===123?m.RecordExpressionHashIncorrectStartSyntaxType:m.TupleExpressionHashIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,e===123?this.finishToken(7):this.finishToken(1)}else pt(e)?(++this.state.pos,this.finishToken(136,this.readWord1(e))):e===92?(++this.state.pos,this.finishToken(136,this.readWord1())):this.finishOp(27,1)}readToken_dot(){let t=this.input.charCodeAt(this.state.pos+1);if(t>=48&&t<=57){this.readNumber(!0);return}t===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let t=this.input.charCodeAt(this.state.pos+1);if(t!==33)return!1;let e=this.state.pos;for(this.state.pos+=1;!jr(t)&&++this.state.pos<this.length;)t=this.input.charCodeAt(this.state.pos);let s=this.input.slice(e+2,this.state.pos);return this.finishToken(28,s),!0}readToken_mult_modulo(t){let e=t===42?55:54,s=1,i=this.input.charCodeAt(this.state.pos+1);t===42&&i===42&&(s++,i=this.input.charCodeAt(this.state.pos+2),e=57),i===61&&!this.state.inType&&(s++,e=t===37?33:30),this.finishOp(e,s)}readToken_pipe_amp(t){let e=this.input.charCodeAt(this.state.pos+1);if(e===t){this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(30,3):this.finishOp(t===124?41:42,2);return}if(t===124){if(e===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&e===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.RecordExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&e===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.TupleExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(4);return}}if(e===61){this.finishOp(30,2);return}this.finishOp(t===124?43:45,1)}readToken_caret(){let t=this.input.charCodeAt(this.state.pos+1);t===61&&!this.state.inType?this.finishOp(32,2):t===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])?(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94&&this.unexpected()):this.finishOp(44,1)}readToken_atSign(){this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(t){let e=this.input.charCodeAt(this.state.pos+1);if(e===t){this.finishOp(34,2);return}e===61?this.finishOp(30,2):this.finishOp(53,1)}readToken_lt(){let{pos:t}=this.state,e=this.input.charCodeAt(t+1);if(e===60){if(this.input.charCodeAt(t+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(e===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){let{pos:t}=this.state,e=this.input.charCodeAt(t+1);if(e===62){let s=this.input.charCodeAt(t+2)===62?3:2;if(this.input.charCodeAt(t+s)===61){this.finishOp(30,s+1);return}this.finishOp(52,s);return}if(e===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(t){let e=this.input.charCodeAt(this.state.pos+1);if(e===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(t===61&&e===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(t===61?29:35,1)}readToken_question(){let t=this.input.charCodeAt(this.state.pos+1),e=this.input.charCodeAt(this.state.pos+2);t===63?e===61?this.finishOp(30,3):this.finishOp(40,2):t===46&&!(e>=48&&e<=57)?(this.state.pos+=2,this.finishToken(18)):(++this.state.pos,this.finishToken(17))}getTokenFromCode(t){switch(t){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.TupleExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.RecordExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14));return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{let e=this.input.charCodeAt(this.state.pos+1);if(e===120||e===88){this.readRadixNumber(16);return}if(e===111||e===79){this.readRadixNumber(8);return}if(e===98||e===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(t);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(t);return;case 124:case 38:this.readToken_pipe_amp(t);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(t);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(t);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(pt(t)){this.readWord(t);return}}throw this.raise(m.InvalidOrUnexpectedToken,{at:this.state.curPosition(),unexpected:String.fromCodePoint(t)})}finishOp(t,e){let s=this.input.slice(this.state.pos,this.state.pos+e);this.state.pos+=e,this.finishToken(t,s)}readRegexp(){let t=this.state.startLoc,e=this.state.start+1,s,i,{pos:n}=this.state;for(;;++n){if(n>=this.length)throw this.raise(m.UnterminatedRegExp,{at:_e(t,1)});let u=this.input.charCodeAt(n);if(jr(u))throw this.raise(m.UnterminatedRegExp,{at:_e(t,1)});if(s)s=!1;else{if(u===91)i=!0;else if(u===93&&i)i=!1;else if(u===47&&!i)break;s=u===92}}let a=this.input.slice(e,n);++n;let o="",c=()=>_e(t,n+2-e);for(;n<this.length;){let u=this.codePointAtPos(n),l=String.fromCharCode(u);if(oS.has(u))u===118?(this.expectPlugin("regexpUnicodeSets",c()),o.includes("u")&&this.raise(m.IncompatibleRegExpUVFlags,{at:c()})):u===117&&o.includes("v")&&this.raise(m.IncompatibleRegExpUVFlags,{at:c()}),o.includes(l)&&this.raise(m.DuplicateRegExpFlags,{at:c()});else if(zs(u)||u===92)this.raise(m.MalformedRegExpFlags,{at:c()});else break;++n,o+=l}this.state.pos=n,this.finishToken(135,{pattern:a,flags:o})}readInt(t,e,s=!1,i=!0){let{n,pos:a}=Kd(this.input,this.state.pos,this.state.lineStart,this.state.curLine,t,e,s,i,this.errorHandlers_readInt,!1);return this.state.pos=a,n}readRadixNumber(t){let e=this.state.curPosition(),s=!1;this.state.pos+=2;let i=this.readInt(t);i==null&&this.raise(m.InvalidDigit,{at:_e(e,2),radix:t});let n=this.input.charCodeAt(this.state.pos);if(n===110)++this.state.pos,s=!0;else if(n===109)throw this.raise(m.InvalidDecimal,{at:e});if(pt(this.codePointAtPos(this.state.pos)))throw this.raise(m.NumberIdentifier,{at:this.state.curPosition()});if(s){let a=this.input.slice(e.index,this.state.pos).replace(/[_n]/g,"");this.finishToken(133,a);return}this.finishToken(132,i)}readNumber(t){let e=this.state.pos,s=this.state.curPosition(),i=!1,n=!1,a=!1,o=!1,c=!1;!t&&this.readInt(10)===null&&this.raise(m.InvalidNumber,{at:this.state.curPosition()});let u=this.state.pos-e>=2&&this.input.charCodeAt(e)===48;if(u){let f=this.input.slice(e,this.state.pos);if(this.recordStrictModeErrors(m.StrictOctalLiteral,{at:s}),!this.state.strict){let y=f.indexOf("_");y>0&&this.raise(m.ZeroDigitNumericSeparator,{at:_e(s,y)})}c=u&&!/[89]/.test(f)}let l=this.input.charCodeAt(this.state.pos);if(l===46&&!c&&(++this.state.pos,this.readInt(10),i=!0,l=this.input.charCodeAt(this.state.pos)),(l===69||l===101)&&!c&&(l=this.input.charCodeAt(++this.state.pos),(l===43||l===45)&&++this.state.pos,this.readInt(10)===null&&this.raise(m.InvalidOrMissingExponent,{at:s}),i=!0,o=!0,l=this.input.charCodeAt(this.state.pos)),l===110&&((i||u)&&this.raise(m.InvalidBigIntLiteral,{at:s}),++this.state.pos,n=!0),l===109&&(this.expectPlugin("decimal",this.state.curPosition()),(o||u)&&this.raise(m.InvalidDecimal,{at:s}),++this.state.pos,a=!0),pt(this.codePointAtPos(this.state.pos)))throw this.raise(m.NumberIdentifier,{at:this.state.curPosition()});let h=this.input.slice(e,this.state.pos).replace(/[_mn]/g,"");if(n){this.finishToken(133,h);return}if(a){this.finishToken(134,h);return}let p=c?parseInt(h,8):parseFloat(h);this.finishToken(132,p)}readCodePoint(t){let{code:e,pos:s}=Xd(this.input,this.state.pos,this.state.lineStart,this.state.curLine,t,this.errorHandlers_readCodePoint);return this.state.pos=s,e}readString(t){let{str:e,pos:s,curLine:i,lineStart:n}=vd(t===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=s+1,this.state.lineStart=n,this.state.curLine=i,this.finishToken(131,e)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){let t=this.input[this.state.pos],{str:e,firstInvalidLoc:s,pos:i,curLine:n,lineStart:a}=vd("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);this.state.pos=i+1,this.state.lineStart=a,this.state.curLine=n,s&&(this.state.firstInvalidTemplateEscapePos=new et(s.curLine,s.pos-s.lineStart,s.pos)),this.input.codePointAt(i)===96?this.finishToken(24,s?null:t+e+"`"):(this.state.pos++,this.finishToken(25,s?null:t+e+"${"))}recordStrictModeErrors(t,{at:e}){let s=e.index;this.state.strict&&!this.state.strictErrors.has(s)?this.raise(t,{at:e}):this.state.strictErrors.set(s,[t,e])}readWord1(t){this.state.containsEsc=!1;let e="",s=this.state.pos,i=this.state.pos;for(t!==void 0&&(this.state.pos+=t<=65535?1:2);this.state.pos<this.length;){let n=this.codePointAtPos(this.state.pos);if(zs(n))this.state.pos+=n<=65535?1:2;else if(n===92){this.state.containsEsc=!0,e+=this.input.slice(i,this.state.pos);let a=this.state.curPosition(),o=this.state.pos===s?pt:zs;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(m.MissingUnicodeEscape,{at:this.state.curPosition()}),i=this.state.pos-1;continue}++this.state.pos;let c=this.readCodePoint(!0);c!==null&&(o(c)||this.raise(m.EscapedCharNotAnIdentifier,{at:a}),e+=String.fromCodePoint(c)),i=this.state.pos}else break}return e+this.input.slice(i,this.state.pos)}readWord(t){let e=this.readWord1(t),s=jo.get(e);s!==void 0?this.finishToken(s,$t(s)):this.finishToken(130,e)}checkKeywordEscapes(){let{type:t}=this.state;Go(t)&&this.state.containsEsc&&this.raise(m.InvalidEscapedReservedWord,{at:this.state.startLoc,reservedWord:$t(t)})}raise(t,e){let{at:s}=e,i=fn(e,nS),n=s instanceof et?s:s.loc.start,a=t({loc:n,details:i});if(!this.options.errorRecovery)throw a;return this.isLookahead||this.state.errors.push(a),a}raiseOverwrite(t,e){let{at:s}=e,i=fn(e,aS),n=s instanceof et?s:s.loc.start,a=n.index,o=this.state.errors;for(let c=o.length-1;c>=0;c--){let u=o[c];if(u.loc.index===a)return o[c]=t({loc:n,details:i});if(u.loc.index<a)break}return this.raise(t,e)}updateContext(t){}unexpected(t,e){throw this.raise(m.UnexpectedToken,{expected:e?$t(e):null,at:t!=null?t:this.state.startLoc})}expectPlugin(t,e){if(this.hasPlugin(t))return!0;throw this.raise(m.MissingPlugin,{at:e!=null?e:this.state.startLoc,missingPlugin:[t]})}expectOnePlugin(t){if(!t.some(e=>this.hasPlugin(e)))throw this.raise(m.MissingOneOfPlugins,{at:this.state.startLoc,missingPlugin:t})}errorBuilder(t){return(e,s,i)=>{this.raise(t,{at:Fr(e,s,i)})}}},No=class{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}},ko=class{constructor(t){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=t}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new No)}exit(){let t=this.stack.pop(),e=this.current();for(let[s,i]of Array.from(t.undefinedPrivateNames))e?e.undefinedPrivateNames.has(s)||e.undefinedPrivateNames.set(s,i):this.parser.raise(m.InvalidPrivateFieldResolution,{at:i,identifierName:s})}declarePrivateName(t,e,s){let{privateNames:i,loneAccessors:n,undefinedPrivateNames:a}=this.current(),o=i.has(t);if(e&lo){let c=o&&n.get(t);if(c){let u=c&xn,l=e&xn,h=c&lo,p=e&lo;o=h===p||u!==l,o||n.delete(t)}else o||n.set(t,e)}o&&this.parser.raise(m.PrivateNameRedeclaration,{at:s,identifierName:t}),i.add(t),a.delete(t)}usePrivateName(t,e){let s;for(s of this.stack)if(s.privateNames.has(t))return;s?s.undefinedPrivateNames.set(t,e):this.parser.raise(m.InvalidPrivateFieldResolution,{at:e,identifierName:t})}},cS=0,Jd=1,ec=2,Yd=3,Ys=class{constructor(t=cS){this.type=void 0,this.type=t}canBeArrowParameterDeclaration(){return this.type===ec||this.type===Jd}isCertainlyParameterDeclaration(){return this.type===Yd}},Pn=class extends Ys{constructor(t){super(t),this.declarationErrors=new Map}recordDeclarationError(t,{at:e}){let s=e.index;this.declarationErrors.set(s,[t,e])}clearDeclarationError(t){this.declarationErrors.delete(t)}iterateErrors(t){this.declarationErrors.forEach(t)}},_o=class{constructor(t){this.parser=void 0,this.stack=[new Ys],this.parser=t}enter(t){this.stack.push(t)}exit(){this.stack.pop()}recordParameterInitializerError(t,{at:e}){let s={at:e.loc.start},{stack:i}=this,n=i.length-1,a=i[n];for(;!a.isCertainlyParameterDeclaration();){if(a.canBeArrowParameterDeclaration())a.recordDeclarationError(t,s);else return;a=i[--n]}this.parser.raise(t,s)}recordArrowParameterBindingError(t,{at:e}){let{stack:s}=this,i=s[s.length-1],n={at:e.loc.start};if(i.isCertainlyParameterDeclaration())this.parser.raise(t,n);else if(i.canBeArrowParameterDeclaration())i.recordDeclarationError(t,n);else return}recordAsyncArrowParametersError({at:t}){let{stack:e}=this,s=e.length-1,i=e[s];for(;i.canBeArrowParameterDeclaration();)i.type===ec&&i.recordDeclarationError(m.AwaitBindingIdentifier,{at:t}),i=e[--s]}validateAsPattern(){let{stack:t}=this,e=t[t.length-1];!e.canBeArrowParameterDeclaration()||e.iterateErrors(([s,i])=>{this.parser.raise(s,{at:i});let n=t.length-2,a=t[n];for(;a.canBeArrowParameterDeclaration();)a.clearDeclarationError(i.index),a=t[--n]})}};function lS(){return new Ys(Yd)}function uS(){return new Pn(Jd)}function hS(){return new Pn(ec)}function Qd(){return new Ys}var Ks=0,Zd=1,En=2,em=4,Us=8,Oo=class{constructor(){this.stacks=[]}enter(t){this.stacks.push(t)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&En)>0}get hasYield(){return(this.currentFlags()&Zd)>0}get hasReturn(){return(this.currentFlags()&em)>0}get hasIn(){return(this.currentFlags()&Us)>0}};function un(r,t){return(r?En:0)|(t?Zd:0)}var Lo=class extends Io{addExtra(t,e,s,i=!0){if(!t)return;let n=t.extra=t.extra||{};i?n[e]=s:Object.defineProperty(n,e,{enumerable:i,value:s})}isContextual(t){return this.state.type===t&&!this.state.containsEsc}isUnparsedContextual(t,e){let s=t+e.length;if(this.input.slice(t,s)===e){let i=this.input.charCodeAt(s);return!(zs(i)||(i&64512)===55296)}return!1}isLookaheadContextual(t){let e=this.nextTokenStart();return this.isUnparsedContextual(e,t)}eatContextual(t){return this.isContextual(t)?(this.next(),!0):!1}expectContextual(t,e){if(!this.eatContextual(t)){if(e!=null)throw this.raise(e,{at:this.state.startLoc});this.unexpected(null,t)}}canInsertSemicolon(){return this.match(137)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return Zo.test(this.input.slice(this.state.lastTokEndLoc.index,this.state.start))}hasFollowingLineBreak(){return Ed.lastIndex=this.state.end,Ed.test(this.input)}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(t=!0){(t?this.isLineTerminator():this.eat(13))||this.raise(m.MissingSemicolon,{at:this.state.lastTokEndLoc})}expect(t,e){this.eat(t)||this.unexpected(e,t)}tryParse(t,e=this.state.clone()){let s={node:null};try{let i=t((n=null)=>{throw s.node=n,s});if(this.state.errors.length>e.errors.length){let n=this.state;return this.state=e,this.state.tokensLength=n.tokensLength,{node:i,error:n.errors[e.errors.length],thrown:!1,aborted:!1,failState:n}}return{node:i,error:null,thrown:!1,aborted:!1,failState:null}}catch(i){let n=this.state;if(this.state=e,i instanceof SyntaxError)return{node:null,error:i,thrown:!0,aborted:!1,failState:n};if(i===s)return{node:s.node,error:null,thrown:!1,aborted:!0,failState:n};throw i}}checkExpressionErrors(t,e){if(!t)return!1;let{shorthandAssignLoc:s,doubleProtoLoc:i,privateKeyLoc:n,optionalParametersLoc:a}=t,o=!!s||!!i||!!a||!!n;if(!e)return o;s!=null&&this.raise(m.InvalidCoverInitializedName,{at:s}),i!=null&&this.raise(m.DuplicateProto,{at:i}),n!=null&&this.raise(m.UnexpectedPrivateField,{at:n}),a!=null&&this.unexpected(a)}isLiteralPropertyName(){return Ld(this.state.type)}isPrivateName(t){return t.type==="PrivateName"}getPrivateNameSV(t){return t.id.name}hasPropertyAsPrivateName(t){return(t.type==="MemberExpression"||t.type==="OptionalMemberExpression")&&this.isPrivateName(t.property)}isObjectProperty(t){return t.type==="ObjectProperty"}isObjectMethod(t){return t.type==="ObjectMethod"}initializeScopes(t=this.options.sourceType==="module"){let e=this.state.labels;this.state.labels=[];let s=this.exportedIdentifiers;this.exportedIdentifiers=new Set;let i=this.inModule;this.inModule=t;let n=this.scope,a=this.getScopeHandler();this.scope=new a(this,t);let o=this.prodParam;this.prodParam=new Oo;let c=this.classScope;this.classScope=new ko(this);let u=this.expressionScope;return this.expressionScope=new _o(this),()=>{this.state.labels=e,this.exportedIdentifiers=s,this.inModule=i,this.scope=n,this.prodParam=o,this.classScope=c,this.expressionScope=u}}enterInitialScopes(){let t=Ks;this.inModule&&(t|=En),this.scope.enter(Ws),this.prodParam.enter(t)}checkDestructuringPrivate(t){let{privateKeyLoc:e}=t;e!==null&&this.expectPlugin("destructuringPrivate",e)}},Xs=class{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}},Qs=class{constructor(t,e,s){this.type="",this.start=e,this.end=0,this.loc=new Js(s),t!=null&&t.options.ranges&&(this.range=[e,0]),t!=null&&t.filename&&(this.loc.filename=t.filename)}},tc=Qs.prototype;tc.__clone=function(){let r=new Qs(void 0,this.start,this.loc.start),t=Object.keys(this);for(let e=0,s=t.length;e<s;e++){let i=t[e];i!=="leadingComments"&&i!=="trailingComments"&&i!=="innerComments"&&(r[i]=this[i])}return r};function pS(r){return mt(r)}function mt(r){let{type:t,start:e,end:s,loc:i,range:n,extra:a,name:o}=r,c=Object.create(tc);return c.type=t,c.start=e,c.end=s,c.loc=i,c.range=n,c.extra=a,c.name=o,t==="Placeholder"&&(c.expectedNode=r.expectedNode),c}function fS(r){let{type:t,start:e,end:s,loc:i,range:n,extra:a}=r;if(t==="Placeholder")return pS(r);let o=Object.create(tc);return o.type=t,o.start=e,o.end=s,o.loc=i,o.range=n,r.raw!==void 0?o.raw=r.raw:o.extra=a,o.value=r.value,o}var Do=class extends Lo{startNode(){return new Qs(this,this.state.start,this.state.startLoc)}startNodeAt(t){return new Qs(this,t.index,t)}startNodeAtNode(t){return this.startNodeAt(t.loc.start)}finishNode(t,e){return this.finishNodeAt(t,e,this.state.lastTokEndLoc)}finishNodeAt(t,e,s){return t.type=e,t.end=s.index,t.loc.end=s,this.options.ranges&&(t.range[1]=s.index),this.options.attachComment&&this.processComment(t),t}resetStartLocation(t,e){t.start=e.index,t.loc.start=e,this.options.ranges&&(t.range[0]=e.index)}resetEndLocation(t,e=this.state.lastTokEndLoc){t.end=e.index,t.loc.end=e,this.options.ranges&&(t.range[1]=e.index)}resetStartLocationFromNode(t,e){this.resetStartLocation(t,e.loc.start)}},dS=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),D=ft`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:r})=>`Cannot overwrite reserved type ${r}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:r,enumName:t})=>`Boolean enum members need to be initialized. Use either \`${r} = true,\` or \`${r} = false,\` in enum \`${t}\`.`,EnumDuplicateMemberName:({memberName:r,enumName:t})=>`Enum member names need to be unique, but the name \`${r}\` has already been used before in enum \`${t}\`.`,EnumInconsistentMemberValues:({enumName:r})=>`Enum \`${r}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:r,enumName:t})=>`Enum type \`${r}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${t}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:r})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${r}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:r,memberName:t,explicitType:e})=>`Enum \`${r}\` has type \`${e}\`, so the initializer of \`${t}\` needs to be a ${e} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:r,memberName:t})=>`Symbol enum members cannot be initialized. Use \`${t},\` in enum \`${r}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:r,memberName:t})=>`The enum member initializer for \`${t}\` needs to be a literal (either a boolean, number, or string) in enum \`${r}\`.`,EnumInvalidMemberName:({enumName:r,memberName:t,suggestion:e})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${t}\`, consider using \`${e}\`, in enum \`${r}\`.`,EnumNumberMemberNotInitialized:({enumName:r,memberName:t})=>`Number enum members need to be initialized, e.g. \`${t} = 1\` in enum \`${r}\`.`,EnumStringMemberInconsistentlyInitailized:({enumName:r})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${r}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:r})=>`Unexpected reserved type ${r}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:r,suggestion:t})=>`\`declare export ${r}\` is not supported. Use \`${t}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function mS(r){return r.type==="DeclareExportAllDeclaration"||r.type==="DeclareExportDeclaration"&&(!r.declaration||r.declaration.type!=="TypeAlias"&&r.declaration.type!=="InterfaceDeclaration")}function po(r){return r.importKind==="type"||r.importKind==="typeof"}function wd(r){return Ze(r)&&r!==97}var yS={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function gS(r,t){let e=[],s=[];for(let i=0;i<r.length;i++)(t(r[i],i,r)?e:s).push(r[i]);return[e,s]}var xS=/\*?\s*@((?:no)?flow)\b/,PS=r=>class extends r{constructor(...e){super(...e),this.flowPragma=void 0}getScopeHandler(){return vo}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(e,s){e!==131&&e!==13&&e!==28&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(e,s)}addComment(e){if(this.flowPragma===void 0){let s=xS.exec(e.value);if(s)if(s[1]==="flow")this.flowPragma="flow";else if(s[1]==="noflow")this.flowPragma="noflow";else throw new Error("Unexpected flow pragma")}super.addComment(e)}flowParseTypeInitialiser(e){let s=this.state.inType;this.state.inType=!0,this.expect(e||14);let i=this.flowParseType();return this.state.inType=s,i}flowParsePredicate(){let e=this.startNode(),s=this.state.startLoc;return this.next(),this.expectContextual(108),this.state.lastTokStart>s.index+1&&this.raise(D.UnexpectedSpaceBetweenModuloChecks,{at:s}),this.eat(10)?(e.value=super.parseExpression(),this.expect(11),this.finishNode(e,"DeclaredPredicate")):this.finishNode(e,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){let e=this.state.inType;this.state.inType=!0,this.expect(14);let s=null,i=null;return this.match(54)?(this.state.inType=e,i=this.flowParsePredicate()):(s=this.flowParseType(),this.state.inType=e,this.match(54)&&(i=this.flowParsePredicate())),[s,i]}flowParseDeclareClass(e){return this.next(),this.flowParseInterfaceish(e,!0),this.finishNode(e,"DeclareClass")}flowParseDeclareFunction(e){this.next();let s=e.id=this.parseIdentifier(),i=this.startNode(),n=this.startNode();this.match(47)?i.typeParameters=this.flowParseTypeParameterDeclaration():i.typeParameters=null,this.expect(10);let a=this.flowParseFunctionTypeParams();return i.params=a.params,i.rest=a.rest,i.this=a._this,this.expect(11),[i.returnType,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),n.typeAnnotation=this.finishNode(i,"FunctionTypeAnnotation"),s.typeAnnotation=this.finishNode(n,"TypeAnnotation"),this.resetEndLocation(s),this.semicolon(),this.scope.declareName(e.id.name,XE,e.id.loc.start),this.finishNode(e,"DeclareFunction")}flowParseDeclare(e,s){if(this.match(80))return this.flowParseDeclareClass(e);if(this.match(68))return this.flowParseDeclareFunction(e);if(this.match(74))return this.flowParseDeclareVariable(e);if(this.eatContextual(125))return this.match(16)?this.flowParseDeclareModuleExports(e):(s&&this.raise(D.NestedDeclareModule,{at:this.state.lastTokStartLoc}),this.flowParseDeclareModule(e));if(this.isContextual(128))return this.flowParseDeclareTypeAlias(e);if(this.isContextual(129))return this.flowParseDeclareOpaqueType(e);if(this.isContextual(127))return this.flowParseDeclareInterface(e);if(this.match(82))return this.flowParseDeclareExportDeclaration(e,s);this.unexpected()}flowParseDeclareVariable(e){return this.next(),e.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(e.id.name,gn,e.id.loc.start),this.semicolon(),this.finishNode(e,"DeclareVariable")}flowParseDeclareModule(e){this.scope.enter(qs),this.match(131)?e.id=super.parseExprAtom():e.id=this.parseIdentifier();let s=e.body=this.startNode(),i=s.body=[];for(this.expect(5);!this.match(8);){let o=this.startNode();this.match(83)?(this.next(),!this.isContextual(128)&&!this.match(87)&&this.raise(D.InvalidNonTypeImportInDeclareModule,{at:this.state.lastTokStartLoc}),super.parseImport(o)):(this.expectContextual(123,D.UnsupportedStatementInDeclareModule),o=this.flowParseDeclare(o,!0)),i.push(o)}this.scope.exit(),this.expect(8),this.finishNode(s,"BlockStatement");let n=null,a=!1;return i.forEach(o=>{mS(o)?(n==="CommonJS"&&this.raise(D.AmbiguousDeclareModuleKind,{at:o}),n="ES"):o.type==="DeclareModuleExports"&&(a&&this.raise(D.DuplicateDeclareModuleExports,{at:o}),n==="ES"&&this.raise(D.AmbiguousDeclareModuleKind,{at:o}),n="CommonJS",a=!0)}),e.kind=n||"CommonJS",this.finishNode(e,"DeclareModule")}flowParseDeclareExportDeclaration(e,s){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?e.declaration=this.flowParseDeclare(this.startNode()):(e.declaration=this.flowParseType(),this.semicolon()),e.default=!0,this.finishNode(e,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(128)||this.isContextual(127))&&!s){let i=this.state.value;throw this.raise(D.UnsupportedDeclareExportKind,{at:this.state.startLoc,unsupportedExportKind:i,suggestion:yS[i]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(129))return e.declaration=this.flowParseDeclare(this.startNode()),e.default=!1,this.finishNode(e,"DeclareExportDeclaration");if(this.match(55)||this.match(5)||this.isContextual(127)||this.isContextual(128)||this.isContextual(129))return e=this.parseExport(e,null),e.type==="ExportNamedDeclaration"&&(e.type="ExportDeclaration",e.default=!1,delete e.exportKind),e.type="Declare"+e.type,e;this.unexpected()}flowParseDeclareModuleExports(e){return this.next(),this.expectContextual(109),e.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(e,"DeclareModuleExports")}flowParseDeclareTypeAlias(e){this.next();let s=this.flowParseTypeAlias(e);return s.type="DeclareTypeAlias",s}flowParseDeclareOpaqueType(e){this.next();let s=this.flowParseOpaqueType(e,!0);return s.type="DeclareOpaqueType",s}flowParseDeclareInterface(e){return this.next(),this.flowParseInterfaceish(e,!1),this.finishNode(e,"DeclareInterface")}flowParseInterfaceish(e,s){if(e.id=this.flowParseRestrictedIdentifier(!s,!0),this.scope.declareName(e.id.name,s?zd:Hs,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.extends=[],this.eat(81))do e.extends.push(this.flowParseInterfaceExtends());while(!s&&this.eat(12));if(s){if(e.implements=[],e.mixins=[],this.eatContextual(115))do e.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(111))do e.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}e.body=this.flowParseObjectType({allowStatic:s,allowExact:!1,allowSpread:!1,allowProto:s,allowInexact:!1})}flowParseInterfaceExtends(){let e=this.startNode();return e.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?e.typeParameters=this.flowParseTypeParameterInstantiation():e.typeParameters=null,this.finishNode(e,"InterfaceExtends")}flowParseInterface(e){return this.flowParseInterfaceish(e,!1),this.finishNode(e,"InterfaceDeclaration")}checkNotUnderscore(e){e==="_"&&this.raise(D.UnexpectedReservedUnderscore,{at:this.state.startLoc})}checkReservedType(e,s,i){!dS.has(e)||this.raise(i?D.AssignReservedType:D.UnexpectedReservedType,{at:s,reservedType:e})}flowParseRestrictedIdentifier(e,s){return this.checkReservedType(this.state.value,this.state.startLoc,s),this.parseIdentifier(e)}flowParseTypeAlias(e){return e.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(e.id.name,Hs,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(e,"TypeAlias")}flowParseOpaqueType(e,s){return this.expectContextual(128),e.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(e.id.name,Hs,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.supertype=null,this.match(14)&&(e.supertype=this.flowParseTypeInitialiser(14)),e.impltype=null,s||(e.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(e,"OpaqueType")}flowParseTypeParameter(e=!1){let s=this.state.startLoc,i=this.startNode(),n=this.flowParseVariance(),a=this.flowParseTypeAnnotatableIdentifier();return i.name=a.name,i.variance=n,i.bound=a.typeAnnotation,this.match(29)?(this.eat(29),i.default=this.flowParseType()):e&&this.raise(D.MissingTypeParamDefault,{at:s}),this.finishNode(i,"TypeParameter")}flowParseTypeParameterDeclaration(){let e=this.state.inType,s=this.startNode();s.params=[],this.state.inType=!0,this.match(47)||this.match(140)?this.next():this.unexpected();let i=!1;do{let n=this.flowParseTypeParameter(i);s.params.push(n),n.default&&(i=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=e,this.finishNode(s,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){let e=this.startNode(),s=this.state.inType;e.params=[],this.state.inType=!0,this.expect(47);let i=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)e.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=i,this.expect(48),this.state.inType=s,this.finishNode(e,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){let e=this.startNode(),s=this.state.inType;for(e.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)e.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=s,this.finishNode(e,"TypeParameterInstantiation")}flowParseInterfaceType(){let e=this.startNode();if(this.expectContextual(127),e.extends=[],this.eat(81))do e.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return e.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(e,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(132)||this.match(131)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(e,s,i){return e.static=s,this.lookahead().type===14?(e.id=this.flowParseObjectPropertyKey(),e.key=this.flowParseTypeInitialiser()):(e.id=null,e.key=this.flowParseType()),this.expect(3),e.value=this.flowParseTypeInitialiser(),e.variance=i,this.finishNode(e,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(e,s){return e.static=s,e.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(e.method=!0,e.optional=!1,e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.loc.start))):(e.method=!1,this.eat(17)&&(e.optional=!0),e.value=this.flowParseTypeInitialiser()),this.finishNode(e,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(e){for(e.params=[],e.rest=null,e.typeParameters=null,e.this=null,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(e.this=this.flowParseFunctionTypeParam(!0),e.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(e.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),e.returnType=this.flowParseTypeInitialiser(),this.finishNode(e,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(e,s){let i=this.startNode();return e.static=s,e.value=this.flowParseObjectTypeMethodish(i),this.finishNode(e,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:e,allowExact:s,allowSpread:i,allowProto:n,allowInexact:a}){let o=this.state.inType;this.state.inType=!0;let c=this.startNode();c.callProperties=[],c.properties=[],c.indexers=[],c.internalSlots=[];let u,l,h=!1;for(s&&this.match(6)?(this.expect(6),u=9,l=!0):(this.expect(5),u=8,l=!1),c.exact=l;!this.match(u);){let f=!1,y=null,x=null,T=this.startNode();if(n&&this.isContextual(116)){let g=this.lookahead();g.type!==14&&g.type!==17&&(this.next(),y=this.state.startLoc,e=!1)}if(e&&this.isContextual(104)){let g=this.lookahead();g.type!==14&&g.type!==17&&(this.next(),f=!0)}let E=this.flowParseVariance();if(this.eat(0))y!=null&&this.unexpected(y),this.eat(0)?(E&&this.unexpected(E.loc.start),c.internalSlots.push(this.flowParseObjectTypeInternalSlot(T,f))):c.indexers.push(this.flowParseObjectTypeIndexer(T,f,E));else if(this.match(10)||this.match(47))y!=null&&this.unexpected(y),E&&this.unexpected(E.loc.start),c.callProperties.push(this.flowParseObjectTypeCallProperty(T,f));else{let g="init";if(this.isContextual(98)||this.isContextual(103)){let w=this.lookahead();Ld(w.type)&&(g=this.state.value,this.next())}let b=this.flowParseObjectTypeProperty(T,f,y,E,g,i,a!=null?a:!l);b===null?(h=!0,x=this.state.lastTokStartLoc):c.properties.push(b)}this.flowObjectTypeSemicolon(),x&&!this.match(8)&&!this.match(9)&&this.raise(D.UnexpectedExplicitInexactInObject,{at:x})}this.expect(u),i&&(c.inexact=h);let p=this.finishNode(c,"ObjectTypeAnnotation");return this.state.inType=o,p}flowParseObjectTypeProperty(e,s,i,n,a,o,c){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(o?c||this.raise(D.InexactInsideExact,{at:this.state.lastTokStartLoc}):this.raise(D.InexactInsideNonObject,{at:this.state.lastTokStartLoc}),n&&this.raise(D.InexactVariance,{at:n}),null):(o||this.raise(D.UnexpectedSpreadType,{at:this.state.lastTokStartLoc}),i!=null&&this.unexpected(i),n&&this.raise(D.SpreadVariance,{at:n}),e.argument=this.flowParseType(),this.finishNode(e,"ObjectTypeSpreadProperty"));{e.key=this.flowParseObjectPropertyKey(),e.static=s,e.proto=i!=null,e.kind=a;let u=!1;return this.match(47)||this.match(10)?(e.method=!0,i!=null&&this.unexpected(i),n&&this.unexpected(n.loc.start),e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.loc.start)),(a==="get"||a==="set")&&this.flowCheckGetterSetterParams(e),!o&&e.key.name==="constructor"&&e.value.this&&this.raise(D.ThisParamBannedInConstructor,{at:e.value.this})):(a!=="init"&&this.unexpected(),e.method=!1,this.eat(17)&&(u=!0),e.value=this.flowParseTypeInitialiser(),e.variance=n),e.optional=u,this.finishNode(e,"ObjectTypeProperty")}}flowCheckGetterSetterParams(e){let s=e.kind==="get"?0:1,i=e.value.params.length+(e.value.rest?1:0);e.value.this&&this.raise(e.kind==="get"?D.GetterMayNotHaveThisParam:D.SetterMayNotHaveThisParam,{at:e.value.this}),i!==s&&this.raise(e.kind==="get"?m.BadGetterArity:m.BadSetterArity,{at:e}),e.kind==="set"&&e.value.rest&&this.raise(m.BadSetterRestParameter,{at:e})}flowObjectTypeSemicolon(){!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9)&&this.unexpected()}flowParseQualifiedTypeIdentifier(e,s){var i;(i=e)!=null||(e=this.state.startLoc);let n=s||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){let a=this.startNodeAt(e);a.qualification=n,a.id=this.flowParseRestrictedIdentifier(!0),n=this.finishNode(a,"QualifiedTypeIdentifier")}return n}flowParseGenericType(e,s){let i=this.startNodeAt(e);return i.typeParameters=null,i.id=this.flowParseQualifiedTypeIdentifier(e,s),this.match(47)&&(i.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(i,"GenericTypeAnnotation")}flowParseTypeofType(){let e=this.startNode();return this.expect(87),e.argument=this.flowParsePrimaryType(),this.finishNode(e,"TypeofTypeAnnotation")}flowParseTupleType(){let e=this.startNode();for(e.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(e.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(e,"TupleTypeAnnotation")}flowParseFunctionTypeParam(e){let s=null,i=!1,n=null,a=this.startNode(),o=this.lookahead(),c=this.state.type===78;return o.type===14||o.type===17?(c&&!e&&this.raise(D.ThisParamMustBeFirst,{at:a}),s=this.parseIdentifier(c),this.eat(17)&&(i=!0,c&&this.raise(D.ThisParamMayNotBeOptional,{at:a})),n=this.flowParseTypeInitialiser()):n=this.flowParseType(),a.name=s,a.optional=i,a.typeAnnotation=n,this.finishNode(a,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(e){let s=this.startNodeAt(e.loc.start);return s.name=null,s.optional=!1,s.typeAnnotation=e,this.finishNode(s,"FunctionTypeParam")}flowParseFunctionTypeParams(e=[]){let s=null,i=null;for(this.match(78)&&(i=this.flowParseFunctionTypeParam(!0),i.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(s=this.flowParseFunctionTypeParam(!1)),{params:e,rest:s,_this:i}}flowIdentToTypeAnnotation(e,s,i){switch(i.name){case"any":return this.finishNode(s,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(s,"BooleanTypeAnnotation");case"mixed":return this.finishNode(s,"MixedTypeAnnotation");case"empty":return this.finishNode(s,"EmptyTypeAnnotation");case"number":return this.finishNode(s,"NumberTypeAnnotation");case"string":return this.finishNode(s,"StringTypeAnnotation");case"symbol":return this.finishNode(s,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(i.name),this.flowParseGenericType(e,i)}}flowParsePrimaryType(){let e=this.state.startLoc,s=this.startNode(),i,n,a=!1,o=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,n=this.flowParseTupleType(),this.state.noAnonFunctionType=o,n;case 47:return s.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),i=this.flowParseFunctionTypeParams(),s.params=i.params,s.rest=i.rest,s.this=i._this,this.expect(11),this.expect(19),s.returnType=this.flowParseType(),this.finishNode(s,"FunctionTypeAnnotation");case 10:if(this.next(),!this.match(11)&&!this.match(21))if(H(this.state.type)||this.match(78)){let c=this.lookahead().type;a=c!==17&&c!==14}else a=!0;if(a){if(this.state.noAnonFunctionType=!1,n=this.flowParseType(),this.state.noAnonFunctionType=o,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),n;this.eat(12)}return n?i=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(n)]):i=this.flowParseFunctionTypeParams(),s.params=i.params,s.rest=i.rest,s.this=i._this,this.expect(11),this.expect(19),s.returnType=this.flowParseType(),s.typeParameters=null,this.finishNode(s,"FunctionTypeAnnotation");case 131:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return s.value=this.match(85),this.next(),this.finishNode(s,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(132))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",s);if(this.match(133))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",s);throw this.raise(D.UnexpectedSubtractionOperand,{at:this.state.startLoc})}this.unexpected();return;case 132:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 133:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(s,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(s,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(s,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(s,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(Go(this.state.type)){let c=$t(this.state.type);return this.next(),super.createIdentifier(s,c)}else if(H(this.state.type))return this.isContextual(127)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(e,s,this.parseIdentifier())}this.unexpected()}flowParsePostfixType(){let e=this.state.startLoc,s=this.flowParsePrimaryType(),i=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){let n=this.startNodeAt(e),a=this.eat(18);i=i||a,this.expect(0),!a&&this.match(3)?(n.elementType=s,this.next(),s=this.finishNode(n,"ArrayTypeAnnotation")):(n.objectType=s,n.indexType=this.flowParseType(),this.expect(3),i?(n.optional=a,s=this.finishNode(n,"OptionalIndexedAccessType")):s=this.finishNode(n,"IndexedAccessType"))}return s}flowParsePrefixType(){let e=this.startNode();return this.eat(17)?(e.typeAnnotation=this.flowParsePrefixType(),this.finishNode(e,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){let e=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){let s=this.startNodeAt(e.loc.start);return s.params=[this.reinterpretTypeAsFunctionTypeParam(e)],s.rest=null,s.this=null,s.returnType=this.flowParseType(),s.typeParameters=null,this.finishNode(s,"FunctionTypeAnnotation")}return e}flowParseIntersectionType(){let e=this.startNode();this.eat(45);let s=this.flowParseAnonFunctionWithoutParens();for(e.types=[s];this.eat(45);)e.types.push(this.flowParseAnonFunctionWithoutParens());return e.types.length===1?s:this.finishNode(e,"IntersectionTypeAnnotation")}flowParseUnionType(){let e=this.startNode();this.eat(43);let s=this.flowParseIntersectionType();for(e.types=[s];this.eat(43);)e.types.push(this.flowParseIntersectionType());return e.types.length===1?s:this.finishNode(e,"UnionTypeAnnotation")}flowParseType(){let e=this.state.inType;this.state.inType=!0;let s=this.flowParseUnionType();return this.state.inType=e,s}flowParseTypeOrImplicitInstantiation(){if(this.state.type===130&&this.state.value==="_"){let e=this.state.startLoc,s=this.parseIdentifier();return this.flowParseGenericType(e,s)}else return this.flowParseType()}flowParseTypeAnnotation(){let e=this.startNode();return e.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(e,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(e){let s=e?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(s.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(s)),s}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.loc.end),e.expression}flowParseVariance(){let e=null;return this.match(53)?(e=this.startNode(),this.state.value==="+"?e.kind="plus":e.kind="minus",this.next(),this.finishNode(e,"Variance")):e}parseFunctionBody(e,s,i=!1){if(s){this.forwardNoArrowParamsConversionAt(e,()=>super.parseFunctionBody(e,!0,i));return}super.parseFunctionBody(e,!1,i)}parseFunctionBodyAndFinish(e,s,i=!1){if(this.match(14)){let n=this.startNode();[n.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),e.returnType=n.typeAnnotation?this.finishNode(n,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(e,s,i)}parseStatementLike(e){if(this.state.strict&&this.isContextual(127)){let i=this.lookahead();if(Ze(i.type)){let n=this.startNode();return this.next(),this.flowParseInterface(n)}}else if(this.shouldParseEnums()&&this.isContextual(124)){let i=this.startNode();return this.next(),this.flowParseEnumDeclaration(i)}let s=super.parseStatementLike(e);return this.flowPragma===void 0&&!this.isValidDirective(s)&&(this.flowPragma=null),s}parseExpressionStatement(e,s,i){if(s.type==="Identifier"){if(s.name==="declare"){if(this.match(80)||H(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(e)}else if(H(this.state.type)){if(s.name==="interface")return this.flowParseInterface(e);if(s.name==="type")return this.flowParseTypeAlias(e);if(s.name==="opaque")return this.flowParseOpaqueType(e,!1)}}return super.parseExpressionStatement(e,s,i)}shouldParseExportDeclaration(){let{type:e}=this.state;return gd(e)||this.shouldParseEnums()&&e===124?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){let{type:e}=this.state;return gd(e)||this.shouldParseEnums()&&e===124?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(124)){let e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}return super.parseExportDefaultExpression()}parseConditional(e,s,i){if(!this.match(17))return e;if(this.state.maybeInArrowParameters){let p=this.lookaheadCharCode();if(p===44||p===61||p===58||p===41)return this.setOptionalParametersError(i),e}this.expect(17);let n=this.state.clone(),a=this.state.noArrowAt,o=this.startNodeAt(s),{consequent:c,failed:u}=this.tryParseConditionalConsequent(),[l,h]=this.getArrowLikeExpressions(c);if(u||h.length>0){let p=[...a];if(h.length>0){this.state=n,this.state.noArrowAt=p;for(let f=0;f<h.length;f++)p.push(h[f].start);({consequent:c,failed:u}=this.tryParseConditionalConsequent()),[l,h]=this.getArrowLikeExpressions(c)}u&&l.length>1&&this.raise(D.AmbiguousConditionalArrow,{at:n.startLoc}),u&&l.length===1&&(this.state=n,p.push(l[0].start),this.state.noArrowAt=p,{consequent:c,failed:u}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(c,!0),this.state.noArrowAt=a,this.expect(14),o.test=e,o.consequent=c,o.alternate=this.forwardNoArrowParamsConversionAt(o,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(o,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);let e=this.parseMaybeAssignAllowIn(),s=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:e,failed:s}}getArrowLikeExpressions(e,s){let i=[e],n=[];for(;i.length!==0;){let a=i.pop();a.type==="ArrowFunctionExpression"?(a.typeParameters||!a.returnType?this.finishArrowValidation(a):n.push(a),i.push(a.body)):a.type==="ConditionalExpression"&&(i.push(a.consequent),i.push(a.alternate))}return s?(n.forEach(a=>this.finishArrowValidation(a)),[n,[]]):gS(n,a=>a.params.every(o=>this.isAssignable(o,!0)))}finishArrowValidation(e){var s;this.toAssignableList(e.params,(s=e.extra)==null?void 0:s.trailingCommaLoc,!1),this.scope.enter(dt|Xo),super.checkParams(e,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(e,s){let i;return this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1?(this.state.noArrowParamsConversionAt.push(this.state.start),i=s(),this.state.noArrowParamsConversionAt.pop()):i=s(),i}parseParenItem(e,s){if(e=super.parseParenItem(e,s),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){let i=this.startNodeAt(s);return i.expression=e,i.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(i,"TypeCastExpression")}return e}assertModuleNodeAllowed(e){e.type==="ImportDeclaration"&&(e.importKind==="type"||e.importKind==="typeof")||e.type==="ExportNamedDeclaration"&&e.exportKind==="type"||e.type==="ExportAllDeclaration"&&e.exportKind==="type"||super.assertModuleNodeAllowed(e)}parseExport(e,s){let i=super.parseExport(e,s);return(i.type==="ExportNamedDeclaration"||i.type==="ExportAllDeclaration")&&(i.exportKind=i.exportKind||"value"),i}parseExportDeclaration(e){if(this.isContextual(128)){e.exportKind="type";let s=this.startNode();return this.next(),this.match(5)?(e.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(e),null):this.flowParseTypeAlias(s)}else if(this.isContextual(129)){e.exportKind="type";let s=this.startNode();return this.next(),this.flowParseOpaqueType(s,!1)}else if(this.isContextual(127)){e.exportKind="type";let s=this.startNode();return this.next(),this.flowParseInterface(s)}else if(this.shouldParseEnums()&&this.isContextual(124)){e.exportKind="value";let s=this.startNode();return this.next(),this.flowParseEnumDeclaration(s)}else return super.parseExportDeclaration(e)}eatExportStar(e){return super.eatExportStar(e)?!0:this.isContextual(128)&&this.lookahead().type===55?(e.exportKind="type",this.next(),this.next(),!0):!1}maybeParseExportNamespaceSpecifier(e){let{startLoc:s}=this.state,i=super.maybeParseExportNamespaceSpecifier(e);return i&&e.exportKind==="type"&&this.unexpected(s),i}parseClassId(e,s,i){super.parseClassId(e,s,i),this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(e,s,i){let{startLoc:n}=this.state;if(this.isContextual(123)){if(super.parseClassMemberFromModifier(e,s))return;s.declare=!0}super.parseClassMember(e,s,i),s.declare&&(s.type!=="ClassProperty"&&s.type!=="ClassPrivateProperty"&&s.type!=="PropertyDefinition"?this.raise(D.DeclareClassElement,{at:n}):s.value&&this.raise(D.DeclareClassFieldInitializer,{at:s.value}))}isIterator(e){return e==="iterator"||e==="asyncIterator"}readIterator(){let e=super.readWord1(),s="@@"+e;(!this.isIterator(e)||!this.state.inType)&&this.raise(m.InvalidIdentifier,{at:this.state.curPosition(),identifierName:s}),this.finishToken(130,s)}getTokenFromCode(e){let s=this.input.charCodeAt(this.state.pos+1);e===123&&s===124?this.finishOp(6,2):this.state.inType&&(e===62||e===60)?this.finishOp(e===62?48:47,1):this.state.inType&&e===63?s===46?this.finishOp(18,2):this.finishOp(17,1):jE(e,s,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(e)}isAssignable(e,s){return e.type==="TypeCastExpression"?this.isAssignable(e.expression,s):super.isAssignable(e,s)}toAssignable(e,s=!1){!s&&e.type==="AssignmentExpression"&&e.left.type==="TypeCastExpression"&&(e.left=this.typeCastToParameter(e.left)),super.toAssignable(e,s)}toAssignableList(e,s,i){for(let n=0;n<e.length;n++){let a=e[n];(a==null?void 0:a.type)==="TypeCastExpression"&&(e[n]=this.typeCastToParameter(a))}super.toAssignableList(e,s,i)}toReferencedList(e,s){for(let n=0;n<e.length;n++){var i;let a=e[n];a&&a.type==="TypeCastExpression"&&!((i=a.extra)!=null&&i.parenthesized)&&(e.length>1||!s)&&this.raise(D.TypeCastInPattern,{at:a.typeAnnotation})}return e}parseArrayLike(e,s,i,n){let a=super.parseArrayLike(e,s,i,n);return s&&!this.state.maybeInArrowParameters&&this.toReferencedList(a.elements),a}isValidLVal(e,s,i){return e==="TypeCastExpression"||super.isValidLVal(e,s,i)}parseClassProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(e)}parseClassPrivateProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(e)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(e){return!this.match(14)&&super.isNonstaticConstructor(e)}pushClassMethod(e,s,i,n,a,o){if(s.variance&&this.unexpected(s.variance.loc.start),delete s.variance,this.match(47)&&(s.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(e,s,i,n,a,o),s.params&&a){let c=s.params;c.length>0&&this.isThisParam(c[0])&&this.raise(D.ThisParamBannedInConstructor,{at:s})}else if(s.type==="MethodDefinition"&&a&&s.value.params){let c=s.value.params;c.length>0&&this.isThisParam(c[0])&&this.raise(D.ThisParamBannedInConstructor,{at:s})}}pushClassPrivateMethod(e,s,i,n){s.variance&&this.unexpected(s.variance.loc.start),delete s.variance,this.match(47)&&(s.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(e,s,i,n)}parseClassSuper(e){if(super.parseClassSuper(e),e.superClass&&this.match(47)&&(e.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(111)){this.next();let s=e.implements=[];do{let i=this.startNode();i.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?i.typeParameters=this.flowParseTypeParameterInstantiation():i.typeParameters=null,s.push(this.finishNode(i,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(e){super.checkGetterSetterParams(e);let s=this.getObjectOrClassMethodParams(e);if(s.length>0){let i=s[0];this.isThisParam(i)&&e.kind==="get"?this.raise(D.GetterMayNotHaveThisParam,{at:i}):this.isThisParam(i)&&this.raise(D.SetterMayNotHaveThisParam,{at:i})}}parsePropertyNamePrefixOperator(e){e.variance=this.flowParseVariance()}parseObjPropValue(e,s,i,n,a,o,c){e.variance&&this.unexpected(e.variance.loc.start),delete e.variance;let u;this.match(47)&&!o&&(u=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());let l=super.parseObjPropValue(e,s,i,n,a,o,c);return u&&((l.value||l).typeParameters=u),l}parseAssignableListItemTypes(e){return this.eat(17)&&(e.type!=="Identifier"&&this.raise(D.PatternIsOptional,{at:e}),this.isThisParam(e)&&this.raise(D.ThisParamMayNotBeOptional,{at:e}),e.optional=!0),this.match(14)?e.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(e)&&this.raise(D.ThisParamAnnotationRequired,{at:e}),this.match(29)&&this.isThisParam(e)&&this.raise(D.ThisParamNoDefault,{at:e}),this.resetEndLocation(e),e}parseMaybeDefault(e,s){let i=super.parseMaybeDefault(e,s);return i.type==="AssignmentPattern"&&i.typeAnnotation&&i.right.start<i.typeAnnotation.start&&this.raise(D.TypeBeforeInitializer,{at:i.typeAnnotation}),i}shouldParseDefaultImport(e){return po(e)?wd(this.state.type):super.shouldParseDefaultImport(e)}checkImportReflection(e){super.checkImportReflection(e),e.module&&e.importKind!=="value"&&this.raise(D.ImportReflectionHasImportType,{at:e.specifiers[0].loc.start})}parseImportSpecifierLocal(e,s,i){s.local=po(e)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),e.specifiers.push(this.finishImportSpecifier(s,i))}maybeParseDefaultImportSpecifier(e){e.importKind="value";let s=null;if(this.match(87)?s="typeof":this.isContextual(128)&&(s="type"),s){let i=this.lookahead(),{type:n}=i;s==="type"&&n===55&&this.unexpected(null,i.type),(wd(n)||n===5||n===55)&&(this.next(),e.importKind=s)}return super.maybeParseDefaultImportSpecifier(e)}parseImportSpecifier(e,s,i,n,a){let o=e.imported,c=null;o.type==="Identifier"&&(o.name==="type"?c="type":o.name==="typeof"&&(c="typeof"));let u=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){let h=this.parseIdentifier(!0);c!==null&&!Ze(this.state.type)?(e.imported=h,e.importKind=c,e.local=mt(h)):(e.imported=o,e.importKind=null,e.local=this.parseIdentifier())}else{if(c!==null&&Ze(this.state.type))e.imported=this.parseIdentifier(!0),e.importKind=c;else{if(s)throw this.raise(m.ImportBindingIsString,{at:e,importName:o.value});e.imported=o,e.importKind=null}this.eatContextual(93)?e.local=this.parseIdentifier():(u=!0,e.local=mt(e.imported))}let l=po(e);return i&&l&&this.raise(D.ImportTypeShorthandOnlyInPureImport,{at:e}),(i||l)&&this.checkReservedType(e.local.name,e.local.loc.start,!0),u&&!i&&!l&&this.checkReservedWord(e.local.name,e.loc.start,!0,!0),this.finishImportSpecifier(e,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(e,s){let i=e.kind;i!=="get"&&i!=="set"&&this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(e,s)}parseVarId(e,s){super.parseVarId(e,s),this.match(14)&&(e.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,s){if(this.match(14)){let i=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,e.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=i}return super.parseAsyncArrowFromCallExpression(e,s)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(e,s){var i;let n=null,a;if(this.hasPlugin("jsx")&&(this.match(140)||this.match(47))){if(n=this.state.clone(),a=this.tryParse(()=>super.parseMaybeAssign(e,s),n),!a.error)return a.node;let{context:u}=this.state,l=u[u.length-1];(l===te.j_oTag||l===te.j_expr)&&u.pop()}if((i=a)!=null&&i.error||this.match(47)){var o,c;n=n||this.state.clone();let u,l=this.tryParse(p=>{var f;u=this.flowParseTypeParameterDeclaration();let y=this.forwardNoArrowParamsConversionAt(u,()=>{let T=super.parseMaybeAssign(e,s);return this.resetStartLocationFromNode(T,u),T});(f=y.extra)!=null&&f.parenthesized&&p();let x=this.maybeUnwrapTypeCastExpression(y);return x.type!=="ArrowFunctionExpression"&&p(),x.typeParameters=u,this.resetStartLocationFromNode(x,u),y},n),h=null;if(l.node&&this.maybeUnwrapTypeCastExpression(l.node).type==="ArrowFunctionExpression"){if(!l.error&&!l.aborted)return l.node.async&&this.raise(D.UnexpectedTypeParameterBeforeAsyncArrowFunction,{at:u}),l.node;h=l.node}if((o=a)!=null&&o.node)return this.state=a.failState,a.node;if(h)return this.state=l.failState,h;throw(c=a)!=null&&c.thrown?a.error:l.thrown?l.error:this.raise(D.UnexpectedTokenAfterTypeParameter,{at:u})}return super.parseMaybeAssign(e,s)}parseArrow(e){if(this.match(14)){let s=this.tryParse(()=>{let i=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;let n=this.startNode();return[n.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=i,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),n});if(s.thrown)return null;s.error&&(this.state=s.failState),e.returnType=s.node.typeAnnotation?this.finishNode(s.node,"TypeAnnotation"):null}return super.parseArrow(e)}shouldParseArrow(e){return this.match(14)||super.shouldParseArrow(e)}setArrowFunctionParameters(e,s){this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1?e.params=s:super.setArrowFunctionParameters(e,s)}checkParams(e,s,i,n=!0){if(!(i&&this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1)){for(let a=0;a<e.params.length;a++)this.isThisParam(e.params[a])&&a>0&&this.raise(D.ThisParamMustBeFirst,{at:e.params[a]});super.checkParams(e,s,i,n)}}parseParenAndDistinguishExpression(e){return super.parseParenAndDistinguishExpression(e&&this.state.noArrowAt.indexOf(this.state.start)===-1)}parseSubscripts(e,s,i){if(e.type==="Identifier"&&e.name==="async"&&this.state.noArrowAt.indexOf(s.index)!==-1){this.next();let n=this.startNodeAt(s);n.callee=e,n.arguments=super.parseCallExpressionArguments(11,!1),e=this.finishNode(n,"CallExpression")}else if(e.type==="Identifier"&&e.name==="async"&&this.match(47)){let n=this.state.clone(),a=this.tryParse(c=>this.parseAsyncArrowWithTypeParameters(s)||c(),n);if(!a.error&&!a.aborted)return a.node;let o=this.tryParse(()=>super.parseSubscripts(e,s,i),n);if(o.node&&!o.error)return o.node;if(a.node)return this.state=a.failState,a.node;if(o.node)return this.state=o.failState,o.node;throw a.error||o.error}return super.parseSubscripts(e,s,i)}parseSubscript(e,s,i,n){if(this.match(18)&&this.isLookaheadToken_lt()){if(n.optionalChainMember=!0,i)return n.stop=!0,e;this.next();let a=this.startNodeAt(s);return a.callee=e,a.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),a.arguments=this.parseCallExpressionArguments(11,!1),a.optional=!0,this.finishCallExpression(a,!0)}else if(!i&&this.shouldParseTypes()&&this.match(47)){let a=this.startNodeAt(s);a.callee=e;let o=this.tryParse(()=>(a.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),a.arguments=super.parseCallExpressionArguments(11,!1),n.optionalChainMember&&(a.optional=!1),this.finishCallExpression(a,n.optionalChainMember)));if(o.node)return o.error&&(this.state=o.failState),o.node}return super.parseSubscript(e,s,i,n)}parseNewCallee(e){super.parseNewCallee(e);let s=null;this.shouldParseTypes()&&this.match(47)&&(s=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),e.typeArguments=s}parseAsyncArrowWithTypeParameters(e){let s=this.startNodeAt(e);if(this.parseFunctionParams(s,!1),!!this.parseArrow(s))return super.parseArrowExpression(s,void 0,!0)}readToken_mult_modulo(e){let s=this.input.charCodeAt(this.state.pos+1);if(e===42&&s===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(e)}readToken_pipe_amp(e){let s=this.input.charCodeAt(this.state.pos+1);if(e===124&&s===125){this.finishOp(9,2);return}super.readToken_pipe_amp(e)}parseTopLevel(e,s){let i=super.parseTopLevel(e,s);return this.state.hasFlowComment&&this.raise(D.UnterminatedFlowComment,{at:this.state.curPosition()}),i}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(D.NestedFlowComment,{at:this.state.startLoc});this.hasFlowCommentCompletion();let e=this.skipFlowComment();e&&(this.state.pos+=e,this.state.hasFlowComment=!0);return}return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/")}skipFlowComment(){let{pos:e}=this.state,s=2;for(;[32,9].includes(this.input.charCodeAt(e+s));)s++;let i=this.input.charCodeAt(s+e),n=this.input.charCodeAt(s+e+1);return i===58&&n===58?s+2:this.input.slice(s+e,s+e+12)==="flow-include"?s+12:i===58&&n!==58?s:!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(m.UnterminatedComment,{at:this.state.curPosition()})}flowEnumErrorBooleanMemberNotInitialized(e,{enumName:s,memberName:i}){this.raise(D.EnumBooleanMemberNotInitialized,{at:e,memberName:i,enumName:s})}flowEnumErrorInvalidMemberInitializer(e,s){return this.raise(s.explicitType?s.explicitType==="symbol"?D.EnumInvalidMemberInitializerSymbolType:D.EnumInvalidMemberInitializerPrimaryType:D.EnumInvalidMemberInitializerUnknownType,Object.assign({at:e},s))}flowEnumErrorNumberMemberNotInitialized(e,{enumName:s,memberName:i}){this.raise(D.EnumNumberMemberNotInitialized,{at:e,enumName:s,memberName:i})}flowEnumErrorStringMemberInconsistentlyInitailized(e,{enumName:s}){this.raise(D.EnumStringMemberInconsistentlyInitailized,{at:e,enumName:s})}flowEnumMemberInit(){let e=this.state.startLoc,s=()=>this.match(12)||this.match(8);switch(this.state.type){case 132:{let i=this.parseNumericLiteral(this.state.value);return s()?{type:"number",loc:i.loc.start,value:i}:{type:"invalid",loc:e}}case 131:{let i=this.parseStringLiteral(this.state.value);return s()?{type:"string",loc:i.loc.start,value:i}:{type:"invalid",loc:e}}case 85:case 86:{let i=this.parseBooleanLiteral(this.match(85));return s()?{type:"boolean",loc:i.loc.start,value:i}:{type:"invalid",loc:e}}default:return{type:"invalid",loc:e}}}flowEnumMemberRaw(){let e=this.state.startLoc,s=this.parseIdentifier(!0),i=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:e};return{id:s,init:i}}flowEnumCheckExplicitTypeMismatch(e,s,i){let{explicitType:n}=s;n!==null&&n!==i&&this.flowEnumErrorInvalidMemberInitializer(e,s)}flowEnumMembers({enumName:e,explicitType:s}){let i=new Set,n={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]},a=!1;for(;!this.match(8);){if(this.eat(21)){a=!0;break}let o=this.startNode(),{id:c,init:u}=this.flowEnumMemberRaw(),l=c.name;if(l==="")continue;/^[a-z]/.test(l)&&this.raise(D.EnumInvalidMemberName,{at:c,memberName:l,suggestion:l[0].toUpperCase()+l.slice(1),enumName:e}),i.has(l)&&this.raise(D.EnumDuplicateMemberName,{at:c,memberName:l,enumName:e}),i.add(l);let h={enumName:e,explicitType:s,memberName:l};switch(o.id=c,u.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(u.loc,h,"boolean"),o.init=u.value,n.booleanMembers.push(this.finishNode(o,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(u.loc,h,"number"),o.init=u.value,n.numberMembers.push(this.finishNode(o,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(u.loc,h,"string"),o.init=u.value,n.stringMembers.push(this.finishNode(o,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(u.loc,h);case"none":switch(s){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(u.loc,h);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(u.loc,h);break;default:n.defaultedMembers.push(this.finishNode(o,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:n,hasUnknownMembers:a}}flowEnumStringMembers(e,s,{enumName:i}){if(e.length===0)return s;if(s.length===0)return e;if(s.length>e.length){for(let n of e)this.flowEnumErrorStringMemberInconsistentlyInitailized(n,{enumName:i});return s}else{for(let n of s)this.flowEnumErrorStringMemberInconsistentlyInitailized(n,{enumName:i});return e}}flowEnumParseExplicitType({enumName:e}){if(!this.eatContextual(101))return null;if(!H(this.state.type))throw this.raise(D.EnumInvalidExplicitTypeUnknownSupplied,{at:this.state.startLoc,enumName:e});let{value:s}=this.state;return this.next(),s!=="boolean"&&s!=="number"&&s!=="string"&&s!=="symbol"&&this.raise(D.EnumInvalidExplicitType,{at:this.state.startLoc,enumName:e,invalidEnumType:s}),s}flowEnumBody(e,s){let i=s.name,n=s.loc.start,a=this.flowEnumParseExplicitType({enumName:i});this.expect(5);let{members:o,hasUnknownMembers:c}=this.flowEnumMembers({enumName:i,explicitType:a});switch(e.hasUnknownMembers=c,a){case"boolean":return e.explicitType=!0,e.members=o.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody");case"number":return e.explicitType=!0,e.members=o.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody");case"string":return e.explicitType=!0,e.members=this.flowEnumStringMembers(o.stringMembers,o.defaultedMembers,{enumName:i}),this.expect(8),this.finishNode(e,"EnumStringBody");case"symbol":return e.members=o.defaultedMembers,this.expect(8),this.finishNode(e,"EnumSymbolBody");default:{let u=()=>(e.members=[],this.expect(8),this.finishNode(e,"EnumStringBody"));e.explicitType=!1;let l=o.booleanMembers.length,h=o.numberMembers.length,p=o.stringMembers.length,f=o.defaultedMembers.length;if(!l&&!h&&!p&&!f)return u();if(!l&&!h)return e.members=this.flowEnumStringMembers(o.stringMembers,o.defaultedMembers,{enumName:i}),this.expect(8),this.finishNode(e,"EnumStringBody");if(!h&&!p&&l>=f){for(let y of o.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(y.loc.start,{enumName:i,memberName:y.id.name});return e.members=o.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody")}else if(!l&&!p&&h>=f){for(let y of o.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(y.loc.start,{enumName:i,memberName:y.id.name});return e.members=o.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody")}else return this.raise(D.EnumInconsistentMemberValues,{at:n,enumName:i}),u()}}}flowParseEnumDeclaration(e){let s=this.parseIdentifier();return e.id=s,e.body=this.flowEnumBody(this.startNode(),s),this.finishNode(e,"EnumDeclaration")}isLookaheadToken_lt(){let e=this.nextTokenStart();if(this.input.charCodeAt(e)===60){let s=this.input.charCodeAt(e+1);return s!==60&&s!==61}return!1}maybeUnwrapTypeCastExpression(e){return e.type==="TypeCastExpression"?e.expression:e}},TS={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},cs=ft`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:r})=>`Expected corresponding JSX closing tag for <${r}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:r,HTMLEntity:t})=>`Unexpected token \`${r}\`. Did you mean \`${t}\` or \`{'${r}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function Rt(r){return r?r.type==="JSXOpeningFragment"||r.type==="JSXClosingFragment":!1}function Vs(r){if(r.type==="JSXIdentifier")return r.name;if(r.type==="JSXNamespacedName")return r.namespace.name+":"+r.name.name;if(r.type==="JSXMemberExpression")return Vs(r.object)+"."+Vs(r.property);throw new Error("Node had unexpected type: "+r.type)}var bS=r=>class extends r{jsxReadToken(){let e="",s=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(cs.UnterminatedJsxContent,{at:this.state.startLoc});let i=this.input.charCodeAt(this.state.pos);switch(i){case 60:case 123:if(this.state.pos===this.state.start){i===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(140)):super.getTokenFromCode(i);return}e+=this.input.slice(s,this.state.pos),this.finishToken(139,e);return;case 38:e+=this.input.slice(s,this.state.pos),e+=this.jsxReadEntity(),s=this.state.pos;break;case 62:case 125:default:jr(i)?(e+=this.input.slice(s,this.state.pos),e+=this.jsxReadNewLine(!0),s=this.state.pos):++this.state.pos}}}jsxReadNewLine(e){let s=this.input.charCodeAt(this.state.pos),i;return++this.state.pos,s===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,i=e?`
`:`\r
`):i=String.fromCharCode(s),++this.state.curLine,this.state.lineStart=this.state.pos,i}jsxReadString(e){let s="",i=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(m.UnterminatedString,{at:this.state.startLoc});let n=this.input.charCodeAt(this.state.pos);if(n===e)break;n===38?(s+=this.input.slice(i,this.state.pos),s+=this.jsxReadEntity(),i=this.state.pos):jr(n)?(s+=this.input.slice(i,this.state.pos),s+=this.jsxReadNewLine(!1),i=this.state.pos):++this.state.pos}s+=this.input.slice(i,this.state.pos++),this.finishToken(131,s)}jsxReadEntity(){let e=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let s=10;this.codePointAtPos(this.state.pos)===120&&(s=16,++this.state.pos);let i=this.readInt(s,void 0,!1,"bail");if(i!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(i)}else{let s=0,i=!1;for(;s++<10&&this.state.pos<this.length&&!(i=this.codePointAtPos(this.state.pos)==59);)++this.state.pos;if(i){let n=this.input.slice(e,this.state.pos),a=TS[n];if(++this.state.pos,a)return a}}return this.state.pos=e,"&"}jsxReadWord(){let e,s=this.state.pos;do e=this.input.charCodeAt(++this.state.pos);while(zs(e)||e===45);this.finishToken(138,this.input.slice(s,this.state.pos))}jsxParseIdentifier(){let e=this.startNode();return this.match(138)?e.name=this.state.value:Go(this.state.type)?e.name=$t(this.state.type):this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsxParseNamespacedName(){let e=this.state.startLoc,s=this.jsxParseIdentifier();if(!this.eat(14))return s;let i=this.startNodeAt(e);return i.namespace=s,i.name=this.jsxParseIdentifier(),this.finishNode(i,"JSXNamespacedName")}jsxParseElementName(){let e=this.state.startLoc,s=this.jsxParseNamespacedName();if(s.type==="JSXNamespacedName")return s;for(;this.eat(16);){let i=this.startNodeAt(e);i.object=s,i.property=this.jsxParseIdentifier(),s=this.finishNode(i,"JSXMemberExpression")}return s}jsxParseAttributeValue(){let e;switch(this.state.type){case 5:return e=this.startNode(),this.setContext(te.brace),this.next(),e=this.jsxParseExpressionContainer(e,te.j_oTag),e.expression.type==="JSXEmptyExpression"&&this.raise(cs.AttributeIsEmpty,{at:e}),e;case 140:case 131:return this.parseExprAtom();default:throw this.raise(cs.UnsupportedJsxValue,{at:this.state.startLoc})}}jsxParseEmptyExpression(){let e=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(e){return this.next(),e.expression=this.parseExpression(),this.setContext(te.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(e,"JSXSpreadChild")}jsxParseExpressionContainer(e,s){if(this.match(8))e.expression=this.jsxParseEmptyExpression();else{let i=this.parseExpression();e.expression=i}return this.setContext(s),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(e,"JSXExpressionContainer")}jsxParseAttribute(){let e=this.startNode();return this.match(5)?(this.setContext(te.brace),this.next(),this.expect(21),e.argument=this.parseMaybeAssignAllowIn(),this.setContext(te.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsxParseNamespacedName(),e.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsxParseOpeningElementAt(e){let s=this.startNodeAt(e);return this.eat(141)?this.finishNode(s,"JSXOpeningFragment"):(s.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(s))}jsxParseOpeningElementAfterName(e){let s=[];for(;!this.match(56)&&!this.match(141);)s.push(this.jsxParseAttribute());return e.attributes=s,e.selfClosing=this.eat(56),this.expect(141),this.finishNode(e,"JSXOpeningElement")}jsxParseClosingElementAt(e){let s=this.startNodeAt(e);return this.eat(141)?this.finishNode(s,"JSXClosingFragment"):(s.name=this.jsxParseElementName(),this.expect(141),this.finishNode(s,"JSXClosingElement"))}jsxParseElementAt(e){let s=this.startNodeAt(e),i=[],n=this.jsxParseOpeningElementAt(e),a=null;if(!n.selfClosing){e:for(;;)switch(this.state.type){case 140:if(e=this.state.startLoc,this.next(),this.eat(56)){a=this.jsxParseClosingElementAt(e);break e}i.push(this.jsxParseElementAt(e));break;case 139:i.push(this.parseExprAtom());break;case 5:{let o=this.startNode();this.setContext(te.brace),this.next(),this.match(21)?i.push(this.jsxParseSpreadChild(o)):i.push(this.jsxParseExpressionContainer(o,te.j_expr));break}default:this.unexpected()}Rt(n)&&!Rt(a)&&a!==null?this.raise(cs.MissingClosingTagFragment,{at:a}):!Rt(n)&&Rt(a)?this.raise(cs.MissingClosingTagElement,{at:a,openingTagName:Vs(n.name)}):!Rt(n)&&!Rt(a)&&Vs(a.name)!==Vs(n.name)&&this.raise(cs.MissingClosingTagElement,{at:a,openingTagName:Vs(n.name)})}if(Rt(n)?(s.openingFragment=n,s.closingFragment=a):(s.openingElement=n,s.closingElement=a),s.children=i,this.match(47))throw this.raise(cs.UnwrappedAdjacentJSXElements,{at:this.state.startLoc});return Rt(n)?this.finishNode(s,"JSXFragment"):this.finishNode(s,"JSXElement")}jsxParseElement(){let e=this.state.startLoc;return this.next(),this.jsxParseElementAt(e)}setContext(e){let{context:s}=this.state;s[s.length-1]=e}parseExprAtom(e){return this.match(139)?this.parseLiteral(this.state.value,"JSXText"):this.match(140)?this.jsxParseElement():this.match(47)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(140),this.jsxParseElement()):super.parseExprAtom(e)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(e){let s=this.curContext();if(s===te.j_expr){this.jsxReadToken();return}if(s===te.j_oTag||s===te.j_cTag){if(pt(e)){this.jsxReadWord();return}if(e===62){++this.state.pos,this.finishToken(141);return}if((e===34||e===39)&&s===te.j_oTag){this.jsxReadString(e);return}}if(e===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33){++this.state.pos,this.finishToken(140);return}super.getTokenFromCode(e)}updateContext(e){let{context:s,type:i}=this.state;if(i===56&&e===140)s.splice(-2,2,te.j_cTag),this.state.canStartJSXElement=!1;else if(i===140)s.push(te.j_oTag);else if(i===141){let n=s[s.length-1];n===te.j_oTag&&e===56||n===te.j_cTag?(s.pop(),this.state.canStartJSXElement=s[s.length-1]===te.j_expr):(this.setContext(te.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=pE(i)}},Mo=class extends Ur{constructor(...t){super(...t),this.types=new Set,this.enums=new Set,this.constEnums=new Set,this.classes=new Set,this.exportOnlyBindings=new Set}},Fo=class extends qr{constructor(...t){super(...t),this.importsStack=[]}createScope(t){return this.importsStack.push(new Set),new Mo(t)}enter(t){t==Gs&&this.importsStack.push(new Set),super.enter(t)}exit(){let t=super.exit();return t==Gs&&this.importsStack.pop(),t}hasImport(t,e){let s=this.importsStack.length;if(this.importsStack[s-1].has(t))return!0;if(!e&&s>1){for(let i=0;i<s-1;i++)if(this.importsStack[i].has(t))return!0}return!1}declareName(t,e,s){if(e&$r){this.hasImport(t,!0)&&this.parser.raise(m.VarRedeclaration,{at:s,identifierName:t}),this.importsStack[this.importsStack.length-1].add(t);return}let i=this.currentScope();if(e&Jo){this.maybeExportDefined(i,t),i.exportOnlyBindings.add(t);return}super.declareName(t,e,s),e&fs&&(e&tt||(this.checkRedeclarationInScope(i,t,e,s),this.maybeExportDefined(i,t)),i.types.add(t)),e&To&&i.enums.add(t),e&bo&&i.constEnums.add(t),e&yn&&i.classes.add(t)}isRedeclaredInScope(t,e,s){if(t.enums.has(e)){if(s&To){let i=!!(s&bo),n=t.constEnums.has(e);return i!==n}return!0}return s&yn&&t.classes.has(e)?t.lexical.has(e)?!!(s&tt):!1:s&fs&&t.types.has(e)?!0:super.isRedeclaredInScope(t,e,s)}checkLocalExport(t){let{name:e}=t;if(this.hasImport(e))return;let s=this.scopeStack.length;for(let i=s-1;i>=0;i--){let n=this.scopeStack[i];if(n.types.has(e)||n.exportOnlyBindings.has(e))return}super.checkLocalExport(t)}},ES=(r,t)=>Object.hasOwnProperty.call(r,t)&&r[t],tm=r=>r.type==="ParenthesizedExpression"?tm(r.expression):r,Ro=class extends Do{toAssignable(t,e=!1){var s,i;let n;switch((t.type==="ParenthesizedExpression"||(s=t.extra)!=null&&s.parenthesized)&&(n=tm(t),e?n.type==="Identifier"?this.expressionScope.recordArrowParameterBindingError(m.InvalidParenthesizedAssignment,{at:t}):n.type!=="MemberExpression"&&this.raise(m.InvalidParenthesizedAssignment,{at:t}):this.raise(m.InvalidParenthesizedAssignment,{at:t})),t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern";for(let o=0,c=t.properties.length,u=c-1;o<c;o++){var a;let l=t.properties[o],h=o===u;this.toAssignableObjectExpressionProp(l,h,e),h&&l.type==="RestElement"&&(a=t.extra)!=null&&a.trailingCommaLoc&&this.raise(m.RestTrailingComma,{at:t.extra.trailingCommaLoc})}break;case"ObjectProperty":{let{key:o,value:c}=t;this.isPrivateName(o)&&this.classScope.usePrivateName(this.getPrivateNameSV(o),o.loc.start),this.toAssignable(c,e);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,(i=t.extra)==null?void 0:i.trailingCommaLoc,e);break;case"AssignmentExpression":t.operator!=="="&&this.raise(m.MissingEqInAssignment,{at:t.left.loc.end}),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(n,e);break}}toAssignableObjectExpressionProp(t,e,s){if(t.type==="ObjectMethod")this.raise(t.kind==="get"||t.kind==="set"?m.PatternHasAccessor:m.PatternHasMethod,{at:t.key});else if(t.type==="SpreadElement"){t.type="RestElement";let i=t.argument;this.checkToRestConversion(i,!1),this.toAssignable(i,s),e||this.raise(m.RestTrailingComma,{at:t})}else this.toAssignable(t,s)}toAssignableList(t,e,s){let i=t.length-1;for(let n=0;n<=i;n++){let a=t[n];if(!!a){if(a.type==="SpreadElement"){a.type="RestElement";let o=a.argument;this.checkToRestConversion(o,!0),this.toAssignable(o,s)}else this.toAssignable(a,s);a.type==="RestElement"&&(n<i?this.raise(m.RestTrailingComma,{at:a}):e&&this.raise(m.RestTrailingComma,{at:e}))}}}isAssignable(t,e){switch(t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{let s=t.properties.length-1;return t.properties.every((i,n)=>i.type!=="ObjectMethod"&&(n===s||i.type!=="SpreadElement")&&this.isAssignable(i))}case"ObjectProperty":return this.isAssignable(t.value);case"SpreadElement":return this.isAssignable(t.argument);case"ArrayExpression":return t.elements.every(s=>s===null||this.isAssignable(s));case"AssignmentExpression":return t.operator==="=";case"ParenthesizedExpression":return this.isAssignable(t.expression);case"MemberExpression":case"OptionalMemberExpression":return!e;default:return!1}}toReferencedList(t,e){return t}toReferencedListDeep(t,e){this.toReferencedList(t,e);for(let s of t)(s==null?void 0:s.type)==="ArrayExpression"&&this.toReferencedListDeep(s.elements)}parseSpread(t){let e=this.startNode();return this.next(),e.argument=this.parseMaybeAssignAllowIn(t,void 0),this.finishNode(e,"SpreadElement")}parseRestBinding(){let t=this.startNode();return this.next(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{let t=this.startNode();return this.next(),t.elements=this.parseBindingList(3,93,1),this.finishNode(t,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(t,e,s){let i=s&1,n=[],a=!0;for(;!this.eat(t);)if(a?a=!1:this.expect(12),i&&this.match(12))n.push(null);else{if(this.eat(t))break;if(this.match(21)){if(n.push(this.parseAssignableListItemTypes(this.parseRestBinding(),s)),!this.checkCommaAfterRest(e)){this.expect(t);break}}else{let o=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(m.UnsupportedParameterDecorator,{at:this.state.startLoc});this.match(26);)o.push(this.parseDecorator());n.push(this.parseAssignableListItem(s,o))}}return n}parseBindingRestProperty(t){return this.next(),t.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(t,"RestElement")}parseBindingProperty(){let t=this.startNode(),{type:e,startLoc:s}=this.state;return e===21?this.parseBindingRestProperty(t):(e===136?(this.expectPlugin("destructuringPrivate",s),this.classScope.usePrivateName(this.state.value,s),t.key=this.parsePrivateName()):this.parsePropertyName(t),t.method=!1,this.parseObjPropValue(t,s,!1,!1,!0,!1))}parseAssignableListItem(t,e){let s=this.parseMaybeDefault();this.parseAssignableListItemTypes(s,t);let i=this.parseMaybeDefault(s.loc.start,s);return e.length&&(s.decorators=e),i}parseAssignableListItemTypes(t,e){return t}parseMaybeDefault(t,e){var s,i;if((s=t)!=null||(t=this.state.startLoc),e=(i=e)!=null?i:this.parseBindingAtom(),!this.eat(29))return e;let n=this.startNodeAt(t);return n.left=e,n.right=this.parseMaybeAssignAllowIn(),this.finishNode(n,"AssignmentPattern")}isValidLVal(t,e,s){return ES({AssignmentPattern:"left",RestElement:"argument",ObjectProperty:"value",ParenthesizedExpression:"expression",ArrayPattern:"elements",ObjectPattern:"properties"},t)}checkLVal(t,{in:e,binding:s=Bt,checkClashes:i=!1,strictModeChanged:n=!1,hasParenthesizedAncestor:a=!1}){var o;let c=t.type;if(this.isObjectMethod(t))return;if(c==="MemberExpression"){s!==Bt&&this.raise(m.InvalidPropertyBindingPattern,{at:t});return}if(c==="Identifier"){this.checkIdentifier(t,s,n);let{name:f}=t;i&&(i.has(f)?this.raise(m.ParamDupe,{at:t}):i.add(f));return}let u=this.isValidLVal(c,!(a||(o=t.extra)!=null&&o.parenthesized)&&e.type==="AssignmentExpression",s);if(u===!0)return;if(u===!1){let f=s===Bt?m.InvalidLhs:m.InvalidLhsBinding;this.raise(f,{at:t,ancestor:e});return}let[l,h]=Array.isArray(u)?u:[u,c==="ParenthesizedExpression"],p=c==="ArrayPattern"||c==="ObjectPattern"||c==="ParenthesizedExpression"?{type:c}:e;for(let f of[].concat(t[l]))f&&this.checkLVal(f,{in:p,binding:s,checkClashes:i,strictModeChanged:n,hasParenthesizedAncestor:h})}checkIdentifier(t,e,s=!1){this.state.strict&&(s?$d(t.name,this.inModule):Bd(t.name))&&(e===Bt?this.raise(m.StrictEvalArguments,{at:t,referenceName:t.name}):this.raise(m.StrictEvalArgumentsBinding,{at:t,bindingName:t.name})),e&bn&&t.name==="let"&&this.raise(m.LetInLexicalBinding,{at:t}),e&Bt||this.declareNameFromIdentifier(t,e)}declareNameFromIdentifier(t,e){this.scope.declareName(t.name,e,t.loc.start)}checkToRestConversion(t,e){switch(t.type){case"ParenthesizedExpression":this.checkToRestConversion(t.expression,e);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(e)break;default:this.raise(m.InvalidRestAssignmentPattern,{at:t})}}checkCommaAfterRest(t){return this.match(12)?(this.raise(this.lookaheadCharCode()===t?m.RestTrailingComma:m.ElementAfterRest,{at:this.state.startLoc}),!0):!1}},SS=(r,t)=>Object.hasOwnProperty.call(r,t)&&r[t];function vS(r){if(r==null)throw new Error(`Unexpected ${r} value.`);return r}function Ad(r){if(!r)throw new Error("Assert fail")}var I=ft`typescript`({AbstractMethodHasImplementation:({methodName:r})=>`Method '${r}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:r})=>`Property '${r}' cannot have an initializer because it is marked abstract.`,AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:r})=>`'declare' is not allowed in ${r}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:r})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:r})=>`Duplicate modifier: '${r}'.`,EmptyHeritageClauseType:({token:r})=>`'${r}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:r})=>`'${r[0]}' modifier cannot be used with '${r[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:r})=>`Index signatures cannot have an accessibility modifier ('${r}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:r})=>`'${r}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:r})=>`'${r}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:r})=>`'${r}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:r})=>`'${r[0]}' modifier must precede '${r[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",MixedLabeledAndUnlabeledElements:"Tuple members must all have names or all not have names.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:r})=>`Private elements cannot have an accessibility modifier ('${r}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:r})=>`Single type parameter ${r} should have a trailing comma. Example usage: <${r},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:r})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${r}.`});function wS(r){switch(r){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function Cd(r){return r==="private"||r==="public"||r==="protected"}function AS(r){return r==="in"||r==="out"}var CS=r=>class extends r{constructor(...e){super(...e),this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:I.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:I.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:I.InvalidModifierOnTypeParameter})}getScopeHandler(){return Fo}tsIsIdentifier(){return H(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(136)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(e,s){if(!H(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;let i=this.state.value;if(e.indexOf(i)!==-1){if(s&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return i}}tsParseModifiers({allowedModifiers:e,disallowedModifiers:s,stopOnStartOfClassStaticBlock:i,errorTemplate:n=I.InvalidModifierOnTypeMember},a){let o=(u,l,h,p)=>{l===h&&a[p]&&this.raise(I.InvalidModifiersOrder,{at:u,orderedModifiers:[h,p]})},c=(u,l,h,p)=>{(a[h]&&l===p||a[p]&&l===h)&&this.raise(I.IncompatibleModifiers,{at:u,modifiers:[h,p]})};for(;;){let{startLoc:u}=this.state,l=this.tsParseModifier(e.concat(s!=null?s:[]),i);if(!l)break;Cd(l)?a.accessibility?this.raise(I.DuplicateAccessibilityModifier,{at:u,modifier:l}):(o(u,l,l,"override"),o(u,l,l,"static"),o(u,l,l,"readonly"),a.accessibility=l):AS(l)?(a[l]&&this.raise(I.DuplicateModifier,{at:u,modifier:l}),a[l]=!0,o(u,l,"in","out")):(Object.hasOwnProperty.call(a,l)?this.raise(I.DuplicateModifier,{at:u,modifier:l}):(o(u,l,"static","readonly"),o(u,l,"static","override"),o(u,l,"override","readonly"),o(u,l,"abstract","override"),c(u,l,"declare","override"),c(u,l,"static","abstract")),a[l]=!0),s!=null&&s.includes(l)&&this.raise(n,{at:u,modifier:l})}}tsIsListTerminator(e){switch(e){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(e,s){let i=[];for(;!this.tsIsListTerminator(e);)i.push(s());return i}tsParseDelimitedList(e,s,i){return vS(this.tsParseDelimitedListWorker(e,s,!0,i))}tsParseDelimitedListWorker(e,s,i,n){let a=[],o=-1;for(;!this.tsIsListTerminator(e);){o=-1;let c=s();if(c==null)return;if(a.push(c),this.eat(12)){o=this.state.lastTokStart;continue}if(this.tsIsListTerminator(e))break;i&&this.expect(12);return}return n&&(n.value=o),a}tsParseBracketedList(e,s,i,n,a){n||(i?this.expect(0):this.expect(47));let o=this.tsParseDelimitedList(e,s,a);return i?this.expect(3):this.expect(48),o}tsParseImportType(){let e=this.startNode();return this.expect(83),this.expect(10),this.match(131)||this.raise(I.UnsupportedImportTypeArgument,{at:this.state.startLoc}),e.argument=super.parseExprAtom(),this.expect(11),this.eat(16)&&(e.qualifier=this.tsParseEntityName()),this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSImportType")}tsParseEntityName(e=!0){let s=this.parseIdentifier(e);for(;this.eat(16);){let i=this.startNodeAtNode(s);i.left=s,i.right=this.parseIdentifier(e),s=this.finishNode(i,"TSQualifiedName")}return s}tsParseTypeReference(){let e=this.startNode();return e.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSTypeReference")}tsParseThisTypePredicate(e){this.next();let s=this.startNodeAtNode(e);return s.parameterName=e,s.typeAnnotation=this.tsParseTypeAnnotation(!1),s.asserts=!1,this.finishNode(s,"TSTypePredicate")}tsParseThisTypeNode(){let e=this.startNode();return this.next(),this.finishNode(e,"TSThisType")}tsParseTypeQuery(){let e=this.startNode();return this.expect(87),this.match(83)?e.exprName=this.tsParseImportType():e.exprName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSTypeQuery")}tsParseTypeParameter(e){let s=this.startNode();return e(s),s.name=this.tsParseTypeParameterName(),s.constraint=this.tsEatThenParseType(81),s.default=this.tsEatThenParseType(29),this.finishNode(s,"TSTypeParameter")}tsTryParseTypeParameters(e){if(this.match(47))return this.tsParseTypeParameters(e)}tsParseTypeParameters(e){let s=this.startNode();this.match(47)||this.match(140)?this.next():this.unexpected();let i={value:-1};return s.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,e),!1,!0,i),s.params.length===0&&this.raise(I.EmptyTypeParameters,{at:s}),i.value!==-1&&this.addExtra(s,"trailingComma",i.value),this.finishNode(s,"TSTypeParameterDeclaration")}tsFillSignature(e,s){let i=e===19,n="parameters",a="typeAnnotation";s.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),s[n]=this.tsParseBindingListForSignature(),i?s[a]=this.tsParseTypeOrTypePredicateAnnotation(e):this.match(e)&&(s[a]=this.tsParseTypeOrTypePredicateAnnotation(e))}tsParseBindingListForSignature(){let e=super.parseBindingList(11,41,2);for(let s of e){let{type:i}=s;(i==="AssignmentPattern"||i==="TSParameterProperty")&&this.raise(I.UnsupportedSignatureParameterKind,{at:s,type:i})}return e}tsParseTypeMemberSemicolon(){!this.eat(12)&&!this.isLineTerminator()&&this.expect(13)}tsParseSignatureMember(e,s){return this.tsFillSignature(14,s),this.tsParseTypeMemberSemicolon(),this.finishNode(s,e)}tsIsUnambiguouslyIndexSignature(){return this.next(),H(this.state.type)?(this.next(),this.match(14)):!1}tsTryParseIndexSignature(e){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);let s=this.parseIdentifier();s.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(s),this.expect(3),e.parameters=[s];let i=this.tsTryParseTypeAnnotation();return i&&(e.typeAnnotation=i),this.tsParseTypeMemberSemicolon(),this.finishNode(e,"TSIndexSignature")}tsParsePropertyOrMethodSignature(e,s){this.eat(17)&&(e.optional=!0);let i=e;if(this.match(10)||this.match(47)){s&&this.raise(I.ReadonlyForMethodSignature,{at:e});let n=i;n.kind&&this.match(47)&&this.raise(I.AccesorCannotHaveTypeParameters,{at:this.state.curPosition()}),this.tsFillSignature(14,n),this.tsParseTypeMemberSemicolon();let a="parameters",o="typeAnnotation";if(n.kind==="get")n[a].length>0&&(this.raise(m.BadGetterArity,{at:this.state.curPosition()}),this.isThisParam(n[a][0])&&this.raise(I.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}));else if(n.kind==="set"){if(n[a].length!==1)this.raise(m.BadSetterArity,{at:this.state.curPosition()});else{let c=n[a][0];this.isThisParam(c)&&this.raise(I.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}),c.type==="Identifier"&&c.optional&&this.raise(I.SetAccesorCannotHaveOptionalParameter,{at:this.state.curPosition()}),c.type==="RestElement"&&this.raise(I.SetAccesorCannotHaveRestParameter,{at:this.state.curPosition()})}n[o]&&this.raise(I.SetAccesorCannotHaveReturnType,{at:n[o]})}else n.kind="method";return this.finishNode(n,"TSMethodSignature")}else{let n=i;s&&(n.readonly=!0);let a=this.tsTryParseTypeAnnotation();return a&&(n.typeAnnotation=a),this.tsParseTypeMemberSemicolon(),this.finishNode(n,"TSPropertySignature")}}tsParseTypeMember(){let e=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",e);if(this.match(77)){let i=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",e):(e.key=this.createIdentifier(i,"new"),this.tsParsePropertyOrMethodSignature(e,!1))}this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},e);let s=this.tsTryParseIndexSignature(e);return s||(super.parsePropertyName(e),!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.tsTokenCanFollowModifier()&&(e.kind=e.key.name,super.parsePropertyName(e)),this.tsParsePropertyOrMethodSignature(e,!!e.readonly))}tsParseTypeLiteral(){let e=this.startNode();return e.members=this.tsParseObjectTypeMembers(),this.finishNode(e,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);let e=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),e}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(120):(this.isContextual(120)&&this.next(),!this.match(0)||(this.next(),!this.tsIsIdentifier())?!1:(this.next(),this.match(58)))}tsParseMappedTypeParameter(){let e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsExpectThenParseType(58),this.finishNode(e,"TSTypeParameter")}tsParseMappedType(){let e=this.startNode();return this.expect(5),this.match(53)?(e.readonly=this.state.value,this.next(),this.expectContextual(120)):this.eatContextual(120)&&(e.readonly=!0),this.expect(0),e.typeParameter=this.tsParseMappedTypeParameter(),e.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(e.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(e.optional=!0),e.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(e,"TSMappedType")}tsParseTupleType(){let e=this.startNode();e.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let s=!1,i=null;return e.elementTypes.forEach(n=>{var a;let{type:o}=n;s&&o!=="TSRestType"&&o!=="TSOptionalType"&&!(o==="TSNamedTupleMember"&&n.optional)&&this.raise(I.OptionalTypeBeforeRequired,{at:n}),s||(s=o==="TSNamedTupleMember"&&n.optional||o==="TSOptionalType");let c=o;o==="TSRestType"&&(n=n.typeAnnotation,c=n.type);let u=c==="TSNamedTupleMember";(a=i)!=null||(i=u),i!==u&&this.raise(I.MixedLabeledAndUnlabeledElements,{at:n})}),this.finishNode(e,"TSTupleType")}tsParseTupleElementType(){let{startLoc:e}=this.state,s=this.eat(21),i,n,a,o,u=Ze(this.state.type)?this.lookaheadCharCode():null;if(u===58)i=!0,a=!1,n=this.parseIdentifier(!0),this.expect(14),o=this.tsParseType();else if(u===63){a=!0;let l=this.state.startLoc,h=this.state.value,p=this.tsParseNonArrayType();this.lookaheadCharCode()===58?(i=!0,n=this.createIdentifier(this.startNodeAt(l),h),this.expect(17),this.expect(14),o=this.tsParseType()):(i=!1,o=p,this.expect(17))}else o=this.tsParseType(),a=this.eat(17),i=this.eat(14);if(i){let l;n?(l=this.startNodeAtNode(n),l.optional=a,l.label=n,l.elementType=o,this.eat(17)&&(l.optional=!0,this.raise(I.TupleOptionalAfterType,{at:this.state.lastTokStartLoc}))):(l=this.startNodeAtNode(o),l.optional=a,this.raise(I.InvalidTupleMemberLabel,{at:o}),l.label=o,l.elementType=this.tsParseType()),o=this.finishNode(l,"TSNamedTupleMember")}else if(a){let l=this.startNodeAtNode(o);l.typeAnnotation=o,o=this.finishNode(l,"TSOptionalType")}if(s){let l=this.startNodeAt(e);l.typeAnnotation=o,o=this.finishNode(l,"TSRestType")}return o}tsParseParenthesizedType(){let e=this.startNode();return this.expect(10),e.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(e,"TSParenthesizedType")}tsParseFunctionOrConstructorType(e,s){let i=this.startNode();return e==="TSConstructorType"&&(i.abstract=!!s,s&&this.next(),this.next()),this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,i)),this.finishNode(i,e)}tsParseLiteralTypeNode(){let e=this.startNode();switch(this.state.type){case 132:case 133:case 131:case 85:case 86:e.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(e,"TSLiteralType")}tsParseTemplateLiteralType(){let e=this.startNode();return e.literal=super.parseTemplate(!1),this.finishNode(e,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){let e=this.tsParseThisTypeNode();return this.isContextual(114)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(e):e}tsParseNonArrayType(){switch(this.state.type){case 131:case 132:case 133:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){let e=this.startNode(),s=this.lookahead();return s.type!==132&&s.type!==133&&this.unexpected(),e.literal=this.parseMaybeUnary(),this.finishNode(e,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{let{type:e}=this.state;if(H(e)||e===88||e===84){let s=e===88?"TSVoidKeyword":e===84?"TSNullKeyword":wS(this.state.value);if(s!==void 0&&this.lookaheadCharCode()!==46){let i=this.startNode();return this.next(),this.finishNode(i,s)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let e=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){let s=this.startNodeAtNode(e);s.elementType=e,this.expect(3),e=this.finishNode(s,"TSArrayType")}else{let s=this.startNodeAtNode(e);s.objectType=e,s.indexType=this.tsParseType(),this.expect(3),e=this.finishNode(s,"TSIndexedAccessType")}return e}tsParseTypeOperator(){let e=this.startNode(),s=this.state.value;return this.next(),e.operator=s,e.typeAnnotation=this.tsParseTypeOperatorOrHigher(),s==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(e),this.finishNode(e,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(e){switch(e.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(I.UnexpectedReadonly,{at:e})}}tsParseInferType(){let e=this.startNode();this.expectContextual(113);let s=this.startNode();return s.name=this.tsParseTypeParameterName(),s.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),e.typeParameter=this.finishNode(s,"TSTypeParameter"),this.finishNode(e,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){let e=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return e}}tsParseTypeOperatorOrHigher(){return xE(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(113)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(e,s,i){let n=this.startNode(),a=this.eat(i),o=[];do o.push(s());while(this.eat(i));return o.length===1&&!a?o[0]:(n.types=o,this.finishNode(n,e))}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return this.match(47)?!0:this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(H(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){let{errors:e}=this.state,s=e.length;try{return this.parseObjectLike(8,!0),e.length===s}catch{return!1}}if(this.match(0)){this.next();let{errors:e}=this.state,s=e.length;try{return super.parseBindingList(3,93,1),e.length===s}catch{return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(29)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(e){return this.tsInType(()=>{let s=this.startNode();this.expect(e);let i=this.startNode(),n=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(n&&this.match(78)){let c=this.tsParseThisTypeOrThisTypePredicate();return c.type==="TSThisType"?(i.parameterName=c,i.asserts=!0,i.typeAnnotation=null,c=this.finishNode(i,"TSTypePredicate")):(this.resetStartLocationFromNode(c,i),c.asserts=!0),s.typeAnnotation=c,this.finishNode(s,"TSTypeAnnotation")}let a=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!a)return n?(i.parameterName=this.parseIdentifier(),i.asserts=n,i.typeAnnotation=null,s.typeAnnotation=this.finishNode(i,"TSTypePredicate"),this.finishNode(s,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,s);let o=this.tsParseTypeAnnotation(!1);return i.parameterName=a,i.typeAnnotation=o,i.asserts=n,s.typeAnnotation=this.finishNode(i,"TSTypePredicate"),this.finishNode(s,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){let e=this.parseIdentifier();if(this.isContextual(114)&&!this.hasPrecedingLineBreak())return this.next(),e}tsParseTypePredicateAsserts(){if(this.state.type!==107)return!1;let e=this.state.containsEsc;return this.next(),!H(this.state.type)&&!this.match(78)?!1:(e&&this.raise(m.InvalidEscapedReservedWord,{at:this.state.lastTokStartLoc,reservedWord:"asserts"}),!0)}tsParseTypeAnnotation(e=!0,s=this.startNode()){return this.tsInType(()=>{e&&this.expect(14),s.typeAnnotation=this.tsParseType()}),this.finishNode(s,"TSTypeAnnotation")}tsParseType(){Ad(this.state.inType);let e=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return e;let s=this.startNodeAtNode(e);return s.checkType=e,s.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),s.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),s.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(s,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(122)&&this.lookahead().type===77}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(I.ReservedTypeAssertion,{at:this.state.startLoc});let e=this.startNode();return e.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType())),this.expect(48),e.expression=this.parseMaybeUnary(),this.finishNode(e,"TSTypeAssertion")}tsParseHeritageClause(e){let s=this.state.startLoc,i=this.tsParseDelimitedList("HeritageClauseElement",()=>{let n=this.startNode();return n.expression=this.tsParseEntityName(),this.match(47)&&(n.typeParameters=this.tsParseTypeArguments()),this.finishNode(n,"TSExpressionWithTypeArguments")});return i.length||this.raise(I.EmptyHeritageClauseType,{at:s,token:e}),i}tsParseInterfaceDeclaration(e,s={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(127),s.declare&&(e.declare=!0),H(this.state.type)?(e.id=this.parseIdentifier(),this.checkIdentifier(e.id,VE)):(e.id=null,this.raise(I.MissingInterfaceName,{at:this.state.startLoc})),e.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81)&&(e.extends=this.tsParseHeritageClause("extends"));let i=this.startNode();return i.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),e.body=this.finishNode(i,"TSInterfaceBody"),this.finishNode(e,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(e){return e.id=this.parseIdentifier(),this.checkIdentifier(e.id,zE),e.typeAnnotation=this.tsInType(()=>{if(e.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(112)&&this.lookahead().type!==16){let s=this.startNode();return this.next(),this.finishNode(s,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(e,"TSTypeAliasDeclaration")}tsInNoContext(e){let s=this.state.context;this.state.context=[s[0]];try{return e()}finally{this.state.context=s}}tsInType(e){let s=this.state.inType;this.state.inType=!0;try{return e()}finally{this.state.inType=s}}tsInDisallowConditionalTypesContext(e){let s=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return e()}finally{this.state.inDisallowConditionalTypesContext=s}}tsInAllowConditionalTypesContext(e){let s=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return e()}finally{this.state.inDisallowConditionalTypesContext=s}}tsEatThenParseType(e){if(this.match(e))return this.tsNextThenParseType()}tsExpectThenParseType(e){return this.tsInType(()=>(this.expect(e),this.tsParseType()))}tsNextThenParseType(){return this.tsInType(()=>(this.next(),this.tsParseType()))}tsParseEnumMember(){let e=this.startNode();return e.id=this.match(131)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(e.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(e,"TSEnumMember")}tsParseEnumDeclaration(e,s={}){return s.const&&(e.const=!0),s.declare&&(e.declare=!0),this.expectContextual(124),e.id=this.parseIdentifier(),this.checkIdentifier(e.id,e.const?HE:Gd),this.expect(5),e.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(e,"TSEnumDeclaration")}tsParseModuleBlock(){let e=this.startNode();return this.scope.enter(qs),this.expect(5),super.parseBlockOrModuleBlockBody(e.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(e,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(e,s=!1){if(e.id=this.parseIdentifier(),s||this.checkIdentifier(e.id,KE),this.eat(16)){let i=this.startNode();this.tsParseModuleOrNamespaceDeclaration(i,!0),e.body=i}else this.scope.enter(Gs),this.prodParam.enter(Ks),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(e,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(e){return this.isContextual(110)?(e.global=!0,e.id=this.parseIdentifier()):this.match(131)?e.id=super.parseStringLiteral(this.state.value):this.unexpected(),this.match(5)?(this.scope.enter(Gs),this.prodParam.enter(Ks),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(e,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(e,s){e.isExport=s||!1,e.id=this.parseIdentifier(),this.checkIdentifier(e.id,$r),this.expect(29);let i=this.tsParseModuleReference();return e.importKind==="type"&&i.type!=="TSExternalModuleReference"&&this.raise(I.ImportAliasHasImportType,{at:i}),e.moduleReference=i,this.semicolon(),this.finishNode(e,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(117)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){let e=this.startNode();return this.expectContextual(117),this.expect(10),this.match(131)||this.unexpected(),e.expression=super.parseExprAtom(),this.expect(11),this.finishNode(e,"TSExternalModuleReference")}tsLookAhead(e){let s=this.state.clone(),i=e();return this.state=s,i}tsTryParseAndCatch(e){let s=this.tryParse(i=>e()||i());if(!(s.aborted||!s.node))return s.error&&(this.state=s.failState),s.node}tsTryParse(e){let s=this.state.clone(),i=e();if(i!==void 0&&i!==!1)return i;this.state=s}tsTryParseDeclare(e){if(this.isLineTerminator())return;let s=this.state.type,i;return this.isContextual(99)&&(s=74,i="let"),this.tsInAmbientContext(()=>{switch(s){case 68:return e.declare=!0,super.parseFunctionStatement(e,!1,!1);case 80:return e.declare=!0,this.parseClass(e,!0,!1);case 124:return this.tsParseEnumDeclaration(e,{declare:!0});case 110:return this.tsParseAmbientExternalModuleDeclaration(e);case 75:case 74:return!this.match(75)||!this.isLookaheadContextual("enum")?(e.declare=!0,this.parseVarStatement(e,i||this.state.value,!0)):(this.expect(75),this.tsParseEnumDeclaration(e,{const:!0,declare:!0}));case 127:{let n=this.tsParseInterfaceDeclaration(e,{declare:!0});if(n)return n}default:if(H(s))return this.tsParseDeclaration(e,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(e,s,i){switch(s.name){case"declare":{let n=this.tsTryParseDeclare(e);return n&&(n.declare=!0),n}case"global":if(this.match(5)){this.scope.enter(Gs),this.prodParam.enter(Ks);let n=e;return n.global=!0,n.id=s,n.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(n,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(e,s.name,!1,i)}}tsParseDeclaration(e,s,i,n){switch(s){case"abstract":if(this.tsCheckLineTerminator(i)&&(this.match(80)||H(this.state.type)))return this.tsParseAbstractDeclaration(e,n);break;case"module":if(this.tsCheckLineTerminator(i)){if(this.match(131))return this.tsParseAmbientExternalModuleDeclaration(e);if(H(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e)}break;case"namespace":if(this.tsCheckLineTerminator(i)&&H(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e);break;case"type":if(this.tsCheckLineTerminator(i)&&H(this.state.type))return this.tsParseTypeAliasDeclaration(e);break}}tsCheckLineTerminator(e){return e?this.hasFollowingLineBreak()?!1:(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(e){if(!this.match(47))return;let s=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;let i=this.tsTryParseAndCatch(()=>{let n=this.startNodeAt(e);return n.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(n),n.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),n});if(this.state.maybeInArrowParameters=s,!!i)return super.parseArrowExpression(i,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()===47)return this.tsParseTypeArguments()}tsParseTypeArguments(){let e=this.startNode();return e.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),e.params.length===0&&this.raise(I.EmptyTypeArguments,{at:e}),this.expect(48),this.finishNode(e,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return PE(this.state.type)}isExportDefaultSpecifier(){return this.tsIsDeclarationStart()?!1:super.isExportDefaultSpecifier()}parseAssignableListItem(e,s){let i=this.state.startLoc,n={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},n);let a=n.accessibility,o=n.override,c=n.readonly;!(e&4)&&(a||c||o)&&this.raise(I.UnexpectedParameterModifier,{at:i});let u=this.parseMaybeDefault();this.parseAssignableListItemTypes(u,e);let l=this.parseMaybeDefault(u.loc.start,u);if(a||c||o){let h=this.startNodeAt(i);return s.length&&(h.decorators=s),a&&(h.accessibility=a),c&&(h.readonly=c),o&&(h.override=o),l.type!=="Identifier"&&l.type!=="AssignmentPattern"&&this.raise(I.UnsupportedParameterPropertyKind,{at:h}),h.parameter=l,this.finishNode(h,"TSParameterProperty")}return s.length&&(u.decorators=s),l}isSimpleParameter(e){return e.type==="TSParameterProperty"&&super.isSimpleParameter(e.parameter)||super.isSimpleParameter(e)}tsDisallowOptionalPattern(e){for(let s of e.params)s.type!=="Identifier"&&s.optional&&!this.state.isAmbientContext&&this.raise(I.PatternIsOptional,{at:s})}setArrowFunctionParameters(e,s,i){super.setArrowFunctionParameters(e,s,i),this.tsDisallowOptionalPattern(e)}parseFunctionBodyAndFinish(e,s,i=!1){this.match(14)&&(e.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));let n=s==="FunctionDeclaration"?"TSDeclareFunction":s==="ClassMethod"||s==="ClassPrivateMethod"?"TSDeclareMethod":void 0;return n&&!this.match(5)&&this.isLineTerminator()?this.finishNode(e,n):n==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(I.DeclareFunctionHasImplementation,{at:e}),e.declare)?super.parseFunctionBodyAndFinish(e,n,i):(this.tsDisallowOptionalPattern(e),super.parseFunctionBodyAndFinish(e,s,i))}registerFunctionStatementId(e){!e.body&&e.id?this.checkIdentifier(e.id,Td):super.registerFunctionStatementId(e)}tsCheckForInvalidTypeCasts(e){e.forEach(s=>{(s==null?void 0:s.type)==="TSTypeCastExpression"&&this.raise(I.UnexpectedTypeAnnotation,{at:s.typeAnnotation})})}toReferencedList(e,s){return this.tsCheckForInvalidTypeCasts(e),e}parseArrayLike(e,s,i,n){let a=super.parseArrayLike(e,s,i,n);return a.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(a.elements),a}parseSubscript(e,s,i,n){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();let o=this.startNodeAt(s);return o.expression=e,this.finishNode(o,"TSNonNullExpression")}let a=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(i)return n.stop=!0,e;n.optionalChainMember=a=!0,this.next()}if(this.match(47)||this.match(51)){let o,c=this.tsTryParseAndCatch(()=>{if(!i&&this.atPossibleAsyncArrow(e)){let p=this.tsTryParseGenericAsyncArrowFunction(s);if(p)return p}let u=this.tsParseTypeArgumentsInExpression();if(!u)return;if(a&&!this.match(10)){o=this.state.curPosition();return}if(pn(this.state.type)){let p=super.parseTaggedTemplateExpression(e,s,n);return p.typeParameters=u,p}if(!i&&this.eat(10)){let p=this.startNodeAt(s);return p.callee=e,p.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(p.arguments),p.typeParameters=u,n.optionalChainMember&&(p.optional=a),this.finishCallExpression(p,n.optionalChainMember)}let l=this.state.type;if(l===48||l===52||l!==10&&yo(l)&&!this.hasPrecedingLineBreak())return;let h=this.startNodeAt(s);return h.expression=e,h.typeParameters=u,this.finishNode(h,"TSInstantiationExpression")});if(o&&this.unexpected(o,10),c)return c.type==="TSInstantiationExpression"&&(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)&&this.raise(I.InvalidPropertyAccessAfterInstantiationExpression,{at:this.state.startLoc}),c}return super.parseSubscript(e,s,i,n)}parseNewCallee(e){var s;super.parseNewCallee(e);let{callee:i}=e;i.type==="TSInstantiationExpression"&&!((s=i.extra)!=null&&s.parenthesized)&&(e.typeParameters=i.typeParameters,e.callee=i.expression)}parseExprOp(e,s,i){let n;if(on(58)>i&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(n=this.isContextual(118)))){let a=this.startNodeAt(s);return a.expression=e,a.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?(n&&this.raise(m.UnexpectedKeyword,{at:this.state.startLoc,keyword:"const"}),this.tsParseTypeReference()):this.tsParseType())),this.finishNode(a,n?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(a,s,i)}return super.parseExprOp(e,s,i)}checkReservedWord(e,s,i,n){this.state.isAmbientContext||super.checkReservedWord(e,s,i,n)}checkImportReflection(e){super.checkImportReflection(e),e.module&&e.importKind!=="value"&&this.raise(I.ImportReflectionHasImportType,{at:e.specifiers[0].loc.start})}checkDuplicateExports(){}parseImport(e){if(e.importKind="value",H(this.state.type)||this.match(55)||this.match(5)){let i=this.lookahead();if(this.isContextual(128)&&i.type!==12&&i.type!==97&&i.type!==29&&(e.importKind="type",this.next(),i=this.lookahead()),H(this.state.type)&&i.type===29)return this.tsParseImportEqualsDeclaration(e)}let s=super.parseImport(e);return s.importKind==="type"&&s.specifiers.length>1&&s.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(I.TypeImportCannotSpecifyDefaultAndNamed,{at:s}),s}parseExport(e,s){if(this.match(83))return this.next(),this.isContextual(128)&&this.lookaheadCharCode()!==61?(e.importKind="type",this.next()):e.importKind="value",this.tsParseImportEqualsDeclaration(e,!0);if(this.eat(29)){let i=e;return i.expression=super.parseExpression(),this.semicolon(),this.finishNode(i,"TSExportAssignment")}else if(this.eatContextual(93)){let i=e;return this.expectContextual(126),i.id=this.parseIdentifier(),this.semicolon(),this.finishNode(i,"TSNamespaceExportDeclaration")}else{if(e.exportKind="value",this.isContextual(128)){let i=this.lookaheadCharCode();(i===123||i===42)&&(this.next(),e.exportKind="type")}return super.parseExport(e,s)}}isAbstractClass(){return this.isContextual(122)&&this.lookahead().type===80}parseExportDefaultExpression(){if(this.isAbstractClass()){let e=this.startNode();return this.next(),e.abstract=!0,this.parseClass(e,!0,!0)}if(this.match(127)){let e=this.tsParseInterfaceDeclaration(this.startNode());if(e)return e}return super.parseExportDefaultExpression()}parseVarStatement(e,s,i=!1){let{isAmbientContext:n}=this.state,a=super.parseVarStatement(e,s,i||n);if(!n)return a;for(let{id:o,init:c}of a.declarations)!c||(s!=="const"||!!o.typeAnnotation?this.raise(I.InitializerNotAllowedInAmbientContext,{at:c}):NS(c,this.hasPlugin("estree"))||this.raise(I.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference,{at:c}));return a}parseStatementContent(e,s){if(this.match(75)&&this.isLookaheadContextual("enum")){let i=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(i,{const:!0})}if(this.isContextual(124))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(127)){let i=this.tsParseInterfaceDeclaration(this.startNode());if(i)return i}return super.parseStatementContent(e,s)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(e,s){return s.some(i=>Cd(i)?e.accessibility===i:!!e[i])}tsIsStartOfStaticBlocks(){return this.isContextual(104)&&this.lookaheadCharCode()===123}parseClassMember(e,s,i){let n=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:n,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:I.InvalidModifierOnTypeParameterPositions},s);let a=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(s,n)&&this.raise(I.StaticBlockCannotHaveModifier,{at:this.state.curPosition()}),super.parseClassStaticBlock(e,s)):this.parseClassMemberWithIsStatic(e,s,i,!!s.static)};s.declare?this.tsInAmbientContext(a):a()}parseClassMemberWithIsStatic(e,s,i,n){let a=this.tsTryParseIndexSignature(s);if(a){e.body.push(a),s.abstract&&this.raise(I.IndexSignatureHasAbstract,{at:s}),s.accessibility&&this.raise(I.IndexSignatureHasAccessibility,{at:s,modifier:s.accessibility}),s.declare&&this.raise(I.IndexSignatureHasDeclare,{at:s}),s.override&&this.raise(I.IndexSignatureHasOverride,{at:s});return}!this.state.inAbstractClass&&s.abstract&&this.raise(I.NonAbstractClassHasAbstractMethod,{at:s}),s.override&&(i.hadSuperClass||this.raise(I.OverrideNotInSubClass,{at:s})),super.parseClassMemberWithIsStatic(e,s,i,n)}parsePostMemberNameModifiers(e){this.eat(17)&&(e.optional=!0),e.readonly&&this.match(10)&&this.raise(I.ClassMethodHasReadonly,{at:e}),e.declare&&this.match(10)&&this.raise(I.ClassMethodHasDeclare,{at:e})}parseExpressionStatement(e,s,i){return(s.type==="Identifier"?this.tsParseExpressionStatement(e,s,i):void 0)||super.parseExpressionStatement(e,s,i)}shouldParseExportDeclaration(){return this.tsIsDeclarationStart()?!0:super.shouldParseExportDeclaration()}parseConditional(e,s,i){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(e,s,i);let n=this.tryParse(()=>super.parseConditional(e,s));return n.node?(n.error&&(this.state=n.failState),n.node):(n.error&&super.setOptionalParametersError(i,n.error),e)}parseParenItem(e,s){if(e=super.parseParenItem(e,s),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){let i=this.startNodeAt(s);return i.expression=e,i.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(i,"TSTypeCastExpression")}return e}parseExportDeclaration(e){if(!this.state.isAmbientContext&&this.isContextual(123))return this.tsInAmbientContext(()=>this.parseExportDeclaration(e));let s=this.state.startLoc,i=this.eatContextual(123);if(i&&(this.isContextual(123)||!this.shouldParseExportDeclaration()))throw this.raise(I.ExpectedAmbientAfterExportDeclare,{at:this.state.startLoc});let a=H(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(e);return a?((a.type==="TSInterfaceDeclaration"||a.type==="TSTypeAliasDeclaration"||i)&&(e.exportKind="type"),i&&(this.resetStartLocation(a,s),a.declare=!0),a):null}parseClassId(e,s,i,n){if((!s||i)&&this.isContextual(111))return;super.parseClassId(e,s,i,e.declare?Td:Vd);let a=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);a&&(e.typeParameters=a)}parseClassPropertyAnnotation(e){e.optional||(this.eat(35)?e.definite=!0:this.eat(17)&&(e.optional=!0));let s=this.tsTryParseTypeAnnotation();s&&(e.typeAnnotation=s)}parseClassProperty(e){if(this.parseClassPropertyAnnotation(e),this.state.isAmbientContext&&!(e.readonly&&!e.typeAnnotation)&&this.match(29)&&this.raise(I.DeclareClassFieldHasInitializer,{at:this.state.startLoc}),e.abstract&&this.match(29)){let{key:s}=e;this.raise(I.AbstractPropertyHasInitializer,{at:this.state.startLoc,propertyName:s.type==="Identifier"&&!e.computed?s.name:`[${this.input.slice(s.start,s.end)}]`})}return super.parseClassProperty(e)}parseClassPrivateProperty(e){return e.abstract&&this.raise(I.PrivateElementHasAbstract,{at:e}),e.accessibility&&this.raise(I.PrivateElementHasAccessibility,{at:e,modifier:e.accessibility}),this.parseClassPropertyAnnotation(e),super.parseClassPrivateProperty(e)}parseClassAccessorProperty(e){return this.parseClassPropertyAnnotation(e),e.optional&&this.raise(I.AccessorCannotBeOptional,{at:e}),super.parseClassAccessorProperty(e)}pushClassMethod(e,s,i,n,a,o){let c=this.tsTryParseTypeParameters(this.tsParseConstModifier);c&&a&&this.raise(I.ConstructorHasTypeParameters,{at:c});let{declare:u=!1,kind:l}=s;u&&(l==="get"||l==="set")&&this.raise(I.DeclareAccessor,{at:s,kind:l}),c&&(s.typeParameters=c),super.pushClassMethod(e,s,i,n,a,o)}pushClassPrivateMethod(e,s,i,n){let a=this.tsTryParseTypeParameters(this.tsParseConstModifier);a&&(s.typeParameters=a),super.pushClassPrivateMethod(e,s,i,n)}declareClassPrivateMethodInScope(e,s){e.type!=="TSDeclareMethod"&&(e.type==="MethodDefinition"&&!e.value.body||super.declareClassPrivateMethodInScope(e,s))}parseClassSuper(e){super.parseClassSuper(e),e.superClass&&(this.match(47)||this.match(51))&&(e.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(111)&&(e.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(e,s,i,n,a,o,c){let u=this.tsTryParseTypeParameters(this.tsParseConstModifier);return u&&(e.typeParameters=u),super.parseObjPropValue(e,s,i,n,a,o,c)}parseFunctionParams(e,s){let i=this.tsTryParseTypeParameters(this.tsParseConstModifier);i&&(e.typeParameters=i),super.parseFunctionParams(e,s)}parseVarId(e,s){super.parseVarId(e,s),e.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(e.definite=!0);let i=this.tsTryParseTypeAnnotation();i&&(e.id.typeAnnotation=i,this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,s){return this.match(14)&&(e.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(e,s)}parseMaybeAssign(e,s){var i,n,a,o,c;let u,l,h;if(this.hasPlugin("jsx")&&(this.match(140)||this.match(47))){if(u=this.state.clone(),l=this.tryParse(()=>super.parseMaybeAssign(e,s),u),!l.error)return l.node;let{context:y}=this.state,x=y[y.length-1];(x===te.j_oTag||x===te.j_expr)&&y.pop()}if(!((i=l)!=null&&i.error)&&!this.match(47))return super.parseMaybeAssign(e,s);(!u||u===this.state)&&(u=this.state.clone());let p,f=this.tryParse(y=>{var x,T;p=this.tsParseTypeParameters(this.tsParseConstModifier);let E=super.parseMaybeAssign(e,s);return(E.type!=="ArrowFunctionExpression"||(x=E.extra)!=null&&x.parenthesized)&&y(),((T=p)==null?void 0:T.params.length)!==0&&this.resetStartLocationFromNode(E,p),E.typeParameters=p,E},u);if(!f.error&&!f.aborted)return p&&this.reportReservedArrowTypeParam(p),f.node;if(!l&&(Ad(!this.hasPlugin("jsx")),h=this.tryParse(()=>super.parseMaybeAssign(e,s),u),!h.error))return h.node;if((n=l)!=null&&n.node)return this.state=l.failState,l.node;if(f.node)return this.state=f.failState,p&&this.reportReservedArrowTypeParam(p),f.node;if((a=h)!=null&&a.node)return this.state=h.failState,h.node;throw((o=l)==null?void 0:o.error)||f.error||((c=h)==null?void 0:c.error)}reportReservedArrowTypeParam(e){var s;e.params.length===1&&!e.params[0].constraint&&!((s=e.extra)!=null&&s.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(I.ReservedArrowTypeParam,{at:e})}parseMaybeUnary(e,s){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(e,s)}parseArrow(e){if(this.match(14)){let s=this.tryParse(i=>{let n=this.tsParseTypeOrTypePredicateAnnotation(14);return(this.canInsertSemicolon()||!this.match(19))&&i(),n});if(s.aborted)return;s.thrown||(s.error&&(this.state=s.failState),e.returnType=s.node)}return super.parseArrow(e)}parseAssignableListItemTypes(e,s){if(!(s&2))return e;this.eat(17)&&(e.optional=!0);let i=this.tsTryParseTypeAnnotation();return i&&(e.typeAnnotation=i),this.resetEndLocation(e),e}isAssignable(e,s){switch(e.type){case"TSTypeCastExpression":return this.isAssignable(e.expression,s);case"TSParameterProperty":return!0;default:return super.isAssignable(e,s)}}toAssignable(e,s=!1){switch(e.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(e,s);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":s?this.expressionScope.recordArrowParameterBindingError(I.UnexpectedTypeCastInParameter,{at:e}):this.raise(I.UnexpectedTypeCastInParameter,{at:e}),this.toAssignable(e.expression,s);break;case"AssignmentExpression":!s&&e.left.type==="TSTypeCastExpression"&&(e.left=this.typeCastToParameter(e.left));default:super.toAssignable(e,s)}}toAssignableParenthesizedExpression(e,s){switch(e.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(e.expression,s);break;default:super.toAssignable(e,s)}}checkToRestConversion(e,s){switch(e.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(e.expression,!1);break;default:super.checkToRestConversion(e,s)}}isValidLVal(e,s,i){return SS({TSTypeCastExpression:!0,TSParameterProperty:"parameter",TSNonNullExpression:"expression",TSAsExpression:(i!==Bt||!s)&&["expression",!0],TSSatisfiesExpression:(i!==Bt||!s)&&["expression",!0],TSTypeAssertion:(i!==Bt||!s)&&["expression",!0]},e)||super.isValidLVal(e,s,i)}parseBindingAtom(){return this.state.type===78?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(e){if(this.match(47)||this.match(51)){let s=this.tsParseTypeArgumentsInExpression();if(this.match(10)){let i=super.parseMaybeDecoratorArguments(e);return i.typeParameters=s,i}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(e)}checkCommaAfterRest(e){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===e?(this.next(),!1):super.checkCommaAfterRest(e)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(e,s){let i=super.parseMaybeDefault(e,s);return i.type==="AssignmentPattern"&&i.typeAnnotation&&i.right.start<i.typeAnnotation.start&&this.raise(I.TypeAnnotationAfterAssign,{at:i.typeAnnotation}),i}getTokenFromCode(e){if(this.state.inType){if(e===62){this.finishOp(48,1);return}if(e===60){this.finishOp(47,1);return}}super.getTokenFromCode(e)}reScan_lt_gt(){let{type:e}=this.state;e===47?(this.state.pos-=1,this.readToken_lt()):e===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){let{type:e}=this.state;return e===51?(this.state.pos-=2,this.finishOp(47,1),47):e}toAssignableList(e,s,i){for(let n=0;n<e.length;n++){let a=e[n];(a==null?void 0:a.type)==="TSTypeCastExpression"&&(e[n]=this.typeCastToParameter(a))}super.toAssignableList(e,s,i)}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.loc.end),e.expression}shouldParseArrow(e){return this.match(14)?e.every(s=>this.isAssignable(s,!0)):super.shouldParseArrow(e)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(e){if(this.match(47)||this.match(51)){let s=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());s&&(e.typeParameters=s)}return super.jsxParseOpeningElementAfterName(e)}getGetterSetterExpectedParamCount(e){let s=super.getGetterSetterExpectedParamCount(e),n=this.getObjectOrClassMethodParams(e)[0];return n&&this.isThisParam(n)?s+1:s}parseCatchClauseParam(){let e=super.parseCatchClauseParam(),s=this.tsTryParseTypeAnnotation();return s&&(e.typeAnnotation=s,this.resetEndLocation(e)),e}tsInAmbientContext(e){let s=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return e()}finally{this.state.isAmbientContext=s}}parseClass(e,s,i){let n=this.state.inAbstractClass;this.state.inAbstractClass=!!e.abstract;try{return super.parseClass(e,s,i)}finally{this.state.inAbstractClass=n}}tsParseAbstractDeclaration(e,s){if(this.match(80))return e.abstract=!0,this.maybeTakeDecorators(s,this.parseClass(e,!0,!1));if(this.isContextual(127)){if(!this.hasFollowingLineBreak())return e.abstract=!0,this.raise(I.NonClassMethodPropertyHasAbstractModifer,{at:e}),this.tsParseInterfaceDeclaration(e)}else this.unexpected(null,80)}parseMethod(e,s,i,n,a,o,c){let u=super.parseMethod(e,s,i,n,a,o,c);if(u.abstract&&(this.hasPlugin("estree")?!!u.value.body:!!u.body)){let{key:h}=u;this.raise(I.AbstractMethodHasImplementation,{at:u,methodName:h.type==="Identifier"&&!u.computed?h.name:`[${this.input.slice(h.start,h.end)}]`})}return u}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(e,s,i,n){return!s&&n?(this.parseTypeOnlyImportExportSpecifier(e,!1,i),this.finishNode(e,"ExportSpecifier")):(e.exportKind="value",super.parseExportSpecifier(e,s,i,n))}parseImportSpecifier(e,s,i,n,a){return!s&&n?(this.parseTypeOnlyImportExportSpecifier(e,!0,i),this.finishNode(e,"ImportSpecifier")):(e.importKind="value",super.parseImportSpecifier(e,s,i,n,i?bd:$r))}parseTypeOnlyImportExportSpecifier(e,s,i){let n=s?"imported":"local",a=s?"local":"exported",o=e[n],c,u=!1,l=!0,h=o.loc.start;if(this.isContextual(93)){let f=this.parseIdentifier();if(this.isContextual(93)){let y=this.parseIdentifier();Ze(this.state.type)?(u=!0,o=f,c=s?this.parseIdentifier():this.parseModuleExportName(),l=!1):(c=y,l=!1)}else Ze(this.state.type)?(l=!1,c=s?this.parseIdentifier():this.parseModuleExportName()):(u=!0,o=f)}else Ze(this.state.type)&&(u=!0,s?(o=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(o.name,o.loc.start,!0,!0)):o=this.parseModuleExportName());u&&i&&this.raise(s?I.TypeModifierIsUsedInTypeImports:I.TypeModifierIsUsedInTypeExports,{at:h}),e[n]=o,e[a]=c;let p=s?"importKind":"exportKind";e[p]=u?"type":"value",l&&this.eatContextual(93)&&(e[a]=s?this.parseIdentifier():this.parseModuleExportName()),e[a]||(e[a]=mt(e[n])),s&&this.checkIdentifier(e[a],u?bd:$r)}};function IS(r){if(r.type!=="MemberExpression")return!1;let{computed:t,property:e}=r;return t&&e.type!=="StringLiteral"&&(e.type!=="TemplateLiteral"||e.expressions.length>0)?!1:rm(r.object)}function NS(r,t){var e;let{type:s}=r;if((e=r.extra)!=null&&e.parenthesized)return!1;if(t){if(s==="Literal"){let{value:i}=r;if(typeof i=="string"||typeof i=="boolean")return!0}}else if(s==="StringLiteral"||s==="BooleanLiteral")return!0;return!!(sm(r,t)||kS(r,t)||s==="TemplateLiteral"&&r.expressions.length===0||IS(r))}function sm(r,t){return t?r.type==="Literal"&&(typeof r.value=="number"||"bigint"in r):r.type==="NumericLiteral"||r.type==="BigIntLiteral"}function kS(r,t){if(r.type==="UnaryExpression"){let{operator:e,argument:s}=r;if(e==="-"&&sm(s,t))return!0}return!1}function rm(r){return r.type==="Identifier"?!0:r.type!=="MemberExpression"||r.computed?!1:rm(r.object)}var Id=ft`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."}),_S=r=>class extends r{parsePlaceholder(e){if(this.match(142)){let s=this.startNode();return this.next(),this.assertNoSpace(),s.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(142),this.finishPlaceholder(s,e)}}finishPlaceholder(e,s){let i=!!(e.expectedNode&&e.type==="Placeholder");return e.expectedNode=s,i?e:this.finishNode(e,"Placeholder")}getTokenFromCode(e){e===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(142,2):super.getTokenFromCode(e)}parseExprAtom(e){return this.parsePlaceholder("Expression")||super.parseExprAtom(e)}parseIdentifier(e){return this.parsePlaceholder("Identifier")||super.parseIdentifier(e)}checkReservedWord(e,s,i,n){e!==void 0&&super.checkReservedWord(e,s,i,n)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(e,s,i){return e==="Placeholder"||super.isValidLVal(e,s,i)}toAssignable(e,s){e&&e.type==="Placeholder"&&e.expectedNode==="Expression"?e.expectedNode="Pattern":super.toAssignable(e,s)}chStartsBindingIdentifier(e,s){return!!(super.chStartsBindingIdentifier(e,s)||this.lookahead().type===142)}verifyBreakContinue(e,s){e.label&&e.label.type==="Placeholder"||super.verifyBreakContinue(e,s)}parseExpressionStatement(e,s){if(s.type!=="Placeholder"||s.extra&&s.extra.parenthesized)return super.parseExpressionStatement(e,s);if(this.match(14)){let i=e;return i.label=this.finishPlaceholder(s,"Identifier"),this.next(),i.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(i,"LabeledStatement")}return this.semicolon(),e.name=s.name,this.finishPlaceholder(e,"Statement")}parseBlock(e,s,i){return this.parsePlaceholder("BlockStatement")||super.parseBlock(e,s,i)}parseFunctionId(e){return this.parsePlaceholder("Identifier")||super.parseFunctionId(e)}parseClass(e,s,i){let n=s?"ClassDeclaration":"ClassExpression";this.next();let a=this.state.strict,o=this.parsePlaceholder("Identifier");if(o)if(this.match(81)||this.match(142)||this.match(5))e.id=o;else{if(i||!s)return e.id=null,e.body=this.finishPlaceholder(o,"ClassBody"),this.finishNode(e,n);throw this.raise(Id.ClassNameIsRequired,{at:this.state.startLoc})}else this.parseClassId(e,s,i);return super.parseClassSuper(e),e.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!e.superClass,a),this.finishNode(e,n)}parseExport(e,s){let i=this.parsePlaceholder("Identifier");if(!i)return super.parseExport(e,s);if(!this.isContextual(97)&&!this.match(12))return e.specifiers=[],e.source=null,e.declaration=this.finishPlaceholder(i,"Declaration"),this.finishNode(e,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");let n=this.startNode();return n.exported=i,e.specifiers=[this.finishNode(n,"ExportDefaultSpecifier")],super.parseExport(e,s)}isExportDefaultSpecifier(){if(this.match(65)){let e=this.nextTokenStart();if(this.isUnparsedContextual(e,"from")&&this.input.startsWith($t(142),this.nextTokenStartSince(e+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(e){return e.specifiers&&e.specifiers.length>0?!0:super.maybeParseExportDefaultSpecifier(e)}checkExport(e){let{specifiers:s}=e;s!=null&&s.length&&(e.specifiers=s.filter(i=>i.exported.type==="Placeholder")),super.checkExport(e),e.specifiers=s}parseImport(e){let s=this.parsePlaceholder("Identifier");if(!s)return super.parseImport(e);if(e.specifiers=[],!this.isContextual(97)&&!this.match(12))return e.source=this.finishPlaceholder(s,"StringLiteral"),this.semicolon(),this.finishNode(e,"ImportDeclaration");let i=this.startNodeAtNode(s);return i.local=s,e.specifiers.push(this.finishNode(i,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(e)||this.parseNamedImportSpecifiers(e)),this.expectContextual(97),e.source=this.parseImportSource(),this.semicolon(),this.finishNode(e,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){this.state.start>this.state.lastTokEndLoc.index&&this.raise(Id.UnexpectedSpace,{at:this.state.lastTokEndLoc})}},OS=r=>class extends r{parseV8Intrinsic(){if(this.match(54)){let e=this.state.startLoc,s=this.startNode();if(this.next(),H(this.state.type)){let i=this.parseIdentifierName(),n=this.createIdentifier(s,i);if(n.type="V8IntrinsicIdentifier",this.match(10))return n}this.unexpected(e)}}parseExprAtom(e){return this.parseV8Intrinsic()||super.parseExprAtom(e)}};function be(r,t){let[e,s]=typeof t=="string"?[t,{}]:t,i=Object.keys(s),n=i.length===0;return r.some(a=>{if(typeof a=="string")return n&&a===e;{let[o,c]=a;if(o!==e)return!1;for(let u of i)if(c[u]!==s[u])return!1;return!0}})}function ls(r,t,e){let s=r.find(i=>Array.isArray(i)?i[0]===t:i===t);return s&&Array.isArray(s)&&s.length>1?s[1][e]:null}var Nd=["minimal","fsharp","hack","smart"],kd=["^^","@@","^","%","#"],_d=["hash","bar"];function LS(r){if(be(r,"decorators")){if(be(r,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");let t=ls(r,"decorators","decoratorsBeforeExport");if(t!=null&&typeof t!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean, if specified.");let e=ls(r,"decorators","allowCallParenthesized");if(e!=null&&typeof e!="boolean")throw new Error("'allowCallParenthesized' must be a boolean.")}if(be(r,"flow")&&be(r,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(be(r,"placeholders")&&be(r,"v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(be(r,"pipelineOperator")){let t=ls(r,"pipelineOperator","proposal");if(!Nd.includes(t)){let s=Nd.map(i=>`"${i}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${s}.`)}let e=be(r,["recordAndTuple",{syntaxType:"hash"}]);if(t==="hack"){if(be(r,"placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(be(r,"v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");let s=ls(r,"pipelineOperator","topicToken");if(!kd.includes(s)){let i=kd.map(n=>`"${n}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${i}.`)}if(s==="#"&&e)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "hack", topicToken: "#" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}else if(t==="smart"&&e)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "smart" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}if(be(r,"moduleAttributes")){if(be(r,"importAssertions"))throw new Error("Cannot combine importAssertions and moduleAttributes plugins.");if(ls(r,"moduleAttributes","version")!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(be(r,"recordAndTuple")&&ls(r,"recordAndTuple","syntaxType")!=null&&!_d.includes(ls(r,"recordAndTuple","syntaxType")))throw new Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+_d.map(t=>`'${t}'`).join(", "));if(be(r,"asyncDoExpressions")&&!be(r,"doExpressions")){let t=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw t.missingPlugins="doExpressions",t}}var im={estree:OE,jsx:bS,flow:PS,typescript:CS,v8intrinsic:OS,placeholders:_S},DS=Object.keys(im),Bo=class extends Ro{checkProto(t,e,s,i){if(t.type==="SpreadElement"||this.isObjectMethod(t)||t.computed||t.shorthand)return;let n=t.key;if((n.type==="Identifier"?n.name:n.value)==="__proto__"){if(e){this.raise(m.RecordNoProto,{at:n});return}s.used&&(i?i.doubleProtoLoc===null&&(i.doubleProtoLoc=n.loc.start):this.raise(m.DuplicateProto,{at:n})),s.used=!0}}shouldExitDescending(t,e){return t.type==="ArrowFunctionExpression"&&t.start===e}getExpression(){this.enterInitialScopes(),this.nextToken();let t=this.parseExpression();return this.match(137)||this.unexpected(),this.finalizeRemainingComments(),t.comments=this.state.comments,t.errors=this.state.errors,this.options.tokens&&(t.tokens=this.tokens),t}parseExpression(t,e){return t?this.disallowInAnd(()=>this.parseExpressionBase(e)):this.allowInAnd(()=>this.parseExpressionBase(e))}parseExpressionBase(t){let e=this.state.startLoc,s=this.parseMaybeAssign(t);if(this.match(12)){let i=this.startNodeAt(e);for(i.expressions=[s];this.eat(12);)i.expressions.push(this.parseMaybeAssign(t));return this.toReferencedList(i.expressions),this.finishNode(i,"SequenceExpression")}return s}parseMaybeAssignDisallowIn(t,e){return this.disallowInAnd(()=>this.parseMaybeAssign(t,e))}parseMaybeAssignAllowIn(t,e){return this.allowInAnd(()=>this.parseMaybeAssign(t,e))}setOptionalParametersError(t,e){var s;t.optionalParametersLoc=(s=e==null?void 0:e.loc)!=null?s:this.state.startLoc}parseMaybeAssign(t,e){let s=this.state.startLoc;if(this.isContextual(106)&&this.prodParam.hasYield){let o=this.parseYield();return e&&(o=e.call(this,o,s)),o}let i;t?i=!1:(t=new Xs,i=!0);let{type:n}=this.state;(n===10||H(n))&&(this.state.potentialArrowAt=this.state.start);let a=this.parseMaybeConditional(t);if(e&&(a=e.call(this,a,s)),fE(this.state.type)){let o=this.startNodeAt(s),c=this.state.value;if(o.operator=c,this.match(29)){this.toAssignable(a,!0),o.left=a;let u=s.index;t.doubleProtoLoc!=null&&t.doubleProtoLoc.index>=u&&(t.doubleProtoLoc=null),t.shorthandAssignLoc!=null&&t.shorthandAssignLoc.index>=u&&(t.shorthandAssignLoc=null),t.privateKeyLoc!=null&&t.privateKeyLoc.index>=u&&(this.checkDestructuringPrivate(t),t.privateKeyLoc=null)}else o.left=a;return this.next(),o.right=this.parseMaybeAssign(),this.checkLVal(a,{in:this.finishNode(o,"AssignmentExpression")}),o}else i&&this.checkExpressionErrors(t,!0);return a}parseMaybeConditional(t){let e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseExprOps(t);return this.shouldExitDescending(i,s)?i:this.parseConditional(i,e,t)}parseConditional(t,e,s){if(this.eat(17)){let i=this.startNodeAt(e);return i.test=t,i.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),i.alternate=this.parseMaybeAssign(),this.finishNode(i,"ConditionalExpression")}return t}parseMaybeUnaryOrPrivate(t){return this.match(136)?this.parsePrivateName():this.parseMaybeUnary(t)}parseExprOps(t){let e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseMaybeUnaryOrPrivate(t);return this.shouldExitDescending(i,s)?i:this.parseExprOp(i,e,-1)}parseExprOp(t,e,s){if(this.isPrivateName(t)){let n=this.getPrivateNameSV(t);(s>=on(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(m.PrivateInExpectedIn,{at:t,identifierName:n}),this.classScope.usePrivateName(n,t.loc.start)}let i=this.state.type;if(mE(i)&&(this.prodParam.hasIn||!this.match(58))){let n=on(i);if(n>s){if(i===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return t;this.checkPipelineAtInfixOperator(t,e)}let a=this.startNodeAt(e);a.left=t,a.operator=this.state.value;let o=i===41||i===42,c=i===40;if(c&&(n=on(42)),this.next(),i===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&this.state.type===96&&this.prodParam.hasAwait)throw this.raise(m.UnexpectedAwaitAfterPipelineBody,{at:this.state.startLoc});a.right=this.parseExprOpRightExpr(i,n);let u=this.finishNode(a,o||c?"LogicalExpression":"BinaryExpression"),l=this.state.type;if(c&&(l===41||l===42)||o&&l===40)throw this.raise(m.MixingCoalesceWithLogical,{at:this.state.startLoc});return this.parseExprOp(u,e,s)}}return t}parseExprOpRightExpr(t,e){let s=this.state.startLoc;switch(t){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"smart":return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(106))throw this.raise(m.PipeBodyIsTighter,{at:this.state.startLoc});return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(t,e),s)});case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(e))}default:return this.parseExprOpBaseRightExpr(t,e)}}parseExprOpBaseRightExpr(t,e){let s=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),s,TE(t)?e-1:e)}parseHackPipeBody(){var t;let{startLoc:e}=this.state,s=this.parseMaybeAssign();return AE.has(s.type)&&!((t=s.extra)!=null&&t.parenthesized)&&this.raise(m.PipeUnparenthesizedBody,{at:e,type:s.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(m.PipeTopicUnused,{at:e}),s}checkExponentialAfterUnary(t){this.match(57)&&this.raise(m.UnexpectedTokenUnaryExponentiation,{at:t.argument})}parseMaybeUnary(t,e){let s=this.state.startLoc,i=this.isContextual(96);if(i&&this.isAwaitAllowed()){this.next();let c=this.parseAwait(s);return e||this.checkExponentialAfterUnary(c),c}let n=this.match(34),a=this.startNode();if(gE(this.state.type)){a.operator=this.state.value,a.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");let c=this.match(89);if(this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),this.state.strict&&c){let u=a.argument;u.type==="Identifier"?this.raise(m.StrictDelete,{at:a}):this.hasPropertyAsPrivateName(u)&&this.raise(m.DeletePrivateField,{at:a})}if(!n)return e||this.checkExponentialAfterUnary(a),this.finishNode(a,"UnaryExpression")}let o=this.parseUpdate(a,n,t);if(i){let{type:c}=this.state;if((this.hasPlugin("v8intrinsic")?yo(c):yo(c)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(m.AwaitNotInAsyncContext,{at:s}),this.parseAwait(s)}return o}parseUpdate(t,e,s){if(e){let a=t;return this.checkLVal(a.argument,{in:this.finishNode(a,"UpdateExpression")}),t}let i=this.state.startLoc,n=this.parseExprSubscripts(s);if(this.checkExpressionErrors(s,!1))return n;for(;yE(this.state.type)&&!this.canInsertSemicolon();){let a=this.startNodeAt(i);a.operator=this.state.value,a.prefix=!1,a.argument=n,this.next(),this.checkLVal(n,{in:n=this.finishNode(a,"UpdateExpression")})}return n}parseExprSubscripts(t){let e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseExprAtom(t);return this.shouldExitDescending(i,s)?i:this.parseSubscripts(i,e)}parseSubscripts(t,e,s){let i={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(t),stop:!1};do t=this.parseSubscript(t,e,s,i),i.maybeAsyncArrow=!1;while(!i.stop);return t}parseSubscript(t,e,s,i){let{type:n}=this.state;if(!s&&n===15)return this.parseBind(t,e,s,i);if(pn(n))return this.parseTaggedTemplateExpression(t,e,i);let a=!1;if(n===18){if(s&&(this.raise(m.OptionalChainingNoNew,{at:this.state.startLoc}),this.lookaheadCharCode()===40))return i.stop=!0,t;i.optionalChainMember=a=!0,this.next()}if(!s&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(t,e,i,a);{let o=this.eat(0);return o||a||this.eat(16)?this.parseMember(t,e,i,o,a):(i.stop=!0,t)}}parseMember(t,e,s,i,n){let a=this.startNodeAt(e);return a.object=t,a.computed=i,i?(a.property=this.parseExpression(),this.expect(3)):this.match(136)?(t.type==="Super"&&this.raise(m.SuperPrivateField,{at:e}),this.classScope.usePrivateName(this.state.value,this.state.startLoc),a.property=this.parsePrivateName()):a.property=this.parseIdentifier(!0),s.optionalChainMember?(a.optional=n,this.finishNode(a,"OptionalMemberExpression")):this.finishNode(a,"MemberExpression")}parseBind(t,e,s,i){let n=this.startNodeAt(e);return n.object=t,this.next(),n.callee=this.parseNoCallExpr(),i.stop=!0,this.parseSubscripts(this.finishNode(n,"BindExpression"),e,s)}parseCoverCallAndAsyncArrowHead(t,e,s,i){let n=this.state.maybeInArrowParameters,a=null;this.state.maybeInArrowParameters=!0,this.next();let o=this.startNodeAt(e);o.callee=t;let{maybeAsyncArrow:c,optionalChainMember:u}=s;c&&(this.expressionScope.enter(hS()),a=new Xs),u&&(o.optional=i),i?o.arguments=this.parseCallExpressionArguments(11):o.arguments=this.parseCallExpressionArguments(11,t.type==="Import",t.type!=="Super",o,a);let l=this.finishCallExpression(o,u);return c&&this.shouldParseAsyncArrow()&&!i?(s.stop=!0,this.checkDestructuringPrivate(a),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),l=this.parseAsyncArrowFromCallExpression(this.startNodeAt(e),l)):(c&&(this.checkExpressionErrors(a,!0),this.expressionScope.exit()),this.toReferencedArguments(l)),this.state.maybeInArrowParameters=n,l}toReferencedArguments(t,e){this.toReferencedListDeep(t.arguments,e)}parseTaggedTemplateExpression(t,e,s){let i=this.startNodeAt(e);return i.tag=t,i.quasi=this.parseTemplate(!0),s.optionalChainMember&&this.raise(m.OptionalChainingNoTemplate,{at:e}),this.finishNode(i,"TaggedTemplateExpression")}atPossibleAsyncArrow(t){return t.type==="Identifier"&&t.name==="async"&&this.state.lastTokEndLoc.index===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&t.start===this.state.potentialArrowAt}finishCallExpression(t,e){if(t.callee.type==="Import")if(t.arguments.length===2&&(this.hasPlugin("moduleAttributes")||this.expectPlugin("importAssertions")),t.arguments.length===0||t.arguments.length>2)this.raise(m.ImportCallArity,{at:t,maxArgumentCount:this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")?2:1});else for(let s of t.arguments)s.type==="SpreadElement"&&this.raise(m.ImportCallSpreadArgument,{at:s});return this.finishNode(t,e?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(t,e,s,i,n){let a=[],o=!0,c=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(t);){if(o)o=!1;else if(this.expect(12),this.match(t)){e&&!this.hasPlugin("importAssertions")&&!this.hasPlugin("moduleAttributes")&&this.raise(m.ImportCallArgumentTrailingComma,{at:this.state.lastTokStartLoc}),i&&this.addTrailingCommaExtraToNode(i),this.next();break}a.push(this.parseExprListItem(!1,n,s))}return this.state.inFSharpPipelineDirectBody=c,a}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(t,e){var s;return this.resetPreviousNodeTrailingComments(e),this.expect(19),this.parseArrowExpression(t,e.arguments,!0,(s=e.extra)==null?void 0:s.trailingCommaLoc),e.innerComments&&Wr(t,e.innerComments),e.callee.trailingComments&&Wr(t,e.callee.trailingComments),t}parseNoCallExpr(){let t=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),t,!0)}parseExprAtom(t){let e,s=null,{type:i}=this.state;switch(i){case 79:return this.parseSuper();case 83:return e=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(e):(this.match(10)||this.raise(m.UnsupportedImport,{at:this.state.lastTokStartLoc}),this.finishNode(e,"Import"));case 78:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 132:return this.parseNumericLiteral(this.state.value);case 133:return this.parseBigIntLiteral(this.state.value);case 134:return this.parseDecimalLiteral(this.state.value);case 131:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{let n=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(n)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,t);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,t);case 68:return this.parseFunctionOrFunctionSent();case 26:s=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(s,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{e=this.startNode(),this.next(),e.object=null;let n=e.callee=this.parseNoCallExpr();if(n.type==="MemberExpression")return this.finishNode(e,"BindExpression");throw this.raise(m.UnsupportedBind,{at:n})}case 136:return this.raise(m.PrivateInExpectedIn,{at:this.state.startLoc,identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{let n=this.getPluginOption("pipelineOperator","proposal");if(n)return this.parseTopicReference(n);this.unexpected();break}case 47:{let n=this.input.codePointAt(this.nextTokenStart());pt(n)||n===62?this.expectOnePlugin(["jsx","flow","typescript"]):this.unexpected();break}default:if(H(i)){if(this.isContextual(125)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();let n=this.state.potentialArrowAt===this.state.start,a=this.state.containsEsc,o=this.parseIdentifier();if(!a&&o.name==="async"&&!this.canInsertSemicolon()){let{type:c}=this.state;if(c===68)return this.resetPreviousNodeTrailingComments(o),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(o));if(H(c))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(o)):o;if(c===90)return this.resetPreviousNodeTrailingComments(o),this.parseDo(this.startNodeAtNode(o),!0)}return n&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(o),[o],!1)):o}else this.unexpected()}}parseTopicReferenceThenEqualsSign(t,e){let s=this.getPluginOption("pipelineOperator","proposal");if(s)return this.state.type=t,this.state.value=e,this.state.pos--,this.state.end--,this.state.endLoc=_e(this.state.endLoc,-1),this.parseTopicReference(s);this.unexpected()}parseTopicReference(t){let e=this.startNode(),s=this.state.startLoc,i=this.state.type;return this.next(),this.finishTopicReference(e,s,t,i)}finishTopicReference(t,e,s,i){if(this.testTopicReferenceConfiguration(s,e,i)){let n=s==="smart"?"PipelinePrimaryTopicReference":"TopicReference";return this.topicReferenceIsAllowedInCurrentContext()||this.raise(s==="smart"?m.PrimaryTopicNotAllowed:m.PipeTopicUnbound,{at:e}),this.registerTopicReference(),this.finishNode(t,n)}else throw this.raise(m.PipeTopicUnconfiguredToken,{at:e,token:$t(i)})}testTopicReferenceConfiguration(t,e,s){switch(t){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:$t(s)}]);case"smart":return s===27;default:throw this.raise(m.PipeTopicRequiresHackPipes,{at:e})}}parseAsyncArrowUnaryFunction(t){this.prodParam.enter(un(!0,this.prodParam.hasYield));let e=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(m.LineTerminatorBeforeArrow,{at:this.state.curPosition()}),this.expect(19),this.parseArrowExpression(t,e,!0)}parseDo(t,e){this.expectPlugin("doExpressions"),e&&this.expectPlugin("asyncDoExpressions"),t.async=e,this.next();let s=this.state.labels;return this.state.labels=[],e?(this.prodParam.enter(En),t.body=this.parseBlock(),this.prodParam.exit()):t.body=this.parseBlock(),this.state.labels=s,this.finishNode(t,"DoExpression")}parseSuper(){let t=this.startNode();return this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!this.options.allowSuperOutsideMethod?this.raise(m.SuperNotAllowed,{at:t}):!this.scope.allowSuper&&!this.options.allowSuperOutsideMethod&&this.raise(m.UnexpectedSuper,{at:t}),!this.match(10)&&!this.match(0)&&!this.match(16)&&this.raise(m.UnsupportedSuper,{at:t}),this.finishNode(t,"Super")}parsePrivateName(){let t=this.startNode(),e=this.startNodeAt(_e(this.state.startLoc,1)),s=this.state.value;return this.next(),t.id=this.createIdentifier(e,s),this.finishNode(t,"PrivateName")}parseFunctionOrFunctionSent(){let t=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){let e=this.createIdentifier(this.startNodeAtNode(t),"function");return this.next(),this.match(102)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(t,e,"sent")}return this.parseFunction(t)}parseMetaProperty(t,e,s){t.meta=e;let i=this.state.containsEsc;return t.property=this.parseIdentifier(!0),(t.property.name!==s||i)&&this.raise(m.UnsupportedMetaProperty,{at:t.property,target:e.name,onlyValidPropertyName:s}),this.finishNode(t,"MetaProperty")}parseImportMetaProperty(t){let e=this.createIdentifier(this.startNodeAtNode(t),"import");return this.next(),this.isContextual(100)&&(this.inModule||this.raise(m.ImportMetaOutsideModule,{at:e}),this.sawUnambiguousESM=!0),this.parseMetaProperty(t,e,"meta")}parseLiteralAtNode(t,e,s){return this.addExtra(s,"rawValue",t),this.addExtra(s,"raw",this.input.slice(s.start,this.state.end)),s.value=t,this.next(),this.finishNode(s,e)}parseLiteral(t,e){let s=this.startNode();return this.parseLiteralAtNode(t,e,s)}parseStringLiteral(t){return this.parseLiteral(t,"StringLiteral")}parseNumericLiteral(t){return this.parseLiteral(t,"NumericLiteral")}parseBigIntLiteral(t){return this.parseLiteral(t,"BigIntLiteral")}parseDecimalLiteral(t){return this.parseLiteral(t,"DecimalLiteral")}parseRegExpLiteral(t){let e=this.parseLiteral(t.value,"RegExpLiteral");return e.pattern=t.pattern,e.flags=t.flags,e}parseBooleanLiteral(t){let e=this.startNode();return e.value=t,this.next(),this.finishNode(e,"BooleanLiteral")}parseNullLiteral(){let t=this.startNode();return this.next(),this.finishNode(t,"NullLiteral")}parseParenAndDistinguishExpression(t){let e=this.state.startLoc,s;this.next(),this.expressionScope.enter(uS());let i=this.state.maybeInArrowParameters,n=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;let a=this.state.startLoc,o=[],c=new Xs,u=!0,l,h;for(;!this.match(11);){if(u)u=!1;else if(this.expect(12,c.optionalParametersLoc===null?null:c.optionalParametersLoc),this.match(11)){h=this.state.startLoc;break}if(this.match(21)){let y=this.state.startLoc;if(l=this.state.startLoc,o.push(this.parseParenItem(this.parseRestBinding(),y)),!this.checkCommaAfterRest(41))break}else o.push(this.parseMaybeAssignAllowIn(c,this.parseParenItem))}let p=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=i,this.state.inFSharpPipelineDirectBody=n;let f=this.startNodeAt(e);return t&&this.shouldParseArrow(o)&&(f=this.parseArrow(f))?(this.checkDestructuringPrivate(c),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(f,o,!1),f):(this.expressionScope.exit(),o.length||this.unexpected(this.state.lastTokStartLoc),h&&this.unexpected(h),l&&this.unexpected(l),this.checkExpressionErrors(c,!0),this.toReferencedListDeep(o,!0),o.length>1?(s=this.startNodeAt(a),s.expressions=o,this.finishNode(s,"SequenceExpression"),this.resetEndLocation(s,p)):s=o[0],this.wrapParenthesis(e,s))}wrapParenthesis(t,e){if(!this.options.createParenthesizedExpressions)return this.addExtra(e,"parenthesized",!0),this.addExtra(e,"parenStart",t.index),this.takeSurroundingComments(e,t.index,this.state.lastTokEndLoc.index),e;let s=this.startNodeAt(t);return s.expression=e,this.finishNode(s,"ParenthesizedExpression")}shouldParseArrow(t){return!this.canInsertSemicolon()}parseArrow(t){if(this.eat(19))return t}parseParenItem(t,e){return t}parseNewOrNewTarget(){let t=this.startNode();if(this.next(),this.match(16)){let e=this.createIdentifier(this.startNodeAtNode(t),"new");this.next();let s=this.parseMetaProperty(t,e,"target");return!this.scope.inNonArrowFunction&&!this.scope.inClass&&!this.options.allowNewTargetOutsideFunction&&this.raise(m.UnexpectedNewTarget,{at:s}),s}return this.parseNew(t)}parseNew(t){if(this.parseNewCallee(t),this.eat(10)){let e=this.parseExprList(11);this.toReferencedList(e),t.arguments=e}else t.arguments=[];return this.finishNode(t,"NewExpression")}parseNewCallee(t){t.callee=this.parseNoCallExpr(),t.callee.type==="Import"&&this.raise(m.ImportCallNotNewExpression,{at:t.callee})}parseTemplateElement(t){let{start:e,startLoc:s,end:i,value:n}=this.state,a=e+1,o=this.startNodeAt(_e(s,1));n===null&&(t||this.raise(m.InvalidEscapeSequenceTemplate,{at:_e(this.state.firstInvalidTemplateEscapePos,1)}));let c=this.match(24),u=c?-1:-2,l=i+u;o.value={raw:this.input.slice(a,l).replace(/\r\n?/g,`
`),cooked:n===null?null:n.slice(1,u)},o.tail=c,this.next();let h=this.finishNode(o,"TemplateElement");return this.resetEndLocation(h,_e(this.state.lastTokEndLoc,u)),h}parseTemplate(t){let e=this.startNode();e.expressions=[];let s=this.parseTemplateElement(t);for(e.quasis=[s];!s.tail;)e.expressions.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),e.quasis.push(s=this.parseTemplateElement(t));return this.finishNode(e,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(t,e,s,i){s&&this.expectPlugin("recordAndTuple");let n=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let a=Object.create(null),o=!0,c=this.startNode();for(c.properties=[],this.next();!this.match(t);){if(o)o=!1;else if(this.expect(12),this.match(t)){this.addTrailingCommaExtraToNode(c);break}let l;e?l=this.parseBindingProperty():(l=this.parsePropertyDefinition(i),this.checkProto(l,s,a,i)),s&&!this.isObjectProperty(l)&&l.type!=="SpreadElement"&&this.raise(m.InvalidRecordProperty,{at:l}),l.shorthand&&this.addExtra(l,"shorthand",!0),c.properties.push(l)}this.next(),this.state.inFSharpPipelineDirectBody=n;let u="ObjectExpression";return e?u="ObjectPattern":s&&(u="RecordExpression"),this.finishNode(c,u)}addTrailingCommaExtraToNode(t){this.addExtra(t,"trailingComma",this.state.lastTokStart),this.addExtra(t,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(t){return!t.computed&&t.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(t){let e=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(m.UnsupportedPropertyDecorator,{at:this.state.startLoc});this.match(26);)e.push(this.parseDecorator());let s=this.startNode(),i=!1,n=!1,a;if(this.match(21))return e.length&&this.unexpected(),this.parseSpread();e.length&&(s.decorators=e,e=[]),s.method=!1,t&&(a=this.state.startLoc);let o=this.eat(55);this.parsePropertyNamePrefixOperator(s);let c=this.state.containsEsc,u=this.parsePropertyName(s,t);if(!o&&!c&&this.maybeAsyncOrAccessorProp(s)){let l=u.name;l==="async"&&!this.hasPrecedingLineBreak()&&(i=!0,this.resetPreviousNodeTrailingComments(u),o=this.eat(55),this.parsePropertyName(s)),(l==="get"||l==="set")&&(n=!0,this.resetPreviousNodeTrailingComments(u),s.kind=l,this.match(55)&&(o=!0,this.raise(m.AccessorIsGenerator,{at:this.state.curPosition(),kind:l}),this.next()),this.parsePropertyName(s))}return this.parseObjPropValue(s,a,o,i,!1,n,t)}getGetterSetterExpectedParamCount(t){return t.kind==="get"?0:1}getObjectOrClassMethodParams(t){return t.params}checkGetterSetterParams(t){var e;let s=this.getGetterSetterExpectedParamCount(t),i=this.getObjectOrClassMethodParams(t);i.length!==s&&this.raise(t.kind==="get"?m.BadGetterArity:m.BadSetterArity,{at:t}),t.kind==="set"&&((e=i[i.length-1])==null?void 0:e.type)==="RestElement"&&this.raise(m.BadSetterRestParameter,{at:t})}parseObjectMethod(t,e,s,i,n){if(n){let a=this.parseMethod(t,e,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(a),a}if(s||e||this.match(10))return i&&this.unexpected(),t.kind="method",t.method=!0,this.parseMethod(t,e,s,!1,!1,"ObjectMethod")}parseObjectProperty(t,e,s,i){if(t.shorthand=!1,this.eat(14))return t.value=s?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowIn(i),this.finishNode(t,"ObjectProperty");if(!t.computed&&t.key.type==="Identifier"){if(this.checkReservedWord(t.key.name,t.key.loc.start,!0,!1),s)t.value=this.parseMaybeDefault(e,mt(t.key));else if(this.match(29)){let n=this.state.startLoc;i!=null?i.shorthandAssignLoc===null&&(i.shorthandAssignLoc=n):this.raise(m.InvalidCoverInitializedName,{at:n}),t.value=this.parseMaybeDefault(e,mt(t.key))}else t.value=mt(t.key);return t.shorthand=!0,this.finishNode(t,"ObjectProperty")}}parseObjPropValue(t,e,s,i,n,a,o){let c=this.parseObjectMethod(t,s,i,n,a)||this.parseObjectProperty(t,e,n,o);return c||this.unexpected(),c}parsePropertyName(t,e){if(this.eat(0))t.computed=!0,t.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{let{type:s,value:i}=this.state,n;if(Ze(s))n=this.parseIdentifier(!0);else switch(s){case 132:n=this.parseNumericLiteral(i);break;case 131:n=this.parseStringLiteral(i);break;case 133:n=this.parseBigIntLiteral(i);break;case 134:n=this.parseDecimalLiteral(i);break;case 136:{let a=this.state.startLoc;e!=null?e.privateKeyLoc===null&&(e.privateKeyLoc=a):this.raise(m.UnexpectedPrivateField,{at:a}),n=this.parsePrivateName();break}default:this.unexpected()}t.key=n,s!==136&&(t.computed=!1)}return t.key}initFunction(t,e){t.id=null,t.generator=!1,t.async=e}parseMethod(t,e,s,i,n,a,o=!1){this.initFunction(t,s),t.generator=e,this.scope.enter(dt|dn|(o?hs:0)|(n?Ud:0)),this.prodParam.enter(un(s,t.generator)),this.parseFunctionParams(t,i);let c=this.parseFunctionBodyAndFinish(t,a,!0);return this.prodParam.exit(),this.scope.exit(),c}parseArrayLike(t,e,s,i){s&&this.expectPlugin("recordAndTuple");let n=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let a=this.startNode();return this.next(),a.elements=this.parseExprList(t,!s,i,a),this.state.inFSharpPipelineDirectBody=n,this.finishNode(a,s?"TupleExpression":"ArrayExpression")}parseArrowExpression(t,e,s,i){this.scope.enter(dt|Xo);let n=un(s,!1);!this.match(5)&&this.prodParam.hasIn&&(n|=Us),this.prodParam.enter(n),this.initFunction(t,s);let a=this.state.maybeInArrowParameters;return e&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(t,e,i)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(t,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=a,this.finishNode(t,"ArrowFunctionExpression")}setArrowFunctionParameters(t,e,s){this.toAssignableList(e,s,!1),t.params=e}parseFunctionBodyAndFinish(t,e,s=!1){return this.parseFunctionBody(t,!1,s),this.finishNode(t,e)}parseFunctionBody(t,e,s=!1){let i=e&&!this.match(5);if(this.expressionScope.enter(Qd()),i)t.body=this.parseMaybeAssign(),this.checkParams(t,!1,e,!1);else{let n=this.state.strict,a=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|em),t.body=this.parseBlock(!0,!1,o=>{let c=!this.isSimpleParamList(t.params);o&&c&&this.raise(m.IllegalLanguageModeDirective,{at:(t.kind==="method"||t.kind==="constructor")&&!!t.key?t.key.loc.end:t});let u=!n&&this.state.strict;this.checkParams(t,!this.state.strict&&!e&&!s&&!c,e,u),this.state.strict&&t.id&&this.checkIdentifier(t.id,GE,u)}),this.prodParam.exit(),this.state.labels=a}this.expressionScope.exit()}isSimpleParameter(t){return t.type==="Identifier"}isSimpleParamList(t){for(let e=0,s=t.length;e<s;e++)if(!this.isSimpleParameter(t[e]))return!1;return!0}checkParams(t,e,s,i=!0){let n=!e&&new Set,a={type:"FormalParameters"};for(let o of t.params)this.checkLVal(o,{in:a,binding:gn,checkClashes:n,strictModeChanged:i})}parseExprList(t,e,s,i){let n=[],a=!0;for(;!this.eat(t);){if(a)a=!1;else if(this.expect(12),this.match(t)){i&&this.addTrailingCommaExtraToNode(i),this.next();break}n.push(this.parseExprListItem(e,s))}return n}parseExprListItem(t,e,s){let i;if(this.match(12))t||this.raise(m.UnexpectedToken,{at:this.state.curPosition(),unexpected:","}),i=null;else if(this.match(21)){let n=this.state.startLoc;i=this.parseParenItem(this.parseSpread(e),n)}else if(this.match(17)){this.expectPlugin("partialApplication"),s||this.raise(m.UnexpectedArgumentPlaceholder,{at:this.state.startLoc});let n=this.startNode();this.next(),i=this.finishNode(n,"ArgumentPlaceholder")}else i=this.parseMaybeAssignAllowIn(e,this.parseParenItem);return i}parseIdentifier(t){let e=this.startNode(),s=this.parseIdentifierName(t);return this.createIdentifier(e,s)}createIdentifier(t,e){return t.name=e,t.loc.identifierName=e,this.finishNode(t,"Identifier")}parseIdentifierName(t){let e,{startLoc:s,type:i}=this.state;Ze(i)?e=this.state.value:this.unexpected();let n=hE(i);return t?n&&this.replaceToken(130):this.checkReservedWord(e,s,n,!1),this.next(),e}checkReservedWord(t,e,s,i){if(t.length>10||!qE(t))return;if(s&&$E(t)){this.raise(m.UnexpectedKeyword,{at:e,keyword:t});return}if((this.state.strict?i?$d:Rd:Fd)(t,this.inModule)){this.raise(m.UnexpectedReservedWord,{at:e,reservedWord:t});return}else if(t==="yield"){if(this.prodParam.hasYield){this.raise(m.YieldBindingIdentifier,{at:e});return}}else if(t==="await"){if(this.prodParam.hasAwait){this.raise(m.AwaitBindingIdentifier,{at:e});return}if(this.scope.inStaticBlock){this.raise(m.AwaitBindingIdentifierInStaticBlock,{at:e});return}this.expressionScope.recordAsyncArrowParametersError({at:e})}else if(t==="arguments"&&this.scope.inClassAndNotInNonArrowFunction){this.raise(m.ArgumentsInClass,{at:e});return}}isAwaitAllowed(){return!!(this.prodParam.hasAwait||this.options.allowAwaitOutsideFunction&&!this.scope.inFunction)}parseAwait(t){let e=this.startNodeAt(t);return this.expressionScope.recordParameterInitializerError(m.AwaitExpressionFormalParameter,{at:e}),this.eat(55)&&this.raise(m.ObsoleteAwaitStar,{at:e}),!this.scope.inFunction&&!this.options.allowAwaitOutsideFunction&&(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(e.argument=this.parseMaybeUnary(null,!0)),this.finishNode(e,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;let{type:t}=this.state;return t===53||t===10||t===0||pn(t)||t===101&&!this.state.containsEsc||t===135||t===56||this.hasPlugin("v8intrinsic")&&t===54}parseYield(){let t=this.startNode();this.expressionScope.recordParameterInitializerError(m.YieldInParameter,{at:t}),this.next();let e=!1,s=null;if(!this.hasPrecedingLineBreak())switch(e=this.eat(55),this.state.type){case 13:case 137:case 8:case 11:case 3:case 9:case 14:case 12:if(!e)break;default:s=this.parseMaybeAssign()}return t.delegate=e,t.argument=s,this.finishNode(t,"YieldExpression")}checkPipelineAtInfixOperator(t,e){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&t.type==="SequenceExpression"&&this.raise(m.PipelineHeadSequenceExpression,{at:e})}parseSmartPipelineBodyInStyle(t,e){if(this.isSimpleReference(t)){let s=this.startNodeAt(e);return s.callee=t,this.finishNode(s,"PipelineBareFunction")}else{let s=this.startNodeAt(e);return this.checkSmartPipeTopicBodyEarlyErrors(e),s.expression=t,this.finishNode(s,"PipelineTopicExpression")}}isSimpleReference(t){switch(t.type){case"MemberExpression":return!t.computed&&this.isSimpleReference(t.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(t){if(this.match(19))throw this.raise(m.PipelineBodyNoArrow,{at:this.state.startLoc});this.topicReferenceWasUsedInCurrentContext()||this.raise(m.PipelineTopicUnused,{at:t})}withTopicBindingContext(t){let e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}withSmartMixTopicForbiddingContext(t){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){let e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}else return t()}withSoloAwaitPermittingContext(t){let e=this.state.soloAwait;this.state.soloAwait=!0;try{return t()}finally{this.state.soloAwait=e}}allowInAnd(t){let e=this.prodParam.currentFlags();if(Us&~e){this.prodParam.enter(e|Us);try{return t()}finally{this.prodParam.exit()}}return t()}disallowInAnd(t){let e=this.prodParam.currentFlags();if(Us&e){this.prodParam.enter(e&~Us);try{return t()}finally{this.prodParam.exit()}}return t()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(t){let e=this.state.startLoc;this.state.potentialArrowAt=this.state.start;let s=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;let i=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),e,t);return this.state.inFSharpPipelineDirectBody=s,i}parseModuleExpression(){this.expectPlugin("moduleBlocks");let t=this.startNode();this.next(),this.match(5)||this.unexpected(null,5);let e=this.startNodeAt(this.state.endLoc);this.next();let s=this.initializeScopes(!0);this.enterInitialScopes();try{t.body=this.parseProgram(e,8,"module")}finally{s()}return this.finishNode(t,"ModuleExpression")}parsePropertyNamePrefixOperator(t){}},fo={kind:"loop"},MS={kind:"switch"},FS=/[\uD800-\uDFFF]/u,mo=/in(?:stanceof)?/y;function RS(r,t){for(let e=0;e<r.length;e++){let s=r[e],{type:i}=s;if(typeof i=="number"){{if(i===136){let{loc:n,start:a,value:o,end:c}=s,u=a+1,l=_e(n.start,1);r.splice(e,1,new Qe({type:ut(27),value:"#",start:a,end:u,startLoc:n.start,endLoc:l}),new Qe({type:ut(130),value:o,start:u,end:c,startLoc:l,endLoc:n.end})),e++;continue}if(pn(i)){let{loc:n,start:a,value:o,end:c}=s,u=a+1,l=_e(n.start,1),h;t.charCodeAt(a)===96?h=new Qe({type:ut(22),value:"`",start:a,end:u,startLoc:n.start,endLoc:l}):h=new Qe({type:ut(8),value:"}",start:a,end:u,startLoc:n.start,endLoc:l});let p,f,y,x;i===24?(f=c-1,y=_e(n.end,-1),p=o===null?null:o.slice(1,-1),x=new Qe({type:ut(22),value:"`",start:f,end:c,startLoc:y,endLoc:n.end})):(f=c-2,y=_e(n.end,-2),p=o===null?null:o.slice(1,-2),x=new Qe({type:ut(23),value:"${",start:f,end:c,startLoc:y,endLoc:n.end})),r.splice(e,1,h,new Qe({type:ut(20),value:p,start:u,end:f,startLoc:l,endLoc:y}),x),e+=2;continue}}s.type=ut(i)}}return r}var $o=class extends Bo{parseTopLevel(t,e){return t.program=this.parseProgram(e),t.comments=this.state.comments,this.options.tokens&&(t.tokens=RS(this.tokens,this.input)),this.finishNode(t,"File")}parseProgram(t,e=137,s=this.options.sourceType){if(t.sourceType=s,t.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(t,!0,!0,e),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(let[n,a]of Array.from(this.scope.undefinedExports))this.raise(m.ModuleExportUndefined,{at:a,localName:n});let i;return e===137?i=this.finishNode(t,"Program"):i=this.finishNodeAt(t,"Program",_e(this.state.startLoc,-1)),i}stmtToDirective(t){let e=t;e.type="Directive",e.value=e.expression,delete e.expression;let s=e.value,i=s.value,n=this.input.slice(s.start,s.end),a=s.value=n.slice(1,-1);return this.addExtra(s,"raw",n),this.addExtra(s,"rawValue",a),this.addExtra(s,"expressionValue",i),s.type="DirectiveLiteral",e}parseInterpreterDirective(){if(!this.match(28))return null;let t=this.startNode();return t.value=this.state.value,this.next(),this.finishNode(t,"InterpreterDirective")}isLet(){return this.isContextual(99)?this.hasFollowingBindingAtom():!1}chStartsBindingIdentifier(t,e){if(pt(t)){if(mo.lastIndex=e,mo.test(this.input)){let s=this.codePointAtPos(mo.lastIndex);if(!zs(s)&&s!==92)return!1}return!0}else return t===92}chStartsBindingPattern(t){return t===91||t===123}hasFollowingBindingAtom(){let t=this.nextTokenStart(),e=this.codePointAtPos(t);return this.chStartsBindingPattern(e)||this.chStartsBindingIdentifier(e,t)}hasInLineFollowingBindingIdentifier(){let t=this.nextTokenInLineStart(),e=this.codePointAtPos(t);return this.chStartsBindingIdentifier(e,t)}startsUsingForOf(){let{type:t,containsEsc:e}=this.lookahead();if(t===101&&!e)return!1;if(H(t)&&!this.hasFollowingLineBreak())return this.expectPlugin("explicitResourceManagement"),!0}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(t=!1){let e=0;return this.options.annexB&&!this.state.strict&&(e|=4,t&&(e|=8)),this.parseStatementLike(e)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(t){let e=null;return this.match(26)&&(e=this.parseDecorators(!0)),this.parseStatementContent(t,e)}parseStatementContent(t,e){let s=this.state.type,i=this.startNode(),n=!!(t&2),a=!!(t&4),o=t&1;switch(s){case 60:return this.parseBreakContinueStatement(i,!0);case 63:return this.parseBreakContinueStatement(i,!1);case 64:return this.parseDebuggerStatement(i);case 90:return this.parseDoWhileStatement(i);case 91:return this.parseForStatement(i);case 68:if(this.lookaheadCharCode()===46)break;return a||this.raise(this.state.strict?m.StrictFunction:this.options.annexB?m.SloppyFunctionAnnexB:m.SloppyFunction,{at:this.state.startLoc}),this.parseFunctionStatement(i,!1,!n&&a);case 80:return n||this.unexpected(),this.parseClass(this.maybeTakeDecorators(e,i),!0);case 69:return this.parseIfStatement(i);case 70:return this.parseReturnStatement(i);case 71:return this.parseSwitchStatement(i);case 72:return this.parseThrowStatement(i);case 73:return this.parseTryStatement(i);case 105:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifier())break;return this.expectPlugin("explicitResourceManagement"),!this.scope.inModule&&this.scope.inTopLevel?this.raise(m.UnexpectedUsingDeclaration,{at:this.state.startLoc}):n||this.raise(m.UnexpectedLexicalDeclaration,{at:this.state.startLoc}),this.parseVarStatement(i,"using");case 99:{if(this.state.containsEsc)break;let l=this.nextTokenStart(),h=this.codePointAtPos(l);if(h!==91&&(!n&&this.hasFollowingLineBreak()||!this.chStartsBindingIdentifier(h,l)&&h!==123))break}case 75:n||this.raise(m.UnexpectedLexicalDeclaration,{at:this.state.startLoc});case 74:{let l=this.state.value;return this.parseVarStatement(i,l)}case 92:return this.parseWhileStatement(i);case 76:return this.parseWithStatement(i);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(i);case 83:{let l=this.lookaheadCharCode();if(l===40||l===46)break}case 82:{!this.options.allowImportExportEverywhere&&!o&&this.raise(m.UnexpectedImportExport,{at:this.state.startLoc}),this.next();let l;return s===83?(l=this.parseImport(i),l.type==="ImportDeclaration"&&(!l.importKind||l.importKind==="value")&&(this.sawUnambiguousESM=!0)):(l=this.parseExport(i,e),(l.type==="ExportNamedDeclaration"&&(!l.exportKind||l.exportKind==="value")||l.type==="ExportAllDeclaration"&&(!l.exportKind||l.exportKind==="value")||l.type==="ExportDefaultDeclaration")&&(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(l),l}default:if(this.isAsyncFunction())return n||this.raise(m.AsyncFunctionInSingleStatementContext,{at:this.state.startLoc}),this.next(),this.parseFunctionStatement(i,!0,!n&&a)}let c=this.state.value,u=this.parseExpression();return H(s)&&u.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(i,c,u,t):this.parseExpressionStatement(i,u,e)}assertModuleNodeAllowed(t){!this.options.allowImportExportEverywhere&&!this.inModule&&this.raise(m.ImportOutsideModule,{at:t})}decoratorsEnabledBeforeExport(){return this.hasPlugin("decorators-legacy")?!0:this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(t,e,s){return t&&(e.decorators&&e.decorators.length>0?(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!="boolean"&&this.raise(m.DecoratorsBeforeAfterExport,{at:e.decorators[0]}),e.decorators.unshift(...t)):e.decorators=t,this.resetStartLocationFromNode(e,t[0]),s&&this.resetStartLocationFromNode(s,e)),e}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(t){let e=[];do e.push(this.parseDecorator());while(this.match(26));if(this.match(82))t||this.unexpected(),this.decoratorsEnabledBeforeExport()||this.raise(m.DecoratorExportClass,{at:this.state.startLoc});else if(!this.canHaveLeadingDecorator())throw this.raise(m.UnexpectedLeadingDecorator,{at:this.state.startLoc});return e}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);let t=this.startNode();if(this.next(),this.hasPlugin("decorators")){let e=this.state.startLoc,s;if(this.match(10)){let i=this.state.startLoc;this.next(),s=this.parseExpression(),this.expect(11),s=this.wrapParenthesis(i,s);let n=this.state.startLoc;t.expression=this.parseMaybeDecoratorArguments(s),this.getPluginOption("decorators","allowCallParenthesized")===!1&&t.expression!==s&&this.raise(m.DecoratorArgumentsOutsideParentheses,{at:n})}else{for(s=this.parseIdentifier(!1);this.eat(16);){let i=this.startNodeAt(e);i.object=s,this.match(136)?(this.classScope.usePrivateName(this.state.value,this.state.startLoc),i.property=this.parsePrivateName()):i.property=this.parseIdentifier(!0),i.computed=!1,s=this.finishNode(i,"MemberExpression")}t.expression=this.parseMaybeDecoratorArguments(s)}}else t.expression=this.parseExprSubscripts();return this.finishNode(t,"Decorator")}parseMaybeDecoratorArguments(t){if(this.eat(10)){let e=this.startNodeAtNode(t);return e.callee=t,e.arguments=this.parseCallExpressionArguments(11,!1),this.toReferencedList(e.arguments),this.finishNode(e,"CallExpression")}return t}parseBreakContinueStatement(t,e){return this.next(),this.isLineTerminator()?t.label=null:(t.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(t,e),this.finishNode(t,e?"BreakStatement":"ContinueStatement")}verifyBreakContinue(t,e){let s;for(s=0;s<this.state.labels.length;++s){let i=this.state.labels[s];if((t.label==null||i.name===t.label.name)&&(i.kind!=null&&(e||i.kind==="loop")||t.label&&e))break}if(s===this.state.labels.length){let i=e?"BreakStatement":"ContinueStatement";this.raise(m.IllegalBreakContinue,{at:t,type:i})}}parseDebuggerStatement(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);let t=this.parseExpression();return this.expect(11),t}parseDoWhileStatement(t){return this.next(),this.state.labels.push(fo),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),t.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(t,"DoWhileStatement")}parseForStatement(t){this.next(),this.state.labels.push(fo);let e=null;if(this.isAwaitAllowed()&&this.eatContextual(96)&&(e=this.state.lastTokStartLoc),this.scope.enter(qs),this.expect(10),this.match(13))return e!==null&&this.unexpected(e),this.parseFor(t,null);let s=this.isContextual(99),i=this.isContextual(105),n=s&&this.hasFollowingBindingAtom()||i&&this.startsUsingForOf();if(this.match(74)||this.match(75)||n){let l=this.startNode(),h=this.state.value;this.next(),this.parseVar(l,!0,h);let p=this.finishNode(l,"VariableDeclaration"),f=this.match(58);return f&&i&&this.raise(m.ForInUsing,{at:p}),(f||this.isContextual(101))&&p.declarations.length===1?this.parseForIn(t,p,e):(e!==null&&this.unexpected(e),this.parseFor(t,p))}let a=this.isContextual(95),o=new Xs,c=this.parseExpression(!0,o),u=this.isContextual(101);if(u&&(s&&this.raise(m.ForOfLet,{at:c}),e===null&&a&&c.type==="Identifier"&&this.raise(m.ForOfAsync,{at:c})),u||this.match(58)){this.checkDestructuringPrivate(o),this.toAssignable(c,!0);let l=u?"ForOfStatement":"ForInStatement";return this.checkLVal(c,{in:{type:l}}),this.parseForIn(t,c,e)}else this.checkExpressionErrors(o,!0);return e!==null&&this.unexpected(e),this.parseFor(t,c)}parseFunctionStatement(t,e,s){return this.next(),this.parseFunction(t,1|(s?2:0)|(e?8:0))}parseIfStatement(t){return this.next(),t.test=this.parseHeaderExpression(),t.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),t.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(t,"IfStatement")}parseReturnStatement(t){return!this.prodParam.hasReturn&&!this.options.allowReturnOutsideFunction&&this.raise(m.IllegalReturn,{at:this.state.startLoc}),this.next(),this.isLineTerminator()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")}parseSwitchStatement(t){this.next(),t.discriminant=this.parseHeaderExpression();let e=t.cases=[];this.expect(5),this.state.labels.push(MS),this.scope.enter(qs);let s;for(let i;!this.match(8);)if(this.match(61)||this.match(65)){let n=this.match(61);s&&this.finishNode(s,"SwitchCase"),e.push(s=this.startNode()),s.consequent=[],this.next(),n?s.test=this.parseExpression():(i&&this.raise(m.MultipleDefaultsInSwitch,{at:this.state.lastTokStartLoc}),i=!0,s.test=null),this.expect(14)}else s?s.consequent.push(this.parseStatementListItem()):this.unexpected();return this.scope.exit(),s&&this.finishNode(s,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(t,"SwitchStatement")}parseThrowStatement(t){return this.next(),this.hasPrecedingLineBreak()&&this.raise(m.NewlineAfterThrow,{at:this.state.lastTokEndLoc}),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")}parseCatchClauseParam(){let t=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&t.type==="Identifier"?jd:0),this.checkLVal(t,{in:{type:"CatchClause"},binding:WE}),t}parseTryStatement(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.match(62)){let e=this.startNode();this.next(),this.match(10)?(this.expect(10),e.param=this.parseCatchClauseParam(),this.expect(11)):(e.param=null,this.scope.enter(qs)),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(67)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(m.NoCatchOrFinally,{at:t}),this.finishNode(t,"TryStatement")}parseVarStatement(t,e,s=!1){return this.next(),this.parseVar(t,!1,e,s),this.semicolon(),this.finishNode(t,"VariableDeclaration")}parseWhileStatement(t){return this.next(),t.test=this.parseHeaderExpression(),this.state.labels.push(fo),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(t,"WhileStatement")}parseWithStatement(t){return this.state.strict&&this.raise(m.StrictWith,{at:this.state.startLoc}),this.next(),t.object=this.parseHeaderExpression(),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(t,"WithStatement")}parseEmptyStatement(t){return this.next(),this.finishNode(t,"EmptyStatement")}parseLabeledStatement(t,e,s,i){for(let a of this.state.labels)a.name===e&&this.raise(m.LabelRedeclaration,{at:s,labelName:e});let n=dE(this.state.type)?"loop":this.match(71)?"switch":null;for(let a=this.state.labels.length-1;a>=0;a--){let o=this.state.labels[a];if(o.statementStart===t.start)o.statementStart=this.state.start,o.kind=n;else break}return this.state.labels.push({name:e,kind:n,statementStart:this.state.start}),t.body=i&8?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),t.label=s,this.finishNode(t,"LabeledStatement")}parseExpressionStatement(t,e,s){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")}parseBlock(t=!1,e=!0,s){let i=this.startNode();return t&&this.state.strictErrors.clear(),this.expect(5),e&&this.scope.enter(qs),this.parseBlockBody(i,t,!1,8,s),e&&this.scope.exit(),this.finishNode(i,"BlockStatement")}isValidDirective(t){return t.type==="ExpressionStatement"&&t.expression.type==="StringLiteral"&&!t.expression.extra.parenthesized}parseBlockBody(t,e,s,i,n){let a=t.body=[],o=t.directives=[];this.parseBlockOrModuleBlockBody(a,e?o:void 0,s,i,n)}parseBlockOrModuleBlockBody(t,e,s,i,n){let a=this.state.strict,o=!1,c=!1;for(;!this.match(i);){let u=s?this.parseModuleItem():this.parseStatementListItem();if(e&&!c){if(this.isValidDirective(u)){let l=this.stmtToDirective(u);e.push(l),!o&&l.value.value==="use strict"&&(o=!0,this.setStrict(!0));continue}c=!0,this.state.strictErrors.clear()}t.push(u)}n&&n.call(this,o),a||this.setStrict(!1),this.next()}parseFor(t,e){return t.init=e,this.semicolon(!1),t.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),t.update=this.match(11)?null:this.parseExpression(),this.expect(11),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,"ForStatement")}parseForIn(t,e,s){let i=this.match(58);return this.next(),i?s!==null&&this.unexpected(s):t.await=s!==null,e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!i||!this.options.annexB||this.state.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(m.ForInOfLoopInitializer,{at:e,type:i?"ForInStatement":"ForOfStatement"}),e.type==="AssignmentPattern"&&this.raise(m.InvalidLhs,{at:e,ancestor:{type:"ForStatement"}}),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")}parseVar(t,e,s,i=!1){let n=t.declarations=[];for(t.kind=s;;){let a=this.startNode();if(this.parseVarId(a,s),a.init=this.eat(29)?e?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,a.init===null&&!i&&(a.id.type!=="Identifier"&&!(e&&(this.match(58)||this.isContextual(101)))?this.raise(m.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"destructuring"}):s==="const"&&!(this.match(58)||this.isContextual(101))&&this.raise(m.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"const"})),n.push(this.finishNode(a,"VariableDeclarator")),!this.eat(12))break}return t}parseVarId(t,e){let s=this.parseBindingAtom();this.checkLVal(s,{in:{type:"VariableDeclarator"},binding:e==="var"?gn:Hs}),t.id=s}parseAsyncFunctionExpression(t){return this.parseFunction(t,8)}parseFunction(t,e=0){let s=e&2,i=!!(e&1),n=i&&!(e&4),a=!!(e&8);this.initFunction(t,a),this.match(55)&&(s&&this.raise(m.GeneratorInSingleStatementContext,{at:this.state.startLoc}),this.next(),t.generator=!0),i&&(t.id=this.parseFunctionId(n));let o=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(dt),this.prodParam.enter(un(a,t.generator)),i||(t.id=this.parseFunctionId()),this.parseFunctionParams(t,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(t,i?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),i&&!s&&this.registerFunctionStatementId(t),this.state.maybeInArrowParameters=o,t}parseFunctionId(t){return t||H(this.state.type)?this.parseIdentifier():null}parseFunctionParams(t,e){this.expect(10),this.expressionScope.enter(lS()),t.params=this.parseBindingList(11,41,2|(e?4:0)),this.expressionScope.exit()}registerFunctionStatementId(t){!t.id||this.scope.declareName(t.id.name,!this.options.annexB||this.state.strict||t.generator||t.async?this.scope.treatFunctionsAsVar?gn:Hs:zd,t.id.loc.start)}parseClass(t,e,s){this.next();let i=this.state.strict;return this.state.strict=!0,this.parseClassId(t,e,s),this.parseClassSuper(t),t.body=this.parseClassBody(!!t.superClass,i),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}isNonstaticConstructor(t){return!t.computed&&!t.static&&(t.key.name==="constructor"||t.key.value==="constructor")}parseClassBody(t,e){this.classScope.enter();let s={hadConstructor:!1,hadSuperClass:t},i=[],n=this.startNode();if(n.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(i.length>0)throw this.raise(m.DecoratorSemicolon,{at:this.state.lastTokEndLoc});continue}if(this.match(26)){i.push(this.parseDecorator());continue}let a=this.startNode();i.length&&(a.decorators=i,this.resetStartLocationFromNode(a,i[0]),i=[]),this.parseClassMember(n,a,s),a.kind==="constructor"&&a.decorators&&a.decorators.length>0&&this.raise(m.DecoratorConstructor,{at:a})}}),this.state.strict=e,this.next(),i.length)throw this.raise(m.TrailingDecorator,{at:this.state.startLoc});return this.classScope.exit(),this.finishNode(n,"ClassBody")}parseClassMemberFromModifier(t,e){let s=this.parseIdentifier(!0);if(this.isClassMethod()){let i=e;return i.kind="method",i.computed=!1,i.key=s,i.static=!1,this.pushClassMethod(t,i,!1,!1,!1,!1),!0}else if(this.isClassProperty()){let i=e;return i.computed=!1,i.key=s,i.static=!1,t.body.push(this.parseClassProperty(i)),!0}return this.resetPreviousNodeTrailingComments(s),!1}parseClassMember(t,e,s){let i=this.isContextual(104);if(i){if(this.parseClassMemberFromModifier(t,e))return;if(this.eat(5)){this.parseClassStaticBlock(t,e);return}}this.parseClassMemberWithIsStatic(t,e,s,i)}parseClassMemberWithIsStatic(t,e,s,i){let n=e,a=e,o=e,c=e,u=e,l=n,h=n;if(e.static=i,this.parsePropertyNamePrefixOperator(e),this.eat(55)){l.kind="method";let T=this.match(136);if(this.parseClassElementName(l),T){this.pushClassPrivateMethod(t,a,!0,!1);return}this.isNonstaticConstructor(n)&&this.raise(m.ConstructorIsGenerator,{at:n.key}),this.pushClassMethod(t,n,!0,!1,!1,!1);return}let p=H(this.state.type)&&!this.state.containsEsc,f=this.match(136),y=this.parseClassElementName(e),x=this.state.startLoc;if(this.parsePostMemberNameModifiers(h),this.isClassMethod()){if(l.kind="method",f){this.pushClassPrivateMethod(t,a,!1,!1);return}let T=this.isNonstaticConstructor(n),E=!1;T&&(n.kind="constructor",s.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(m.DuplicateConstructor,{at:y}),T&&this.hasPlugin("typescript")&&e.override&&this.raise(m.OverrideOnConstructor,{at:y}),s.hadConstructor=!0,E=s.hadSuperClass),this.pushClassMethod(t,n,!1,!1,T,E)}else if(this.isClassProperty())f?this.pushClassPrivateProperty(t,c):this.pushClassProperty(t,o);else if(p&&y.name==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(y);let T=this.eat(55);h.optional&&this.unexpected(x),l.kind="method";let E=this.match(136);this.parseClassElementName(l),this.parsePostMemberNameModifiers(h),E?this.pushClassPrivateMethod(t,a,T,!0):(this.isNonstaticConstructor(n)&&this.raise(m.ConstructorIsAsync,{at:n.key}),this.pushClassMethod(t,n,T,!0,!1,!1))}else if(p&&(y.name==="get"||y.name==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(y),l.kind=y.name;let T=this.match(136);this.parseClassElementName(n),T?this.pushClassPrivateMethod(t,a,!1,!1):(this.isNonstaticConstructor(n)&&this.raise(m.ConstructorIsAccessor,{at:n.key}),this.pushClassMethod(t,n,!1,!1,!1,!1)),this.checkGetterSetterParams(n)}else if(p&&y.name==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(y);let T=this.match(136);this.parseClassElementName(o),this.pushClassAccessorProperty(t,u,T)}else this.isLineTerminator()?f?this.pushClassPrivateProperty(t,c):this.pushClassProperty(t,o):this.unexpected()}parseClassElementName(t){let{type:e,value:s}=this.state;if((e===130||e===131)&&t.static&&s==="prototype"&&this.raise(m.StaticPrototype,{at:this.state.startLoc}),e===136){s==="constructor"&&this.raise(m.ConstructorClassPrivateField,{at:this.state.startLoc});let i=this.parsePrivateName();return t.key=i,i}return this.parsePropertyName(t)}parseClassStaticBlock(t,e){var s;this.scope.enter(hs|mn|dn);let i=this.state.labels;this.state.labels=[],this.prodParam.enter(Ks);let n=e.body=[];this.parseBlockOrModuleBlockBody(n,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=i,t.body.push(this.finishNode(e,"StaticBlock")),(s=e.decorators)!=null&&s.length&&this.raise(m.DecoratorStaticBlock,{at:e})}pushClassProperty(t,e){!e.computed&&(e.key.name==="constructor"||e.key.value==="constructor")&&this.raise(m.ConstructorClassField,{at:e.key}),t.body.push(this.parseClassProperty(e))}pushClassPrivateProperty(t,e){let s=this.parseClassPrivateProperty(e);t.body.push(s),this.classScope.declarePrivateName(this.getPrivateNameSV(s.key),uo,s.key.loc.start)}pushClassAccessorProperty(t,e,s){if(!s&&!e.computed){let n=e.key;(n.name==="constructor"||n.value==="constructor")&&this.raise(m.ConstructorClassField,{at:n})}let i=this.parseClassAccessorProperty(e);t.body.push(i),s&&this.classScope.declarePrivateName(this.getPrivateNameSV(i.key),uo,i.key.loc.start)}pushClassMethod(t,e,s,i,n,a){t.body.push(this.parseMethod(e,s,i,n,a,"ClassMethod",!0))}pushClassPrivateMethod(t,e,s,i){let n=this.parseMethod(e,s,i,!1,!1,"ClassPrivateMethod",!0);t.body.push(n);let a=n.kind==="get"?n.static?JE:QE:n.kind==="set"?n.static?YE:ZE:uo;this.declareClassPrivateMethodInScope(n,a)}declareClassPrivateMethodInScope(t,e){this.classScope.declarePrivateName(this.getPrivateNameSV(t.key),e,t.key.loc.start)}parsePostMemberNameModifiers(t){}parseClassPrivateProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassPrivateProperty")}parseClassProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassProperty")}parseClassAccessorProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassAccessorProperty")}parseInitializer(t){this.scope.enter(hs|dn),this.expressionScope.enter(Qd()),this.prodParam.enter(Ks),t.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(t,e,s,i=Vd){if(H(this.state.type))t.id=this.parseIdentifier(),e&&this.declareNameFromIdentifier(t.id,i);else if(s||!e)t.id=null;else throw this.raise(m.MissingClassName,{at:this.state.startLoc})}parseClassSuper(t){t.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(t,e){let s=this.maybeParseExportDefaultSpecifier(t),i=!s||this.eat(12),n=i&&this.eatExportStar(t),a=n&&this.maybeParseExportNamespaceSpecifier(t),o=i&&(!a||this.eat(12)),c=s||n;if(n&&!a){if(s&&this.unexpected(),e)throw this.raise(m.UnsupportedDecoratorExport,{at:t});return this.parseExportFrom(t,!0),this.finishNode(t,"ExportAllDeclaration")}let u=this.maybeParseExportNamedSpecifiers(t);s&&i&&!n&&!u&&this.unexpected(null,5),a&&o&&this.unexpected(null,97);let l;if(c||u){if(l=!1,e)throw this.raise(m.UnsupportedDecoratorExport,{at:t});this.parseExportFrom(t,c)}else l=this.maybeParseExportDeclaration(t);if(c||u||l){var h;let p=t;if(this.checkExport(p,!0,!1,!!p.source),((h=p.declaration)==null?void 0:h.type)==="ClassDeclaration")this.maybeTakeDecorators(e,p.declaration,p);else if(e)throw this.raise(m.UnsupportedDecoratorExport,{at:t});return this.finishNode(p,"ExportNamedDeclaration")}if(this.eat(65)){let p=t,f=this.parseExportDefaultExpression();if(p.declaration=f,f.type==="ClassDeclaration")this.maybeTakeDecorators(e,f,p);else if(e)throw this.raise(m.UnsupportedDecoratorExport,{at:t});return this.checkExport(p,!0,!0),this.finishNode(p,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(t){return this.eat(55)}maybeParseExportDefaultSpecifier(t){if(this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom");let e=this.startNode();return e.exported=this.parseIdentifier(!0),t.specifiers=[this.finishNode(e,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(t){if(this.isContextual(93)){t.specifiers||(t.specifiers=[]);let e=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),e.exported=this.parseModuleExportName(),t.specifiers.push(this.finishNode(e,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(t){if(this.match(5)){t.specifiers||(t.specifiers=[]);let e=t.exportKind==="type";return t.specifiers.push(...this.parseExportSpecifiers(e)),t.source=null,t.declaration=null,this.hasPlugin("importAssertions")&&(t.assertions=[]),!0}return!1}maybeParseExportDeclaration(t){return this.shouldParseExportDeclaration()?(t.specifiers=[],t.source=null,this.hasPlugin("importAssertions")&&(t.assertions=[]),t.declaration=this.parseExportDeclaration(t),!0):!1}isAsyncFunction(){if(!this.isContextual(95))return!1;let t=this.nextTokenStart();return!Zo.test(this.input.slice(this.state.pos,t))&&this.isUnparsedContextual(t,"function")}parseExportDefaultExpression(){let t=this.startNode();if(this.match(68))return this.next(),this.parseFunction(t,5);if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(t,13);if(this.match(80))return this.parseClass(t,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(m.DecoratorBeforeExport,{at:this.state.startLoc}),this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(m.UnsupportedDefaultExport,{at:this.state.startLoc});let e=this.parseMaybeAssignAllowIn();return this.semicolon(),e}parseExportDeclaration(t){return this.match(80)?this.parseClass(this.startNode(),!0,!1):this.parseStatementListItem()}isExportDefaultSpecifier(){let{type:t}=this.state;if(H(t)){if(t===95&&!this.state.containsEsc||t===99)return!1;if((t===128||t===127)&&!this.state.containsEsc){let{type:i}=this.lookahead();if(H(i)&&i!==97||i===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;let e=this.nextTokenStart(),s=this.isUnparsedContextual(e,"from");if(this.input.charCodeAt(e)===44||H(this.state.type)&&s)return!0;if(this.match(65)&&s){let i=this.input.charCodeAt(this.nextTokenStartSince(e+4));return i===34||i===39}return!1}parseExportFrom(t,e){if(this.eatContextual(97)){t.source=this.parseImportSource(),this.checkExport(t);let s=this.maybeParseImportAssertions();s&&(t.assertions=s,this.checkJSONModuleImport(t))}else e&&this.unexpected();this.semicolon()}shouldParseExportDeclaration(){let{type:t}=this.state;return t===26&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))?(this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(m.DecoratorBeforeExport,{at:this.state.startLoc}),!0):t===74||t===75||t===68||t===80||this.isLet()||this.isAsyncFunction()}checkExport(t,e,s,i){if(e){if(s){if(this.checkDuplicateExports(t,"default"),this.hasPlugin("exportDefaultFrom")){var n;let a=t.declaration;a.type==="Identifier"&&a.name==="from"&&a.end-a.start===4&&!((n=a.extra)!=null&&n.parenthesized)&&this.raise(m.ExportDefaultFromAsIdentifier,{at:a})}}else if(t.specifiers&&t.specifiers.length)for(let a of t.specifiers){let{exported:o}=a,c=o.type==="Identifier"?o.name:o.value;if(this.checkDuplicateExports(a,c),!i&&a.local){let{local:u}=a;u.type!=="Identifier"?this.raise(m.ExportBindingIsString,{at:a,localName:u.value,exportName:c}):(this.checkReservedWord(u.name,u.loc.start,!0,!1),this.scope.checkLocalExport(u))}}else if(t.declaration){if(t.declaration.type==="FunctionDeclaration"||t.declaration.type==="ClassDeclaration"){let a=t.declaration.id;if(!a)throw new Error("Assertion failure");this.checkDuplicateExports(t,a.name)}else if(t.declaration.type==="VariableDeclaration")for(let a of t.declaration.declarations)this.checkDeclaration(a.id)}}}checkDeclaration(t){if(t.type==="Identifier")this.checkDuplicateExports(t,t.name);else if(t.type==="ObjectPattern")for(let e of t.properties)this.checkDeclaration(e);else if(t.type==="ArrayPattern")for(let e of t.elements)e&&this.checkDeclaration(e);else t.type==="ObjectProperty"?this.checkDeclaration(t.value):t.type==="RestElement"?this.checkDeclaration(t.argument):t.type==="AssignmentPattern"&&this.checkDeclaration(t.left)}checkDuplicateExports(t,e){this.exportedIdentifiers.has(e)&&(e==="default"?this.raise(m.DuplicateDefaultExport,{at:t}):this.raise(m.DuplicateExport,{at:t,exportName:e})),this.exportedIdentifiers.add(e)}parseExportSpecifiers(t){let e=[],s=!0;for(this.expect(5);!this.eat(8);){if(s)s=!1;else if(this.expect(12),this.eat(8))break;let i=this.isContextual(128),n=this.match(131),a=this.startNode();a.local=this.parseModuleExportName(),e.push(this.parseExportSpecifier(a,n,t,i))}return e}parseExportSpecifier(t,e,s,i){return this.eatContextual(93)?t.exported=this.parseModuleExportName():e?t.exported=fS(t.local):t.exported||(t.exported=mt(t.local)),this.finishNode(t,"ExportSpecifier")}parseModuleExportName(){if(this.match(131)){let t=this.parseStringLiteral(this.state.value),e=t.value.match(FS);return e&&this.raise(m.ModuleExportNameHasLoneSurrogate,{at:t,surrogateCharCode:e[0].charCodeAt(0)}),t}return this.parseIdentifier(!0)}isJSONModuleImport(t){return t.assertions!=null?t.assertions.some(({key:e,value:s})=>s.value==="json"&&(e.type==="Identifier"?e.name==="type":e.value==="type")):!1}checkImportReflection(t){if(t.module){var e;(t.specifiers.length!==1||t.specifiers[0].type!=="ImportDefaultSpecifier")&&this.raise(m.ImportReflectionNotBinding,{at:t.specifiers[0].loc.start}),((e=t.assertions)==null?void 0:e.length)>0&&this.raise(m.ImportReflectionHasAssertion,{at:t.specifiers[0].loc.start})}}checkJSONModuleImport(t){if(this.isJSONModuleImport(t)&&t.type!=="ExportAllDeclaration"){let{specifiers:e}=t;if(e!=null){let s=e.find(i=>{let n;if(i.type==="ExportSpecifier"?n=i.local:i.type==="ImportSpecifier"&&(n=i.imported),n!==void 0)return n.type==="Identifier"?n.name!=="default":n.value!=="default"});s!==void 0&&this.raise(m.ImportJSONBindingNotDefault,{at:s.loc.start})}}}parseMaybeImportReflection(t){let e=!1;if(this.isContextual(125)){let s=this.lookahead(),i=s.type;H(i)?(i!==97||this.input.charCodeAt(this.nextTokenStartSince(s.end))===102)&&(e=!0):i!==12&&(e=!0)}e?(this.expectPlugin("importReflection"),this.next(),t.module=!0):this.hasPlugin("importReflection")&&(t.module=!1)}parseImport(t){if(t.specifiers=[],!this.match(131)){this.parseMaybeImportReflection(t);let i=!this.maybeParseDefaultImportSpecifier(t)||this.eat(12),n=i&&this.maybeParseStarImportSpecifier(t);i&&!n&&this.parseNamedImportSpecifiers(t),this.expectContextual(97)}t.source=this.parseImportSource();let e=this.maybeParseImportAssertions();if(e)t.assertions=e;else{let s=this.maybeParseModuleAttributes();s&&(t.attributes=s)}return this.checkImportReflection(t),this.checkJSONModuleImport(t),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.match(131)||this.unexpected(),this.parseExprAtom()}shouldParseDefaultImport(t){return H(this.state.type)}parseImportSpecifierLocal(t,e,s){e.local=this.parseIdentifier(),t.specifiers.push(this.finishImportSpecifier(e,s))}finishImportSpecifier(t,e,s=Hs){return this.checkLVal(t.local,{in:{type:e},binding:s}),this.finishNode(t,e)}parseAssertEntries(){let t=[],e=new Set;do{if(this.match(8))break;let s=this.startNode(),i=this.state.value;if(e.has(i)&&this.raise(m.ModuleAttributesWithDuplicateKeys,{at:this.state.startLoc,key:i}),e.add(i),this.match(131)?s.key=this.parseStringLiteral(i):s.key=this.parseIdentifier(!0),this.expect(14),!this.match(131))throw this.raise(m.ModuleAttributeInvalidValue,{at:this.state.startLoc});s.value=this.parseStringLiteral(this.state.value),t.push(this.finishNode(s,"ImportAttribute"))}while(this.eat(12));return t}maybeParseModuleAttributes(){if(this.match(76)&&!this.hasPrecedingLineBreak())this.expectPlugin("moduleAttributes"),this.next();else return this.hasPlugin("moduleAttributes")?[]:null;let t=[],e=new Set;do{let s=this.startNode();if(s.key=this.parseIdentifier(!0),s.key.name!=="type"&&this.raise(m.ModuleAttributeDifferentFromType,{at:s.key}),e.has(s.key.name)&&this.raise(m.ModuleAttributesWithDuplicateKeys,{at:s.key,key:s.key.name}),e.add(s.key.name),this.expect(14),!this.match(131))throw this.raise(m.ModuleAttributeInvalidValue,{at:this.state.startLoc});s.value=this.parseStringLiteral(this.state.value),this.finishNode(s,"ImportAttribute"),t.push(s)}while(this.eat(12));return t}maybeParseImportAssertions(){if(this.isContextual(94)&&!this.hasPrecedingLineBreak())this.expectPlugin("importAssertions"),this.next();else return this.hasPlugin("importAssertions")?[]:null;this.eat(5);let t=this.parseAssertEntries();return this.eat(8),t}maybeParseDefaultImportSpecifier(t){return this.shouldParseDefaultImport(t)?(this.parseImportSpecifierLocal(t,this.startNode(),"ImportDefaultSpecifier"),!0):!1}maybeParseStarImportSpecifier(t){if(this.match(55)){let e=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(t,e,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(t){let e=!0;for(this.expect(5);!this.eat(8);){if(e)e=!1;else{if(this.eat(14))throw this.raise(m.DestructureNamedImport,{at:this.state.startLoc});if(this.expect(12),this.eat(8))break}let s=this.startNode(),i=this.match(131),n=this.isContextual(128);s.imported=this.parseModuleExportName();let a=this.parseImportSpecifier(s,i,t.importKind==="type"||t.importKind==="typeof",n,void 0);t.specifiers.push(a)}}parseImportSpecifier(t,e,s,i,n){if(this.eatContextual(93))t.local=this.parseIdentifier();else{let{imported:a}=t;if(e)throw this.raise(m.ImportBindingIsString,{at:t,importName:a.value});this.checkReservedWord(a.name,t.loc.start,!0,!0),t.local||(t.local=mt(a))}return this.finishImportSpecifier(t,"ImportSpecifier",n)}isThisParam(t){return t.type==="Identifier"&&t.name==="this"}},Tn=class extends $o{constructor(t,e){t=cE(t),super(t,e),this.options=t,this.initializeScopes(),this.plugins=BS(this.options.plugins),this.filename=t.sourceFilename}getScopeHandler(){return qr}parse(){this.enterInitialScopes();let t=this.startNode(),e=this.startNode();return this.nextToken(),t.errors=null,this.parseTopLevel(t,e),t.errors=this.state.errors,t}};function BS(r){let t=new Map;for(let e of r){let[s,i]=Array.isArray(e)?e:[e,{}];t.has(s)||t.set(s,i||{})}return t}function $S(r,t){var e;if(((e=t)==null?void 0:e.sourceType)==="unambiguous"){t=Object.assign({},t);try{t.sourceType="module";let s=Rr(t,r),i=s.parse();if(s.sawUnambiguousESM)return i;if(s.ambiguousScriptDifferentAst)try{return t.sourceType="script",Rr(t,r).parse()}catch{}else i.program.sourceType="script";return i}catch(s){try{return t.sourceType="script",Rr(t,r).parse()}catch{}throw s}}else return Rr(t,r).parse()}function jS(r,t){let e=Rr(t,r);return e.options.strictMode&&(e.state.strict=!0),e.getExpression()}function US(r){let t={};for(let e of Object.keys(r))t[e]=ut(r[e]);return t}var qS=US(uE);function Rr(r,t){let e=Tn;return r!=null&&r.plugins&&(LS(r.plugins),e=WS(r.plugins)),new e(r,t)}var Od={};function WS(r){let t=DS.filter(i=>be(r,i)),e=t.join("/"),s=Od[e];if(!s){s=Tn;for(let i of t)s=im[i](s);Od[e]=s}return s}zr.parse=$S;zr.parseExpression=jS;zr.tokTypes=qS});var Sm=S((WC,Em)=>{"use strict";d();var bm=require("child_process"),xm=bm.spawn,QS=bm.exec;Em.exports=function(r,t,e){if(typeof t=="function"&&e===void 0&&(e=t,t=void 0),r=parseInt(r),Number.isNaN(r)){if(e)return e(new Error("pid must be a number"));throw new Error("pid must be a number")}var s={},i={};switch(s[r]=[],i[r]=1,process.platform){case"win32":QS("taskkill /pid "+r+" /T /F",e);break;case"darwin":cc(r,s,i,function(n){return xm("pgrep",["-P",n])},function(){Pm(s,t,e)});break;default:cc(r,s,i,function(n){return xm("ps",["-o","pid","--no-headers","--ppid",n])},function(){Pm(s,t,e)});break}};function Pm(r,t,e){var s={};try{Object.keys(r).forEach(function(i){r[i].forEach(function(n){s[n]||(Tm(n,t),s[n]=1)}),s[i]||(Tm(i,t),s[i]=1)})}catch(i){if(e)return e(i);throw i}if(e)return e()}function Tm(r,t){try{process.kill(parseInt(r,10),t)}catch(e){if(e.code!=="ESRCH")throw e}}function cc(r,t,e,s,i){var n=s(r),a="";n.stdout.on("data",function(u){var u=u.toString("ascii");a+=u});var o=function(c){if(delete e[r],c!=0){Object.keys(e).length==0&&i();return}a.match(/\d+/g).forEach(function(u){u=parseInt(u,10),t[r].push(u),t[u]=[],e[u]=1,cc(u,t,e,s,i)})};n.on("close",o)}});var Cm=S((VC,Am)=>{"use strict";d();var{Duplex:ZS}=require("stream");function vm(r){r.emit("close")}function ev(){!this.destroyed&&this._writableState.finished&&this.destroy()}function wm(r){this.removeListener("error",wm),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function tv(r,t){let e=!0,s=new ZS(Se(_({},t),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return r.on("message",function(n,a){let o=!a&&s._readableState.objectMode?n.toString():n;s.push(o)||r.pause()}),r.once("error",function(n){s.destroyed||(e=!1,s.destroy(n))}),r.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(i,n){if(r.readyState===r.CLOSED){n(i),process.nextTick(vm,s);return}let a=!1;r.once("error",function(c){a=!0,n(c)}),r.once("close",function(){a||n(i),process.nextTick(vm,s)}),e&&r.terminate()},s._final=function(i){if(r.readyState===r.CONNECTING){r.once("open",function(){s._final(i)});return}r._socket!==null&&(r._socket._writableState.finished?(i(),s._readableState.endEmitted&&s.destroy()):(r._socket.once("finish",function(){i()}),r.close()))},s._read=function(){r.isPaused&&r.resume()},s._write=function(i,n,a){if(r.readyState===r.CONNECTING){r.once("open",function(){s._write(i,n,a)});return}r.send(i,a)},s.on("end",ev),s.on("error",wm),s}Am.exports=tv});var Ut=S((zC,Im)=>{"use strict";d();Im.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Hr=S((GC,lc)=>{"use strict";d();var{EMPTY_BUFFER:sv}=Ut();function Nm(r,t){if(r.length===0)return sv;if(r.length===1)return r[0];let e=Buffer.allocUnsafe(t),s=0;for(let i=0;i<r.length;i++){let n=r[i];e.set(n,s),s+=n.length}return s<t?e.slice(0,s):e}function km(r,t,e,s,i){for(let n=0;n<i;n++)e[s+n]=r[n]^t[n&3]}function _m(r,t){for(let e=0;e<r.length;e++)r[e]^=t[e&3]}function Om(r){return r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}function On(r){if(On.readOnly=!0,Buffer.isBuffer(r))return r;let t;return r instanceof ArrayBuffer?t=Buffer.from(r):ArrayBuffer.isView(r)?t=Buffer.from(r.buffer,r.byteOffset,r.byteLength):(t=Buffer.from(r),On.readOnly=!1),t}try{let r=require("bufferutil");lc.exports={concat:Nm,mask(t,e,s,i,n){n<48?km(t,e,s,i,n):r.mask(t,e,s,i,n)},toArrayBuffer:Om,toBuffer:On,unmask(t,e){t.length<32?_m(t,e):r.unmask(t,e)}}}catch{lc.exports={concat:Nm,mask:km,toArrayBuffer:Om,toBuffer:On,unmask:_m}}});var Mm=S((HC,Dm)=>{"use strict";d();var Lm=Symbol("kDone"),uc=Symbol("kRun"),hc=class{constructor(t){this[Lm]=()=>{this.pending--,this[uc]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[uc]()}[uc](){if(this.pending!==this.concurrency&&this.jobs.length){let t=this.jobs.shift();this.pending++,t(this[Lm])}}};Dm.exports=hc});var Jr=S((KC,$m)=>{"use strict";d();var Kr=require("zlib"),Fm=Hr(),rv=Mm(),{kStatusCode:Rm}=Ut(),iv=Buffer.from([0,0,255,255]),Mn=Symbol("permessage-deflate"),gt=Symbol("total-length"),Xr=Symbol("callback"),qt=Symbol("buffers"),Dn=Symbol("error"),Ln,pc=class{constructor(t,e,s){if(this._maxPayload=s|0,this._options=t||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,!Ln){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Ln=new rv(i)}}static get extensionName(){return"permessage-deflate"}offer(){let t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let t=this._deflate[Xr];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){let e=this._options,s=t.find(i=>!(e.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(e.serverMaxWindowBits===!1||typeof e.serverMaxWindowBits=="number"&&e.serverMaxWindowBits>i.server_max_window_bits)||typeof e.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!s)throw new Error("None of the extension offers can be accepted");return e.serverNoContextTakeover&&(s.server_no_context_takeover=!0),e.clientNoContextTakeover&&(s.client_no_context_takeover=!0),typeof e.serverMaxWindowBits=="number"&&(s.server_max_window_bits=e.serverMaxWindowBits),typeof e.clientMaxWindowBits=="number"?s.client_max_window_bits=e.clientMaxWindowBits:(s.client_max_window_bits===!0||e.clientMaxWindowBits===!1)&&delete s.client_max_window_bits,s}acceptAsClient(t){let e=t[0];if(this._options.clientNoContextTakeover===!1&&e.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!e.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(e.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return e}normalizeParams(t){return t.forEach(e=>{Object.keys(e).forEach(s=>{let i=e[s];if(i.length>1)throw new Error(`Parameter "${s}" must have only a single value`);if(i=i[0],s==="client_max_window_bits"){if(i!==!0){let n=+i;if(!Number.isInteger(n)||n<8||n>15)throw new TypeError(`Invalid value for parameter "${s}": ${i}`);i=n}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${s}": ${i}`)}else if(s==="server_max_window_bits"){let n=+i;if(!Number.isInteger(n)||n<8||n>15)throw new TypeError(`Invalid value for parameter "${s}": ${i}`);i=n}else if(s==="client_no_context_takeover"||s==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${s}": ${i}`)}else throw new Error(`Unknown parameter "${s}"`);e[s]=i})}),t}decompress(t,e,s){Ln.add(i=>{this._decompress(t,e,(n,a)=>{i(),s(n,a)})})}compress(t,e,s){Ln.add(i=>{this._compress(t,e,(n,a)=>{i(),s(n,a)})})}_decompress(t,e,s){let i=this._isServer?"client":"server";if(!this._inflate){let n=`${i}_max_window_bits`,a=typeof this.params[n]!="number"?Kr.Z_DEFAULT_WINDOWBITS:this.params[n];this._inflate=Kr.createInflateRaw(Se(_({},this._options.zlibInflateOptions),{windowBits:a})),this._inflate[Mn]=this,this._inflate[gt]=0,this._inflate[qt]=[],this._inflate.on("error",av),this._inflate.on("data",Bm)}this._inflate[Xr]=s,this._inflate.write(t),e&&this._inflate.write(iv),this._inflate.flush(()=>{let n=this._inflate[Dn];if(n){this._inflate.close(),this._inflate=null,s(n);return}let a=Fm.concat(this._inflate[qt],this._inflate[gt]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[gt]=0,this._inflate[qt]=[],e&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),s(null,a)})}_compress(t,e,s){let i=this._isServer?"server":"client";if(!this._deflate){let n=`${i}_max_window_bits`,a=typeof this.params[n]!="number"?Kr.Z_DEFAULT_WINDOWBITS:this.params[n];this._deflate=Kr.createDeflateRaw(Se(_({},this._options.zlibDeflateOptions),{windowBits:a})),this._deflate[gt]=0,this._deflate[qt]=[],this._deflate.on("data",nv)}this._deflate[Xr]=s,this._deflate.write(t),this._deflate.flush(Kr.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let n=Fm.concat(this._deflate[qt],this._deflate[gt]);e&&(n=n.slice(0,n.length-4)),this._deflate[Xr]=null,this._deflate[gt]=0,this._deflate[qt]=[],e&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),s(null,n)})}};$m.exports=pc;function nv(r){this[qt].push(r),this[gt]+=r.length}function Bm(r){if(this[gt]+=r.length,this[Mn]._maxPayload<1||this[gt]<=this[Mn]._maxPayload){this[qt].push(r);return}this[Dn]=new RangeError("Max payload size exceeded"),this[Dn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Dn][Rm]=1009,this.removeListener("data",Bm),this.reset()}function av(r){this[Mn]._inflate=null,r[Rm]=1007,this[Xr](r)}});var Yr=S((XC,fc)=>{"use strict";d();var jm=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Um(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function qm(r){let t=r.length,e=0;for(;e<t;)if((r[e]&128)===0)e++;else if((r[e]&224)===192){if(e+1===t||(r[e+1]&192)!==128||(r[e]&254)===192)return!1;e+=2}else if((r[e]&240)===224){if(e+2>=t||(r[e+1]&192)!==128||(r[e+2]&192)!==128||r[e]===224&&(r[e+1]&224)===128||r[e]===237&&(r[e+1]&224)===160)return!1;e+=3}else if((r[e]&248)===240){if(e+3>=t||(r[e+1]&192)!==128||(r[e+2]&192)!==128||(r[e+3]&192)!==128||r[e]===240&&(r[e+1]&240)===128||r[e]===244&&r[e+1]>143||r[e]>244)return!1;e+=4}else return!1;return!0}try{let r=require("utf-8-validate");fc.exports={isValidStatusCode:Um,isValidUTF8(t){return t.length<150?qm(t):r(t)},tokenChars:jm}}catch{fc.exports={isValidStatusCode:Um,isValidUTF8:qm,tokenChars:jm}}});var gc=S((JC,Xm)=>{"use strict";d();var{Writable:ov}=require("stream"),Wm=Jr(),{BINARY_TYPES:cv,EMPTY_BUFFER:Vm,kStatusCode:lv,kWebSocket:uv}=Ut(),{concat:dc,toArrayBuffer:hv,unmask:pv}=Hr(),{isValidStatusCode:fv,isValidUTF8:zm}=Yr(),Qr=0,Gm=1,Hm=2,Km=3,mc=4,dv=5,yc=class extends ov{constructor(t={}){super(),this._binaryType=t.binaryType||cv[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=t.maxPayload|0,this._skipUTF8Validation=!!t.skipUTF8Validation,this[uv]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=Qr,this._loop=!1}_write(t,e,s){if(this._opcode===8&&this._state==Qr)return s();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(s)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){let s=this._buffers[0];return this._buffers[0]=s.slice(t),s.slice(0,t)}let e=Buffer.allocUnsafe(t);do{let s=this._buffers[0],i=e.length-t;t>=s.length?e.set(this._buffers.shift(),i):(e.set(new Uint8Array(s.buffer,s.byteOffset,t),i),this._buffers[0]=s.slice(t)),t-=s.length}while(t>0);return e}startLoop(t){let e;this._loop=!0;do switch(this._state){case Qr:e=this.getInfo();break;case Gm:e=this.getPayloadLength16();break;case Hm:e=this.getPayloadLength64();break;case Km:this.getMask();break;case mc:e=this.getData(t);break;default:this._loop=!1;return}while(this._loop);t(e)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((t[0]&48)!==0)return this._loop=!1,he(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let e=(t[0]&64)===64;if(e&&!this._extensions[Wm.extensionName])return this._loop=!1,he(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(e)return this._loop=!1,he(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,he(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,he(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=e}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,he(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(e)return this._loop=!1,he(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,he(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,he(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,he(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,he(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Gm;else if(this._payloadLength===127)this._state=Hm;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),e=t.readUInt32BE(0);return e>Math.pow(2,53-32)-1?(this._loop=!1,he(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=e*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,he(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Km:this._state=mc}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=mc}getData(t){let e=Vm;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}e=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&pv(e,this._mask)}if(this._opcode>7)return this.controlMessage(e);if(this._compressed){this._state=dv,this.decompress(e,t);return}return e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage()}decompress(t,e){this._extensions[Wm.extensionName].decompress(t,this._fin,(i,n)=>{if(i)return e(i);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return e(he(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(n)}let a=this.dataMessage();if(a)return e(a);this.startLoop(e)})}dataMessage(){if(this._fin){let t=this._messageLength,e=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=dc(e,t):this._binaryType==="arraybuffer"?s=hv(dc(e,t)):s=e,this.emit("message",s,!0)}else{let s=dc(e,t);if(!this._skipUTF8Validation&&!zm(s))return this._loop=!1,he(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",s,!1)}}this._state=Qr}controlMessage(t){if(this._opcode===8)if(this._loop=!1,t.length===0)this.emit("conclude",1005,Vm),this.end();else{if(t.length===1)return he(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let e=t.readUInt16BE(0);if(!fv(e))return he(RangeError,`invalid status code ${e}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let s=t.slice(2);if(!this._skipUTF8Validation&&!zm(s))return he(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",e,s),this.end()}}else this._opcode===9?this.emit("ping",t):this.emit("pong",t);this._state=Qr}};Xm.exports=yc;function he(r,t,e,s,i){let n=new r(e?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,he),n.code=i,n[lv]=s,n}});var xc=S((ZC,Qm)=>{"use strict";d();var YC=require("net"),QC=require("tls"),{randomFillSync:mv}=require("crypto"),Jm=Jr(),{EMPTY_BUFFER:yv}=Ut(),{isValidStatusCode:gv}=Yr(),{mask:Ym,toBuffer:tr}=Hr(),Ye=Symbol("kByteLength"),xv=Buffer.alloc(4),st=class{constructor(t,e,s){this._extensions=e||{},s&&(this._generateMask=s,this._maskBuffer=Buffer.alloc(4)),this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,e){let s,i=!1,n=2,a=!1;e.mask&&(s=e.maskBuffer||xv,e.generateMask?e.generateMask(s):mv(s,0,4),a=(s[0]|s[1]|s[2]|s[3])===0,n=6);let o;typeof t=="string"?(!e.mask||a)&&e[Ye]!==void 0?o=e[Ye]:(t=Buffer.from(t),o=t.length):(o=t.length,i=e.mask&&e.readOnly&&!a);let c=o;o>=65536?(n+=8,c=127):o>125&&(n+=2,c=126);let u=Buffer.allocUnsafe(i?o+n:n);return u[0]=e.fin?e.opcode|128:e.opcode,e.rsv1&&(u[0]|=64),u[1]=c,c===126?u.writeUInt16BE(o,2):c===127&&(u[2]=u[3]=0,u.writeUIntBE(o,4,6)),e.mask?(u[1]|=128,u[n-4]=s[0],u[n-3]=s[1],u[n-2]=s[2],u[n-1]=s[3],a?[u,t]:i?(Ym(t,s,u,n,o),[u]):(Ym(t,s,t,0,o),[u,t])):[u,t]}close(t,e,s,i){let n;if(t===void 0)n=yv;else{if(typeof t!="number"||!gv(t))throw new TypeError("First argument must be a valid error code number");if(e===void 0||!e.length)n=Buffer.allocUnsafe(2),n.writeUInt16BE(t,0);else{let o=Buffer.byteLength(e);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");n=Buffer.allocUnsafe(2+o),n.writeUInt16BE(t,0),typeof e=="string"?n.write(e,2):n.set(e,2)}}let a={[Ye]:n.length,fin:!0,generateMask:this._generateMask,mask:s,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,n,!1,a,i]):this.sendFrame(st.frame(n,a),i)}ping(t,e,s){let i,n;if(typeof t=="string"?(i=Buffer.byteLength(t),n=!1):(t=tr(t),i=t.length,n=tr.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let a={[Ye]:i,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:9,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,a,s]):this.sendFrame(st.frame(t,a),s)}pong(t,e,s){let i,n;if(typeof t=="string"?(i=Buffer.byteLength(t),n=!1):(t=tr(t),i=t.length,n=tr.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let a={[Ye]:i,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:10,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,a,s]):this.sendFrame(st.frame(t,a),s)}send(t,e,s){let i=this._extensions[Jm.extensionName],n=e.binary?2:1,a=e.compress,o,c;if(typeof t=="string"?(o=Buffer.byteLength(t),c=!1):(t=tr(t),o=t.length,c=tr.readOnly),this._firstFragment?(this._firstFragment=!1,a&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(a=o>=i._threshold),this._compress=a):(a=!1,n=0),e.fin&&(this._firstFragment=!0),i){let u={[Ye]:o,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:n,readOnly:c,rsv1:a};this._deflating?this.enqueue([this.dispatch,t,this._compress,u,s]):this.dispatch(t,this._compress,u,s)}else this.sendFrame(st.frame(t,{[Ye]:o,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:n,readOnly:c,rsv1:!1}),s)}dispatch(t,e,s,i){if(!e){this.sendFrame(st.frame(t,s),i);return}let n=this._extensions[Jm.extensionName];this._bufferedBytes+=s[Ye],this._deflating=!0,n.compress(t,s.fin,(a,o)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(c);for(let u=0;u<this._queue.length;u++){let l=this._queue[u],h=l[l.length-1];typeof h=="function"&&h(c)}return}this._bufferedBytes-=s[Ye],this._deflating=!1,s.readOnly=!1,this.sendFrame(st.frame(o,s),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let t=this._queue.shift();this._bufferedBytes-=t[3][Ye],Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[3][Ye],this._queue.push(t)}sendFrame(t,e){t.length===2?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],e),this._socket.uncork()):this._socket.write(t[0],e)}};Qm.exports=st});var cy=S((eI,oy)=>{"use strict";d();var{kForOnEventAttribute:Pc,kListener:Zm}=Ut(),ey=Symbol("kCode"),ty=Symbol("kData"),sy=Symbol("kError"),ry=Symbol("kMessage"),iy=Symbol("kReason"),sr=Symbol("kTarget"),ny=Symbol("kType"),ay=Symbol("kWasClean"),xt=class{constructor(t){this[sr]=null,this[ny]=t}get target(){return this[sr]}get type(){return this[ny]}};Object.defineProperty(xt.prototype,"target",{enumerable:!0});Object.defineProperty(xt.prototype,"type",{enumerable:!0});var Ps=class extends xt{constructor(t,e={}){super(t),this[ey]=e.code===void 0?0:e.code,this[iy]=e.reason===void 0?"":e.reason,this[ay]=e.wasClean===void 0?!1:e.wasClean}get code(){return this[ey]}get reason(){return this[iy]}get wasClean(){return this[ay]}};Object.defineProperty(Ps.prototype,"code",{enumerable:!0});Object.defineProperty(Ps.prototype,"reason",{enumerable:!0});Object.defineProperty(Ps.prototype,"wasClean",{enumerable:!0});var rr=class extends xt{constructor(t,e={}){super(t),this[sy]=e.error===void 0?null:e.error,this[ry]=e.message===void 0?"":e.message}get error(){return this[sy]}get message(){return this[ry]}};Object.defineProperty(rr.prototype,"error",{enumerable:!0});Object.defineProperty(rr.prototype,"message",{enumerable:!0});var Zr=class extends xt{constructor(t,e={}){super(t),this[ty]=e.data===void 0?null:e.data}get data(){return this[ty]}};Object.defineProperty(Zr.prototype,"data",{enumerable:!0});var Pv={addEventListener(r,t,e={}){let s;if(r==="message")s=function(n,a){let o=new Zr("message",{data:a?n:n.toString()});o[sr]=this,t.call(this,o)};else if(r==="close")s=function(n,a){let o=new Ps("close",{code:n,reason:a.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});o[sr]=this,t.call(this,o)};else if(r==="error")s=function(n){let a=new rr("error",{error:n,message:n.message});a[sr]=this,t.call(this,a)};else if(r==="open")s=function(){let n=new xt("open");n[sr]=this,t.call(this,n)};else return;s[Pc]=!!e[Pc],s[Zm]=t,e.once?this.once(r,s):this.on(r,s)},removeEventListener(r,t){for(let e of this.listeners(r))if(e[Zm]===t&&!e[Pc]){this.removeListener(r,e);break}}};oy.exports={CloseEvent:Ps,ErrorEvent:rr,Event:xt,EventTarget:Pv,MessageEvent:Zr}});var Tc=S((tI,ly)=>{"use strict";d();var{tokenChars:ei}=Yr();function rt(r,t,e){r[t]===void 0?r[t]=[e]:r[t].push(e)}function Tv(r){let t=Object.create(null),e=Object.create(null),s=!1,i=!1,n=!1,a,o,c=-1,u=-1,l=-1,h=0;for(;h<r.length;h++)if(u=r.charCodeAt(h),a===void 0)if(l===-1&&ei[u]===1)c===-1&&(c=h);else if(h!==0&&(u===32||u===9))l===-1&&c!==-1&&(l=h);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${h}`);l===-1&&(l=h);let f=r.slice(c,l);u===44?(rt(t,f,e),e=Object.create(null)):a=f,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);else if(o===void 0)if(l===-1&&ei[u]===1)c===-1&&(c=h);else if(u===32||u===9)l===-1&&c!==-1&&(l=h);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${h}`);l===-1&&(l=h),rt(e,r.slice(c,l),!0),u===44&&(rt(t,a,e),e=Object.create(null),a=void 0),c=l=-1}else if(u===61&&c!==-1&&l===-1)o=r.slice(c,h),c=l=-1;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(i){if(ei[u]!==1)throw new SyntaxError(`Unexpected character at index ${h}`);c===-1?c=h:s||(s=!0),i=!1}else if(n)if(ei[u]===1)c===-1&&(c=h);else if(u===34&&c!==-1)n=!1,l=h;else if(u===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(u===34&&r.charCodeAt(h-1)===61)n=!0;else if(l===-1&&ei[u]===1)c===-1&&(c=h);else if(c!==-1&&(u===32||u===9))l===-1&&(l=h);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${h}`);l===-1&&(l=h);let f=r.slice(c,l);s&&(f=f.replace(/\\/g,""),s=!1),rt(e,o,f),u===44&&(rt(t,a,e),e=Object.create(null),a=void 0),o=void 0,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);if(c===-1||n||u===32||u===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=h);let p=r.slice(c,l);return a===void 0?rt(t,p,e):(o===void 0?rt(e,p,!0):s?rt(e,o,p.replace(/\\/g,"")):rt(e,o,p),rt(t,a,e)),t}function bv(r){return Object.keys(r).map(t=>{let e=r[t];return Array.isArray(e)||(e=[e]),e.map(s=>[t].concat(Object.keys(s).map(i=>{let n=s[i];return Array.isArray(n)||(n=[n]),n.map(a=>a===!0?i:`${i}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")}ly.exports={format:bv,parse:Tv}});var wc=S((rI,Ty)=>{"use strict";d();var Ev=require("events"),Sv=require("https"),vv=require("http"),py=require("net"),wv=require("tls"),{randomBytes:Av,createHash:Cv}=require("crypto"),{Readable:sI}=require("stream"),{URL:bc}=require("url"),Wt=Jr(),Iv=gc(),Nv=xc(),{BINARY_TYPES:uy,EMPTY_BUFFER:Fn,GUID:kv,kForOnEventAttribute:Ec,kListener:_v,kStatusCode:Ov,kWebSocket:Ee,NOOP:fy}=Ut(),{EventTarget:{addEventListener:Lv,removeEventListener:Dv}}=cy(),{format:Mv,parse:Fv}=Tc(),{toBuffer:Rv}=Hr(),Bv=30*1e3,dy=Symbol("kAborted"),Sc=[8,13],Pt=["CONNECTING","OPEN","CLOSING","CLOSED"],$v=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,R=class extends Ev{constructor(t,e,s){super(),this._binaryType=uy[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Fn,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=R.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,t!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,e===void 0?e=[]:Array.isArray(e)||(typeof e=="object"&&e!==null?(s=e,e=[]):e=[e]),my(this,t,e,s)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(t){!uy.includes(t)||(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,e,s){let i=new Iv({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation});this._sender=new Nv(t,this._extensions,s.generateMask),this._receiver=i,this._socket=t,i[Ee]=this,t[Ee]=this,i.on("conclude",qv),i.on("drain",Wv),i.on("error",Vv),i.on("message",zv),i.on("ping",Gv),i.on("pong",Hv),t.setTimeout(0),t.setNoDelay(),e.length>0&&t.unshift(e),t.on("close",gy),t.on("data",Bn),t.on("end",xy),t.on("error",Py),this._readyState=R.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Wt.extensionName]&&this._extensions[Wt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){let s="WebSocket was closed before the connection was established";return ze(this,this._req,s)}if(this.readyState===R.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=R.CLOSING,this._sender.close(t,e,!this._isServer,s=>{s||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Bv)}}pause(){this.readyState===R.CONNECTING||this.readyState===R.CLOSED||(this._paused=!0,this._socket.pause())}ping(t,e,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(s=t,t=e=void 0):typeof e=="function"&&(s=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==R.OPEN){vc(this,t,s);return}e===void 0&&(e=!this._isServer),this._sender.ping(t||Fn,e,s)}pong(t,e,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(s=t,t=e=void 0):typeof e=="function"&&(s=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==R.OPEN){vc(this,t,s);return}e===void 0&&(e=!this._isServer),this._sender.pong(t||Fn,e,s)}resume(){this.readyState===R.CONNECTING||this.readyState===R.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(t,e,s){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"&&(s=e,e={}),typeof t=="number"&&(t=t.toString()),this.readyState!==R.OPEN){vc(this,t,s);return}let i=_({binary:typeof t!="string",mask:!this._isServer,compress:!0,fin:!0},e);this._extensions[Wt.extensionName]||(i.compress=!1),this._sender.send(t||Fn,i,s)}terminate(){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){let t="WebSocket was closed before the connection was established";return ze(this,this._req,t)}this._socket&&(this._readyState=R.CLOSING,this._socket.destroy())}}};Object.defineProperty(R,"CONNECTING",{enumerable:!0,value:Pt.indexOf("CONNECTING")});Object.defineProperty(R.prototype,"CONNECTING",{enumerable:!0,value:Pt.indexOf("CONNECTING")});Object.defineProperty(R,"OPEN",{enumerable:!0,value:Pt.indexOf("OPEN")});Object.defineProperty(R.prototype,"OPEN",{enumerable:!0,value:Pt.indexOf("OPEN")});Object.defineProperty(R,"CLOSING",{enumerable:!0,value:Pt.indexOf("CLOSING")});Object.defineProperty(R.prototype,"CLOSING",{enumerable:!0,value:Pt.indexOf("CLOSING")});Object.defineProperty(R,"CLOSED",{enumerable:!0,value:Pt.indexOf("CLOSED")});Object.defineProperty(R.prototype,"CLOSED",{enumerable:!0,value:Pt.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(R.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(R.prototype,`on${r}`,{enumerable:!0,get(){for(let t of this.listeners(r))if(t[Ec])return t[_v];return null},set(t){for(let e of this.listeners(r))if(e[Ec]){this.removeListener(r,e);break}typeof t=="function"&&this.addEventListener(r,t,{[Ec]:!0})}})});R.prototype.addEventListener=Lv;R.prototype.removeEventListener=Dv;Ty.exports=R;function my(r,t,e,s){let i=Se(_({protocolVersion:Sc[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},s),{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(!Sc.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${Sc.join(", ")})`);let n;if(t instanceof bc)n=t,r._url=t.href;else{try{n=new bc(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}r._url=t}let a=n.protocol==="wss:",o=n.protocol==="ws+unix:",c;if(n.protocol!=="ws:"&&!a&&!o?c=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:o&&!n.pathname?c="The URL's pathname is empty":n.hash&&(c="The URL contains a fragment identifier"),c){let x=new SyntaxError(c);if(r._redirects===0)throw x;Rn(r,x);return}let u=a?443:80,l=Av(16).toString("base64"),h=a?Sv.request:vv.request,p=new Set,f;if(i.createConnection=a?Uv:jv,i.defaultPort=i.defaultPort||u,i.port=n.port||u,i.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,i.headers=_({"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.headers),i.path=n.pathname+n.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(f=new Wt(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=Mv({[Wt.extensionName]:f.offer()})),e.length){for(let x of e){if(typeof x!="string"||!$v.test(x)||p.has(x))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(x)}i.headers["Sec-WebSocket-Protocol"]=e.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(n.username||n.password)&&(i.auth=`${n.username}:${n.password}`),o){let x=i.path.split(":");i.socketPath=x[0],i.path=x[1]}let y;if(i.followRedirects){if(r._redirects===0){r._originalHost=n.host;let x=s&&s.headers;if(s=Se(_({},s),{headers:{}}),x)for(let[T,E]of Object.entries(x))s.headers[T.toLowerCase()]=E}else r.listenerCount("redirect")===0&&n.host!==r._originalHost&&(delete i.headers.authorization,delete i.headers.cookie,delete i.headers.host,i.auth=void 0);i.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),y=r._req=h(i),r._redirects&&r.emit("redirect",r.url,y)}else y=r._req=h(i);i.timeout&&y.on("timeout",()=>{ze(r,y,"Opening handshake has timed out")}),y.on("error",x=>{y===null||y[dy]||(y=r._req=null,Rn(r,x))}),y.on("response",x=>{let T=x.headers.location,E=x.statusCode;if(T&&i.followRedirects&&E>=300&&E<400){if(++r._redirects>i.maxRedirects){ze(r,y,"Maximum redirects exceeded");return}y.abort();let g;try{g=new bc(T,t)}catch{let w=new SyntaxError(`Invalid URL: ${T}`);Rn(r,w);return}my(r,g,e,s)}else r.emit("unexpected-response",y,x)||ze(r,y,`Unexpected server response: ${x.statusCode}`)}),y.on("upgrade",(x,T,E)=>{if(r.emit("upgrade",x),r.readyState!==R.CONNECTING)return;y=r._req=null;let g=Cv("sha1").update(l+kv).digest("base64");if(x.headers["sec-websocket-accept"]!==g){ze(r,T,"Invalid Sec-WebSocket-Accept header");return}let b=x.headers["sec-websocket-protocol"],w;if(b!==void 0?p.size?p.has(b)||(w="Server sent an invalid subprotocol"):w="Server sent a subprotocol but none was requested":p.size&&(w="Server sent no subprotocol"),w){ze(r,T,w);return}b&&(r._protocol=b);let C=x.headers["sec-websocket-extensions"];if(C!==void 0){if(!f){ze(r,T,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let z;try{z=Fv(C)}catch{ze(r,T,"Invalid Sec-WebSocket-Extensions header");return}let q=Object.keys(z);if(q.length!==1||q[0]!==Wt.extensionName){ze(r,T,"Server indicated an extension that was not requested");return}try{f.accept(z[Wt.extensionName])}catch{ze(r,T,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[Wt.extensionName]=f}r.setSocket(T,E,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),y.end()}function Rn(r,t){r._readyState=R.CLOSING,r.emit("error",t),r.emitClose()}function jv(r){return r.path=r.socketPath,py.connect(r)}function Uv(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=py.isIP(r.host)?"":r.host),wv.connect(r)}function ze(r,t,e){r._readyState=R.CLOSING;let s=new Error(e);Error.captureStackTrace(s,ze),t.setHeader?(t[dy]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(Rn,r,s)):(t.destroy(s),t.once("error",r.emit.bind(r,"error")),t.once("close",r.emitClose.bind(r)))}function vc(r,t,e){if(t){let s=Rv(t).length;r._socket?r._sender._bufferedBytes+=s:r._bufferedAmount+=s}if(e){let s=new Error(`WebSocket is not open: readyState ${r.readyState} (${Pt[r.readyState]})`);e(s)}}function qv(r,t){let e=this[Ee];e._closeFrameReceived=!0,e._closeMessage=t,e._closeCode=r,e._socket[Ee]!==void 0&&(e._socket.removeListener("data",Bn),process.nextTick(yy,e._socket),r===1005?e.close():e.close(r,t))}function Wv(){let r=this[Ee];r.isPaused||r._socket.resume()}function Vv(r){let t=this[Ee];t._socket[Ee]!==void 0&&(t._socket.removeListener("data",Bn),process.nextTick(yy,t._socket),t.close(r[Ov])),t.emit("error",r)}function hy(){this[Ee].emitClose()}function zv(r,t){this[Ee].emit("message",r,t)}function Gv(r){let t=this[Ee];t.pong(r,!t._isServer,fy),t.emit("ping",r)}function Hv(r){this[Ee].emit("pong",r)}function yy(r){r.resume()}function gy(){let r=this[Ee];this.removeListener("close",gy),this.removeListener("data",Bn),this.removeListener("end",xy),r._readyState=R.CLOSING;let t;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(t=r._socket.read())!==null&&r._receiver.write(t),r._receiver.end(),this[Ee]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",hy),r._receiver.on("finish",hy))}function Bn(r){this[Ee]._receiver.write(r)||this.pause()}function xy(){let r=this[Ee];r._readyState=R.CLOSING,r._receiver.end(),this.end()}function Py(){let r=this[Ee];this.removeListener("error",Py),this.on("error",fy),r&&(r._readyState=R.CLOSING,this.destroy())}});var Ey=S((iI,by)=>{"use strict";d();var{tokenChars:Kv}=Yr();function Xv(r){let t=new Set,e=-1,s=-1,i=0;for(i;i<r.length;i++){let a=r.charCodeAt(i);if(s===-1&&Kv[a]===1)e===-1&&(e=i);else if(i!==0&&(a===32||a===9))s===-1&&e!==-1&&(s=i);else if(a===44){if(e===-1)throw new SyntaxError(`Unexpected character at index ${i}`);s===-1&&(s=i);let o=r.slice(e,s);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);t.add(o),e=s=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(e===-1||s!==-1)throw new SyntaxError("Unexpected end of input");let n=r.slice(e,i);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);return t.add(n),t}by.exports={parse:Xv}});var Iy=S((cI,Cy)=>{"use strict";d();var Jv=require("events"),$n=require("http"),nI=require("https"),aI=require("net"),oI=require("tls"),{createHash:Yv}=require("crypto"),Sy=Tc(),Ts=Jr(),Qv=Ey(),Zv=wc(),{GUID:ew,kWebSocket:tw}=Ut(),sw=/^[+/0-9A-Za-z]{22}==$/,vy=0,wy=1,Ay=2,Ac=class extends Jv{constructor(t,e){if(super(),t=_({maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Zv},t),t.port==null&&!t.server&&!t.noServer||t.port!=null&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(t.port!=null?(this._server=$n.createServer((s,i)=>{let n=$n.STATUS_CODES[426];i.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),i.end(n)}),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server){let s=this.emit.bind(this,"connection");this._removeListeners=rw(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,n,a)=>{this.handleUpgrade(i,n,a,s)}})}t.perMessageDeflate===!0&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=vy}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(this._state===Ay){t&&this.once("close",()=>{t(new Error("The server is not running"))}),process.nextTick(ti,this);return}if(t&&this.once("close",t),this._state!==wy)if(this._state=wy,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(ti,this):process.nextTick(ti,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{ti(this)})}}shouldHandle(t){if(this.options.path){let e=t.url.indexOf("?");if((e!==-1?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,s,i){e.on("error",Cc);let n=t.headers["sec-websocket-key"]!==void 0?t.headers["sec-websocket-key"]:!1,a=+t.headers["sec-websocket-version"];if(t.method!=="GET"||t.headers.upgrade.toLowerCase()!=="websocket"||!n||!sw.test(n)||a!==8&&a!==13||!this.shouldHandle(t))return ir(e,400);let o=t.headers["sec-websocket-protocol"],c=new Set;if(o!==void 0)try{c=Qv.parse(o)}catch{return ir(e,400)}let u=t.headers["sec-websocket-extensions"],l={};if(this.options.perMessageDeflate&&u!==void 0){let h=new Ts(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let p=Sy.parse(u);p[Ts.extensionName]&&(h.accept(p[Ts.extensionName]),l[Ts.extensionName]=h)}catch{return ir(e,400)}}if(this.options.verifyClient){let h={origin:t.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(p,f,y,x)=>{if(!p)return ir(e,f||401,y,x);this.completeUpgrade(l,n,c,t,e,s,i)});return}if(!this.options.verifyClient(h))return ir(e,401)}this.completeUpgrade(l,n,c,t,e,s,i)}completeUpgrade(t,e,s,i,n,a,o){if(!n.readable||!n.writable)return n.destroy();if(n[tw])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>vy)return ir(n,503);let c=Yv("sha1").update(e+ew).digest("base64"),u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${c}`],l=new this.options.WebSocket(null);if(s.size){let h=this.options.handleProtocols?this.options.handleProtocols(s,i):s.values().next().value;h&&(u.push(`Sec-WebSocket-Protocol: ${h}`),l._protocol=h)}if(t[Ts.extensionName]){let h=t[Ts.extensionName].params,p=Sy.format({[Ts.extensionName]:[h]});u.push(`Sec-WebSocket-Extensions: ${p}`),l._extensions=t}this.emit("headers",u,i),n.write(u.concat(`\r
`).join(`\r
`)),n.removeListener("error",Cc),l.setSocket(n,a,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(ti,this)})),o(l,i)}};Cy.exports=Ac;function rw(r,t){for(let e of Object.keys(t))r.on(e,t[e]);return function(){for(let s of Object.keys(t))r.removeListener(s,t[s])}}function ti(r){r._state=Ay,r.emit("close")}function Cc(){this.destroy()}function ir(r,t,e,s){r.writable&&(e=e||$n.STATUS_CODES[t],s=_({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(e)},s),r.write(`HTTP/1.1 ${t} ${$n.STATUS_CODES[t]}\r
`+Object.keys(s).map(i=>`${i}: ${s[i]}`).join(`\r
`)+`\r
\r
`+e)),r.removeListener("error",Cc),r.destroy()}});var l1={};yg(l1,{activate:()=>s1,deactivate:()=>c1});module.exports=gg(l1);d();var ne=ie(require("vscode"));d();d();function ra(r,t){let e=Object.create(null),s=r.split(",");for(let i=0;i<s.length;i++)e[s[i]]=!0;return t?i=>!!e[i.toLowerCase()]:i=>!!e[i]}var xg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";var p1=ra(xg+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");var f1=process.env.NODE_ENV!=="production"?Object.freeze({}):{},d1=process.env.NODE_ENV!=="production"?Object.freeze([]):[],sl=()=>{};var oi=Object.assign;var Pg=Object.prototype.hasOwnProperty,or=(r,t)=>Pg.call(r,t),at=Array.isArray,Ss=r=>il(r)==="[object Map]";var rl=r=>typeof r=="function",Tg=r=>typeof r=="string",ci=r=>typeof r=="symbol",cr=r=>r!==null&&typeof r=="object";var bg=Object.prototype.toString,il=r=>bg.call(r),ia=r=>il(r).slice(8,-1);var li=r=>Tg(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r;var ui=r=>{let t=Object.create(null);return e=>t[e]||(t[e]=r(e))},Eg=/-(\w)/g,m1=ui(r=>r.replace(Eg,(t,e)=>e?e.toUpperCase():"")),Sg=/\B([A-Z])/g,y1=ui(r=>r.replace(Sg,"-$1").toLowerCase()),na=ui(r=>r.charAt(0).toUpperCase()+r.slice(1)),g1=ui(r=>r?`on${na(r)}`:""),hi=(r,t)=>!Object.is(r,t);function nl(r,...t){console.warn(`[Vue warn] ${r}`,...t)}var vg;function pl(r,t=vg){t&&t.active&&t.effects.push(r)}var ur=r=>{let t=new Set(r);return t.w=0,t.n=0,t},fl=r=>(r.w&vt)>0,dl=r=>(r.n&vt)>0,wg=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=vt},Ag=r=>{let{deps:t}=r;if(t.length){let e=0;for(let s=0;s<t.length;s++){let i=t[s];fl(i)&&!dl(i)?i.delete(r):t[e++]=i,i.w&=~vt,i.n&=~vt}t.length=e}},aa=new WeakMap,lr=0,vt=1,oa=30,ve,zt=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),ca=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":""),gi=class{constructor(t,e=null,s){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,pl(this,s)}run(){if(!this.active)return this.fn();let t=ve,e=St;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ve,ve=this,St=!0,vt=1<<++lr,lr<=oa?wg(this):al(this),this.fn()}finally{lr<=oa&&Ag(this),vt=1<<--lr,ve=this.parent,St=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ve===this?this.deferStop=!0:this.active&&(al(this),this.onStop&&this.onStop(),this.active=!1)}};function al(r){let{deps:t}=r;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(r);t.length=0}}function At(r,t){r.effect&&(r=r.effect.fn);let e=new gi(r);t&&(oi(e,t),t.scope&&pl(e,t.scope)),(!t||!t.lazy)&&e.run();let s=e.run.bind(e);return s.effect=e,s}var St=!0,ml=[];function Cg(){ml.push(St),St=!1}function Ig(){let r=ml.pop();St=r===void 0?!0:r}function Ge(r,t,e){if(St&&ve){let s=aa.get(r);s||aa.set(r,s=new Map);let i=s.get(e);i||s.set(e,i=ur());let n=process.env.NODE_ENV!=="production"?{effect:ve,target:r,type:t,key:e}:void 0;la(i,n)}}function la(r,t){let e=!1;lr<=oa?dl(r)||(r.n|=vt,e=!fl(r)):e=!r.has(ve),e&&(r.add(ve),ve.deps.push(r),process.env.NODE_ENV!=="production"&&ve.onTrack&&ve.onTrack(Object.assign({effect:ve},t)))}function wt(r,t,e,s,i,n){let a=aa.get(r);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(e==="length"&&at(r))a.forEach((u,l)=>{(l==="length"||l>=s)&&o.push(u)});else switch(e!==void 0&&o.push(a.get(e)),t){case"add":at(r)?li(e)&&o.push(a.get("length")):(o.push(a.get(zt)),Ss(r)&&o.push(a.get(ca)));break;case"delete":at(r)||(o.push(a.get(zt)),Ss(r)&&o.push(a.get(ca)));break;case"set":Ss(r)&&o.push(a.get(zt));break}let c=process.env.NODE_ENV!=="production"?{target:r,type:t,key:e,newValue:s,oldValue:i,oldTarget:n}:void 0;if(o.length===1)o[0]&&(process.env.NODE_ENV!=="production"?vs(o[0],c):vs(o[0]));else{let u=[];for(let l of o)l&&u.push(...l);process.env.NODE_ENV!=="production"?vs(ur(u),c):vs(ur(u))}}function vs(r,t){for(let e of at(r)?r:[...r])(e!==ve||e.allowRecurse)&&(process.env.NODE_ENV!=="production"&&e.onTrigger&&e.onTrigger(oi({effect:e},t)),e.scheduler?e.scheduler():e.run())}var Ng=ra("__proto__,__v_isRef,__isVue"),yl=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(ci)),kg=fa(),_g=fa(!1,!0),Og=fa(!0);var ol=Lg();function Lg(){let r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...e){let s=Y(this);for(let n=0,a=this.length;n<a;n++)Ge(s,"get",n+"");let i=s[t](...e);return i===-1||i===!1?s[t](...e.map(Y)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...e){Cg();let s=Y(this)[t].apply(this,e);return Ig(),s}}),r}function fa(r=!1,t=!1){return function(s,i,n){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&n===(r?t?Xg:El:t?bl:Tl).get(s))return s;let a=at(s);if(!r&&a&&or(ol,i))return Reflect.get(ol,i,n);let o=Reflect.get(s,i,n);return(ci(i)?yl.has(i):Ng(i))||(r||Ge(s,"get",i),t)?o:ws(o)?!a||!li(i)?o.value:o:cr(o)?r?Sl(o):As(o):o}}var Dg=gl(),Mg=gl(!0);function gl(r=!1){return function(e,s,i,n){let a=e[s];if(ua(a)&&ws(a)&&!ws(i))return!1;if(!r&&!ua(i)&&(Qg(i)||(i=Y(i),a=Y(a)),!at(e)&&ws(a)&&!ws(i)))return a.value=i,!0;let o=at(e)&&li(s)?Number(s)<e.length:or(e,s),c=Reflect.set(e,s,i,n);return e===Y(n)&&(o?hi(i,a)&&wt(e,"set",s,i,a):wt(e,"add",s,i)),c}}function Fg(r,t){let e=or(r,t),s=r[t],i=Reflect.deleteProperty(r,t);return i&&e&&wt(r,"delete",t,void 0,s),i}function Rg(r,t){let e=Reflect.has(r,t);return(!ci(t)||!yl.has(t))&&Ge(r,"has",t),e}function Bg(r){return Ge(r,"iterate",at(r)?"length":zt),Reflect.ownKeys(r)}var xl={get:kg,set:Dg,deleteProperty:Fg,has:Rg,ownKeys:Bg},$g={get:Og,set(r,t){return process.env.NODE_ENV!=="production"&&nl(`Set operation on key "${String(t)}" failed: target is readonly.`,r),!0},deleteProperty(r,t){return process.env.NODE_ENV!=="production"&&nl(`Delete operation on key "${String(t)}" failed: target is readonly.`,r),!0}},jg=oi({},xl,{get:_g,set:Mg});var da=r=>r,xi=r=>Reflect.getPrototypeOf(r);function pi(r,t,e=!1,s=!1){r=r.__v_raw;let i=Y(r),n=Y(t);t!==n&&!e&&Ge(i,"get",t),!e&&Ge(i,"get",n);let{has:a}=xi(i),o=s?da:e?xa:hr;if(a.call(i,t))return o(r.get(t));if(a.call(i,n))return o(r.get(n));r!==i&&r.get(t)}function fi(r,t=!1){let e=this.__v_raw,s=Y(e),i=Y(r);return r!==i&&!t&&Ge(s,"has",r),!t&&Ge(s,"has",i),r===i?e.has(r):e.has(r)||e.has(i)}function di(r,t=!1){return r=r.__v_raw,!t&&Ge(Y(r),"iterate",zt),Reflect.get(r,"size",r)}function cl(r){r=Y(r);let t=Y(this);return xi(t).has.call(t,r)||(t.add(r),wt(t,"add",r,r)),this}function ll(r,t){t=Y(t);let e=Y(this),{has:s,get:i}=xi(e),n=s.call(e,r);n?process.env.NODE_ENV!=="production"&&Pl(e,s,r):(r=Y(r),n=s.call(e,r));let a=i.call(e,r);return e.set(r,t),n?hi(t,a)&&wt(e,"set",r,t,a):wt(e,"add",r,t),this}function ul(r){let t=Y(this),{has:e,get:s}=xi(t),i=e.call(t,r);i?process.env.NODE_ENV!=="production"&&Pl(t,e,r):(r=Y(r),i=e.call(t,r));let n=s?s.call(t,r):void 0,a=t.delete(r);return i&&wt(t,"delete",r,void 0,n),a}function hl(){let r=Y(this),t=r.size!==0,e=process.env.NODE_ENV!=="production"?Ss(r)?new Map(r):new Set(r):void 0,s=r.clear();return t&&wt(r,"clear",void 0,void 0,e),s}function mi(r,t){return function(s,i){let n=this,a=n.__v_raw,o=Y(a),c=t?da:r?xa:hr;return!r&&Ge(o,"iterate",zt),a.forEach((u,l)=>s.call(i,c(u),c(l),n))}}function yi(r,t,e){return function(...s){let i=this.__v_raw,n=Y(i),a=Ss(n),o=r==="entries"||r===Symbol.iterator&&a,c=r==="keys"&&a,u=i[r](...s),l=e?da:t?xa:hr;return!t&&Ge(n,"iterate",c?ca:zt),{next(){let{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:o?[l(h[0]),l(h[1])]:l(h),done:p}},[Symbol.iterator](){return this}}}}function Et(r){return function(...t){if(process.env.NODE_ENV!=="production"){let e=t[0]?`on key "${t[0]}" `:"";console.warn(`${na(r)} operation ${e}failed: target is readonly.`,Y(this))}return r==="delete"?!1:this}}function Ug(){let r={get(n){return pi(this,n)},get size(){return di(this)},has:fi,add:cl,set:ll,delete:ul,clear:hl,forEach:mi(!1,!1)},t={get(n){return pi(this,n,!1,!0)},get size(){return di(this)},has:fi,add:cl,set:ll,delete:ul,clear:hl,forEach:mi(!1,!0)},e={get(n){return pi(this,n,!0)},get size(){return di(this,!0)},has(n){return fi.call(this,n,!0)},add:Et("add"),set:Et("set"),delete:Et("delete"),clear:Et("clear"),forEach:mi(!0,!1)},s={get(n){return pi(this,n,!0,!0)},get size(){return di(this,!0)},has(n){return fi.call(this,n,!0)},add:Et("add"),set:Et("set"),delete:Et("delete"),clear:Et("clear"),forEach:mi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=yi(n,!1,!1),e[n]=yi(n,!0,!1),t[n]=yi(n,!1,!0),s[n]=yi(n,!0,!0)}),[r,e,t,s]}var[qg,Wg,Vg,zg]=Ug();function ma(r,t){let e=t?r?zg:Vg:r?Wg:qg;return(s,i,n)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?s:Reflect.get(or(e,i)&&i in s?e:s,i,n)}var Gg={get:ma(!1,!1)},Hg={get:ma(!1,!0)},Kg={get:ma(!0,!1)};function Pl(r,t,e){let s=Y(e);if(s!==e&&t.call(r,s)){let i=ia(r);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Tl=new WeakMap,bl=new WeakMap,El=new WeakMap,Xg=new WeakMap;function Jg(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yg(r){return r.__v_skip||!Object.isExtensible(r)?0:Jg(ia(r))}function As(r){return ua(r)?r:ga(r,!1,xl,Gg,Tl)}function ya(r){return ga(r,!1,jg,Hg,bl)}function Sl(r){return ga(r,!0,$g,Kg,El)}function ga(r,t,e,s,i){if(!cr(r))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(r)}`),r;if(r.__v_raw&&!(t&&r.__v_isReactive))return r;let n=i.get(r);if(n)return n;let a=Yg(r);if(a===0)return r;let o=new Proxy(r,a===2?s:e);return i.set(r,o),o}function ua(r){return!!(r&&r.__v_isReadonly)}function Qg(r){return!!(r&&r.__v_isShallow)}function Y(r){let t=r&&r.__v_raw;return t?Y(t):r}var hr=r=>cr(r)?As(r):r,xa=r=>cr(r)?Sl(r):r;function vl(r){St&&ve&&(r=Y(r),process.env.NODE_ENV!=="production"?la(r.dep||(r.dep=ur()),{target:r,type:"get",key:"value"}):la(r.dep||(r.dep=ur())))}function wl(r,t){r=Y(r),r.dep&&(process.env.NODE_ENV!=="production"?vs(r.dep,{target:r,type:"set",key:"value",newValue:t}):vs(r.dep))}function ws(r){return!!(r&&r.__v_isRef===!0)}function Cs(r){return Cl(r,!1)}function Al(r){return Cl(r,!0)}function Cl(r,t){return ws(r)?r:new ha(r,t)}var ha=class{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Y(t),this._value=e?t:hr(t)}get value(){return vl(this),this._value}set value(t){t=this.__v_isShallow?t:Y(t),hi(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:hr(t),wl(this,t))}};var pa=class{constructor(t,e,s,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new gi(t,()=>{this._dirty||(this._dirty=!0,wl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){let t=Y(this);return vl(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}};function Il(r,t,e=!1){let s,i,n=rl(r);n?(s=r,i=process.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:sl):(s=r.get,i=r.set);let a=new pa(s,i,n||!i,e);return process.env.NODE_ENV!=="production"&&t&&!e&&(a.effect.onTrack=t.onTrack,a.effect.onTrigger=t.onTrigger),a}var Zg;Zg="__v_isReadonly";d();d();var lt=ie(require("vscode")),Gf=ie(vh());d();var aP=["**/*.{test,spec}.{js,mjs,cjs,ts,mts,cts,jsx,tsx}"],oP=["**/node_modules/**","**/dist/**","**/cypress/**","**/.{idea,git,cache,output,temp}/**"],cP=["coverage/**","packages/*/test{,s}/**","**/*.d.ts","cypress/**","test{,s}/**","test{,-*}.{js,cjs,mjs,ts,tsx,jsx}","**/*{.,-}test.{js,cjs,mjs,ts,tsx,jsx}","**/__tests__/**","**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc}.config.{js,cjs,mjs,ts}","**/.{eslint,mocha,prettier}rc.{js,cjs,yml}"],lP={enabled:!1,clean:!0,cleanOnRerun:!1,reportsDirectory:"./coverage",excludeNodeModules:!0,exclude:cP,reporter:["text","html"],allowExternal:!1,extension:[".js",".cjs",".mjs",".ts",".tsx",".jsx",".vue",".svelte"]},uP={loopLimit:1e4,shouldClearNativeTimers:!0,toFake:["setTimeout","clearTimeout","setInterval","clearInterval","setImmediate","clearImmediate","Date"]},hP={allowOnly:!process.env.CI,watch:!process.env.CI,globals:!1,environment:"node",threads:!0,clearMocks:!1,restoreMocks:!1,mockReset:!1,include:aP,exclude:oP,testTimeout:5e3,hookTimeout:1e4,isolate:!0,watchIgnore:[/\/node_modules\//,/\/dist\//],update:!1,reporters:[],silent:!1,api:!1,ui:!1,uiBase:"/__vitest__/",open:!0,coverage:lP,fakeTimers:uP},La=Object.freeze(hP);d();var Re=require("fs"),Bs=ie(Ja());d();var Qi=require("child_process"),Fe=ie(require("path")),Yi=ie(Qa()),is=ie(Ja());d();var Rf=require("vscode"),Ff=Rf.window.createOutputChannel("Vitest"),L={info:(...r)=>{console.log(...r);let t=new Date().toLocaleTimeString();Ff.appendLine(`[INFO ${t}] ${r.join(" ")}`)},error:(...r)=>{console.error(...r);let t=new Date().toLocaleTimeString();for(let e=0;e<r.length;e++)if(r[e]instanceof Error){let s=r[e];r[e]=`[Error ${s.name}] ${s.message}
${s.stack}`}Ff.appendLine(`[Error ${t}] ${r.join(" ")}`)},workspaceInfo:(r,...t)=>{L.info(`[Workspace ${r}]`,...t)},workspaceError:(r,...t)=>{L.error(`[Workspace ${r}]`,...t)}};d();var Ki="en",Ji=!1,to=!1,Xi=!1,Ob=!1,Lb=!1,Db=!1,Mb=!1,Fb=!1,Hi,Za=Ki,Rb,ts,ss=typeof self=="object"?self:typeof global=="object"?global:{},de;typeof ss.vscode<"u"&&typeof ss.vscode.process<"u"?de=ss.vscode.process:typeof process<"u"&&(de=process);var Bf,$f=typeof((Bf=de==null?void 0:de.versions)==null?void 0:Bf.electron)=="string",jf=$f&&(de==null?void 0:de.type)==="renderer",ZA=jf&&(de==null?void 0:de.sandboxed);if(typeof navigator=="object"&&!jf)ts=navigator.userAgent,Ji=ts.includes("Windows"),to=ts.includes("Macintosh"),Fb=(ts.includes("Macintosh")||ts.includes("iPad")||ts.includes("iPhone"))&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Xi=ts.includes("Linux"),Db=!0,Hi=navigator.language,Za=Hi;else if(typeof de=="object"){Ji=de.platform==="win32",to=de.platform==="darwin",Xi=de.platform==="linux",Ob=Xi&&!!de.env.SNAP&&!!de.env.SNAP_REVISION,Mb=$f,Hi=Ki,Za=Ki;let r=de.env.VSCODE_NLS_CONFIG;if(r)try{let t=JSON.parse(r),e=t.availableLanguages["*"];Hi=t.locale,Za=e||Ki,Rb=t._translationsConfigFile}catch{}Lb=!0}else console.error("Unable to resolve platform.");var eo=0;to?eo=1:Ji?eo=3:Xi&&(eo=2);var rs=Ji;var eC=(()=>{if(typeof ss.postMessage=="function"&&!ss.importScripts){let r=[];ss.addEventListener("message",e=>{if(e.data&&e.data.vscodeScheduleAsyncWork)for(let s=0,i=r.length;s<i;s++){let n=r[s];if(n.id===e.data.vscodeScheduleAsyncWork){r.splice(s,1),n.callback();return}}});let t=0;return e=>{let s=++t;r.push({id:s,callback:e}),ss.postMessage({vscodeScheduleAsyncWork:s},"*")}}return r=>setTimeout(r)})();function _r(r){let t=Fe.resolve(r,"node_modules");if(!(0,is.existsSync)(t))return;if((0,is.existsSync)(Fe.resolve(t,"vitest","vitest.mjs")))return Je(Fe.resolve(t,"vitest","vitest.mjs"),!1);let e=[".js","",".cmd"];for(let s of e)if((0,is.existsSync)(Fe.resolve(t,".bin",`vitest${s}`)))return Je(Fe.resolve(t,".bin",`vitest${s}`),!1)}function Dt(r){if(!r||r.length<5)return;let t=Fe.resolve(r,"node_modules");try{if(!(0,is.existsSync)(t))return Dt(Fe.dirname(r));let e=[""];rs&&e.unshift(".cmd",".CMD");for(let s of e)if((0,is.existsSync)(Fe.resolve(t,".bin",`vitest${s}`)))return{cmd:Fe.resolve(t,".bin",`vitest${s}`),args:[]};return(0,is.existsSync)(Fe.resolve(t,"vitest","vitest.mjs"))?{cmd:"node",args:[Je(Fe.resolve(t,"vitest","vitest.mjs"),!1)]}:Dt(Fe.dirname(r))}catch(e){console.error(e)}}var Uf=async(r,t,e)=>{L.info(`Trying to get vitest version from ${r} ${t.join(" ")}...`);let s=(0,Qi.spawn)(r,t,{stdio:["ignore","pipe","pipe"],shell:rs,env:e});s.on("error",()=>{L.info("Command not found")});for await(let i of(0,Yi.chunksToLinesAsync)(s.stdout)){s.kill(),L.info(i);let n=i.match(/vitest\/(\d+.\d+.\d+)/);if(n&&n.length>0)return n[1]}},qf=async(r,t,e)=>{let s=await Uf(r,t,e);if(s!==void 0)return s;let i=await Uf(process.execPath,[r,...t],e);if(i!==void 0)return i;throw new Error("Cannot get vitest version. Please open an issue at https://github.com/vitest-dev/vscode/issues and join the logs above.")};async function Wf(r,t){let e=_(_({},process.env),t);return r==null?await qf("npx",["vitest","-v"],e):await qf(r.cmd,[...r.args,"-v"],e)}function Vf(r){let t=(0,Qi.spawn)("node",{env:_(_({},process.env),r)});return new Promise(e=>{t.on("error",()=>e(!1)),setTimeout(()=>{e(!0),t.kill()},1e3)})}var Bb=r=>r.match(/^[a-zA-Z]:/)?r.charAt(0).toUpperCase()+r.slice(1):r,$b=r=>r.replace(/\\/g,"/");function Je(r){return rs?$b(Bb(r)):r}function ns(r){return r.replace(/\u001B\[\d+m/g,"")}function Rs(r,t,e={},s,i){let n=(0,Qi.spawn)(r,t,_({stdio:["ignore","pipe","pipe"],shell:rs,detached:process.platform!=="win32"},e)),a=Promise.allSettled([(async()=>{for await(let o of(0,Yi.chunksToLinesAsync)(n.stdout))s&&s(o)})(),(async()=>{for await(let o of(0,Yi.chunksToLinesAsync)(n.stderr))i&&i(o)})()]);return{child:n,promise:a}}var Ne=require("path");async function Zi(r){if(typeof r!="string")return Zi(r.uri.fsPath);if(_r(r))return!0;if(!(0,Re.existsSync)(Ne.join(r,"package.json")))return!1;let t=Ne.join(r,"package.json"),e=JSON.parse(await(0,Bs.readFile)(t,"utf-8"));if((0,Re.existsSync)(e)&&(e.devDependencies&&e.devDependencies.vitest||e.dependencies&&e.dependencies.vitest)||(0,Re.existsSync)(Ne.join(r,"vitest.config.js"))||(0,Re.existsSync)(Ne.join(r,"vitest.config.ts")))return!0;if((0,Re.existsSync)(Ne.join(r,"packages"))){let s=await(0,Bs.readdir)(Ne.join(r,"packages"));for(let i of s)if(await Zi(i))return!0}return!1}async function en(r){if(typeof r!="string")return en(r.uri.fsPath);if(_r(r))return!0;if(!(0,Re.existsSync)(Ne.join(r,"package.json")))return!1;let t=Ne.join(r,"package.json");if((0,Re.existsSync)(t)){let e=JSON.parse(await(0,Bs.readFile)(t,"utf-8"));if(e.devDependencies&&e.devDependencies.vitest||e.dependencies&&e.dependencies.vitest)return!0;if(e.devDependencies&&e.devDependencies.jest)return!1}if((0,Re.existsSync)(Ne.join(r,"vite.config.js"))||(0,Re.existsSync)(Ne.join(r,"vite.config.ts"))||(0,Re.existsSync)(Ne.join(r,"vitest.config.js"))||(0,Re.existsSync)(Ne.join(r,"vitest.config.ts")))return!0;if((0,Re.existsSync)(Ne.join(r,"jest.config.js")))return!1;if((0,Re.existsSync)(Ne.join(r,"packages"))){let e=await(0,Bs.readdir)(Ne.join(r,"packages"));for(let s of e)if(await en(s))return!0}return!1}var Hf="zxch3n.vitest-explorer";function jb(r,t,e,s){var i,n;return(n=(i=t.get(e))!=null?i:r.get(e))!=null?n:s}function Te(r){let t;typeof r=="string"?t=lt.Uri.from({scheme:"file",path:r}):t=r;let e=lt.workspace.getConfiguration("vitest",t),s=lt.workspace.getConfiguration("vitest"),i=(n,a)=>jb(s,e,n,a);return{env:i("nodeEnv",null),commandLine:i("commandLine",void 0),include:i("include"),exclude:i("exclude"),enable:i("enable",!1),debugExclude:i("debugExclude",[])}}function as(r,t){var s,i;let e=Te(t);return{exclude:((s=e.exclude)==null?void 0:s.concat(r.exclude))||La.exclude,include:((i=e.include)==null?void 0:i.concat(r.include))||La.include}}function $s(){let r=lt.workspace.getConfiguration("vitest");return{showFailMessages:r.get("showFailMessages",!1),changeBackgroundColor:r.get("changeBackgroundColor",!0),disabledWorkspaceFolders:r.get("disabledWorkspaceFolders",[])}}var os=[];async function Kf(){let r=os;if(r.splice(0,r.length),!(lt.workspace.workspaceFolders==null||lt.workspace.workspaceFolders.length===0))for(let t of lt.workspace.workspaceFolders)(await en(t)||Te(t).enable)&&!$s().disabledWorkspaceFolders.includes(t.name)&&r.push(t)}async function Xf(){return await Promise.all(os.map(async r=>{let t=Dt(r.uri.fsPath),e=Te(r).enable||await Zi(r)||!!t,s=t==null?void 0:await Wf(t,Te(r).env||void 0).catch(async a=>{L.info(a.toString()),L.info(`process.env.PATH = ${process.env.PATH}`),L.info(`vitest.nodeEnv = ${JSON.stringify(Te(r).env)}`);let o=a.toString();Vf(Te(r).env||void 0)||(L.info("Cannot spawn node process"),o+='Cannot spawn node process. Please try setting vitest.nodeEnv as {"PATH": "/path/to/node"} in your settings.'),L.error(o)}),i=$s().disabledWorkspaceFolders;return t?{workspace:r,version:s,isUsingVitestForSure:e,cmd:t.cmd,args:t.args,isCompatible:zf({version:s,workspace:r}),isDisabled:i.includes(r.name)}:{version:s,workspace:r,isUsingVitestForSure:e,cmd:"npx",args:["vitest"],isCompatible:zf({version:s,workspace:r}),isDisabled:i.includes(r.name)}}))}function zf(r){return!!(r.version&&Gf.default.gte(r.version,"0.12.0")||Te(r.workspace).commandLine)}d();var jt=ie(require("path")),ue=ie(require("vscode")),oc=ie(oo());d();d();var am=require("fs"),om=ie(nm());d();var Sn=class{constructor(t,e,s,i){this.start={column:e,line:t},this.end={column:i,line:s}}},ds={describe:"describe",expect:"expect",it:"it",root:"root"},Gr=class{constructor(t,e){this.type=t,this.file=e}addChild(t){let e;switch(t){case ds.describe:e=new An(this.file);break;case ds.it:e=new wn(this.file);break;case ds.expect:e=new vn(this.file);break;default:throw new TypeError(`unexpected child node type: ${t}`)}return this.children?this.children.push(e):this.children=[e],e}filter(t,e=!1){let s=[],i=(n,a)=>{a&&t(n)&&s.push(n),n.children&&n.children.forEach(o=>i(o,!0))};return i(this,e),s}},vn=class extends Gr{constructor(t){super(ds.expect,t)}},ms=class extends Gr{constructor(e,s,i){super(e,s);i&&(this.name=i)}},wn=class extends ms{constructor(t,e){super(ds.it,t,e)}},An=class extends ms{constructor(t,e){super(ds.describe,t,e)}},Cn=class{constructor(t){this.file=t,this.root=new Gr(ds.root,t),this.describeBlocks=[],this.expects=[],this.itBlocks=[]}addNode(t,e=!1){if(t instanceof An)this.describeBlocks.push(t);else if(t instanceof wn)this.itBlocks.push(t);else if(t instanceof vn){if(e&&this.expects.some(s=>{var i,n,a,o;return((i=s.start)==null?void 0:i.line)===((n=t.start)==null?void 0:n.line)&&((a=s.start)==null?void 0:a.column)===((o=t.start)==null?void 0:o.column)}))return;this.expects.push(t)}else throw new TypeError(`unexpected node class '${typeof t}': ${JSON.stringify(t)}`)}};d();var sc=["asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","estree","exportDefaultFrom","exportNamespaceFrom","functionBind","functionSent","importMeta","logicalAssignment","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","partialApplication","throwExpressions","topLevelAwait",["pipelineOperator",{proposal:"smart"}]],VS=[...sc,["decorators",{decoratorsBeforeExport:!0}],"flow","jsx"],zS=[...sc,"decorators-legacy","typescript"],GS=[...sc,"decorators-legacy","typescript","jsx"],rc=(r,t=!1)=>{if(r.match(/\.ts$/i))return{plugins:[...zS]};if(r.match(/\.tsx$/i))return{plugins:[...GS]};if(!t||r.match(/\.m?jsx?$/i))return{plugins:[...VS]};throw new TypeError(`unable to find parser options for unrecognized file extension: ${r}`)};var HS=(r,t,e)=>{let s=t||(0,am.readFileSync)(r).toString(),i=Se(_({},e),{sourceType:"module"});return[om.parse(s,i),s]};var cm=(r,t,e)=>{let s=new Cn(r),[i,n]=HS(r,t,e),a=(g,...b)=>b.reduce((w,C)=>{for(;w[C];)w=w[C];return w},g),o=(g,b,w)=>{let C=b.expression.arguments[0],z=C.value;if(!z)switch(C.type){case"TemplateLiteral":z=n.substring(C.start+1,C.end-1);break;default:z=n.substring(C.start,C.end);break}g.name=z,g.nameType=C.type,g.lastProperty=w,g.nameRange=new Sn(C.loc.start.line,C.loc.start.column+2,C.loc.end.line,C.loc.end.column-1)},c=(g,b,w)=>{g.start=b.loc.start,g.end=b.loc.end,g.start.column+=1,s.addNode(g),g instanceof ms&&o(g,b,w)},u=g=>g&&g.type==="ExpressionStatement"&&g.expression&&g.expression.type==="CallExpression",l=g=>g==="ArrowFunctionExpression"||g==="FunctionExpression",h=g=>{var b,w;if(u(g)&&g.expression.callee){let C=a(g.expression,"callee"),z=((b=C.property)==null?void 0:b.name)||((w=a(C,"tag").property)==null?void 0:w.name);return[C.name||a(C,"object").name||a(C,"tag","object").name||a(C,"object","callee","object").name,z]}return[]},p=g=>g==="it"||g==="fit"||g==="test",f=g=>g==="describe",y=g=>{if(!u(g))return!1;let b="",w=g&&g.expression?g.expression.callee:void 0;for(;!b&&w;)b=w.name,w=w.object||w.callee;return b==="expect"},x=(g,b,w,C)=>{let z=b.addChild(g);return c(z,w,C),z instanceof ms&&z.name==null&&console.warn(`block is missing name: ${JSON.stringify(w)}`),z},T=(g,b)=>{let w;!g.body||!Array.isArray(g.body)||g.body.forEach(C=>{var K;w=void 0;let[z,q]=h(C);f(z)?w=x("describe",b,C,q):p(z)?w=x("it",b,C,q):y(C)?w=x("expect",b,C):C&&C.type==="VariableDeclaration"?C.declarations.filter(v=>v.init&&l(v.init.type)).forEach(v=>T(v.init.body,b)):C&&C.type==="ExpressionStatement"&&C.expression&&C.expression.type==="AssignmentExpression"&&C.expression.right&&l(C.expression.right.type)?T(C.expression.right.body,b):C.type==="ReturnStatement"&&((K=C.argument)==null?void 0:K.arguments)&&C.argument.arguments.filter(v=>l(v.type)).forEach(v=>T(v.body,b)),u(C)&&C.expression.arguments.filter(v=>l(v.type)).forEach(v=>T(v.body,w||b))})},{program:E}=i;return T(E,s.root),s};function ic(r,t,e=!1){return cm(r,t,rc(r,e))}d();d();var lm=require("util"),um=require("vscode"),nc=ie(oo());var KS=new lm.TextDecoder("utf-8"),hm=async r=>{try{let t=await um.workspace.fs.readFile(r);return KS.decode(t)}catch(t){return console.warn(`Error providing tests for ${r.fsPath}`,t),""}};function pm(r,t){let{include:e,exclude:s}=as(t);return e.some(i=>(0,nc.default)(r,i))&&s.every(i=>!(0,nc.default)(r,i,{dot:!0}))}var Ue=new WeakMap,Zs=new WeakMap;function In(r,t=[]){return r.children.size?r.children.forEach(e=>{In(e,t)}):Ue.get(r)instanceof gs&&t.push(r),t}var ys=class{constructor(t,e,s,i){this.pattern=t;this.fileItem=e;this.item=s;this.parent=i;this.children=[]}getFullPattern(){return fm(this)}getFilePath(){return this.fileItem.uri.fsPath}},gs=class{constructor(t,e,s,i,n){this.pattern=t;this.fileItem=e;this.item=s;this.parent=i;this.index=n}getFullPattern(){return fm(this)}getFilePath(){return this.fileItem.uri.fsPath}},yt=class{constructor(t){this.item=t;this.resolved=!1;this.pattern="";this.children=[]}async updateFromDisk(t){let e=this.item;try{let s=await hm(e.uri);this.item.error=void 0,ac(t,s,e,this),this.resolved=!0}catch(s){this.item.error=s.stack}}load(t){if(!this.resolved)return this.updateFromDisk(t)}getFullPattern(){return""}getFilePath(){return this.item.uri.fsPath}};function fm(r){let t=[],e=r.parent;for(;e&&e instanceof ys;)t.push(e),e=e.parent;return t.reverse(),t.length?t.reduce((s,i)=>`${s+i.pattern} `,"")+r.pattern:r.pattern}var Nn=class extends ue.Disposable{constructor(e){var s;super(()=>{for(let i of this.lastWatches)i.dispose();this.lastWatches=[],this.workspaceItems.clear(),this.pathToFileItem.clear(),this.workspaceCommonPrefix.clear()});this.lastWatches=[];this.workspacePaths=[];this.workspaceCommonPrefix=new Map;this.workspaceItems=new Map;this.pathToFileItem=new Map;this.config=e,this.workspacePaths=((s=ue.workspace.workspaceFolders)==null?void 0:s.map(i=>i.uri.fsPath))||[]}async watchAllTestFilesInWorkspace(e){for(let i of this.lastWatches)i.dispose();if(!os)return[];let s=[];return await Promise.all(os.map(async i=>{let n=as(this.config,i).exclude;for(let a of as(this.config,i).include){let o=new ue.RelativePattern(i.uri,a),c=i.uri.fsPath,u=ue.workspace.createFileSystemWatcher(o),l=h=>n.every(p=>!(0,oc.default)(jt.default.relative(c,h.fsPath),p,{dot:!0}));u.onDidCreate(h=>l(h)&&this.getOrCreateFile(e,h)),u.onDidChange(h=>{if(!l(h))return;let{data:p}=this.getOrCreateFile(e,h);!p.resolved||p.updateFromDisk(e)}),u.onDidDelete(h=>e.items.delete(h.toString()));for(let h of await ue.workspace.findFiles(o))l(h)&&this.getOrCreateFile(e,h).data.updateFromDisk(e);s.push(u)}return s})),this.lastWatches=s.concat(),s}async discoverAllTestFilesInWorkspace(e){!ue.workspace.workspaceFolders||await Promise.all(ue.workspace.workspaceFolders.map(async s=>{let i=s.uri.fsPath,n=as(this.config,s).exclude;for(let a of as(this.config,s).include){let o=new ue.RelativePattern(s.uri,a),c=s.uri.fsPath,u=l=>n.every(h=>!(0,oc.default)(jt.default.relative(c,l.fsPath),h,{dot:!0}));for(let l of await ue.workspace.findFiles(o))u(l)&&this.getOrCreateFile(e,l).data.updateFromDisk(e)}}))}discoverTestFromDoc(e,s){if(s.uri.scheme!=="file"||!pm(s.uri.fsPath,this.config))return;let{file:i,data:n}=this.getOrCreateFile(e,s.uri);ac(e,s.getText(),i,n)}discoverTestFromPath(e,s,i=!1){let{data:n}=this.getOrCreateFile(e,ue.Uri.file(s));return(!n.resolved||i)&&n.updateFromDisk(e),n}getOrCreateFile(e,s){let i=e.items.get(s.toString());if(i)return{file:i,data:Ue.get(i)};let n=this.workspacePaths.find(u=>s.fsPath.startsWith(u)),a;if(n){if(!this.workspaceCommonPrefix.has(n)){let l=s.fsPath.split(jt.sep);this.workspaceCommonPrefix.set(n,l.slice(0,-1).join(jt.sep)+jt.sep),this.workspaceItems.set(n,new Set)}let u=this.workspaceCommonPrefix.get(n);if(!s.fsPath.startsWith(u)){let l=s.fsPath;for(let p=0;p<u.length;p++)if(l[p]!==u[p]){u=u.slice(0,p);break}this.workspaceCommonPrefix.set(n,u),this.workspaceItems.get(n).forEach(p=>{p.label=p.uri.fsPath.substring(u.length)})}a=s.fsPath.substring(u.length)}else a=s.fsPath.split(jt.sep).pop();let o=e.createTestItem(s.toString(),a,s);n&&this.workspaceItems.get(n).add(o),e.items.add(o);let c=new yt(o);return Ue.set(o,c),this.pathToFileItem.set(s.fsPath,c),o.canResolveChildren=!0,{file:o,data:c}}};function ac(r,t,e,s){Zs.get(r)==null&&Zs.set(r,new Map);let i=Zs.get(r);i.set(e.id,e);let n=[{item:e,block:void 0,children:[],dataChildren:[],data:s}];function a(h){let p=n[n.length-1];if(p.block==null)return p;for(;p.block&&h.start.line>=p.block.end.line;){let f=n.pop();f&&(f.item.children.replace(f.children),f.data.children=[...f.dataChildren]),p=n[n.length-1]}return p}let o;try{o=ic(e.id,t)}catch{L.error("parse error");return}let c=[...o.describeBlocks,...o.itBlocks];c.sort((h,p)=>{var f,y;return(((f=h.start)==null?void 0:f.line)||0)-(((y=p.start)==null?void 0:y.line)||0)});let u=0,l=0;for(let h of c){let p=a(h),f=n.slice(1).map(T=>{var E;return((E=T.block)==null?void 0:E.name)||""}).concat([h.name]).join(" ").trim(),y=`${e.uri}/${f}@${l++}`,x=r.createTestItem(y,h.name,e.uri);if(i.set(y,x),x.range=new ue.Range(new ue.Position(h.start.line-1,h.start.column),new ue.Position(h.end.line-1,h.end.column)),p.children.push(x),h.type==="describe"){let T=new ys(h.name,e,x,p.data);p.dataChildren.push(T),Ue.set(x,T),n.push({item:x,block:h,children:[],data:T,dataChildren:[]})}else if(h.type==="it"){let T=new gs(h.name,e,x,p.data,u++);p.dataChildren.push(T),Ue.set(x,T)}else throw new Error("unexpected block type")}for(;n.length;){let h=n.pop();h&&(h.item.children.replace(h.children),h.data.children=[...h.dataChildren])}}d();var Zn=require("path"),ce=ie(require("vscode"));d();var $y=require("child_process"),jy=ie(Qa());d();d();var ym=ie(require("net"),1),gm=ie(require("os"),1),_n=class extends Error{constructor(t){super(`${t} is locked`)}},er={old:new Set,young:new Set},XS=1e3*15;var kn,JS=()=>{let r=gm.default.networkInterfaces(),t=new Set([void 0,"0.0.0.0"]);for(let e of Object.values(r))for(let s of e)t.add(s.address);return t},dm=r=>new Promise((t,e)=>{let s=ym.default.createServer();s.unref(),s.on("error",e),s.listen(r,()=>{let{port:i}=s.address();s.close(()=>{t(i)})})}),mm=async(r,t)=>{if(r.host||r.port===0)return dm(r);for(let e of t)try{await dm({port:r.port,host:e})}catch(s){if(!["EADDRNOTAVAIL","EINVAL"].includes(s.code))throw s}return r.port},YS=function*(r){r&&(yield*r),yield 0};async function xs(r){let t,e=new Set;if(r&&(r.port&&(t=typeof r.port=="number"?[r.port]:r.port),r.exclude)){let i=r.exclude;if(typeof i[Symbol.iterator]!="function")throw new TypeError("The `exclude` option must be an iterable.");for(let n of i){if(typeof n!="number")throw new TypeError("Each item in the `exclude` option must be a number corresponding to the port you want excluded.");if(!Number.isSafeInteger(n))throw new TypeError(`Number ${n} in the exclude option is not a safe integer and can't be used`)}e=new Set(i)}kn===void 0&&(kn=setInterval(()=>{er.old=er.young,er.young=new Set},XS),kn.unref&&kn.unref());let s=JS();for(let i of YS(t))try{if(e.has(i))continue;let n=await mm(Se(_({},r),{port:i}),s);for(;er.old.has(n)||er.young.has(n);){if(i!==0)throw new _n(i);n=await mm(Se(_({},r),{port:i}),s)}return er.young.add(n),n}catch(n){if(!["EADDRINUSE","EACCES"].includes(n.code)&&!(n instanceof _n))throw n}throw new Error("No available ports found")}var kc=ie(Sm());d();d();var iw=ie(Cm(),1),nw=ie(gc(),1),aw=ie(xc(),1),Ny=ie(wc(),1),ow=ie(Iy(),1);var Ic=Ny.default;d();d();function ky(r,t){let{post:e,on:s,eventNames:i=[],serialize:n=l=>l,deserialize:a=l=>l,timeout:o=6e4}=t,c=new Map,u=new Proxy({},{get(l,h){let p=(...y)=>{e(n({m:h,a:y,t:"q"}))};if(i.includes(h))return p.asEvent=p,p;let f=(...y)=>new Promise((x,T)=>{let E=lw();c.set(E,{resolve:x,reject:T}),e(n({m:h,a:y,i:E,t:"q"})),o>=0&&setTimeout(()=>{T(new Error(`[birpc] timeout on calling "${h}"`)),c.delete(E)},o)});return f.asEvent=p,f}});return s(async(l,...h)=>{let p=a(l);if(p.t==="q"){let{m:f,a:y}=p,x,T;try{x=await r[f].apply(u,y)}catch(E){T=E}p.i&&e(n({t:"s",i:p.i,r:x,e:T}),...h)}else{let{i:f,r:y,e:x}=p,T=c.get(f);x?T==null||T.reject(x):T==null||T.resolve(y),c.delete(f)}}),u}var cw="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";function lw(r=21){let t="",e=r;for(;e--;)t+=cw[Math.random()*64|0];return t}d();var{parse:uw,stringify:hw}=JSON,{keys:pw}=Object,si=String,Ly="string",_y={},jn="object",Dy=(r,t)=>t,fw=r=>r instanceof si?si(r):r,dw=(r,t)=>typeof t===Ly?new si(t):t,My=(r,t,e,s)=>{let i=[];for(let n=pw(e),{length:a}=n,o=0;o<a;o++){let c=n[o],u=e[c];if(u instanceof si){let l=r[u];typeof l===jn&&!t.has(l)?(t.add(l),e[c]=_y,i.push({k:c,a:[r,t,l,s]})):e[c]=s.call(e,c,l)}else e[c]!==_y&&(e[c]=s.call(e,c,u))}for(let{length:n}=i,a=0;a<n;a++){let{k:o,a:c}=i[a];e[o]=s.call(e,o,My.apply(null,c))}return e},Oy=(r,t,e)=>{let s=si(t.push(e)-1);return r.set(e,s),s},Fy=(r,t)=>{let e=uw(r,dw).map(fw),s=e[0],i=t||Dy,n=typeof s===jn&&s?My(e,new Set,s,i):s;return i.call({"":n},"",n)},Ry=(r,t,e)=>{let s=t&&typeof t===jn?(l,h)=>l===""||-1<t.indexOf(l)?h:void 0:t||Dy,i=new Map,n=[],a=[],o=+Oy(i,n,s.call({"":r},"",r)),c=!o;for(;o<n.length;)c=!0,a[o]=hw(n[o++],u,e);return"["+a.join(",")+"]";function u(l,h){if(c)return c=!c,h;let p=s.call(this,l,h);switch(typeof p){case jn:if(p===null)return p;case Ly:return i.get(p)||Oy(i,n,p)}return p}};var Nc=class{constructor(){this.filesMap=new Map;this.idMap=new Map;this.taskFileMap=new WeakMap;this.errorsSet=new Set}catchError(t,e){t.type=e,this.errorsSet.add(t)}clearErrors(){this.errorsSet.clear()}getUnhandledErrors(){return Array.from(this.errorsSet.values())}getFiles(t){return t?t.map(e=>this.filesMap.get(e)):Array.from(this.filesMap.values())}getFilepaths(){return Array.from(this.filesMap.keys())}getFailedFilepaths(){return this.getFiles().filter(t=>{var e;return((e=t.result)==null?void 0:e.state)==="fail"}).map(t=>t.filepath)}collectFiles(t=[]){t.forEach(e=>{this.filesMap.set(e.filepath,e),this.updateId(e)})}updateId(t){this.idMap.get(t.id)!==t&&(this.idMap.set(t.id,t),t.type==="suite"&&t.tasks.forEach(e=>{this.updateId(e)}))}updateTasks(t){for(let[e,s]of t)this.idMap.has(e)&&(this.idMap.get(e).result=s)}updateUserLog(t){let e=t.taskId&&this.idMap.get(t.taskId);e&&(e.logs||(e.logs=[]),e.logs.push(t))}};function Un(r,t={}){let{handlers:e={},autoReconnect:s=!0,reconnectInterval:i=2e3,reconnectTries:n=10,reactive:a=g=>g,WebSocketConstructor:o=globalThis.WebSocket,onFailedConnection:c}=t,u=n,l=a({ws:ya(new o(r)),state:new Nc,waitForConnection:E,reconnect:()=>x(!0),dispose:()=>{u=0,l.ws.close()}});l.state.filesMap=a(l.state.filesMap),l.state.idMap=a(l.state.idMap);let h;l.rpc=ky({onCollected(g){var b;l.state.collectFiles(g),(b=e.onCollected)==null||b.call(e,g)},onTaskUpdate(g){var b;l.state.updateTasks(g),(b=e.onTaskUpdate)==null||b.call(e,g)},onUserConsoleLog(g){l.state.updateUserLog(g)},onFinished(g){var b;(b=e.onFinished)==null||b.call(e,g)}},{post:g=>l.ws.send(g),on:g=>h=g,serialize:Ry,deserialize:Fy});let p,f=new Promise(g=>{p=g}),y=!1;function x(g=!1){g&&(y=!1,u=n,f=new Promise(b=>{p=b})),!y&&(L.info("RECONNECT"),l.ws=ya(new o(r)),T())}function T(){l.ws.addEventListener("open",()=>{u=n,p()}),l.ws.addEventListener("message",g=>{h(g.data)}),l.ws.addEventListener("close",()=>{u-=1,!y&&s&&u>0?setTimeout(x,i):s&&u===0&&(c==null||c())})}T();function E(){return f}return l}globalThis.WebSocket=Ic;function qn({port:r,url:t=`ws://localhost:${r}/__vitest_api__`,handlers:e,reconnectInterval:s,reconnectTries:i}){let n=Un(t,{handlers:e,WebSocketConstructor:Ic,reactive:As,reconnectInterval:s,reconnectTries:i}),a=Al({}),o=Cs("CONNECTING"),c=Il(()=>n.state.getFiles()),u=new WeakSet;At(()=>{let h=n.ws;u.has(h)||(u.add(h),o.value="CONNECTING",h.addEventListener("open",()=>{L.info("WS Opened"),o.value="OPEN",n.state.filesMap.clear(),n.rpc.getFiles().then(p=>{var f;n.state.collectFiles(p),(f=e==null?void 0:e.onCollected)==null||f.call(e,p)}),n.rpc.getConfig().then(p=>a.value=p)}),h.addEventListener("error",p=>{console.error("WS ERROR",p)}),h.addEventListener("close",()=>{L.info("WS Close"),setTimeout(()=>{o.value==="CONNECTING"&&(o.value="CLOSED")},1e3)}))});let l=n.waitForConnection().then(async()=>{let h=await n.rpc.getFiles(),p=[],f=h.length===0;h&&y(h);function y(x){for(let T of x)T.type==="test"?T.result?p.push([T.id,T.result]):T.mode==="run"&&(f=!0):y(T.tasks)}return n.state.updateTasks(p),f});return{client:n,config:a,status:o,files:c,loadingPromise:l}}var _c=class{constructor(t,e,s={},i=!1,n){this.vitest=t;this.workspace=e;this.handlers=s;this.recordOutput=i;this.customStartProcess=n;this.started=!1;this.disposed=!1;this.output=[];if(this.handlers.log&&!this.handlers.onUserConsoleLog&&(this.handlers.onUserConsoleLog=({content:a})=>{var o,c;(c=(o=this.handlers).log)==null||c.call(o,a)}),this.handlers.onUpdate){let a=this.handlers.onTaskUpdate;this.handlers.onTaskUpdate=o=>{if(a&&a(o),!this.vitestState)return;let c=this.vitestState.client.state.idMap,u=new Set;for(let[l]of o){let h=c.get(l);!h||h.file&&u.add(h.file)}this.handlers.onUpdate&&this.handlers.onUpdate(Array.from(u))}}}async start(){if(this.started||this.disposed)return;this.started=!0;let t=await xs(),e=o=>{o=ns(o),L.info(o),this.handlers.log&&this.handlers.log(o)};L.info("Start api process at port",t),L.info("[RUN]",`${this.vitest.cmd} ${this.vitest.args.join(" ")}`);let s=Je(this.workspace,!1);L.info("[RUN.cwd]",s);let i=[],n,a=o=>{i.push(o),this.recordOutput&&this.output.push(o),clearTimeout(n),n=setTimeout(()=>{e(i.join(`\r
`)),i.length=0},200)};this.customStartProcess?this.customStartProcess({cmd:this.vitest.cmd,args:[...this.vitest.args,"--api.port",t.toString(),"--api.host","127.0.0.1"],cfg:{cwd:s,env:_(_({},process.env),Te(this.workspace).env)},log:a,onProcessEnd:()=>{var o,c;L.info("API PROCESS EXIT"),(c=(o=this.handlers).onFinished)==null||c.call(o),this.dispose()},registerOnTestFinished:o=>{let c=this.handlers.onFinished;this.handlers.onFinished=(...u)=>{c==null||c(...u),o()}}}):this._start(a,t,s),setTimeout(()=>{this.vitestState=qn({port:t,handlers:this.handlers,reconnectInterval:500,reconnectTries:20}),this.vitestState.loadingPromise.then(o=>{var c,u;if(!o){let l=this.vitestState.files.value;l&&((u=(c=this.handlers)==null?void 0:c.onFinished)==null||u.call(c,l))}})},50)}kill(){var t,e;this.process&&this.process.pid&&(0,kc.default)(this.process.pid),(e=(t=this.handlers).onFinished)==null||e.call(t)}_start(t,e,s){this.process=Rs(this.vitest.cmd,[...this.vitest.args,"--api.port",e.toString(),"--api.host","127.0.0.1"],{cwd:s,env:_(_({},process.env),Te(this.workspace).env)},t,t).child,this.process.on("error",i=>{L.error(`Process Error: ${i}`)}),this.process.on("exit",i=>{var n,a;if(!this.disposed){if(i!==0){this.dispose(),L.error(`Process exited with code ${i}`);return}L.info("API PROCESS EXIT"),(a=(n=this.handlers).onFinished)==null||a.call(n),this.dispose()}})}get client(){var t;return(t=this.vitestState)==null?void 0:t.client}dispose(){var t;this.disposed=!0,(t=this.vitestState)==null||t.client.dispose(),this.process&&this.process.pid&&(0,kc.default)(this.process.pid),this.vitestState=void 0,this.process=void 0}};function By(r,t,e,s,i){return L.info("[Execute Vitest]",r.cmd,r.args.join(" ")),new Promise(n=>{let a=new _c(r,t,Se(_({},e),{onFinished:o=>{L.info("Vitest api process finished");try{e.onFinished&&e.onFinished(o)}finally{a.dispose(),n(a.output.join(""))}}}),!0,s);a.start(),i==null||i.onCancellationRequested(()=>{a.kill()})})}var nr=class{constructor(t,e){this.workspacePath=t;this.defaultVitestCommand=e}async scheduleRun(t,e,s={info:()=>{},error:console.error},i={},n=this.defaultVitestCommand?this.defaultVitestCommand:{cmd:"npx",args:["vitest"]},a=!1,o,c,u){let l=n.cmd,h=[...n.args,...t?t.map(g=>Je(g,!0)):[]];a&&h.push("--update"),e&&(rs&&!c?h.push("-t",`"${e.replace(/[$^+?()[\]"]/g,"\\$&")}"`):h.push("-t",e.replace(/[$^+?()[\]"]/g,"\\$&")));let p=Je(this.workspacePath,!1),f=[],y=_(_({},process.env),i),x=[],T=await By({cmd:Je(l,!1),args:h},this.workspacePath,{log:g=>{s.info(`${ns(g.trimEnd())}\r
`),f.push(ns(g))},onFinished:g=>{if(g==null){u!=null&&u.isCancellationRequested||E();return}x=g},onCollected:g=>{g&&o&&o(g)},onUpdate:o},c,u);return{testResultFiles:x,output:T};async function E(){let g=`
Failed to get any result
( Vitest should be configured to be able to run from project root )

Error when running\r
    ${`${l} ${h.join(" ")}`}

cwd: ${p}\r
node: ${await mw()}\r
env.PATH: ${y.PATH}\r
`;s.error(g),s.error(f.join(`
`))}}};async function mw(){let r=(0,$y.spawn)("node",["-v"],{stdio:["ignore","pipe","pipe"]});for await(let t of(0,jy.chunksToLinesAsync)(r.stdout))return t}d();var Xc=ie(require("path"));d();var{parse:OI,stringify:LI}=JSON,{keys:DI}=Object;function yw(r){return r==null&&(r=[]),Array.isArray(r)?r:[r]}function Oc(r=[]){return yw(r).flatMap(t=>t.type==="test"?[t]:[t,...Oc(t.tasks)])}d();function Tt(r){return Array.isArray?Array.isArray(r):Ky(r)==="[object Array]"}var gw=1/0;function xw(r){if(typeof r=="string")return r;let t=r+"";return t=="0"&&1/r==-gw?"-0":t}function Pw(r){return r==null?"":xw(r)}function it(r){return typeof r=="string"}function Gy(r){return typeof r=="number"}function Tw(r){return r===!0||r===!1||bw(r)&&Ky(r)=="[object Boolean]"}function Hy(r){return typeof r=="object"}function bw(r){return Hy(r)&&r!==null}function qe(r){return r!=null}function Lc(r){return!r.trim().length}function Ky(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var Ew="Incorrect 'index' type",Sw=r=>`Invalid value for key ${r}`,vw=r=>`Pattern length exceeds max of ${r}.`,ww=r=>`Missing ${r} property in key`,Aw=r=>`Property 'weight' in key '${r}' must be a positive integer`,Uy=Object.prototype.hasOwnProperty,Dc=class{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(s=>{let i=Xy(s);e+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,e+=i.weight}),this._keys.forEach(s=>{s.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Xy(r){let t=null,e=null,s=null,i=1,n=null;if(it(r)||Tt(r))s=r,t=qy(r),e=Mc(r);else{if(!Uy.call(r,"name"))throw new Error(ww("name"));let a=r.name;if(s=a,Uy.call(r,"weight")&&(i=r.weight,i<=0))throw new Error(Aw(a));t=qy(a),e=Mc(a),n=r.getFn}return{path:t,id:e,weight:i,src:s,getFn:n}}function qy(r){return Tt(r)?r:r.split(".")}function Mc(r){return Tt(r)?r.join("."):r}function Cw(r,t){let e=[],s=!1,i=(n,a,o)=>{if(!!qe(n))if(!a[o])e.push(n);else{let c=a[o],u=n[c];if(!qe(u))return;if(o===a.length-1&&(it(u)||Gy(u)||Tw(u)))e.push(Pw(u));else if(Tt(u)){s=!0;for(let l=0,h=u.length;l<h;l+=1)i(u[l],a,o+1)}else a.length&&i(u,a,o+1)}};return i(r,it(t)?t.split("."):t,0),s?e:e[0]}var Iw={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Nw={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,t)=>r.score===t.score?r.idx<t.idx?-1:1:r.score<t.score?-1:1},kw={location:0,threshold:.6,distance:100},_w={useExtendedSearch:!1,getFn:Cw,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},F=_(_(_(_({},Nw),Iw),kw),_w),Ow=/[^ ]+/g;function Lw(r=1,t=3){let e=new Map,s=Math.pow(10,t);return{get(i){let n=i.match(Ow).length;if(e.has(n))return e.get(n);let a=1/Math.pow(n,.5*r),o=parseFloat(Math.round(a*s)/s);return e.set(n,o),o},clear(){e.clear()}}}var ri=class{constructor({getFn:t=F.getFn,fieldNormWeight:e=F.fieldNormWeight}={}){this.norm=Lw(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,s)=>{this._keysMap[e.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,it(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){let e=this.size();it(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,s=this.size();e<s;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!qe(t)||Lc(t))return;let s={v:t,i:e,n:this.norm.get(t)};this.records.push(s)}_addObject(t,e){let s={i:e,$:{}};this.keys.forEach((i,n)=>{let a=i.getFn?i.getFn(t):this.getFn(t,i.path);if(!!qe(a)){if(Tt(a)){let o=[],c=[{nestedArrIndex:-1,value:a}];for(;c.length;){let{nestedArrIndex:u,value:l}=c.pop();if(!!qe(l))if(it(l)&&!Lc(l)){let h={v:l,i:u,n:this.norm.get(l)};o.push(h)}else Tt(l)&&l.forEach((h,p)=>{c.push({nestedArrIndex:p,value:h})})}s.$[n]=o}else if(it(a)&&!Lc(a)){let o={v:a,n:this.norm.get(a)};s.$[n]=o}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}};function Jy(r,t,{getFn:e=F.getFn,fieldNormWeight:s=F.fieldNormWeight}={}){let i=new ri({getFn:e,fieldNormWeight:s});return i.setKeys(r.map(Xy)),i.setSources(t),i.create(),i}function Dw(r,{getFn:t=F.getFn,fieldNormWeight:e=F.fieldNormWeight}={}){let{keys:s,records:i}=r,n=new ri({getFn:t,fieldNormWeight:e});return n.setKeys(s),n.setIndexRecords(i),n}function Wn(r,{errors:t=0,currentLocation:e=0,expectedLocation:s=0,distance:i=F.distance,ignoreLocation:n=F.ignoreLocation}={}){let a=t/r.length;if(n)return a;let o=Math.abs(s-e);return i?a+o/i:o?1:a}function Mw(r=[],t=F.minMatchCharLength){let e=[],s=-1,i=-1,n=0;for(let a=r.length;n<a;n+=1){let o=r[n];o&&s===-1?s=n:!o&&s!==-1&&(i=n-1,i-s+1>=t&&e.push([s,i]),s=-1)}return r[n-1]&&n-s>=t&&e.push([s,n-1]),e}var bs=32;function Fw(r,t,e,{location:s=F.location,distance:i=F.distance,threshold:n=F.threshold,findAllMatches:a=F.findAllMatches,minMatchCharLength:o=F.minMatchCharLength,includeMatches:c=F.includeMatches,ignoreLocation:u=F.ignoreLocation}={}){if(t.length>bs)throw new Error(vw(bs));let l=t.length,h=r.length,p=Math.max(0,Math.min(s,h)),f=n,y=p,x=o>1||c,T=x?Array(h):[],E;for(;(E=r.indexOf(t,y))>-1;){let q=Wn(t,{currentLocation:E,expectedLocation:p,distance:i,ignoreLocation:u});if(f=Math.min(q,f),y=E+l,x){let K=0;for(;K<l;)T[E+K]=1,K+=1}}y=-1;let g=[],b=1,w=l+h,C=1<<l-1;for(let q=0;q<l;q+=1){let K=0,v=w;for(;K<v;)Wn(t,{errors:q,currentLocation:p+v,expectedLocation:p,distance:i,ignoreLocation:u})<=f?K=v:w=v,v=Math.floor((w-K)/2+K);w=v;let B=Math.max(1,p-v+1),M=a?h:Math.min(p+v,h)+l,J=Array(M+2);J[M+1]=(1<<q)-1;for(let W=M;W>=B;W-=1){let G=W-1,Q=e[r.charAt(G)];if(x&&(T[G]=+!!Q),J[W]=(J[W+1]<<1|1)&Q,q&&(J[W]|=(g[W+1]|g[W])<<1|1|g[W+1]),J[W]&C&&(b=Wn(t,{errors:q,currentLocation:G,expectedLocation:p,distance:i,ignoreLocation:u}),b<=f)){if(f=b,y=G,y<=p)break;B=Math.max(1,2*p-y)}}if(Wn(t,{errors:q+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:u})>f)break;g=J}let z={isMatch:y>=0,score:Math.max(.001,b)};if(x){let q=Mw(T,o);q.length?c&&(z.indices=q):z.isMatch=!1}return z}function Rw(r){let t={};for(let e=0,s=r.length;e<s;e+=1){let i=r.charAt(e);t[i]=(t[i]||0)|1<<s-e-1}return t}var Vn=class{constructor(t,{location:e=F.location,threshold:s=F.threshold,distance:i=F.distance,includeMatches:n=F.includeMatches,findAllMatches:a=F.findAllMatches,minMatchCharLength:o=F.minMatchCharLength,isCaseSensitive:c=F.isCaseSensitive,ignoreLocation:u=F.ignoreLocation}={}){if(this.options={location:e,threshold:s,distance:i,includeMatches:n,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let l=(p,f)=>{this.chunks.push({pattern:p,alphabet:Rw(p),startIndex:f})},h=this.pattern.length;if(h>bs){let p=0,f=h%bs,y=h-f;for(;p<y;)l(this.pattern.substr(p,bs),p),p+=bs;if(f){let x=h-bs;l(this.pattern.substr(x),x)}}else l(this.pattern,0)}searchIn(t){let{isCaseSensitive:e,includeMatches:s}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return s&&(y.indices=[[0,t.length-1]]),y}let{location:i,distance:n,threshold:a,findAllMatches:o,minMatchCharLength:c,ignoreLocation:u}=this.options,l=[],h=0,p=!1;this.chunks.forEach(({pattern:y,alphabet:x,startIndex:T})=>{let{isMatch:E,score:g,indices:b}=Fw(t,y,x,{location:i+T,distance:n,threshold:a,findAllMatches:o,minMatchCharLength:c,includeMatches:s,ignoreLocation:u});E&&(p=!0),h+=g,E&&b&&(l=[...l,...b])});let f={isMatch:p,score:p?h/this.chunks.length:1};return p&&s&&(f.indices=l),f}},nt=class{constructor(t){this.pattern=t}static isMultiMatch(t){return Wy(t,this.multiRegex)}static isSingleMatch(t){return Wy(t,this.singleRegex)}search(){}};function Wy(r,t){let e=r.match(t);return e?e[1]:null}var Fc=class extends nt{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Rc=class extends nt{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}},Bc=class extends nt{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},$c=class extends nt{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},jc=class extends nt{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},Uc=class extends nt{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},zn=class extends nt{constructor(t,{location:e=F.location,threshold:s=F.threshold,distance:i=F.distance,includeMatches:n=F.includeMatches,findAllMatches:a=F.findAllMatches,minMatchCharLength:o=F.minMatchCharLength,isCaseSensitive:c=F.isCaseSensitive,ignoreLocation:u=F.ignoreLocation}={}){super(t),this._bitapSearch=new Vn(t,{location:e,threshold:s,distance:i,includeMatches:n,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},Gn=class extends nt{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,s,i=[],n=this.pattern.length;for(;(s=t.indexOf(this.pattern,e))>-1;)e=s+n,i.push([s,e-1]);let a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}},qc=[Fc,Gn,Bc,$c,Uc,jc,Rc,zn],Vy=qc.length,Bw=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$w="|";function jw(r,t={}){return r.split($w).map(e=>{let s=e.trim().split(Bw).filter(n=>n&&!!n.trim()),i=[];for(let n=0,a=s.length;n<a;n+=1){let o=s[n],c=!1,u=-1;for(;!c&&++u<Vy;){let l=qc[u],h=l.isMultiMatch(o);h&&(i.push(new l(h,t)),c=!0)}if(!c)for(u=-1;++u<Vy;){let l=qc[u],h=l.isSingleMatch(o);if(h){i.push(new l(h,t));break}}}return i})}var Uw=new Set([zn.type,Gn.type]),Wc=class{constructor(t,{isCaseSensitive:e=F.isCaseSensitive,includeMatches:s=F.includeMatches,minMatchCharLength:i=F.minMatchCharLength,ignoreLocation:n=F.ignoreLocation,findAllMatches:a=F.findAllMatches,location:o=F.location,threshold:c=F.threshold,distance:u=F.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:s,minMatchCharLength:i,findAllMatches:a,ignoreLocation:n,location:o,threshold:c,distance:u},this.pattern=e?t:t.toLowerCase(),this.query=jw(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){let e=this.query;if(!e)return{isMatch:!1,score:1};let{includeMatches:s,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let n=0,a=[],o=0;for(let c=0,u=e.length;c<u;c+=1){let l=e[c];a.length=0,n=0;for(let h=0,p=l.length;h<p;h+=1){let f=l[h],{isMatch:y,indices:x,score:T}=f.search(t);if(y){if(n+=1,o+=T,s){let E=f.constructor.type;Uw.has(E)?a=[...a,...x]:a.push(x)}}else{o=0,n=0,a.length=0;break}}if(n){let h={isMatch:!0,score:o/n};return s&&(h.indices=a),h}}return{isMatch:!1,score:1}}},Vc=[];function qw(...r){Vc.push(...r)}function zc(r,t){for(let e=0,s=Vc.length;e<s;e+=1){let i=Vc[e];if(i.condition(r,t))return new i(r,t)}return new Vn(r,t)}var Hn={AND:"$and",OR:"$or"},Gc={PATH:"$path",PATTERN:"$val"},Hc=r=>!!(r[Hn.AND]||r[Hn.OR]),Ww=r=>!!r[Gc.PATH],Vw=r=>!Tt(r)&&Hy(r)&&!Hc(r),zy=r=>({[Hn.AND]:Object.keys(r).map(t=>({[t]:r[t]}))});function Yy(r,t,{auto:e=!0}={}){let s=i=>{let n=Object.keys(i),a=Ww(i);if(!a&&n.length>1&&!Hc(i))return s(zy(i));if(Vw(i)){let c=a?i[Gc.PATH]:n[0],u=a?i[Gc.PATTERN]:i[c];if(!it(u))throw new Error(Sw(c));let l={keyId:Mc(c),pattern:u};return e&&(l.searcher=zc(u,t)),l}let o={children:[],operator:n[0]};return n.forEach(c=>{let u=i[c];Tt(u)&&u.forEach(l=>{o.children.push(s(l))})}),o};return Hc(r)||(r=zy(r)),s(r)}function zw(r,{ignoreFieldNorm:t=F.ignoreFieldNorm}){r.forEach(e=>{let s=1;e.matches.forEach(({key:i,norm:n,score:a})=>{let o=i?i.weight:null;s*=Math.pow(a===0&&o?Number.EPSILON:a,(o||1)*(t?1:n))}),e.score=s})}function Gw(r,t){let e=r.matches;t.matches=[],qe(e)&&e.forEach(s=>{if(!qe(s.indices)||!s.indices.length)return;let{indices:i,value:n}=s,a={indices:i,value:n};s.key&&(a.key=s.key.src),s.idx>-1&&(a.refIndex=s.idx),t.matches.push(a)})}function Hw(r,t){t.score=r.score}function Kw(r,t,{includeMatches:e=F.includeMatches,includeScore:s=F.includeScore}={}){let i=[];return e&&i.push(Gw),s&&i.push(Hw),r.map(n=>{let{idx:a}=n,o={item:t[a],refIndex:a};return i.length&&i.forEach(c=>{c(n,o)}),o})}var bt=class{constructor(t,e={},s){this.options=_(_({},F),e),this.options.useExtendedSearch,this._keyStore=new Dc(this.options.keys),this.setCollection(t,s)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof ri))throw new Error(Ew);this._myIndex=e||Jy(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!qe(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let e=[];for(let s=0,i=this._docs.length;s<i;s+=1){let n=this._docs[s];t(n,s)&&(this.removeAt(s),s-=1,i-=1,e.push(n))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){let{includeMatches:s,includeScore:i,shouldSort:n,sortFn:a,ignoreFieldNorm:o}=this.options,c=it(t)?it(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return zw(c,{ignoreFieldNorm:o}),n&&c.sort(a),Gy(e)&&e>-1&&(c=c.slice(0,e)),Kw(c,this._docs,{includeMatches:s,includeScore:i})}_searchStringList(t){let e=zc(t,this.options),{records:s}=this._myIndex,i=[];return s.forEach(({v:n,i:a,n:o})=>{if(!qe(n))return;let{isMatch:c,score:u,indices:l}=e.searchIn(n);c&&i.push({item:n,idx:a,matches:[{score:u,value:n,norm:o,indices:l}]})}),i}_searchLogical(t){let e=Yy(t,this.options),s=(o,c,u)=>{if(!o.children){let{keyId:h,searcher:p}=o,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:p});return f&&f.length?[{idx:u,item:c,matches:f}]:[]}let l=[];for(let h=0,p=o.children.length;h<p;h+=1){let f=o.children[h],y=s(f,c,u);if(y.length)l.push(...y);else if(o.operator===Hn.AND)return[]}return l},i=this._myIndex.records,n={},a=[];return i.forEach(({$:o,i:c})=>{if(qe(o)){let u=s(e,o,c);u.length&&(n[c]||(n[c]={idx:c,item:o,matches:[]},a.push(n[c])),u.forEach(({matches:l})=>{n[c].matches.push(...l)}))}}),a}_searchObjectList(t){let e=zc(t,this.options),{keys:s,records:i}=this._myIndex,n=[];return i.forEach(({$:a,i:o})=>{if(!qe(a))return;let c=[];s.forEach((u,l)=>{c.push(...this._findMatches({key:u,value:a[l],searcher:e}))}),c.length&&n.push({idx:o,item:a,matches:c})}),n}_findMatches({key:t,value:e,searcher:s}){if(!qe(e))return[];let i=[];if(Tt(e))e.forEach(({v:n,i:a,n:o})=>{if(!qe(n))return;let{isMatch:c,score:u,indices:l}=s.searchIn(n);c&&i.push({score:u,key:t,value:n,idx:a,norm:o,indices:l})});else{let{v:n,n:a}=e,{isMatch:o,score:c,indices:u}=s.searchIn(n);o&&i.push({score:c,key:t,value:n,norm:a,indices:u})}return i}};bt.version="6.6.2";bt.createIndex=Jy;bt.parseIndex=Dw;bt.config=F;bt.parseQuery=Yy;qw(Wc);var Be=require("vscode");d();function Qy(r){return new Promise(t=>setTimeout(t,r))}d();var Kn=class extends Error{constructor(){super(...arguments),this.name="TimeoutError"}};d();function Kc(r,t,e){if(t==null)return r;let s=!1;return r.then(()=>{s=!0}),Promise.race([r,Qy(t).then(()=>{if(!s)throw new Kn(e)})])}d();var Xn=class{constructor(t){if(this.size=0,t&&t[Symbol.iterator])for(let e of t)this._push(e)}push(...t){for(let e of t)this._push(e)}get head(){var t;return(t=this._head)===null||t===void 0?void 0:t.value}get tail(){var t;return(t=this._tail)===null||t===void 0?void 0:t.value}_push(t){if(this.size+=1,!this._tail){this._head=this._tail={value:t};return}let e={value:t,prev:this._tail};this._tail.next=e,this._tail=e}pushFront(...t){for(let e of t)this._pushFront(e)}_pushFront(t){if(this.size+=1,!this._head){this._head=this._tail={value:t};return}let e={value:t,next:this._head};this._head.prev=e,this._head=e}pop(){if(!this._tail)return;this.size-=1;let t=this._tail;return this._tail=t.prev,this._updateHeadAndTail(),t.value}popFront(){if(!this._head)return;this.size-=1;let t=this._head;return this._head=t.next,this._updateHeadAndTail(),t.value}_updateHeadAndTail(){if(!this._head||!this._tail||this.size===0){this._head=this._tail=void 0,this.size=0;return}this._head.prev=void 0,this._tail.next=void 0}get empty(){return this.size===0}clear(){this._head=void 0,this._tail=void 0,this.size=0}*[Symbol.iterator](){if(!this._head)return;let t=this._head;for(;t;)yield t.value,t=t.next}toArray(){return Array.from(this)}};d();d();var Jn=class{constructor(){this.list=new Xn,this.running=!1,this.paused=!1}pushTask(){let t=Zy();return this.list.push(t),this.start(),t.promise}pushTaskFront(){let t=Zy();return this.list.pushFront(t),this.start(),t.promise}pause(){this.paused=!0}start(){this._run()}async _run(){if(this.paused=!1,!this.running){for(this.running=!0;this.list.size;){if(this.paused){this.running=!1;return}let t=this.list.popFront();await new Promise(e=>t.resolve(e))}this.running=!1}}destroy(){this.list.clear(),this.paused=!0}};function Zy(){let r,t;return{promise:new Promise((e,s)=>{t=s,r=e}),resolve:r,reject:t}}var Yn=class{constructor(){this.linkedPromise=new Jn}acquire(t){return t?Kc(this.linkedPromise.pushTask(),t):this.linkedPromise.pushTask()}acquireImmediately(t){return t?Kc(this.linkedPromise.pushTaskFront(),t):this.linkedPromise.pushTaskFront()}};var eg=ie(require("vscode"));var ii=class extends Be.Disposable{constructor(e,s,i,n,a){super(()=>{this.dispose()});this.id=e;this.ctrl=s;this.discover=i;this.vitest=n;this.workspace=a;this.isWatching=Cs(!1);this.isRunning=Cs(!1);this.testStatus=Cs({passed:0,failed:0,skipped:0});this.lock=new Yn;this.onFileUpdated=e=>{if(e==null)this.discover.watchAllTestFilesInWorkspace(this.ctrl);else for(let s of e)this.discover.discoverTestFromPath(this.ctrl,s.filepath)};this.onUpdated=(e,s)=>{if(!e)return;let i=!this.run;i&&(this.run=this.ctrl.createTestRun(new Be.TestRunRequest(void 0,void 0,void 0,!0)));let n=this.discover,a=this.ctrl,o=this.run;Qn(e,n,a,o,s,i)}}static isWatching(e){var s;return!!((s=this.cache[e])!=null&&s.isWatching.value)}static create(e,s,i,n,a){return this.cache[a]?this.cache[a]:(ii.cache[a]=new ii(a,e,s,i,n),ii.cache[a])}async watch(){let e=await this.lock.acquire();try{if(this.isWatching.value)return;this.isRunning.value=!0,this.isWatching.value=!0;let s=[],i=await xs({port:51204}),n;return this.process=Rs(this.vitest.cmd,[...this.vitest.args,"--api.port",i.toString(),"--api.host","127.0.0.1"],{cwd:this.workspace.uri.fsPath,env:_(_({},process.env),Te(this.workspace).env)},a=>{s.push(a),clearTimeout(n),n=setTimeout(()=>{L.info(s.join(`
`)),s.length=0},200)},a=>{s.push(a),clearTimeout(n),n=setTimeout(()=>{L.info(s.join(`
`)),s.length=0},200)}).child,this.process.on("exit",()=>{L.info("VITEST WATCH PROCESS EXIT")}),this.vitestState=qn({port:i,handlers:{onTaskUpdate:a=>{try{if(!this.vitestState)return;this.isRunning.value=!0;let o=this.vitestState.client.state.idMap,c=new Set;for(let[u]of a){let l=o.get(u);!l||l.file&&c.add(l.file)}this.onUpdated(Array.from(c),!1)}catch(o){console.error(o)}},onFinished:a=>{try{if(this.isRunning.value=!1,this.onUpdated(a,!0),!this.run)return;this.run.end(),this.run=void 0,this.updateStatus()}catch(o){console.error(o)}}},reconnectInterval:500,reconnectTries:20}),At(()=>{this.onFileUpdated(this.vitestState.files.value)}),this.vitestState.loadingPromise.then(()=>{this.updateStatus(),this.isRunning.value=!1})}finally{e()}}updateStatus(){if(!this.vitestState)return;let e=0,s=0,i=0,n=this.vitestState.client.state.idMap;for(let a of n.values())if(a.type==="test"){if(!a.result){i++;continue}a.result.state==="pass"&&e++,a.result.state==="fail"&&s++}this.testStatus.value={passed:e,failed:s,skipped:i},$s().showFailMessages&&s>0&&eg.window.showErrorMessage(`Vitest: You have ${s} failing Unit Test(s).`)}runTests(e){if(!!this.vitestState){if(e==null){let s=this.vitestState.files.value;this.runFiles(s);return}this.runFiles(this.vitestState.files.value.filter(s=>e.some(i=>Ue.get(i).getFilePath().includes(s.filepath))))}}runFiles(e){if(!this.vitestState)return;this.run||(this.run=this.ctrl.createTestRun(new Be.TestRunRequest(void 0,void 0,void 0,!0)));for(let i of e){let o=function(c){a.started(c),c.children&&c.children.forEach(u=>{o(u)})},n=this.discover.discoverTestFromPath(this.ctrl,i.filepath),a=this.run;o(n.item)}return e.forEach(i=>{delete i.result,Oc(i).forEach(n=>delete n.result)}),this.vitestState.client.rpc.rerun(e.map(i=>i.filepath))}async dispose(){var s,i;let e=await this.lock.acquire();try{L.info("Stop watch mode"),this.isWatching.value=!1,this.isRunning.value=!1,(s=this.vitestState)==null||s.client.dispose(),(i=this.process)==null||i.kill(),this.process=void 0,this.vitestState=void 0}finally{e()}}},Es=ii;Es.cache={};function Xw(r){var t;return r.sourcePos?{sourceFilepath:(t=r.sourcePos.source)==null?void 0:t.replace(/\//g,Xc.default.sep),line:r.sourcePos.line,column:r.sourcePos.column}:{sourceFilepath:r.file.replace(/\//g,Xc.default.sep),line:r.line,column:r.column}}function Jw(r,t){if(t.length===0)return;let e=r.uri.fsPath;for(let s of t){let{sourceFilepath:i,line:n,column:a}=Xw(s);if(!(i!==e||isNaN(a)||isNaN(n)))return{path:i,line:n,column:a}}}function Yw(r,t){var i,n,a;let e;(t==null?void 0:t.actual)!=null&&(t==null?void 0:t.expected)!=null?e=Be.TestMessage.diff((i=t==null?void 0:t.message)!=null?i:"",t.expected,t.actual):e=new Be.TestMessage((n=t==null?void 0:t.message)!=null?n:"");let s=Jw(r,(a=t==null?void 0:t.stacks)!=null?a:[]);if(s){let o=new Be.Position(s.line-1,s.column-1);e.location=new Be.Location(Be.Uri.file(s.path),o)}return e}function Qn(r,t,e,s,i,n,a=new Set){for(let o of r){let c=t.discoverTestFromPath(e,o.filepath);s&&Qw(s,c,o,i,n,a)}return a}function Qw(r,t,e,s,i,n){a(r,t.children,e.tasks);function a(c,u,l){var p;let h=new Set(u);for(let f of l){let y=o(f,h,f.type);if(f.type==="test")if(f.result==null)s?(n&&n.add(y.item),c.skipped(y.item)):i&&c.started(y.item);else{if(n&&n.has(y.item))continue;switch((p=f.result)==null?void 0:p.state){case"pass":c.passed(y.item,f.result.duration),n&&n.add(y.item);break;case"fail":c.failed(y.item,Yw(y.item,f.result.error),f.result.duration),n&&n.add(y.item);break;case"skip":case"todo":c.skipped(y.item),n&&n.add(y.item);break;case"run":c.started(y.item);break;case"only":break;default:console.error("unexpected result state",f.result)}}else a(c,y.children,f.tasks)}}function o(c,u,l){var p;let h;for(let f of u)if(!(l==="suite"&&!(f instanceof ys))&&!(l==="test"&&!(f instanceof gs))&&f.pattern===c.name){h=f;break}return h?u.delete(h):h=(p=new bt(Array.from(u),{keys:["pattern"]}).search(c.name)[0])==null?void 0:p.item,h}}async function tg(r,t,e,s,i,n){if(s.length===0){L.info("ERROR: No workspace folder found"),ce.window.showErrorMessage("Cannot run tests: No workspace folder found");return}if(e.some(o=>Es.isWatching(o.id))&&e.length>0){L.info("Use watchers to run tests"),e.forEach(o=>{var c;o.runTests(ni((c=i.include)!=null?c:[],o.workspace.uri.fsPath))});return}L.info("Tests run start");let a=r.createTestRun(i);await Promise.allSettled(s.map(async o=>{var h;let c=new nr(o.uri.fsPath,Dt(o.uri.fsPath)),u=(h=i.include)!=null?h:r.items,l=ni(u,o.uri.fsPath);if(l.length!==0){L.info(`[Workspace "${o.name}] Run tests from workspace`);try{await Jc(r,c,a,l,"run",t,n),L.info(`[Workspace "${o.name}] Test run finished`)}catch(p){if(L.error(`[Workspace "${o.name}] Run error`),p instanceof Error){let f=p;console.error(p),L.info(`[Workspace ${o.name}] Error: ${p.toString()}`),l.forEach(y=>a.errored(y,new ce.TestMessage(f.toString())))}}}})),a.end(),L.info("Tests run end")}async function sg(r,t,e){if(ce.workspace.workspaceFolders===void 0||ce.workspace.workspaceFolders.length===0)return;e=Zs.get(r).get(e.id);let s=ag([e],ce.workspace.workspaceFolders),i=new nr(s.uri.fsPath,Dt(s.uri.fsPath)),n=new ce.TestRunRequest([e],void 0,void 0,!0),a=[e],o=r.createTestRun(n);o.started(e),await Jc(r,i,o,a,"update",t),o.end()}async function rg(r,t,e,s,i){var a;if(e.length===0)return;let n=r.createTestRun(s);for(let o of e){let c=(a=s.include)!=null?a:r.items,u=ni(c,o.uri.fsPath);if(u.length!==0)try{let l=new nr(o.uri.fsPath,Dt(o.uri.fsPath));await Jc(r,l,n,u,"debug",t,i)}catch(l){if(l instanceof Error){let h=l;console.error(l),L.info(`Error in ${o.name}: ${l.toString()}`),u.forEach(p=>n.errored(p,new ce.TestMessage(h.toString())))}}}n.end()}function ig(r){if(Array.isArray(r))return r;let t=[];return r.forEach(e=>t.push(e)),t}function ng(r,t){let e=(0,Zn.relative)(r,t);return!e.startsWith("..")&&!(0,Zn.isAbsolute)(e)}function ni(r,t){return ig(r).filter(e=>e.uri&&ng(t,e.uri.fsPath))}function ag(r,t){if(t.length===1)return t[0];let e=ig(r);if(e.length<1)return t[0];let s=t.find(i=>e[0].uri&&ng(i.uri.fsPath,e[0].uri.fsPath));if(!s)throw new Error("Multiple workspace roots are found; cannot deduce workspace to which these tests belong to");return s}var Zw="Test result not found. \r\nIf you set `vitest.commandLine` please check: \r\n    Did you set `vitest.commandLine` to `run` mode? (This extension requires `watch` mode to get the results from Vitest api)\r\n    Does it have the ability to append extra arguments? (For example it should be `yarn test --` rather than `yarn test`)\r\nAre there tests with the same name?\r\nCan you run vitest successfully on this file? Does it need custom option to run?\r\n";async function Jc(r,t,e,s,i,n,a){var E,g;if(i!=="debug"&&t===void 0)throw new Error("should provide runner if not debug");let o=ag(s,ce.workspace.workspaceFolders),c=Te(o),u=new Set,l=new Map,h=[];for(let b of s){let w=Ue.get(b);if(!w){L.workspaceError(o.name,`Item not found ${(E=b.uri)==null?void 0:E.fsPath}`),e.errored(b,new ce.TestMessage("Item not found"));continue}w instanceof yt&&await w.load(r);let C;if(w instanceof yt)C=b;else if(C=w.fileItem,!C){L.workspaceError(o.name,`File item not found for item ${(g=b.uri)==null?void 0:g.fsPath}`),e.errored(b,new ce.TestMessage("Item not found"));continue}h.push(C);let z=In(C);for(let q of z)l.set(q.id.replace(/@\d+$/g,""),q);for(let q of In(b))u.add(q)}u.forEach(b=>{e.started(b)});let p;if(c.commandLine){let b=c.commandLine.trim();p={cmd:b.split(" ")[0],args:b.split(" ").slice(1)}}let f=async({args:b,cfg:w,log:C,onProcessEnd:z,registerOnTestFinished:q})=>{let K,v=ce.debug.onDidStartDebugSession(M=>{K=M,v.dispose()}),B=ce.debug.onDidTerminateDebugSession(M=>{if(K!==M)return;let J=!1,se=!1,W=ce.debug.onDidStartDebugSession(G=>{W.dispose(),!J&&(se=!0,K=G)});setTimeout(()=>{se||(J=!0,z(),B.dispose(),W.dispose())},200)});q(()=>{ce.debug.stopDebugging(K)}),ce.debug.startDebugging(o,{type:"pwa-node",request:"launch",name:"Debug Current Test File",autoAttachChildProcesses:!0,skipFiles:c.debugExclude,program:_r(o.uri.fsPath),args:b,smartStep:!0,env:w.env}).then(()=>{C("Debugging started")},M=>{C("Start debugging failed"),C(M.toString()),v.dispose(),B.dispose()})},y=new Set,{output:x,testResultFiles:T}=await t.scheduleRun(h.map(b=>b.uri.fsPath),s.length===1?Ue.get(s[0]).getFullPattern():"",{info:b=>{s.length===1?e.appendOutput(b,void 0,s[0]):e.appendOutput(b)},error:L.error},c.env||void 0,p,i==="update",b=>{Qn(b,n,r,e,!1,!1,y)},i==="debug"?f:void 0,a);if(Qn(T,n,r,e,!0,!1,y),i!=="debug"&&!(a!=null&&a.isCancellationRequested))for(let b of u){let w=!1;for(let C of y)C.id===b.id&&(w=!0);w||(e.errored(b,new ce.TestMessage(`${Zw}\r
\r
Vitest output:\r
${ns(x)}`)),L.error(`Test not found: ${b.id}`))}}d();var Vt=ie(require("vscode"));var ea=class extends Vt.Disposable{constructor(){super(()=>{this.item.dispose()});this.item=Vt.window.createStatusBarItem(Vt.StatusBarAlignment.Left,5);this.toDefaultMode()}toDefaultMode(){this.item.command="vitest.startWatching",this.item.text="$(test-view-icon) Vitest",this.item.tooltip="Click to start watch mode",this.setBackgroundColor(!1),this.item.show()}hide(){this.item.hide()}toWatchMode({passed:e,failed:s,skipped:i}){this.item.command="vitest.stopWatching";let n=e+s,a=Number((e/n*100).toFixed(0)),c=!isNaN(a)?a:0,u=a?i:"all";this.item.text=`$(eye-watch) ${e}/${n} passed (${c}%, ${u} skipped)`,this.item.tooltip="Vitest is watching. Click to stop.",this.setBackgroundColor(s>0),this.item.show()}toRunningMode(){this.item.command="vitest.stopWatching",this.item.text="$(loading~spin) Vitest is running",this.item.tooltip="Click to stop watching",this.setBackgroundColor(!1),this.item.show()}setBackgroundColor(e){$s().changeBackgroundColor&&(this.item.backgroundColor=e?new Vt.ThemeColor("statusBarItem.errorBackground"):void 0)}};d();async function t1({port:r,url:t=`ws://localhost:${r}/__vitest_api__`,reconnectInterval:e,reconnectTries:s}){let i,n=Un(t,{reactive:As,reconnectInterval:e,reconnectTries:s,onFailedConnection:()=>i==null?void 0:i()});return new Promise((a,o)=>{i=()=>o(new Error("Unable to connect to Vitest API"));let c=new WeakSet;At(()=>{let u=n.ws;c.has(u)||(c.add(u),u.addEventListener("open",()=>{L.info("WS Opened"),n.rpc.getConfig().then(l=>{n.dispose(),a(l)})}),u.addEventListener("error",l=>{console.error("WS ERROR",l)}),u.addEventListener("close",()=>{L.info("WS Close")}))})})}async function og(r){let t=await xs(),e=r.find(a=>a.isCompatible&&!a.isDisabled&&a.isUsingVitestForSure);if(!e)return;let s=e.workspace.uri.fsPath,i=Rs(e.cmd,[...e.args,"--api.port",t.toString(),"--api.host","127.0.0.1"],{cwd:Je(s),env:_(_({},process.env),Te(s).env)}).child,n=await t1({port:t,reconnectInterval:500,reconnectTries:20});return i.kill(),n}async function s1(r){if(await Kf(),os.length===0){L.info("The extension is not activated because no Vitest environment was detected.");return}let t=ne.tests.createTestController(`${Hf}`,"Vitest"),e=await Xf();if(!r1(e)){let n=`Because Vitest version < 0.12.0 for every workspace folder, run/debug/watch tests from Vitest extension disabled.
`;L.error(n),e.some(a=>a.isUsingVitestForSure)&&ne.window.showWarningMessage(n),r.subscriptions.push(ne.commands.registerCommand("vitest.toggleWatching",()=>{ne.window.showWarningMessage(n)}),ne.commands.registerCommand("vitest.updateSnapshot",()=>{ne.window.showWarningMessage(n)}));return}let s=await og(e);if(!s){ne.window.showWarningMessage("Cannot run tests: no Vitest config found.");return}let i=i1(t,r,s);o1(t,e,i,r),r.subscriptions.push(t,i,ne.commands.registerCommand("vitest.updateSnapshot",n=>{sg(t,i,n)}),ne.workspace.onDidOpenTextDocument(n=>{i.discoverTestFromDoc(t,n)}),ne.workspace.onDidChangeTextDocument(n=>i.discoverTestFromDoc(t,n.document)))}function r1(r){return r.forEach(t=>{L.info(`Vitest Workspace [${t.workspace.name}]: Vitest version = ${t.version}`)}),r.filter(t=>!t.isCompatible&&t.isUsingVitestForSure).forEach(t=>{ne.window.showWarningMessage(`Because Vitest version < 0.12.0, run/debug/watch tests are disabled in workspace "${t.workspace.name}" 
`)}),!r.every(t=>!t.isCompatible)}function i1(r,t,e){let s=new Nn(e);return r.refreshHandler=async()=>{await s.discoverAllTestFilesInWorkspace(r)},r.resolveHandler=async i=>{if(!i)t.subscriptions.push(...await s.watchAllTestFilesInWorkspace(r));else{let n=Ue.get(i);n instanceof yt&&await n.updateFromDisk(r)}},ne.window.visibleTextEditors.forEach(i=>s.discoverTestFromDoc(r,i.document)),s}function n1(r){return r.reduce((t,e)=>({passed:t.passed+e.testStatus.value.passed,failed:t.failed+e.testStatus.value.failed,skipped:t.skipped+e.testStatus.value.skipped}),{passed:0,failed:0,skipped:0})}var ai;function a1(r,t,e,s){var c;let i=(c=r.map((u,l)=>Es.create(t,e,u,u.workspace,l)))!=null?c:[];ai=new ea,At(()=>{if(i.some(u=>u.isRunning.value)){ai.toRunningMode();return}else if(i.some(u=>u.isWatching.value)){ai.toWatchMode(n1(i));return}ai.toDefaultMode()});let n=()=>{i.forEach(u=>u.dispose())},a=()=>{i.forEach(u=>u.watch())};s.subscriptions.push({dispose:n},...i,ai,ne.commands.registerCommand("vitest.startWatching",a),ne.commands.registerCommand("vitest.stopWatching",n),ne.commands.registerCommand("vitest.toggleWatching",()=>{i.some(l=>l.isWatching.value)?n():a()})),t.createRunProfile("Run Tests (Watch Mode)",ne.TestRunProfileKind.Run,o,!1,void 0,!0);async function o(u,l){ne.workspace.workspaceFolders===void 0||ne.workspace.workspaceFolders.length===0||(await Promise.all(i.map(h=>h.watch())),i.forEach(h=>{var p;h.runTests(ni((p=u.include)!=null?p:[],h.workspace.uri.fsPath))}))}return i}function o1(r,t,e,s){var a;let i=(a=a1(t.filter(o=>o.isCompatible&&!o.isDisabled),r,e,s))!=null?a:[],n=t.filter(o=>o.isCompatible&&!o.isDisabled).map(o=>o.workspace);r.createRunProfile("Run Tests",ne.TestRunProfileKind.Run,tg.bind(null,r,e,i,n),!0),r.createRunProfile("Debug Tests",ne.TestRunProfileKind.Debug,rg.bind(null,r,e,n),!0)}function c1(){}0&&(module.exports={activate,deactivate});
/*! (c) 2020 Andrea Giammarchi */
