"use strict";var qd=Object.create;var Kr=Object.defineProperty;var Kd=Object.getOwnPropertyDescriptor;var Hd=Object.getOwnPropertyNames;var Zd=Object.getPrototypeOf,Qd=Object.prototype.hasOwnProperty;var Jd=(e,t,r)=>t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var n=(e,t)=>Kr(e,"name",{value:t,configurable:!0});var te=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Qo=(e,t)=>{for(var r in t)Kr(e,r,{get:t[r],enumerable:!0})},Xd=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Hd(t))!Qd.call(e,a)&&a!==r&&Kr(e,a,{get:()=>t[a],enumerable:!(o=Kd(t,a))||o.enumerable});return e};var Gt=(e,t,r)=>(r=e!=null?qd(Zd(e)):{},Xd(t||!e||!e.__esModule?Kr(r,"default",{value:e,enumerable:!0}):r,e));var Rt=(e,t,r)=>Jd(e,typeof t!="symbol"?t+"":t,r);var Ka=te(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.bytePairEncode=ft.BinaryMap=ft.binaryMapKey=void 0;var lm=n((e,t,r)=>{let o=r-t,a=16777215>>>Math.max(0,(3-o)*8),u=(e[t+0]|e[t+1]<<8|e[t+2]<<16)&a,i=16777215>>>Math.min(31,Math.max(0,(6-o)*8)),s=(e[t+3]|e[t+4]<<8|e[t+5]<<16)&i;return u+16777216*s},"binaryMapKey");ft.binaryMapKey=lm;var Jr=class Jr{constructor(){this.nested=new Map,this.final=new Map}get(t,r=0,o=t.length){var i;let a=o<6+r,u=(0,ft.binaryMapKey)(t,r,o);return a?this.final.get(u):(i=this.nested.get(u))==null?void 0:i.get(t,6+r,o)}set(t,r){let o=(0,ft.binaryMapKey)(t,0,t.length);if(t.length<6){this.final.set(o,r);return}let u=this.nested.get(o);if(u instanceof Jr)u.set(t.subarray(6),r);else{let i=new Jr;i.set(t.subarray(6),r),this.nested.set(o,i)}}};n(Jr,"BinaryMap");var ii=Jr;ft.BinaryMap=ii;var mt=new Int32Array(128),Le=new Int32Array(128);function cm(e,t,r){var l;if(r===1)return[t.get(e)];let o=2147483647,a=-1;for(;mt.length<r*2;)Le=new Int32Array(Le.length*2),mt=new Int32Array(mt.length*2);for(let c=0;c<r-1;c++){let d=(l=t.get(e,c,c+2))!=null?l:2147483647;d<o&&(o=d,a=c),Le[c]=c,mt[c]=d}Le[r-1]=r-1,mt[r-1]=2147483647,Le[r]=r,mt[r]=2147483647;let u=r+1;function i(c,d=0){if(c+d+2<u){let m=t.get(e,Le[c],Le[c+d+2]);if(m!==void 0)return m}return 2147483647}for(n(i,"getRank");o!==2147483647;){mt[Le[a]]=i(a,1),a>0&&(mt[Le[a-1]]=i(a-1,1));for(let c=a+1;c<u-1;c++)Le[c]=Le[c+1];u--,a=-1,o=2147483647;for(let c=0;c<u-1;c++){let d=mt[Le[c]];mt[Le[c]]<o&&(o=d,a=c)}}let s=[];for(let c=0;c<u-1;c++)s.push(t.get(e,Le[c],Le[c+1]));return s}n(cm,"bytePairEncode");ft.bytePairEncode=cm});var Ha=te($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.makeTextEncoder=void 0;var ui=class ui{constructor(){this.length=0,this.encoder=new TextEncoder}encode(t){let r=this.encoder.encode(t);return this.length=r.length,r}};n(ui,"UniversalTextEncoder");var si=ui,li=class li{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(t){for(;;){if(this.length=this.buffer.write(t,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(t)}}};n(li,"NodeTextEncoder");var ai=li,dm=n(()=>typeof Buffer<"u"?new ai:new si,"makeTextEncoder");$n.makeTextEncoder=dm});var Za=te(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.LRUCache=void 0;var mi=class mi{constructor(t){this.size=t,this.nodes=new Map}get(t){let r=this.nodes.get(t);if(r)return this.moveToHead(r),r.value}set(t,r){let o=this.nodes.get(t);if(o)o.value=r,this.moveToHead(o);else{let a=new di(t,r);this.nodes.set(t,a),this.addNode(a),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(t){this.removeNode(t),t.next=void 0,t.prev=void 0,this.addNode(t)}addNode(t){this.head&&(this.head.prev=t,t.next=this.head),this.tail||(this.tail=t),this.head=t}removeNode(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}};n(mi,"LRUCache");var ci=mi;Vn.LRUCache=ci;var fi=class fi{constructor(t,r){this.key=t,this.value=r}};n(fi,"Node");var di=fi});var gi=te(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.TikTokenizer=void 0;var mm=require("fs"),fm=require("util"),Gn=Ka(),pm=Ha(),_m=Za();function gm(e){let t=new Map;try{let o=mm.readFileSync(e,"utf-8");return r(o),t}catch(o){throw new Error(`Failed to load from BPE encoder file stream: ${o}`)}function r(o){for(let a of o.split(/[\r\n]+/)){if(a.trim()==="")continue;let u=a.split(" ");if(u.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let i=new Uint8Array(Buffer.from(u[0],"base64")),s=parseInt(u[1]);if(!isNaN(s))t.set(i,s);else throw new Error(`Can't parse ${u[1]} to integer`)}}n(r,"processBpeRanks")}n(gm,"loadTikTokenBpe");function hm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n(hm,"escapeRegExp");var _i=class _i{constructor(t,r,o,a=8192){this.textEncoder=(0,pm.makeTextEncoder)(),this.textDecoder=new fm.TextDecoder("utf-8"),this.cache=new _m.LRUCache(a);let u=typeof t=="string"?gm(t):t;this.init(u,r,o)}init(t,r,o){this.encoder=new Gn.BinaryMap;for(let[a,u]of t)this.encoder.set(a,u);this.regex=new RegExp(o,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(a=>hm(a)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[a,u]of t)this.decoder.set(u,a);if(t.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[a,u]of r)this.specialTokensDecoder.set(u,a)}findNextSpecialToken(t,r,o){let a=r,u=null;if(o&&this.specialTokensRegex)for(;u=t.slice(a).match(this.specialTokensRegex),!(!u||o&&o.includes(u[0]));)a+=u.index+1;let i=u?a+u.index:t.length;return[u,i]}encode(t,r){let o=[],a=0;for(;;){let u,i;if([u,i]=this.findNextSpecialToken(t,a,r),i>a&&this.encodeByIndex(t,o,a,i),u){if(a=a+this.encodeSpecialToken(o,u),a>=t.length)break}else break}return o}encodeSpecialToken(t,r){var a;let o=(a=this.specialTokensEncoder)==null?void 0:a.get(r[0]);return t.push(o),r.index+r[0].length}encodeByIndex(t,r,o,a){let u,i=t.substring(o,a);for(this.regex.lastIndex=0;u=this.regex.exec(i);){let s=this.cache.get(u[0]);if(s)for(let l of s)r.push(l);else{let l=this.textEncoder.encode(u[0]),c=this.encoder.get(l,0,this.textEncoder.length);if(c!==void 0)r.push(c),this.cache.set(u[0],[c]);else{let d=(0,Gn.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let m of d)r.push(m);this.cache.set(u[0],d)}}}}encodeTrimSuffixByIndex(t,r,o,a,u,i,s){let l,c=t.substring(o,a);for(this.regex.lastIndex=0;l=this.regex.exec(c);){let d=l[0],m=this.cache.get(d);if(m)if(i+m.length<=u)i+=m.length,s+=d.length,r.push(...m);else{let f=u-i;i+=f,s+=d.length,r.push(...m.slice(0,f));break}else{let f=this.textEncoder.encode(d),p=this.encoder.get(f,0,f.length);if(p!==void 0)if(this.cache.set(d,[p]),i+1<=u)i++,s+=d.length,r.push(p);else break;else{let g=(0,Gn.bytePairEncode)(f,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),i+g.length<=u){i+=g.length,s+=d.length;for(let h of g)r.push(h)}else{let h=u-i;i+=h,s+=d.length;for(let w=0;w<h;w++)r.push(g[w]);break}}}if(i>=u)break}return{tokenCount:i,encodeLength:s}}encodeTrimSuffix(t,r,o){let a=[],u=0,i=0,s=0;for(;;){let c,d;if([c,d]=this.findNextSpecialToken(t,u,o),d>u){let{tokenCount:m,encodeLength:f}=this.encodeTrimSuffixByIndex(t,a,u,d,r,i,s);if(i=m,s=f,i>=r)break}if(c!==null){if(i++,i<=r&&(u=u+this.encodeSpecialToken(a,c),s+=c[0].length,u>=t.length)||i>=r)break}else break}let l=s===t.length?t:t.slice(0,s);return{tokenIds:a,text:l}}encodeTrimPrefix(t,r,o){let a=[],u=0,i=0,s=0,l=new Map;for(l.set(i,s);;){let f,p;if([f,p]=this.findNextSpecialToken(t,u,o),p>u){let g,h=t.substring(u,p);for(this.regex.lastIndex=0;g=this.regex.exec(h);){let w=g[0],I=this.cache.get(w);if(I)i+=I.length,s+=w.length,a.push(...I),l.set(i,s);else{let L=this.textEncoder.encode(w),P=this.encoder.get(L);if(P!==void 0)this.cache.set(w,[P]),i++,s+=w.length,a.push(P),l.set(i,s);else{let F=(0,Gn.bytePairEncode)(L,this.encoder,this.textEncoder.length);this.cache.set(w,F),i+=F.length,s+=w.length;for(let N of F)a.push(N);l.set(i,s)}}}}if(f!==null){if(u=u+this.encodeSpecialToken(a,f),i++,s+=f[0].length,l.set(i,s),u>=t.length)break}else break}if(i<=r)return{tokenIds:a,text:t};let c=i-r,d=0,m=0;for(let[f,p]of l)if(f>=c){d=f,m=p;break}if(d>r){let f=this.encode(t,o),p=f.slice(f.length-r);return{tokenIds:p,text:this.decode(p)}}return{tokenIds:a.slice(d),text:t.slice(m)}}decode(t){var o,a;let r=[];for(let u of t){let i=[],s=(o=this.decoder)==null?void 0:o.get(u);if(s!==void 0)i=Array.from(s);else{let l=(a=this.specialTokensDecoder)==null?void 0:a.get(u);if(l!==void 0){let c=this.textEncoder.encode(l);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};n(_i,"TikTokenizer");var pi=_i;zn.TikTokenizer=pi});var iu=te(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.createTokenizer=de.createByEncoderName=de.createByModelName=de.getRegexByModel=de.getRegexByEncoder=de.getSpecialTokensByModel=de.getSpecialTokensByEncoder=de.MODEL_TO_ENCODING=void 0;var Kn=require("fs"),hi=require("path"),ym=gi(),bm=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);de.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var qn="<|endoftext|>",Qa="<|fim_prefix|>",Ja="<|fim_middle|>",Xa="<|fim_suffix|>",Ya="<|endofprompt|>",Xr="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",eu="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",Im=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],tu=Im.join("|");function yi(e){let t="";if(de.MODEL_TO_ENCODING.has(e))t=de.MODEL_TO_ENCODING.get(e);else for(let[r,o]of bm)if(e.startsWith(r)){t=o;break}return t}n(yi,"getEncoderFromModelName");async function wm(e,t){let r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch file from ${e}. Status code: ${r.status}`);let o=await r.text();Kn.writeFileSync(t,o)}n(wm,"fetchAndSaveFile");function bi(e){let t=new Map([[qn,50256]]);switch(e){case"o200k_base":t=new Map([[qn,199999],[Ya,200018]]);break;case"cl100k_base":t=new Map([[qn,100257],[Qa,100258],[Ja,100259],[Xa,100260],[Ya,100276]]);break;case"p50k_edit":t=new Map([[qn,50256],[Qa,50281],[Ja,50282],[Xa,50283]]);break;default:break}return t}n(bi,"getSpecialTokensByEncoder");de.getSpecialTokensByEncoder=bi;function xm(e){let t=yi(e);return bi(t)}n(xm,"getSpecialTokensByModel");de.getSpecialTokensByModel=xm;function ru(e){switch(e){case"o200k_base":return tu;case"cl100k_base":return eu;default:break}return Xr}n(ru,"getRegexByEncoder");de.getRegexByEncoder=ru;function Sm(e){let t=yi(e);return ru(t)}n(Sm,"getRegexByModel");de.getRegexByModel=Sm;async function Em(e,t=null){return nu(yi(e),t)}n(Em,"createByModelName");de.createByModelName=Em;async function nu(e,t=null){let r,o,a=bi(e);switch(e){case"o200k_base":r=tu,o="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=eu,o="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=Xr,o="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=Xr,o="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=Xr,o="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=Xr,o="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${e}]`)}t!==null&&(a=new Map([...a,...t]));let u=hi.basename(o),i=hi.resolve(__dirname,"..","model");Kn.existsSync(i)||Kn.mkdirSync(i,{recursive:!0});let s=hi.resolve(i,u);return Kn.existsSync(s)||(console.log(`Downloading file from ${o}`),await wm(o,s),console.log(`Saved file to ${s}`)),ou(s,a,r)}n(nu,"createByEncoderName");de.createByEncoderName=nu;function ou(e,t,r,o=8192){return new ym.TikTokenizer(e,t,r,o)}n(ou,"createTokenizer");de.createTokenizer=ou});var su=te(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.createTokenizer=me.createByEncoderName=me.createByModelName=me.getSpecialTokensByModel=me.getSpecialTokensByEncoder=me.getRegexByModel=me.getRegexByEncoder=me.MODEL_TO_ENCODING=me.TikTokenizer=void 0;var Tm=gi();Object.defineProperty(me,"TikTokenizer",{enumerable:!0,get:n(function(){return Tm.TikTokenizer},"get")});var Lt=iu();Object.defineProperty(me,"MODEL_TO_ENCODING",{enumerable:!0,get:n(function(){return Lt.MODEL_TO_ENCODING},"get")});Object.defineProperty(me,"getRegexByEncoder",{enumerable:!0,get:n(function(){return Lt.getRegexByEncoder},"get")});Object.defineProperty(me,"getRegexByModel",{enumerable:!0,get:n(function(){return Lt.getRegexByModel},"get")});Object.defineProperty(me,"getSpecialTokensByEncoder",{enumerable:!0,get:n(function(){return Lt.getSpecialTokensByEncoder},"get")});Object.defineProperty(me,"getSpecialTokensByModel",{enumerable:!0,get:n(function(){return Lt.getSpecialTokensByModel},"get")});Object.defineProperty(me,"createByModelName",{enumerable:!0,get:n(function(){return Lt.createByModelName},"get")});Object.defineProperty(me,"createByEncoderName",{enumerable:!0,get:n(function(){return Lt.createByEncoderName},"get")});Object.defineProperty(me,"createTokenizer",{enumerable:!0,get:n(function(){return Lt.createTokenizer},"get")})});var gu=te((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;let _Parser=class _Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=n((i,s)=>{throw s},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(i){return Module.locateFile?Module.locateFile(i,scriptDirectory):scriptDirectory+i}n(locateFile,"locateFile");function logExceptionOnExit(i){i instanceof ExitStatus||err("exiting due to exception: "+i)}if(n(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=n((i,s)=>(i=isFileURI(i)?new URL(i):nodePath.normalize(i),fs.readFileSync(i,s?void 0:"utf8")),"read_"),readBinary=n(i=>{var s=read_(i,!0);return s.buffer||(s=new Uint8Array(s)),s},"readBinary"),readAsync=n((i,s,l)=>{i=isFileURI(i)?new URL(i):nodePath.normalize(i),fs.readFile(i,function(c,d){c?l(c):s(d.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=n((i,s)=>{if(keepRuntimeAlive())throw process.exitCode=i,s;logExceptionOnExit(s),process.exit(i)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=n(i=>{var s=new XMLHttpRequest;return s.open("GET",i,!1),s.send(null),s.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=n(i=>{var s=new XMLHttpRequest;return s.open("GET",i,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)},"readBinary")),readAsync=n((i,s,l)=>{var c=new XMLHttpRequest;c.open("GET",i,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?s(c.response):l()},c.onerror=l,c.send(null)},"readAsync"),setWindowTitle=n(i=>document.title=i,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(i,s,l){for(var c=s+l,d=s;i[d]&&!(d>=c);)++d;if(d-s>16&&i.buffer&&UTF8Decoder)return UTF8Decoder.decode(i.subarray(s,d));for(var m="";s<d;){var f=i[s++];if(128&f){var p=63&i[s++];if((224&f)!=192){var g=63&i[s++];if((f=(240&f)==224?(15&f)<<12|p<<6|g:(7&f)<<18|p<<12|g<<6|63&i[s++])<65536)m+=String.fromCharCode(f);else{var h=f-65536;m+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else m+=String.fromCharCode((31&f)<<6|p)}else m+=String.fromCharCode(f)}return m}n(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(i,s){return i?UTF8ArrayToString(HEAPU8,i,s):""}n(UTF8ToString,"UTF8ToString");function stringToUTF8Array(i,s,l,c){if(!(c>0))return 0;for(var d=l,m=l+c-1,f=0;f<i.length;++f){var p=i.charCodeAt(f);if(p>=55296&&p<=57343&&(p=65536+((1023&p)<<10)|1023&i.charCodeAt(++f)),p<=127){if(l>=m)break;s[l++]=p}else if(p<=2047){if(l+1>=m)break;s[l++]=192|p>>6,s[l++]=128|63&p}else if(p<=65535){if(l+2>=m)break;s[l++]=224|p>>12,s[l++]=128|p>>6&63,s[l++]=128|63&p}else{if(l+3>=m)break;s[l++]=240|p>>18,s[l++]=128|p>>12&63,s[l++]=128|p>>6&63,s[l++]=128|63&p}}return s[l]=0,l-d}n(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(i,s,l){return stringToUTF8Array(i,HEAPU8,s,l)}n(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(i){for(var s=0,l=0;l<i.length;++l){var c=i.charCodeAt(l);c<=127?s++:c<=2047?s+=2:c>=55296&&c<=57343?(s+=4,++l):s+=3}return s}n(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(i){buffer=i,Module.HEAP8=HEAP8=new Int8Array(i),Module.HEAP16=HEAP16=new Int16Array(i),Module.HEAP32=HEAP32=new Int32Array(i),Module.HEAPU8=HEAPU8=new Uint8Array(i),Module.HEAPU16=HEAPU16=new Uint16Array(i),Module.HEAPU32=HEAPU32=new Uint32Array(i),Module.HEAPF32=HEAPF32=new Float32Array(i),Module.HEAPF64=HEAPF64=new Float64Array(i)}n(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}n(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}n(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}n(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}n(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}n(postRun,"postRun");function addOnPreRun(i){__ATPRERUN__.unshift(i)}n(addOnPreRun,"addOnPreRun");function addOnInit(i){__ATINIT__.unshift(i)}n(addOnInit,"addOnInit");function addOnPostRun(i){__ATPOSTRUN__.unshift(i)}n(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(i){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}n(addRunDependency,"addRunDependency");function removeRunDependency(i){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var s=dependenciesFulfilled;dependenciesFulfilled=null,s()}}n(removeRunDependency,"removeRunDependency");function abort(i){throw Module.onAbort&&Module.onAbort(i),err(i="Aborted("+i+")"),ABORT=!0,EXITSTATUS=1,i+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(i)}n(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(i){return i.startsWith(dataURIPrefix)}n(isDataURI,"isDataURI");function isFileURI(i){return i.startsWith("file://")}n(isFileURI,"isFileURI");function getBinary(i){try{if(i==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(i);throw"both async and sync fetching of the wasm failed"}catch(s){abort(s)}}n(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){if(!i.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return i.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(i,s){readAsync(wasmBinaryFile,function(l){i(new Uint8Array(l))},s)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}n(getBinaryPromise,"getBinaryPromise");function createWasm(){var i={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function s(d,m){var f=d.exports;f=relocateExports(f,1024);var p=getDylinkMetadata(m);p.neededDynlibs&&(dynamicLibraries=p.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(f,"main"),Module.asm=f,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}n(s,"t");function l(d){s(d.instance,d.module)}n(l,"r");function c(d){return getBinaryPromise().then(function(m){return WebAssembly.instantiate(m,i)}).then(function(m){return m}).then(d,function(m){err("failed to asynchronously prepare wasm: "+m),abort(m)})}if(n(c,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(i,s)}catch(d){return err("Module.instantiateWasm callback failed with error: "+d),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?c(l):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(d){return WebAssembly.instantiateStreaming(d,i).then(l,function(m){return err("wasm streaming compile failed: "+m),err("falling back to ArrayBuffer instantiation"),c(l)})}),{}}n(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(i){this.name="ExitStatus",this.message="Program terminated with exit("+i+")",this.status=i}n(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:n(function(i,s){var l=GOT[s];return l||(l=GOT[s]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(s)||(l.required=!0),l},"get")};function callRuntimeCallbacks(i){for(;i.length>0;)i.shift()(Module)}n(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(i){var s=0,l=0;function c(){for(var B=0,E=1;;){var O=i[s++];if(B+=(127&O)*E,E*=128,!(128&O))break}return B}n(c,"_");function d(){var B=c();return UTF8ArrayToString(i,(s+=B)-B,B)}n(d,"n");function m(B,E){if(B)throw new Error(E)}n(m,"s");var f="dylink.0";if(i instanceof WebAssembly.Module){var p=WebAssembly.Module.customSections(i,f);p.length===0&&(f="dylink",p=WebAssembly.Module.customSections(i,f)),m(p.length===0,"need dylink section"),l=(i=new Uint8Array(p[0])).length}else{m(new Uint32Array(new Uint8Array(i.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),m(i[8]!==0,"need the dylink section to be first"),s=9;var g=c();l=s+g,f=d()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(f=="dylink"){h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();for(var w=c(),I=0;I<w;++I){var L=d();h.neededDynlibs.push(L)}}else for(m(f!=="dylink.0");s<l;){var P=i[s++],F=c();if(P===1)h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();else if(P===2)for(w=c(),I=0;I<w;++I)L=d(),h.neededDynlibs.push(L);else if(P===3)for(var N=c();N--;){var U=d();256&c()&&h.tlsExports.add(U)}else if(P===4)for(N=c();N--;)d(),U=d(),(3&c())==1&&h.weakImports.add(U);else s+=F}return h}n(getDylinkMetadata,"getDylinkMetadata");function getValue(i,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":case"i8":return HEAP8[i>>0];case"i16":return HEAP16[i>>1];case"i32":case"i64":return HEAP32[i>>2];case"float":return HEAPF32[i>>2];case"double":return HEAPF64[i>>3];case"*":return HEAPU32[i>>2];default:abort("invalid type for getValue: "+s)}return null}n(getValue,"getValue");function asmjsMangle(i){return i.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(i)?i:"_"+i}n(asmjsMangle,"asmjsMangle");function mergeLibSymbols(i,s){for(var l in i)if(i.hasOwnProperty(l)){asmLibraryArg.hasOwnProperty(l)||(asmLibraryArg[l]=i[l]);var c=asmjsMangle(l);Module.hasOwnProperty(c)||(Module[c]=i[l]),l=="__main_argc_argv"&&(Module._main=i[l])}}n(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(i,s,l){var c=Module["dynCall_"+i];return l&&l.length?c.apply(null,[s].concat(l)):c.call(null,s)}n(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(i){var s=wasmTableMirror[i];return s||(i>=wasmTableMirror.length&&(wasmTableMirror.length=i+1),wasmTableMirror[i]=s=wasmTable.get(i)),s}n(getWasmTableEntry,"getWasmTableEntry");function dynCall(i,s,l){return i.includes("j")?dynCallLegacy(i,s,l):getWasmTableEntry(s).apply(null,l)}n(dynCall,"dynCall");function createInvokeFunction(i){return function(){var s=stackSave();try{return dynCall(i,arguments[0],Array.prototype.slice.call(arguments,1))}catch(l){if(stackRestore(s),l!==l+0)throw l;_setThrew(1,0)}}}n(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(i,s){return HEAPU8.fill(0,i,i+s),i}n(zeroMemory,"zeroMemory");function getMemory(i){if(runtimeInitialized)return zeroMemory(_malloc(i),i);var s=___heap_base,l=s+i+15&-16;return ___heap_base=l,GOT.__heap_base.value=l,s}n(getMemory,"getMemory");function isInternalSym(i){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(i)}n(isInternalSym,"isInternalSym");function uleb128Encode(i,s){i<128?s.push(i):s.push(i%128|128,i>>7)}n(uleb128Encode,"uleb128Encode");function sigToWasmTypes(i){for(var s={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},l={parameters:[],results:i[0]=="v"?[]:[s[i[0]]]},c=1;c<i.length;++c)l.parameters.push(s[i[c]]),i[c]==="j"&&l.parameters.push("i32");return l}n(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(i,s){var l=i.slice(0,1),c=i.slice(1),d={i:127,p:127,j:126,f:125,d:124};s.push(96),uleb128Encode(c.length,s);for(var m=0;m<c.length;++m)s.push(d[c[m]]);l=="v"?s.push(0):s.push(1,d[l])}n(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(i,s){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(s),i);var l=[1];generateFuncType(s,l);var c=[0,97,115,109,1,0,0,0,1];uleb128Encode(l.length,c),c.push.apply(c,l),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var d=new WebAssembly.Module(new Uint8Array(c));return new WebAssembly.Instance(d,{e:{f:i}}).exports.f}n(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(i,s){if(functionsInTableMap)for(var l=i;l<i+s;l++){var c=getWasmTableEntry(l);c&&functionsInTableMap.set(c,l)}}n(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(i){throw i instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":i}return wasmTable.length-1}n(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(i,s){wasmTable.set(i,s),wasmTableMirror[i]=wasmTable.get(i)}n(setWasmTableEntry,"setWasmTableEntry");function addFunction(i,s){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(i))return functionsInTableMap.get(i);var l=getEmptyTableSlot();try{setWasmTableEntry(l,i)}catch(c){if(!(c instanceof TypeError))throw c;setWasmTableEntry(l,convertJsFunctionToWasm(i,s))}return functionsInTableMap.set(i,l),l}n(addFunction,"addFunction");function updateGOT(i,s){for(var l in i)if(!isInternalSym(l)){var c=i[l];l.startsWith("orig$")&&(l=l.split("$")[1],s=!0),GOT[l]||(GOT[l]=new WebAssembly.Global({value:"i32",mutable:!0})),(s||GOT[l].value==0)&&(typeof c=="function"?GOT[l].value=addFunction(c):typeof c=="number"?GOT[l].value=c:err("unhandled export type for `"+l+"`: "+typeof c))}}n(updateGOT,"updateGOT");function relocateExports(i,s,l){var c={};for(var d in i){var m=i[d];typeof m=="object"&&(m=m.value),typeof m=="number"&&(m+=s),c[d]=m}return updateGOT(c,l),c}n(relocateExports,"relocateExports");function resolveGlobalSymbol(i,s){var l;return s&&(l=asmLibraryArg["orig$"+i]),l||(l=asmLibraryArg[i])&&l.stub&&(l=void 0),l||(l=Module[asmjsMangle(i)]),!l&&i.startsWith("invoke_")&&(l=createInvokeFunction(i.split("_")[1])),l}n(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(i,s){return Math.ceil(i/s)*s}n(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(i){var s=resolveGlobalSymbol(i,!1);return s||(s=moduleExports[i]),s}n(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:n(function(i,s){switch(s){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(s in asmLibraryArg)return asmLibraryArg[s];var l;return s in i||(i[s]=function(){return l||(l=resolveSymbol(s)),l.apply(null,arguments)}),i[s]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(n(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(n(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(i){return postInstantiation(i.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return n(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(i,s){return i.then(function(){return loadDynamicLibrary(s,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(i){loadDynamicLibrary(i,flags)}),loadModule())}n(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(i,s,l){s=s||{global:!0,nodelete:!0};var c=LDSO.loadedLibsByName[i];if(c)return s.global&&!c.global&&(c.global=!0,c.module!=="loading"&&mergeLibSymbols(c.module,i)),s.nodelete&&c.refcount!==1/0&&(c.refcount=1/0),c.refcount++,l&&(LDSO.loadedLibsByHandle[l]=c),!s.loadAsync||Promise.resolve(!0);function d(p){if(s.fs&&s.fs.findObject(p)){var g=s.fs.readFile(p,{encoding:"binary"});return g instanceof Uint8Array||(g=new Uint8Array(g)),s.loadAsync?Promise.resolve(g):g}if(p=locateFile(p),s.loadAsync)return new Promise(function(h,w){readAsync(p,I=>h(new Uint8Array(I)),w)});if(!readBinary)throw new Error(p+": file not found, and synchronous loading of external files is not available");return readBinary(p)}n(d,"n");function m(){if(typeof preloadedWasm<"u"&&preloadedWasm[i]){var p=preloadedWasm[i];return s.loadAsync?Promise.resolve(p):p}return s.loadAsync?d(i).then(function(g){return loadWebAssemblyModule(g,s,l)}):loadWebAssemblyModule(d(i),s,l)}n(m,"s");function f(p){c.global&&mergeLibSymbols(p,i),c.module=p}return n(f,"a"),c={refcount:s.nodelete?1/0:1,name:i,module:"loading",global:s.global},LDSO.loadedLibsByName[i]=c,l&&(LDSO.loadedLibsByHandle[l]=c),s.loadAsync?m().then(function(p){return f(p),!0}):(f(m()),!0)}n(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var i in GOT)if(GOT[i].value==0){var s=resolveGlobalSymbol(i,!0);if(!s&&!GOT[i].required)continue;if(typeof s=="function")GOT[i].value=addFunction(s,s.sig);else{if(typeof s!="number")throw new Error("bad export type for `"+i+"`: "+typeof s);GOT[i].value=s}}}n(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(i,s){return i.then(function(){return loadDynamicLibrary(s,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}n(preloadDylibs,"preloadDylibs");function setValue(i,s,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":HEAP8[i>>0]=s;break;case"i16":HEAP16[i>>1]=s;break;case"i32":HEAP32[i>>2]=s;break;case"i64":tempI64=[s>>>0,(tempDouble=s,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1];break;case"float":HEAPF32[i>>2]=s;break;case"double":HEAPF64[i>>3]=s;break;case"*":HEAPU32[i>>2]=s;break;default:abort("invalid type for setValue: "+l)}}n(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}n(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}n(_abort,"_abort");function _emscripten_date_now(){return Date.now()}n(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(i,s,l){HEAPU8.copyWithin(i,s,s+l)}n(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}n(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(i){try{return wasmMemory.grow(i-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}n(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(i){var s=HEAPU8.length;i>>>=0;var l=getHeapMax();if(i>l)return!1;for(var c=1;c<=4;c*=2){var d=s*(1+.2/c);if(d=Math.min(d,i+100663296),emscripten_realloc_buffer(Math.min(l,(m=Math.max(i,d))+((f=65536)-m%f)%f)))return!0}var m,f;return!1}n(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var i=process.hrtime();return 1e3*i[0]+i[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:n(function(i,s,l){if(PATH.isAbs(s))return s;var c;if(i===-100?c=FS.cwd():c=SYSCALLS.getStreamFromFD(i).path,s.length==0){if(!l)throw new FS.ErrnoError(44);return c}return PATH.join2(c,s)},"calculateAt"),doStat:n(function(i,s,l){try{var c=i(s)}catch(p){if(p&&p.node&&PATH.normalize(s)!==PATH.normalize(FS.getPath(p.node)))return-54;throw p}HEAP32[l>>2]=c.dev,HEAP32[l+8>>2]=c.ino,HEAP32[l+12>>2]=c.mode,HEAPU32[l+16>>2]=c.nlink,HEAP32[l+20>>2]=c.uid,HEAP32[l+24>>2]=c.gid,HEAP32[l+28>>2]=c.rdev,tempI64=[c.size>>>0,(tempDouble=c.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+40>>2]=tempI64[0],HEAP32[l+44>>2]=tempI64[1],HEAP32[l+48>>2]=4096,HEAP32[l+52>>2]=c.blocks;var d=c.atime.getTime(),m=c.mtime.getTime(),f=c.ctime.getTime();return tempI64=[Math.floor(d/1e3)>>>0,(tempDouble=Math.floor(d/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+56>>2]=tempI64[0],HEAP32[l+60>>2]=tempI64[1],HEAPU32[l+64>>2]=d%1e3*1e3,tempI64=[Math.floor(m/1e3)>>>0,(tempDouble=Math.floor(m/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+72>>2]=tempI64[0],HEAP32[l+76>>2]=tempI64[1],HEAPU32[l+80>>2]=m%1e3*1e3,tempI64=[Math.floor(f/1e3)>>>0,(tempDouble=Math.floor(f/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+88>>2]=tempI64[0],HEAP32[l+92>>2]=tempI64[1],HEAPU32[l+96>>2]=f%1e3*1e3,tempI64=[c.ino>>>0,(tempDouble=c.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+104>>2]=tempI64[0],HEAP32[l+108>>2]=tempI64[1],0},"doStat"),doMsync:n(function(i,s,l,c,d){if(!FS.isFile(s.node.mode))throw new FS.ErrnoError(43);if(2&c)return 0;var m=HEAPU8.slice(i,i+l);FS.msync(s,m,d,l,c)},"doMsync"),varargs:void 0,get:n(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:n(function(i){return UTF8ToString(i)},"getStr"),getStreamFromFD:n(function(i){var s=FS.getStream(i);if(!s)throw new FS.ErrnoError(8);return s},"getStreamFromFD")};function _proc_exit(i){EXITSTATUS=i,keepRuntimeAlive()||(Module.onExit&&Module.onExit(i),ABORT=!0),quit_(i,new ExitStatus(i))}n(_proc_exit,"_proc_exit");function exitJS(i,s){EXITSTATUS=i,_proc_exit(i)}n(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(i){try{var s=SYSCALLS.getStreamFromFD(i);return FS.close(s),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}n(_fd_close,"_fd_close");function convertI32PairToI53Checked(i,s){return s+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*s:NaN}n(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(i,s,l,c,d){try{var m=convertI32PairToI53Checked(s,l);if(isNaN(m))return 61;var f=SYSCALLS.getStreamFromFD(i);return FS.llseek(f,m,c),tempI64=[f.position>>>0,(tempDouble=f.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[d>>2]=tempI64[0],HEAP32[d+4>>2]=tempI64[1],f.getdents&&m===0&&c===0&&(f.getdents=null),0}catch(p){if(typeof FS>"u"||!(p instanceof FS.ErrnoError))throw p;return p.errno}}n(_fd_seek,"_fd_seek");function doWritev(i,s,l,c){for(var d=0,m=0;m<l;m++){var f=HEAPU32[s>>2],p=HEAPU32[s+4>>2];s+=8;var g=FS.write(i,HEAP8,f,p,c);if(g<0)return-1;d+=g,c!==void 0&&(c+=g)}return d}n(doWritev,"doWritev");function _fd_write(i,s,l,c){try{var d=doWritev(SYSCALLS.getStreamFromFD(i),s,l);return HEAPU32[c>>2]=d,0}catch(m){if(typeof FS>"u"||!(m instanceof FS.ErrnoError))throw m;return m.errno}}n(_fd_write,"_fd_write");function _tree_sitter_log_callback(i,s){if(currentLogCallback){let l=UTF8ToString(s);currentLogCallback(l,i!==0)}}n(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(i,s,l,c,d){var m=currentParseCallback(s,{row:l,column:c});typeof m=="string"?(setValue(d,m.length,"i32"),stringToUTF16(m,i,10240)):setValue(d,0,"i32")}n(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(i){if(i instanceof ExitStatus||i=="unwind")return EXITSTATUS;quit_(1,i)}n(handleException,"handleException");function allocateUTF8OnStack(i){var s=lengthBytesUTF8(i)+1,l=stackAlloc(s);return stringToUTF8Array(i,HEAP8,l,s),l}n(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(i,s,l){if(l===void 0&&(l=2147483647),l<2)return 0;for(var c=s,d=(l-=2)<2*i.length?l/2:i.length,m=0;m<d;++m){var f=i.charCodeAt(m);HEAP16[s>>1]=f,s+=2}return HEAP16[s>>1]=0,s-c}n(stringToUTF16,"stringToUTF16");function AsciiToString(i){for(var s="";;){var l=HEAPU8[i++>>0];if(!l)return s;s+=String.fromCharCode(l)}}n(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(i){var s=Module._main;if(s){(i=i||[]).unshift(thisProgram);var l=i.length,c=stackAlloc(4*(l+1)),d=c>>2;i.forEach(f=>{HEAP32[d++]=allocateUTF8OnStack(f)}),HEAP32[d]=0;try{var m=s(l,c);return exitJS(m,!0),m}catch(f){return handleException(f)}}}n(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=n(function i(){calledRun||run(),calledRun||(dependenciesFulfilled=i)},"e");var dylibsLoaded=!1;function run(i){function s(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(i),postRun()))}n(s,"t"),i=i||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),s()},1)):s()))}if(n(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;let e=class e{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(s){let l;if(s){if(s.constructor!==Language)throw new Error("Argument must be a Language");{l=s[0];let c=C._ts_language_version(l);if(c<MIN_COMPATIBLE_VERSION||VERSION<c)throw new Error(`Incompatible language version ${c}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else l=0,s=null;return this.language=s,C._ts_parser_set_language(this[0],l),this}getLanguage(){return this.language}parse(s,l,c){if(typeof s=="string")currentParseCallback=n((g,h,w)=>s.slice(g,w),"currentParseCallback");else{if(typeof s!="function")throw new Error("Argument must be a string or a function");currentParseCallback=s}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let d=0,m=0;if(c&&c.includedRanges){d=c.includedRanges.length,m=C._calloc(d,SIZE_OF_RANGE);let g=m;for(let h=0;h<d;h++)marshalRange(g,c.includedRanges[h]),g+=SIZE_OF_RANGE}let f=C._ts_parser_parse_wasm(this[0],this[1],l?l[0]:0,m,d);if(!f)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let p=new Tree(INTERNAL,f,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,p}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(s){C._ts_parser_set_timeout_micros(this[0],s)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(s){if(s){if(typeof s!="function")throw new Error("Logger callback must be a function")}else s=null;return this.logCallback=s,this}getLogger(){return this.logCallback}};n(e,"ParserImpl");let ParserImpl=e,t=class t{constructor(s,l,c,d){assertInternal(s),this[0]=l,this.language=c,this.textCallback=d}copy(){let s=C._ts_tree_copy(this[0]);return new t(INTERNAL,s,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(s){marshalEdit(s),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(s){if(s.constructor!==t)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],s[0]);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(l);if(l>0){let m=c;for(let f=0;f<l;f++)d[f]=unmarshalRange(m),m+=SIZE_OF_RANGE;C._free(c)}return d}};n(t,"Tree");let Tree=t,r=class r{constructor(s,l){assertInternal(s),this.tree=l}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(s){return this.id===s.id}child(s){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],s),unmarshalNode(this.tree)}namedChild(s){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],s),unmarshalNode(this.tree)}childForFieldId(s){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],s),unmarshalNode(this.tree)}childForFieldName(s){let l=this.tree.language.fields.indexOf(s);if(l!==-1)return this.childForFieldId(l)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let s=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(s),s>0){let c=l;for(let d=0;d<s;d++)this._children[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(l)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let s=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(s),s>0){let c=l;for(let d=0;d<s;d++)this._namedChildren[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(l)}}return this._namedChildren}descendantsOfType(s,l,c){Array.isArray(s)||(s=[s]),l||(l=ZERO_POINT),c||(c=ZERO_POINT);let d=[],m=this.tree.language.types;for(let w=0,I=m.length;w<I;w++)s.includes(m[w])&&d.push(w);let f=C._malloc(SIZE_OF_INT*d.length);for(let w=0,I=d.length;w<I;w++)setValue(f+w*SIZE_OF_INT,d[w],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],f,d.length,l.row,l.column,c.row,c.column);let p=getValue(TRANSFER_BUFFER,"i32"),g=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),h=new Array(p);if(p>0){let w=g;for(let I=0;I<p;I++)h[I]=unmarshalNode(this.tree,w),w+=SIZE_OF_NODE}return C._free(g),C._free(f),h}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(s,l=s){if(typeof s!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,s,"i32"),setValue(c+SIZE_OF_INT,l,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(s,l=s){if(typeof s!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,s,"i32"),setValue(c+SIZE_OF_INT,l,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(s,l=s){if(!isPoint(s)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,s),marshalPoint(c+SIZE_OF_POINT,l),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(s,l=s){if(!isPoint(s)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,s),marshalPoint(c+SIZE_OF_POINT,l),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let s=C._ts_node_to_string_wasm(this.tree[0]),l=AsciiToString(s);return C._free(s),l}};n(r,"Node");let Node=r,o=class o{constructor(s,l){assertInternal(s),this.tree=l,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(s){marshalNode(s),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let s=C._ts_tree_cursor_start_index_wasm(this.tree[0]),l=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,s,l)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let s=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),s===1}gotoNextSibling(){marshalTreeCursor(this);let s=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),s===1}gotoParent(){marshalTreeCursor(this);let s=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),s===1}};n(o,"TreeCursor");let TreeCursor=o,a=class a{constructor(s,l){assertInternal(s),this[0]=l,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let c=0,d=this.types.length;c<d;c++)C._ts_language_symbol_type(this[0],c)<2&&(this.types[c]=UTF8ToString(C._ts_language_symbol_name(this[0],c)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let c=0,d=this.fields.length;c<d;c++){let m=C._ts_language_field_name_for_id(this[0],c);this.fields[c]=m!==0?UTF8ToString(m):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(s){let l=this.fields.indexOf(s);return l!==-1?l:null}fieldNameForId(s){return this.fields[s]||null}idForNodeType(s,l){let c=lengthBytesUTF8(s),d=C._malloc(c+1);stringToUTF8(s,d,c+1);let m=C._ts_language_symbol_for_name(this[0],d,c,l);return C._free(d),m||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(s){let l=C._ts_language_symbol_name(this[0],s);return l?UTF8ToString(l):null}nodeTypeIsNamed(s){return!!C._ts_language_type_is_named_wasm(this[0],s)}nodeTypeIsVisible(s){return!!C._ts_language_type_is_visible_wasm(this[0],s)}query(s){let l=lengthBytesUTF8(s),c=C._malloc(l+1);stringToUTF8(s,c,l+1);let d=C._ts_query_new(this[0],c,l,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!d){let N=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),U=UTF8ToString(c,getValue(TRANSFER_BUFFER,"i32")).length,B=s.substr(U,100).split(`
`)[0],E,O=B.match(QUERY_WORD_REGEX)[0];switch(N){case 2:E=new RangeError(`Bad node name '${O}'`);break;case 3:E=new RangeError(`Bad field name '${O}'`);break;case 4:E=new RangeError(`Bad capture name @${O}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${U}: '${B}'...`),O="";break;default:E=new SyntaxError(`Bad syntax at offset ${U}: '${B}'...`),O=""}throw E.index=U,E.length=O.length,C._free(c),E}let m=C._ts_query_string_count(d),f=C._ts_query_capture_count(d),p=C._ts_query_pattern_count(d),g=new Array(f),h=new Array(m);for(let N=0;N<f;N++){let U=C._ts_query_capture_name_for_id(d,N,TRANSFER_BUFFER),B=getValue(TRANSFER_BUFFER,"i32");g[N]=UTF8ToString(U,B)}for(let N=0;N<m;N++){let U=C._ts_query_string_value_for_id(d,N,TRANSFER_BUFFER),B=getValue(TRANSFER_BUFFER,"i32");h[N]=UTF8ToString(U,B)}let w=new Array(p),I=new Array(p),L=new Array(p),P=new Array(p),F=new Array(p);for(let N=0;N<p;N++){let U=C._ts_query_predicates_for_pattern(d,N,TRANSFER_BUFFER),B=getValue(TRANSFER_BUFFER,"i32");P[N]=[],F[N]=[];let E=[],O=U;for(let nt=0;nt<B;nt++){let dt=getValue(O,"i32");O+=SIZE_OF_INT;let It=getValue(O,"i32");if(O+=SIZE_OF_INT,dt===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:g[It]});else if(dt===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:h[It]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let v=E[0].value,x=!0;switch(v){case"not-eq?":x=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let A=E[1].name,k=E[2].name;F[N].push(function(ke){let ge,ie;for(let wt of ke)wt.name===A&&(ge=wt.node),wt.name===k&&(ie=wt.node);return ge===void 0||ie===void 0||ge.text===ie.text===x})}else{let A=E[1].name,k=E[2].value;F[N].push(function(ke){for(let ge of ke)if(ge.name===A)return ge.node.text===k===x;return!0})}break;case"not-match?":x=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let T=E[1].name,M=new RegExp(E[2].value);F[N].push(function(A){for(let k of A)if(k.name===T)return M.test(k.node.text)===x;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(A=>A.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');w[N]||(w[N]={}),w[N][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${v}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(A=>A.type!=="string"))throw new Error(`Arguments to \`#${v}\` predicate must be a strings.".`);let K=v==="is?"?I:L;K[N]||(K[N]={}),K[N][E[1].value]=E[2]?E[2].value:null;break;default:P[N].push({operator:v,operands:E.slice(1)})}E.length=0}}Object.freeze(w[N]),Object.freeze(I[N]),Object.freeze(L[N])}return C._free(c),new Query(INTERNAL,d,g,F,P,Object.freeze(w),Object.freeze(I),Object.freeze(L))}static load(s){let l;if(s instanceof Uint8Array)l=Promise.resolve(s);else{let d=s;if(typeof process<"u"&&process.versions&&process.versions.node){let m=require("fs");l=Promise.resolve(m.readFileSync(d))}else l=fetch(d).then(m=>m.arrayBuffer().then(f=>{if(m.ok)return new Uint8Array(f);{let p=new TextDecoder("utf-8").decode(f);throw new Error(`Language.load failed with status ${m.status}.

${p}`)}}))}let c=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return l.then(d=>c(d,{loadAsync:!0})).then(d=>{let m=Object.keys(d),f=m.find(g=>LANGUAGE_FUNCTION_REGEX.test(g)&&!g.includes("external_scanner_"));f||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(m,null,2)}`);let p=d[f]();return new a(INTERNAL,p)})}};n(a,"Language");let Language=a,u=class u{constructor(s,l,c,d,m,f,p,g){assertInternal(s),this[0]=l,this.captureNames=c,this.textPredicates=d,this.predicates=m,this.setProperties=f,this.assertedProperties=p,this.refutedProperties=g,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(s,l,c,d){l||(l=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let m=d.matchLimit;if(m===void 0)m=0;else if(typeof m!="number")throw new Error("Arguments must be numbers");marshalNode(s),C._ts_query_matches_wasm(this[0],s.tree[0],l.row,l.column,c.row,c.column,m);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=new Array(f);this.exceededMatchLimit=!!g;let w=0,I=p;for(let L=0;L<f;L++){let P=getValue(I,"i32");I+=SIZE_OF_INT;let F=getValue(I,"i32");I+=SIZE_OF_INT;let N=new Array(F);if(I=unmarshalCaptures(this,s.tree,I,N),this.textPredicates[P].every(U=>U(N))){h[w++]={pattern:P,captures:N};let U=this.setProperties[P];U&&(h[L].setProperties=U);let B=this.assertedProperties[P];B&&(h[L].assertedProperties=B);let E=this.refutedProperties[P];E&&(h[L].refutedProperties=E)}}return h.length=w,C._free(p),h}captures(s,l,c,d){l||(l=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let m=d.matchLimit;if(m===void 0)m=0;else if(typeof m!="number")throw new Error("Arguments must be numbers");marshalNode(s),C._ts_query_captures_wasm(this[0],s.tree[0],l.row,l.column,c.row,c.column,m);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=[];this.exceededMatchLimit=!!g;let w=[],I=p;for(let L=0;L<f;L++){let P=getValue(I,"i32");I+=SIZE_OF_INT;let F=getValue(I,"i32");I+=SIZE_OF_INT;let N=getValue(I,"i32");if(I+=SIZE_OF_INT,w.length=F,I=unmarshalCaptures(this,s.tree,I,w),this.textPredicates[P].every(U=>U(w))){let U=w[N],B=this.setProperties[P];B&&(U.setProperties=B);let E=this.assertedProperties[P];E&&(U.assertedProperties=E);let O=this.refutedProperties[P];O&&(U.refutedProperties=O),h.push(U)}}return C._free(p),h}predicatesForPattern(s){return this.predicates[s]}didExceedMatchLimit(){return this.exceededMatchLimit}};n(u,"Query");let Query=u;function getText(i,s,l){let c=l-s,d=i.textCallback(s,null,l);for(s+=d.length;s<l;){let m=i.textCallback(s,null,l);if(!(m&&m.length>0))break;s+=m.length,d+=m}return s>l&&(d=d.slice(0,c)),d}n(getText,"getText");function unmarshalCaptures(i,s,l,c){for(let d=0,m=c.length;d<m;d++){let f=getValue(l,"i32"),p=unmarshalNode(s,l+=SIZE_OF_INT);l+=SIZE_OF_NODE,c[d]={name:i.captureNames[f],node:p}}return l}n(unmarshalCaptures,"unmarshalCaptures");function assertInternal(i){if(i!==INTERNAL)throw new Error("Illegal constructor")}n(assertInternal,"assertInternal");function isPoint(i){return i&&typeof i.row=="number"&&typeof i.column=="number"}n(isPoint,"isPoint");function marshalNode(i){let s=TRANSFER_BUFFER;setValue(s,i.id,"i32"),s+=SIZE_OF_INT,setValue(s,i.startIndex,"i32"),s+=SIZE_OF_INT,setValue(s,i.startPosition.row,"i32"),s+=SIZE_OF_INT,setValue(s,i.startPosition.column,"i32"),s+=SIZE_OF_INT,setValue(s,i[0],"i32")}n(marshalNode,"marshalNode");function unmarshalNode(i,s=TRANSFER_BUFFER){let l=getValue(s,"i32");if(l===0)return null;let c=getValue(s+=SIZE_OF_INT,"i32"),d=getValue(s+=SIZE_OF_INT,"i32"),m=getValue(s+=SIZE_OF_INT,"i32"),f=getValue(s+=SIZE_OF_INT,"i32"),p=new Node(INTERNAL,i);return p.id=l,p.startIndex=c,p.startPosition={row:d,column:m},p[0]=f,p}n(unmarshalNode,"unmarshalNode");function marshalTreeCursor(i,s=TRANSFER_BUFFER){setValue(s+0*SIZE_OF_INT,i[0],"i32"),setValue(s+1*SIZE_OF_INT,i[1],"i32"),setValue(s+2*SIZE_OF_INT,i[2],"i32")}n(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(i){i[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),i[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),i[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}n(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(i,s){setValue(i,s.row,"i32"),setValue(i+SIZE_OF_INT,s.column,"i32")}n(marshalPoint,"marshalPoint");function unmarshalPoint(i){return{row:getValue(i,"i32"),column:getValue(i+SIZE_OF_INT,"i32")}}n(unmarshalPoint,"unmarshalPoint");function marshalRange(i,s){marshalPoint(i,s.startPosition),marshalPoint(i+=SIZE_OF_POINT,s.endPosition),setValue(i+=SIZE_OF_POINT,s.startIndex,"i32"),setValue(i+=SIZE_OF_INT,s.endIndex,"i32"),i+=SIZE_OF_INT}n(marshalRange,"marshalRange");function unmarshalRange(i){let s={};return s.startPosition=unmarshalPoint(i),i+=SIZE_OF_POINT,s.endPosition=unmarshalPoint(i),i+=SIZE_OF_POINT,s.startIndex=getValue(i,"i32"),i+=SIZE_OF_INT,s.endIndex=getValue(i,"i32"),s}n(unmarshalRange,"unmarshalRange");function marshalEdit(i){let s=TRANSFER_BUFFER;marshalPoint(s,i.startPosition),s+=SIZE_OF_POINT,marshalPoint(s,i.oldEndPosition),s+=SIZE_OF_POINT,marshalPoint(s,i.newEndPosition),s+=SIZE_OF_POINT,setValue(s,i.startIndex,"i32"),s+=SIZE_OF_INT,setValue(s,i.oldEndIndex,"i32"),s+=SIZE_OF_INT,setValue(s,i.newEndIndex,"i32"),s+=SIZE_OF_INT}n(marshalEdit,"marshalEdit");for(let i of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(_Parser.prototype,i,{value:ParserImpl.prototype[i],enumerable:!1,writable:!1});_Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}};n(_Parser,"Parser");let Parser=_Parser;return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Dc=te(As=>{var Uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");As.encode=function(e){if(0<=e&&e<Uc.length)return Uc[e];throw new TypeError("Must be between 0 and 63: "+e)};As.decode=function(e){var t=65,r=90,o=97,a=122,u=48,i=57,s=43,l=47,c=26,d=52;return t<=e&&e<=r?e-t:o<=e&&e<=a?e-o+c:u<=e&&e<=i?e-u+d:e==s?62:e==l?63:-1}});var Us=te(Os=>{var Bc=Dc(),Cs=5,jc=1<<Cs,Wc=jc-1,$c=jc;function yh(e){return e<0?(-e<<1)+1:(e<<1)+0}n(yh,"toVLQSigned");function bh(e){var t=(e&1)===1,r=e>>1;return t?-r:r}n(bh,"fromVLQSigned");Os.encode=n(function(t){var r="",o,a=yh(t);do o=a&Wc,a>>>=Cs,a>0&&(o|=$c),r+=Bc.encode(o);while(a>0);return r},"base64VLQ_encode");Os.decode=n(function(t,r,o){var a=t.length,u=0,i=0,s,l;do{if(r>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(l=Bc.decode(t.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+t.charAt(r-1));s=!!(l&$c),l&=Wc,u=u+(l<<i),i+=Cs}while(s);o.value=bh(u),o.rest=r},"base64VLQ_decode")});var Cr=te(Ne=>{function Ih(e,t,r){if(t in e)return e[t];if(arguments.length===3)return r;throw new Error('"'+t+'" is a required argument.')}n(Ih,"getArg");Ne.getArg=Ih;var Vc=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,wh=/^data:.+\,.+$/;function En(e){var t=e.match(Vc);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}n(En,"urlParse");Ne.urlParse=En;function kr(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}n(kr,"urlGenerate");Ne.urlGenerate=kr;function Ds(e){var t=e,r=En(e);if(r){if(!r.path)return e;t=r.path}for(var o=Ne.isAbsolute(t),a=t.split(/\/+/),u,i=0,s=a.length-1;s>=0;s--)u=a[s],u==="."?a.splice(s,1):u===".."?i++:i>0&&(u===""?(a.splice(s+1,i),i=0):(a.splice(s,2),i--));return t=a.join("/"),t===""&&(t=o?"/":"."),r?(r.path=t,kr(r)):t}n(Ds,"normalize");Ne.normalize=Ds;function Gc(e,t){e===""&&(e="."),t===""&&(t=".");var r=En(t),o=En(e);if(o&&(e=o.path||"/"),r&&!r.scheme)return o&&(r.scheme=o.scheme),kr(r);if(r||t.match(wh))return t;if(o&&!o.host&&!o.path)return o.host=t,kr(o);var a=t.charAt(0)==="/"?t:Ds(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=a,kr(o)):a}n(Gc,"join");Ne.join=Gc;Ne.isAbsolute=function(e){return e.charAt(0)==="/"||Vc.test(e)};function xh(e,t){e===""&&(e="."),e=e.replace(/\/$/,"");for(var r=0;t.indexOf(e+"/")!==0;){var o=e.lastIndexOf("/");if(o<0||(e=e.slice(0,o),e.match(/^([^\/]+:\/)?\/*$/)))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)}n(xh,"relative");Ne.relative=xh;var zc=function(){var e=Object.create(null);return!("__proto__"in e)}();function qc(e){return e}n(qc,"identity");function Sh(e){return Kc(e)?"$"+e:e}n(Sh,"toSetString");Ne.toSetString=zc?qc:Sh;function Eh(e){return Kc(e)?e.slice(1):e}n(Eh,"fromSetString");Ne.fromSetString=zc?qc:Eh;function Kc(e){if(!e)return!1;var t=e.length;if(t<9||e.charCodeAt(t-1)!==95||e.charCodeAt(t-2)!==95||e.charCodeAt(t-3)!==111||e.charCodeAt(t-4)!==116||e.charCodeAt(t-5)!==111||e.charCodeAt(t-6)!==114||e.charCodeAt(t-7)!==112||e.charCodeAt(t-8)!==95||e.charCodeAt(t-9)!==95)return!1;for(var r=t-10;r>=0;r--)if(e.charCodeAt(r)!==36)return!1;return!0}n(Kc,"isProtoString");function Th(e,t,r){var o=Ar(e.source,t.source);return o!==0||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0||r)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:Ar(e.name,t.name)}n(Th,"compareByOriginalPositions");Ne.compareByOriginalPositions=Th;function vh(e,t,r){var o=e.generatedLine-t.generatedLine;return o!==0||(o=e.generatedColumn-t.generatedColumn,o!==0||r)||(o=Ar(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:Ar(e.name,t.name)}n(vh,"compareByGeneratedPositionsDeflated");Ne.compareByGeneratedPositionsDeflated=vh;function Ar(e,t){return e===t?0:e===null?1:t===null?-1:e>t?1:-1}n(Ar,"strcmp");function Mh(e,t){var r=e.generatedLine-t.generatedLine;return r!==0||(r=e.generatedColumn-t.generatedColumn,r!==0)||(r=Ar(e.source,t.source),r!==0)||(r=e.originalLine-t.originalLine,r!==0)||(r=e.originalColumn-t.originalColumn,r!==0)?r:Ar(e.name,t.name)}n(Mh,"compareByGeneratedPositionsInflated");Ne.compareByGeneratedPositionsInflated=Mh;function Ph(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))}n(Ph,"parseSourceMapInput");Ne.parseSourceMapInput=Ph;function Rh(e,t,r){if(t=t||"",e&&(e[e.length-1]!=="/"&&t[0]!=="/"&&(e+="/"),t=e+t),r){var o=En(r);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var a=o.path.lastIndexOf("/");a>=0&&(o.path=o.path.substring(0,a+1))}t=Gc(kr(o),t)}return Ds(t)}n(Rh,"computeSourceURL");Ne.computeSourceURL=Rh});var Ws=te(Hc=>{var Bs=Cr(),js=Object.prototype.hasOwnProperty,ir=typeof Map<"u";function Pt(){this._array=[],this._set=ir?new Map:Object.create(null)}n(Pt,"ArraySet");Pt.fromArray=n(function(t,r){for(var o=new Pt,a=0,u=t.length;a<u;a++)o.add(t[a],r);return o},"ArraySet_fromArray");Pt.prototype.size=n(function(){return ir?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");Pt.prototype.add=n(function(t,r){var o=ir?t:Bs.toSetString(t),a=ir?this.has(t):js.call(this._set,o),u=this._array.length;(!a||r)&&this._array.push(t),a||(ir?this._set.set(t,u):this._set[o]=u)},"ArraySet_add");Pt.prototype.has=n(function(t){if(ir)return this._set.has(t);var r=Bs.toSetString(t);return js.call(this._set,r)},"ArraySet_has");Pt.prototype.indexOf=n(function(t){if(ir){var r=this._set.get(t);if(r>=0)return r}else{var o=Bs.toSetString(t);if(js.call(this._set,o))return this._set[o]}throw new Error('"'+t+'" is not in the set.')},"ArraySet_indexOf");Pt.prototype.at=n(function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},"ArraySet_at");Pt.prototype.toArray=n(function(){return this._array.slice()},"ArraySet_toArray");Hc.ArraySet=Pt});var Jc=te(Qc=>{var Zc=Cr();function Nh(e,t){var r=e.generatedLine,o=t.generatedLine,a=e.generatedColumn,u=t.generatedColumn;return o>r||o==r&&u>=a||Zc.compareByGeneratedPositionsInflated(e,t)<=0}n(Nh,"generatedPositionAfter");function Mo(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}n(Mo,"MappingList");Mo.prototype.unsortedForEach=n(function(t,r){this._array.forEach(t,r)},"MappingList_forEach");Mo.prototype.add=n(function(t){Nh(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},"MappingList_add");Mo.prototype.toArray=n(function(){return this._sorted||(this._array.sort(Zc.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Qc.MappingList=Mo});var $s=te(Xc=>{var Tn=Us(),_e=Cr(),Po=Ws().ArraySet,Lh=Jc().MappingList;function Ye(e){e||(e={}),this._file=_e.getArg(e,"file",null),this._sourceRoot=_e.getArg(e,"sourceRoot",null),this._skipValidation=_e.getArg(e,"skipValidation",!1),this._sources=new Po,this._names=new Po,this._mappings=new Lh,this._sourcesContents=null}n(Ye,"SourceMapGenerator");Ye.prototype._version=3;Ye.fromSourceMap=n(function(t){var r=t.sourceRoot,o=new Ye({file:t.file,sourceRoot:r});return t.eachMapping(function(a){var u={generated:{line:a.generatedLine,column:a.generatedColumn}};a.source!=null&&(u.source=a.source,r!=null&&(u.source=_e.relative(r,u.source)),u.original={line:a.originalLine,column:a.originalColumn},a.name!=null&&(u.name=a.name)),o.addMapping(u)}),t.sources.forEach(function(a){var u=a;r!==null&&(u=_e.relative(r,a)),o._sources.has(u)||o._sources.add(u);var i=t.sourceContentFor(a);i!=null&&o.setSourceContent(a,i)}),o},"SourceMapGenerator_fromSourceMap");Ye.prototype.addMapping=n(function(t){var r=_e.getArg(t,"generated"),o=_e.getArg(t,"original",null),a=_e.getArg(t,"source",null),u=_e.getArg(t,"name",null);this._skipValidation||this._validateMapping(r,o,a,u),a!=null&&(a=String(a),this._sources.has(a)||this._sources.add(a)),u!=null&&(u=String(u),this._names.has(u)||this._names.add(u)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:a,name:u})},"SourceMapGenerator_addMapping");Ye.prototype.setSourceContent=n(function(t,r){var o=t;this._sourceRoot!=null&&(o=_e.relative(this._sourceRoot,o)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[_e.toSetString(o)]=r):this._sourcesContents&&(delete this._sourcesContents[_e.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Ye.prototype.applySourceMap=n(function(t,r,o){var a=r;if(r==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);a=t.file}var u=this._sourceRoot;u!=null&&(a=_e.relative(u,a));var i=new Po,s=new Po;this._mappings.unsortedForEach(function(l){if(l.source===a&&l.originalLine!=null){var c=t.originalPositionFor({line:l.originalLine,column:l.originalColumn});c.source!=null&&(l.source=c.source,o!=null&&(l.source=_e.join(o,l.source)),u!=null&&(l.source=_e.relative(u,l.source)),l.originalLine=c.line,l.originalColumn=c.column,c.name!=null&&(l.name=c.name))}var d=l.source;d!=null&&!i.has(d)&&i.add(d);var m=l.name;m!=null&&!s.has(m)&&s.add(m)},this),this._sources=i,this._names=s,t.sources.forEach(function(l){var c=t.sourceContentFor(l);c!=null&&(o!=null&&(l=_e.join(o,l)),u!=null&&(l=_e.relative(u,l)),this.setSourceContent(l,c))},this)},"SourceMapGenerator_applySourceMap");Ye.prototype._validateMapping=n(function(t,r,o,a){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!r&&!o&&!a)){if(t&&"line"in t&&"column"in t&&r&&"line"in r&&"column"in r&&t.line>0&&t.column>=0&&r.line>0&&r.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:o,original:r,name:a}))}},"SourceMapGenerator_validateMapping");Ye.prototype._serializeMappings=n(function(){for(var t=0,r=1,o=0,a=0,u=0,i=0,s="",l,c,d,m,f=this._mappings.toArray(),p=0,g=f.length;p<g;p++){if(c=f[p],l="",c.generatedLine!==r)for(t=0;c.generatedLine!==r;)l+=";",r++;else if(p>0){if(!_e.compareByGeneratedPositionsInflated(c,f[p-1]))continue;l+=","}l+=Tn.encode(c.generatedColumn-t),t=c.generatedColumn,c.source!=null&&(m=this._sources.indexOf(c.source),l+=Tn.encode(m-i),i=m,l+=Tn.encode(c.originalLine-1-a),a=c.originalLine-1,l+=Tn.encode(c.originalColumn-o),o=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),l+=Tn.encode(d-u),u=d)),s+=l}return s},"SourceMapGenerator_serializeMappings");Ye.prototype._generateSourcesContent=n(function(t,r){return t.map(function(o){if(!this._sourcesContents)return null;r!=null&&(o=_e.relative(r,o));var a=_e.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,a)?this._sourcesContents[a]:null},this)},"SourceMapGenerator_generateSourcesContent");Ye.prototype.toJSON=n(function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},"SourceMapGenerator_toJSON");Ye.prototype.toString=n(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");Xc.SourceMapGenerator=Ye});var Yc=te(sr=>{sr.GREATEST_LOWER_BOUND=1;sr.LEAST_UPPER_BOUND=2;function Vs(e,t,r,o,a,u){var i=Math.floor((t-e)/2)+e,s=a(r,o[i],!0);return s===0?i:s>0?t-i>1?Vs(i,t,r,o,a,u):u==sr.LEAST_UPPER_BOUND?t<o.length?t:-1:i:i-e>1?Vs(e,i,r,o,a,u):u==sr.LEAST_UPPER_BOUND?i:e<0?-1:e}n(Vs,"recursiveSearch");sr.search=n(function(t,r,o,a){if(r.length===0)return-1;var u=Vs(-1,r.length,t,r,o,a||sr.GREATEST_LOWER_BOUND);if(u<0)return-1;for(;u-1>=0&&o(r[u],r[u-1],!0)===0;)--u;return u},"search")});var td=te(ed=>{function Gs(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}n(Gs,"swap");function Fh(e,t){return Math.round(e+Math.random()*(t-e))}n(Fh,"randomIntInRange");function zs(e,t,r,o){if(r<o){var a=Fh(r,o),u=r-1;Gs(e,a,o);for(var i=e[o],s=r;s<o;s++)t(e[s],i)<=0&&(u+=1,Gs(e,u,s));Gs(e,u+1,s);var l=u+1;zs(e,t,r,l-1),zs(e,t,l+1,o)}}n(zs,"doQuickSort");ed.quickSort=function(e,t){zs(e,t,0,e.length-1)}});var nd=te(Ro=>{var R=Cr(),qs=Yc(),Or=Ws().ArraySet,kh=Us(),vn=td().quickSort;function oe(e,t){var r=e;return typeof e=="string"&&(r=R.parseSourceMapInput(e)),r.sections!=null?new lt(r,t):new Ee(r,t)}n(oe,"SourceMapConsumer");oe.fromSourceMap=function(e,t){return Ee.fromSourceMap(e,t)};oe.prototype._version=3;oe.prototype.__generatedMappings=null;Object.defineProperty(oe.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:n(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});oe.prototype.__originalMappings=null;Object.defineProperty(oe.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:n(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});oe.prototype._charIsMappingSeparator=n(function(t,r){var o=t.charAt(r);return o===";"||o===","},"SourceMapConsumer_charIsMappingSeparator");oe.prototype._parseMappings=n(function(t,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");oe.GENERATED_ORDER=1;oe.ORIGINAL_ORDER=2;oe.GREATEST_LOWER_BOUND=1;oe.LEAST_UPPER_BOUND=2;oe.prototype.eachMapping=n(function(t,r,o){var a=r||null,u=o||oe.GENERATED_ORDER,i;switch(u){case oe.GENERATED_ORDER:i=this._generatedMappings;break;case oe.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map(function(l){var c=l.source===null?null:this._sources.at(l.source);return c=R.computeSourceURL(s,c,this._sourceMapURL),{source:c,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(t,a)},"SourceMapConsumer_eachMapping");oe.prototype.allGeneratedPositionsFor=n(function(t){var r=R.getArg(t,"line"),o={source:R.getArg(t,"source"),originalLine:r,originalColumn:R.getArg(t,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var a=[],u=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",R.compareByOriginalPositions,qs.LEAST_UPPER_BOUND);if(u>=0){var i=this._originalMappings[u];if(t.column===void 0)for(var s=i.originalLine;i&&i.originalLine===s;)a.push({line:R.getArg(i,"generatedLine",null),column:R.getArg(i,"generatedColumn",null),lastColumn:R.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++u];else for(var l=i.originalColumn;i&&i.originalLine===r&&i.originalColumn==l;)a.push({line:R.getArg(i,"generatedLine",null),column:R.getArg(i,"generatedColumn",null),lastColumn:R.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++u]}return a},"SourceMapConsumer_allGeneratedPositionsFor");Ro.SourceMapConsumer=oe;function Ee(e,t){var r=e;typeof e=="string"&&(r=R.parseSourceMapInput(e));var o=R.getArg(r,"version"),a=R.getArg(r,"sources"),u=R.getArg(r,"names",[]),i=R.getArg(r,"sourceRoot",null),s=R.getArg(r,"sourcesContent",null),l=R.getArg(r,"mappings"),c=R.getArg(r,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);i&&(i=R.normalize(i)),a=a.map(String).map(R.normalize).map(function(d){return i&&R.isAbsolute(i)&&R.isAbsolute(d)?R.relative(i,d):d}),this._names=Or.fromArray(u.map(String),!0),this._sources=Or.fromArray(a,!0),this._absoluteSources=this._sources.toArray().map(function(d){return R.computeSourceURL(i,d,t)}),this.sourceRoot=i,this.sourcesContent=s,this._mappings=l,this._sourceMapURL=t,this.file=c}n(Ee,"BasicSourceMapConsumer");Ee.prototype=Object.create(oe.prototype);Ee.prototype.consumer=oe;Ee.prototype._findSourceIndex=function(e){var t=e;if(this.sourceRoot!=null&&(t=R.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==e)return r;return-1};Ee.fromSourceMap=n(function(t,r){var o=Object.create(Ee.prototype),a=o._names=Or.fromArray(t._names.toArray(),!0),u=o._sources=Or.fromArray(t._sources.toArray(),!0);o.sourceRoot=t._sourceRoot,o.sourcesContent=t._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=t._file,o._sourceMapURL=r,o._absoluteSources=o._sources.toArray().map(function(p){return R.computeSourceURL(o.sourceRoot,p,r)});for(var i=t._mappings.toArray().slice(),s=o.__generatedMappings=[],l=o.__originalMappings=[],c=0,d=i.length;c<d;c++){var m=i[c],f=new rd;f.generatedLine=m.generatedLine,f.generatedColumn=m.generatedColumn,m.source&&(f.source=u.indexOf(m.source),f.originalLine=m.originalLine,f.originalColumn=m.originalColumn,m.name&&(f.name=a.indexOf(m.name)),l.push(f)),s.push(f)}return vn(o.__originalMappings,R.compareByOriginalPositions),o},"SourceMapConsumer_fromSourceMap");Ee.prototype._version=3;Object.defineProperty(Ee.prototype,"sources",{get:n(function(){return this._absoluteSources.slice()},"get")});function rd(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}n(rd,"Mapping");Ee.prototype._parseMappings=n(function(t,r){for(var o=1,a=0,u=0,i=0,s=0,l=0,c=t.length,d=0,m={},f={},p=[],g=[],h,w,I,L,P;d<c;)if(t.charAt(d)===";")o++,d++,a=0;else if(t.charAt(d)===",")d++;else{for(h=new rd,h.generatedLine=o,L=d;L<c&&!this._charIsMappingSeparator(t,L);L++);if(w=t.slice(d,L),I=m[w],I)d+=w.length;else{for(I=[];d<L;)kh.decode(t,d,f),P=f.value,d=f.rest,I.push(P);if(I.length===2)throw new Error("Found a source, but no line and column");if(I.length===3)throw new Error("Found a source and line, but no column");m[w]=I}h.generatedColumn=a+I[0],a=h.generatedColumn,I.length>1&&(h.source=s+I[1],s+=I[1],h.originalLine=u+I[2],u=h.originalLine,h.originalLine+=1,h.originalColumn=i+I[3],i=h.originalColumn,I.length>4&&(h.name=l+I[4],l+=I[4])),g.push(h),typeof h.originalLine=="number"&&p.push(h)}vn(g,R.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,vn(p,R.compareByOriginalPositions),this.__originalMappings=p},"SourceMapConsumer_parseMappings");Ee.prototype._findMapping=n(function(t,r,o,a,u,i){if(t[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[o]);if(t[a]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[a]);return qs.search(t,r,u,i)},"SourceMapConsumer_findMapping");Ee.prototype.computeColumnSpans=n(function(){for(var t=0;t<this._generatedMappings.length;++t){var r=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var o=this._generatedMappings[t+1];if(r.generatedLine===o.generatedLine){r.lastGeneratedColumn=o.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Ee.prototype.originalPositionFor=n(function(t){var r={generatedLine:R.getArg(t,"line"),generatedColumn:R.getArg(t,"column")},o=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",R.compareByGeneratedPositionsDeflated,R.getArg(t,"bias",oe.GREATEST_LOWER_BOUND));if(o>=0){var a=this._generatedMappings[o];if(a.generatedLine===r.generatedLine){var u=R.getArg(a,"source",null);u!==null&&(u=this._sources.at(u),u=R.computeSourceURL(this.sourceRoot,u,this._sourceMapURL));var i=R.getArg(a,"name",null);return i!==null&&(i=this._names.at(i)),{source:u,line:R.getArg(a,"originalLine",null),column:R.getArg(a,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Ee.prototype.hasContentsOfAllSources=n(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return t==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Ee.prototype.sourceContentFor=n(function(t,r){if(!this.sourcesContent)return null;var o=this._findSourceIndex(t);if(o>=0)return this.sourcesContent[o];var a=t;this.sourceRoot!=null&&(a=R.relative(this.sourceRoot,a));var u;if(this.sourceRoot!=null&&(u=R.urlParse(this.sourceRoot))){var i=a.replace(/^file:\/\//,"");if(u.scheme=="file"&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!u.path||u.path=="/")&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(r)return null;throw new Error('"'+a+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Ee.prototype.generatedPositionFor=n(function(t){var r=R.getArg(t,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var o={source:r,originalLine:R.getArg(t,"line"),originalColumn:R.getArg(t,"column")},a=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",R.compareByOriginalPositions,R.getArg(t,"bias",oe.GREATEST_LOWER_BOUND));if(a>=0){var u=this._originalMappings[a];if(u.source===o.source)return{line:R.getArg(u,"generatedLine",null),column:R.getArg(u,"generatedColumn",null),lastColumn:R.getArg(u,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");Ro.BasicSourceMapConsumer=Ee;function lt(e,t){var r=e;typeof e=="string"&&(r=R.parseSourceMapInput(e));var o=R.getArg(r,"version"),a=R.getArg(r,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new Or,this._names=new Or;var u={line:-1,column:0};this._sections=a.map(function(i){if(i.url)throw new Error("Support for url field in sections not implemented.");var s=R.getArg(i,"offset"),l=R.getArg(s,"line"),c=R.getArg(s,"column");if(l<u.line||l===u.line&&c<u.column)throw new Error("Section offsets must be ordered and non-overlapping.");return u=s,{generatedOffset:{generatedLine:l+1,generatedColumn:c+1},consumer:new oe(R.getArg(i,"map"),t)}})}n(lt,"IndexedSourceMapConsumer");lt.prototype=Object.create(oe.prototype);lt.prototype.constructor=oe;lt.prototype._version=3;Object.defineProperty(lt.prototype,"sources",{get:n(function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e},"get")});lt.prototype.originalPositionFor=n(function(t){var r={generatedLine:R.getArg(t,"line"),generatedColumn:R.getArg(t,"column")},o=qs.search(r,this._sections,function(u,i){var s=u.generatedLine-i.generatedOffset.generatedLine;return s||u.generatedColumn-i.generatedOffset.generatedColumn}),a=this._sections[o];return a?a.consumer.originalPositionFor({line:r.generatedLine-(a.generatedOffset.generatedLine-1),column:r.generatedColumn-(a.generatedOffset.generatedLine===r.generatedLine?a.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");lt.prototype.hasContentsOfAllSources=n(function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");lt.prototype.sourceContentFor=n(function(t,r){for(var o=0;o<this._sections.length;o++){var a=this._sections[o],u=a.consumer.sourceContentFor(t,!0);if(u)return u}if(r)return null;throw new Error('"'+t+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");lt.prototype.generatedPositionFor=n(function(t){for(var r=0;r<this._sections.length;r++){var o=this._sections[r];if(o.consumer._findSourceIndex(R.getArg(t,"source"))!==-1){var a=o.consumer.generatedPositionFor(t);if(a){var u={line:a.line+(o.generatedOffset.generatedLine-1),column:a.column+(o.generatedOffset.generatedLine===a.line?o.generatedOffset.generatedColumn-1:0)};return u}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");lt.prototype._parseMappings=n(function(t,r){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var a=this._sections[o],u=a.consumer._generatedMappings,i=0;i<u.length;i++){var s=u[i],l=a.consumer._sources.at(s.source);l=R.computeSourceURL(a.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var c=null;s.name&&(c=a.consumer._names.at(s.name),this._names.add(c),c=this._names.indexOf(c));var d={source:l,generatedLine:s.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(a.generatedOffset.generatedLine===s.generatedLine?a.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}vn(this.__generatedMappings,R.compareByGeneratedPositionsDeflated),vn(this.__originalMappings,R.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");Ro.IndexedSourceMapConsumer=lt});var id=te(od=>{var Ah=$s().SourceMapGenerator,No=Cr(),Ch=/(\r?\n)/,Oh=10,Ur="$$$isSourceNode$$$";function $e(e,t,r,o,a){this.children=[],this.sourceContents={},this.line=e==null?null:e,this.column=t==null?null:t,this.source=r==null?null:r,this.name=a==null?null:a,this[Ur]=!0,o!=null&&this.add(o)}n($e,"SourceNode");$e.fromStringWithSourceMap=n(function(t,r,o){var a=new $e,u=t.split(Ch),i=0,s=n(function(){var f=g(),p=g()||"";return f+p;function g(){return i<u.length?u[i++]:void 0}},"shiftNextLine"),l=1,c=0,d=null;return r.eachMapping(function(f){if(d!==null)if(l<f.generatedLine)m(d,s()),l++,c=0;else{var p=u[i]||"",g=p.substr(0,f.generatedColumn-c);u[i]=p.substr(f.generatedColumn-c),c=f.generatedColumn,m(d,g),d=f;return}for(;l<f.generatedLine;)a.add(s()),l++;if(c<f.generatedColumn){var p=u[i]||"";a.add(p.substr(0,f.generatedColumn)),u[i]=p.substr(f.generatedColumn),c=f.generatedColumn}d=f},this),i<u.length&&(d&&m(d,s()),a.add(u.splice(i).join(""))),r.sources.forEach(function(f){var p=r.sourceContentFor(f);p!=null&&(o!=null&&(f=No.join(o,f)),a.setSourceContent(f,p))}),a;function m(f,p){if(f===null||f.source===void 0)a.add(p);else{var g=o?No.join(o,f.source):f.source;a.add(new $e(f.originalLine,f.originalColumn,g,p,f.name))}}n(m,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");$e.prototype.add=n(function(t){if(Array.isArray(t))t.forEach(function(r){this.add(r)},this);else if(t[Ur]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this},"SourceNode_add");$e.prototype.prepend=n(function(t){if(Array.isArray(t))for(var r=t.length-1;r>=0;r--)this.prepend(t[r]);else if(t[Ur]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this},"SourceNode_prepend");$e.prototype.walk=n(function(t){for(var r,o=0,a=this.children.length;o<a;o++)r=this.children[o],r[Ur]?r.walk(t):r!==""&&t(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");$e.prototype.join=n(function(t){var r,o,a=this.children.length;if(a>0){for(r=[],o=0;o<a-1;o++)r.push(this.children[o]),r.push(t);r.push(this.children[o]),this.children=r}return this},"SourceNode_join");$e.prototype.replaceRight=n(function(t,r){var o=this.children[this.children.length-1];return o[Ur]?o.replaceRight(t,r):typeof o=="string"?this.children[this.children.length-1]=o.replace(t,r):this.children.push("".replace(t,r)),this},"SourceNode_replaceRight");$e.prototype.setSourceContent=n(function(t,r){this.sourceContents[No.toSetString(t)]=r},"SourceNode_setSourceContent");$e.prototype.walkSourceContents=n(function(t){for(var r=0,o=this.children.length;r<o;r++)this.children[r][Ur]&&this.children[r].walkSourceContents(t);for(var a=Object.keys(this.sourceContents),r=0,o=a.length;r<o;r++)t(No.fromSetString(a[r]),this.sourceContents[a[r]])},"SourceNode_walkSourceContents");$e.prototype.toString=n(function(){var t="";return this.walk(function(r){t+=r}),t},"SourceNode_toString");$e.prototype.toStringWithSourceMap=n(function(t){var r={code:"",line:1,column:0},o=new Ah(t),a=!1,u=null,i=null,s=null,l=null;return this.walk(function(c,d){r.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((u!==d.source||i!==d.line||s!==d.column||l!==d.name)&&o.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name}),u=d.source,i=d.line,s=d.column,l=d.name,a=!0):a&&(o.addMapping({generated:{line:r.line,column:r.column}}),u=null,a=!1);for(var m=0,f=c.length;m<f;m++)c.charCodeAt(m)===Oh?(r.line++,r.column=0,m+1===f?(u=null,a=!1):a&&o.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name})):r.column++}),this.walkSourceContents(function(c,d){o.setSourceContent(c,d)}),{code:r.code,map:o}},"SourceNode_toStringWithSourceMap");od.SourceNode=$e});var sd=te(Lo=>{Lo.SourceMapGenerator=$s().SourceMapGenerator;Lo.SourceMapConsumer=nd().SourceMapConsumer;Lo.SourceNode=id().SourceNode});var ud=te((P1,ad)=>{var Uh=Object.prototype.toString,Ks=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Dh(e){return Uh.call(e).slice(8,-1)==="ArrayBuffer"}n(Dh,"isArrayBuffer");function Bh(e,t,r){t>>>=0;var o=e.byteLength-t;if(o<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=o;else if(r>>>=0,r>o)throw new RangeError("'length' is out of bounds");return Ks?Buffer.from(e.slice(t,t+r)):new Buffer(new Uint8Array(e.slice(t,t+r)))}n(Bh,"fromArrayBuffer");function jh(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return Ks?Buffer.from(e,t):new Buffer(e,t)}n(jh,"fromString");function Wh(e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return Dh(e)?Bh(e,t,r):typeof e=="string"?jh(e,t):Ks?Buffer.from(e):new Buffer(e)}n(Wh,"bufferFrom");ad.exports=Wh});var gd=te((ur,Js)=>{var $h=sd().SourceMapConsumer,Hs=require("path"),yt;try{yt=require("fs"),(!yt.existsSync||!yt.readFileSync)&&(yt=null)}catch{}var Vh=ud();function ld(e,t){return e.require(t)}n(ld,"dynamicRequire");var cd=!1,dd=!1,Zs=!1,Mn="auto",ar={},Pn={},Gh=/^data:application\/json[^,]+base64,/,jt=[],Wt=[];function Xs(){return Mn==="browser"?!0:Mn==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}n(Xs,"isInBrowser");function zh(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}n(zh,"hasGlobalProcessEventEmitter");function qh(){return typeof process=="object"&&process!==null?process.version:""}n(qh,"globalProcessVersion");function Kh(){if(typeof process=="object"&&process!==null)return process.stderr}n(Kh,"globalProcessStderr");function Hh(e){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(e)}n(Hh,"globalProcessExit");function Fo(e){return function(t){for(var r=0;r<e.length;r++){var o=e[r](t);if(o)return o}return null}}n(Fo,"handlerExec");var Ys=Fo(jt);jt.push(function(e){if(e=e.trim(),/^file:/.test(e)&&(e=e.replace(/file:\/\/\/(\w:)?/,function(o,a){return a?"":"/"})),e in ar)return ar[e];var t="";try{if(yt)yt.existsSync(e)&&(t=yt.readFileSync(e,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null),r.readyState===4&&r.status===200&&(t=r.responseText)}}catch{}return ar[e]=t});function Qs(e,t){if(!e)return t;var r=Hs.dirname(e),o=/^\w+:\/\/[^\/]*/.exec(r),a=o?o[0]:"",u=r.slice(a.length);return a&&/^\/\w\:/.test(u)?(a+="/",a+Hs.resolve(r.slice(a.length),t).replace(/\\/g,"/")):a+Hs.resolve(r.slice(a.length),t)}n(Qs,"supportRelativeURL");function Zh(e){var t;if(Xs())try{var r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null),t=r.readyState===4?r.responseText:null;var o=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(o)return o}catch{}t=Ys(e);for(var a=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,u,i;i=a.exec(t);)u=i;return u?u[1]:null}n(Zh,"retrieveSourceMapURL");var ea=Fo(Wt);Wt.push(function(e){var t=Zh(e);if(!t)return null;var r;if(Gh.test(t)){var o=t.slice(t.indexOf(",")+1);r=Vh(o,"base64").toString(),t=e}else t=Qs(e,t),r=Ys(t);return r?{url:t,map:r}:null});function ta(e){var t=Pn[e.source];if(!t){var r=ea(e.source);r?(t=Pn[e.source]={url:r.url,map:new $h(r.map)},t.map.sourcesContent&&t.map.sources.forEach(function(a,u){var i=t.map.sourcesContent[u];if(i){var s=Qs(t.url,a);ar[s]=i}})):t=Pn[e.source]={url:null,map:null}}if(t&&t.map&&typeof t.map.originalPositionFor=="function"){var o=t.map.originalPositionFor(e);if(o.source!==null)return o.source=Qs(t.url,o.source),o}return e}n(ta,"mapSourcePosition");function fd(e){var t=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(e);if(t){var r=ta({source:t[2],line:+t[3],column:t[4]-1});return"eval at "+t[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return t=/^eval at ([^(]+) \((.+)\)$/.exec(e),t?"eval at "+t[1]+" ("+fd(t[2])+")":e}n(fd,"mapEvalOrigin");function Qh(){var e,t="";if(this.isNative())t="native";else{e=this.getScriptNameOrSourceURL(),!e&&this.isEval()&&(t=this.getEvalOrigin(),t+=", "),e?t+=e:t+="<anonymous>";var r=this.getLineNumber();if(r!=null){t+=":"+r;var o=this.getColumnNumber();o&&(t+=":"+o)}}var a="",u=this.getFunctionName(),i=!0,s=this.isConstructor(),l=!(this.isToplevel()||s);if(l){var c=this.getTypeName();c==="[object Object]"&&(c="null");var d=this.getMethodName();u?(c&&u.indexOf(c)!=0&&(a+=c+"."),a+=u,d&&u.indexOf("."+d)!=u.length-d.length-1&&(a+=" [as "+d+"]")):a+=c+"."+(d||"<anonymous>")}else s?a+="new "+(u||"<anonymous>"):u?a+=u:(a+=t,i=!1);return i&&(a+=" ("+t+")"),a}n(Qh,"CallSiteToString");function md(e){var t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(function(r){t[r]=/^(?:is|get)/.test(r)?function(){return e[r].call(e)}:e[r]}),t.toString=Qh,t}n(md,"cloneCallSite");function pd(e,t){if(t===void 0&&(t={nextPosition:null,curPosition:null}),e.isNative())return t.curPosition=null,e;var r=e.getFileName()||e.getScriptNameOrSourceURL();if(r){var o=e.getLineNumber(),a=e.getColumnNumber()-1,u=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,i=u.test(qh())?0:62;o===1&&a>i&&!Xs()&&!e.isEval()&&(a-=i);var s=ta({source:r,line:o,column:a});t.curPosition=s,e=md(e);var l=e.getFunctionName;return e.getFunctionName=function(){return t.nextPosition==null?l():t.nextPosition.name||l()},e.getFileName=function(){return s.source},e.getLineNumber=function(){return s.line},e.getColumnNumber=function(){return s.column+1},e.getScriptNameOrSourceURL=function(){return s.source},e}var c=e.isEval()&&e.getEvalOrigin();return c&&(c=fd(c),e=md(e),e.getEvalOrigin=function(){return c}),e}n(pd,"wrapCallSite");function Jh(e,t){Zs&&(ar={},Pn={});for(var r=e.name||"Error",o=e.message||"",a=r+": "+o,u={nextPosition:null,curPosition:null},i=[],s=t.length-1;s>=0;s--)i.push(`
    at `+pd(t[s],u)),u.nextPosition=u.curPosition;return u.curPosition=u.nextPosition=null,a+i.reverse().join("")}n(Jh,"prepareStackTrace");function _d(e){var t=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(e.stack);if(t){var r=t[1],o=+t[2],a=+t[3],u=ar[r];if(!u&&yt&&yt.existsSync(r))try{u=yt.readFileSync(r,"utf8")}catch{u=""}if(u){var i=u.split(/(?:\r\n|\r|\n)/)[o-1];if(i)return r+":"+o+`
`+i+`
`+new Array(a).join(" ")+"^"}}return null}n(_d,"getErrorSource");function Xh(e){var t=_d(e),r=Kh();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),t&&(console.error(),console.error(t)),console.error(e.stack),Hh(1)}n(Xh,"printErrorAndExit");function Yh(){var e=process.emit;process.emit=function(t){if(t==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,o=this.listeners(t).length>0;if(r&&!o)return Xh(arguments[1])}return e.apply(this,arguments)}}n(Yh,"shimEmitUncaughtException");var ey=jt.slice(0),ty=Wt.slice(0);ur.wrapCallSite=pd;ur.getErrorSource=_d;ur.mapSourcePosition=ta;ur.retrieveSourceMap=ea;ur.install=function(e){if(e=e||{},e.environment&&(Mn=e.environment,["node","browser","auto"].indexOf(Mn)===-1))throw new Error("environment "+Mn+" was unknown. Available options are {auto, browser, node}");if(e.retrieveFile&&(e.overrideRetrieveFile&&(jt.length=0),jt.unshift(e.retrieveFile)),e.retrieveSourceMap&&(e.overrideRetrieveSourceMap&&(Wt.length=0),Wt.unshift(e.retrieveSourceMap)),e.hookRequire&&!Xs()){var t=ld(Js,"module"),r=t.prototype._compile;r.__sourceMapSupport||(t.prototype._compile=function(u,i){return ar[i]=u,Pn[i]=void 0,r.call(this,u,i)},t.prototype._compile.__sourceMapSupport=!0)}if(Zs||(Zs="emptyCacheBetweenOperations"in e?e.emptyCacheBetweenOperations:!1),cd||(cd=!0,Error.prepareStackTrace=Jh),!dd){var o="handleUncaughtExceptions"in e?e.handleUncaughtExceptions:!0;try{var a=ld(Js,"worker_threads");a.isMainThread===!1&&(o=!1)}catch{}o&&zh()&&(dd=!0,Yh())}};ur.resetRetrieveHandlers=function(){jt.length=0,Wt.length=0,jt=ey.slice(0),Wt=ty.slice(0),ea=Fo(Wt),Ys=Fo(jt)}});var hd=te(()=>{gd().install()});var Ad=te((wC,kd)=>{var Ma=require("fs"),Wo=require("path"),Un=Wo.join,py=Wo.dirname,Ld=Ma.accessSync&&function(e){try{Ma.accessSync(e)}catch{return!1}return!0}||Ma.existsSync||Wo.existsSync,Fd={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function _y(e){typeof e=="string"?e={bindings:e}:e||(e={}),Object.keys(Fd).map(function(l){l in e||(e[l]=Fd[l])}),e.module_root||(e.module_root=gy(__filename)),Wo.extname(e.bindings)!=".node"&&(e.bindings+=".node");for(var t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],o=0,a=e.try.length,u,i,s;o<a;o++){u=Un.apply(null,e.try[o].map(function(l){return e[l]||l})),r.push(u);try{return i=e.path?t.resolve(u):t(u),e.path||(i.path=u),i}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw s=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return e.arrow+l}).join(`
`)),s.tries=r,s}n(_y,"bindings");kd.exports=_y;function gy(e){for(var t=py(e),r;;){if(t==="."&&(t=process.cwd()),Ld(Un(t,"dist")))return Un(t,"dist");if(Ld(Un(t,"compiled")))return t;if(r===t)throw new Error('Could not find module root given file: "'+e+'". Do you have a `dist` or `compiled` directory? ');r=t,t=Un(t,"..")}}n(gy,"getRoot")});var Od=te((SC,Cd)=>{Cd.exports=Ad()("node_sqlite3.node")});var Bd=te(Dd=>{var hy=require("util");function yy(e,t,r){let o=e[t];e[t]=function(){let a=new Error,u=e.constructor.name+"#"+t+"("+Array.prototype.slice.call(arguments).map(function(s){return hy.inspect(s,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let i=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=n(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=Ud(l).join(`
`),l.stack+=`
--> in `+u,l.stack+=`
`+Ud(a).slice(1).join(`
`),l.__augmented=!0),i.apply(this,arguments)},"replacement")),o.apply(this,arguments)}}n(yy,"extendTrace");Dd.extendTrace=yy;function Ud(e){return e.stack.split(`
`).filter(function(t){return t.indexOf(__filename)<0})}n(Ud,"filter")});var Vd=te((Wd,$d)=>{var by=require("path"),rt=Od(),$r=require("events").EventEmitter;$d.exports=Wd=rt;function Vr(e){return function(t){let r,o=Array.prototype.slice.call(arguments,1);if(typeof o[o.length-1]=="function"){let u=o[o.length-1];r=n(function(i){i&&u(i)},"errBack")}let a=new $o(this,t,r);return e.call(this,a,o)}}n(Vr,"normalizeMethod");function Ra(e,t){for(let r in t.prototype)e.prototype[r]=t.prototype[r]}n(Ra,"inherits");rt.cached={Database:n(function(e,t,r){if(e===""||e===":memory:")return new Fe(e,t,r);let o;if(e=by.resolve(e),!rt.cached.objects[e])o=rt.cached.objects[e]=new Fe(e,t,r);else{o=rt.cached.objects[e];let u=typeof t=="number"?r:t;if(typeof u=="function"){let i=function(){u.call(o,null)};var a=i;n(i,"cb"),o.open?process.nextTick(i):o.once("open",i)}}return o},"Database"),objects:{}};var Fe=rt.Database,$o=rt.Statement,Pa=rt.Backup;Ra(Fe,$r);Ra($o,$r);Ra(Pa,$r);Fe.prototype.prepare=Vr(function(e,t){return t.length?e.bind.apply(e,t):e});Fe.prototype.run=Vr(function(e,t){return e.run.apply(e,t).finalize(),this});Fe.prototype.get=Vr(function(e,t){return e.get.apply(e,t).finalize(),this});Fe.prototype.all=Vr(function(e,t){return e.all.apply(e,t).finalize(),this});Fe.prototype.each=Vr(function(e,t){return e.each.apply(e,t).finalize(),this});Fe.prototype.map=Vr(function(e,t){return e.map.apply(e,t).finalize(),this});Fe.prototype.backup=function(){let e;return arguments.length<=2?e=new Pa(this,arguments[0],"main","main",!0,arguments[1]):e=new Pa(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),e.retryErrors=[rt.BUSY,rt.LOCKED],e};$o.prototype.map=function(){let e=Array.prototype.slice.call(arguments),t=e.pop();return e.push(function(r,o){if(r)return t(r);let a={};if(o.length){let u=Object.keys(o[0]),i=u[0];if(u.length>2)for(let s=0;s<o.length;s++)a[o[s][i]]=o[s];else{let s=u[1];for(let l=0;l<o.length;l++)a[o[l][i]]=o[l][s]}}t(r,a)}),this.all.apply(this,e)};var jd=!1,Na=["trace","profile","change"];Fe.prototype.addListener=Fe.prototype.on=function(e){let t=$r.prototype.addListener.apply(this,arguments);return Na.indexOf(e)>=0&&this.configure(e,!0),t};Fe.prototype.removeListener=function(e){let t=$r.prototype.removeListener.apply(this,arguments);return Na.indexOf(e)>=0&&!this._events[e]&&this.configure(e,!1),t};Fe.prototype.removeAllListeners=function(e){let t=$r.prototype.removeAllListeners.apply(this,arguments);return Na.indexOf(e)>=0&&this.configure(e,!1),t};rt.verbose=function(){if(!jd){let e=Bd();["prepare","get","run","all","each","map","close","exec"].forEach(function(t){e.extendTrace(Fe.prototype,t)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(t){e.extendTrace($o.prototype,t)}),jd=!0}return rt}});var Jo=class Jo{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};n(Jo,"Stack");var Dn=Jo;function Xo(e,t,r){return{type:"virtual",indentation:e,subs:t,label:r}}n(Xo,"virtualNode");function Ba(e,t,r,o,a){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:e,lineNumber:t,sourceLine:r,subs:o,label:a}}n(Ba,"lineNode");function Yo(e){return{type:"blank",lineNumber:e,subs:[]}}n(Yo,"blankNode");function Bn(e){return{type:"top",indentation:-1,subs:e!=null?e:[]}}n(Bn,"topNode");function we(e){return e.type==="blank"}n(we,"isBlank");function zt(e){return e.type==="line"}n(zt,"isLine");function qt(e){return e.type==="virtual"}n(qt,"isVirtual");function ja(e,t){return ve(e,r=>{r.label=r.label?t(r.label)?void 0:r.label:void 0},"bottomUp"),e}n(ja,"clearLabelsIf");function Kt(e,t){switch(e.type){case"line":case"virtual":{let r=e.subs.map(o=>Kt(o,t));return{...e,subs:r,label:e.label?t(e.label):void 0}}case"blank":return{...e,label:e.label?t(e.label):void 0};case"top":return{...e,subs:e.subs.map(r=>Kt(r,t)),label:e.label?t(e.label):void 0}}}n(Kt,"mapLabels");function ve(e,t,r){function o(a){r==="topDown"&&t(a),a.subs.forEach(u=>{o(u)}),r==="bottomUp"&&t(a)}n(o,"_visit"),o(e)}n(ve,"visitTree");function ei(e,t,r,o){let a=t;function u(i){a=r(i,a)}return n(u,"visitor"),ve(e,u,o),a}n(ei,"foldTree");function jn(e,t,r){let o=n(u=>{if(r!==void 0&&r(u))return u;{let i=u.subs.map(o).filter(s=>s!==void 0);return u.subs=i,t(u)}},"rebuild"),a=o(e);return a!==void 0?a:Bn()}n(jn,"rebuildTree");function em(e){let t=e.split(`
`),r=t.map(c=>c.match(/^\s*/)[0].length),o=t.map(c=>c.trimLeft());function a(c){let[d,m]=u(c+1,r[c]);return[Ba(r[c],c,o[c],d),m]}n(a,"parseNode");function u(c,d){let m,f=[],p=c,g;for(;p<o.length&&(o[p]===""||r[p]>d);)if(o[p]==="")g===void 0&&(g=p),p+=1;else{if(g!==void 0){for(let h=g;h<p;h++)f.push(Yo(h));g=void 0}[m,p]=a(p),f.push(m)}return g!==void 0&&(p=g),[f,p]}n(u,"parseSubs");let[i,s]=u(0,-1),l=s;for(;l<o.length&&o[l]==="";)i.push(Yo(l)),l+=1;if(l<o.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${o.length}`);return Bn(i)}n(em,"parseRaw");function Hr(e,t){function r(o){if(zt(o)){let a=t.find(u=>u.matches(o.sourceLine));a&&(o.label=a.label)}}n(r,"visitor"),ve(e,r,"bottomUp")}n(Hr,"labelLines");function Wn(e){function t(r){if(qt(r)&&r.label===void 0){let o=r.subs.filter(a=>!we(a));o.length===1&&(r.label=o[0].label)}}n(t,"visitor"),ve(e,t,"bottomUp")}n(Wn,"labelVirtualInherited");function Zr(e){return Object.keys(e).map(t=>{let r;return e[t].test?r=n(o=>e[t].test(o),"matches"):r=e[t],{matches:r,label:t}})}n(Zr,"buildLabelRules");function ti(e){let r=jn(e,n(function(o){if(o.subs.length===0||o.subs.findIndex(i=>i.label==="closer"||i.label==="opener")===-1)return o;let a=[],u;for(let i=0;i<o.subs.length;i++){let s=o.subs[i],l=o.subs[i-1];if(s.label==="opener"&&l!==void 0&&zt(l))l.subs.push(s),s.subs.forEach(c=>l.subs.push(c)),s.subs=[];else if(s.label==="closer"&&u!==void 0&&(zt(s)||qt(s))&&s.indentation>=u.indentation){let c=a.length-1;for(;c>0&&we(a[c]);)c-=1;if(u.subs.push(...a.splice(c+1)),s.subs.length>0){let d=u.subs.findIndex(g=>g.label!=="newVirtual"),m=u.subs.slice(0,d),f=u.subs.slice(d),p=f.length>0?[Xo(s.indentation,f,"newVirtual")]:[];u.subs=[...m,...p,s]}else u.subs.push(s)}else a.push(s),we(s)||(u=s)}return o.subs=a,o},"rebuilder"));return ja(e,o=>o==="newVirtual"),r}n(ti,"combineClosersAndOpeners");function Wa(e,t=we,r){return jn(e,n(function(a){if(a.subs.length<=1)return a;let u=[],i=[],s,l=!1;function c(d=!1){if(s!==void 0&&(u.length>0||!d)){let m=Xo(s,i,r);u.push(m)}else i.forEach(m=>u.push(m))}n(c,"flushBlockIntoNewSubs");for(let d=0;d<a.subs.length;d++){let m=a.subs[d],f=t(m);!f&&l&&(c(),i=[]),l=f,i.push(m),we(m)||(s=s!=null?s:m.indentation)}return c(!0),a.subs=u,a},"rebuilder"))}n(Wa,"groupBlocks");function Ht(e){return jn(e,n(function(r){return qt(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&qt(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}n(Ht,"flattenVirtual");var tm={opener:/^[[({]/,closer:/^[\])}]/},rm=Zr(tm),$a={};function ri(e,t){$a[e]=t}n(ri,"registerLanguageSpecificParser");function Qr(e,t){let r=em(e),o=$a[t!=null?t:""];return o?o(r):(Hr(r,rm),ti(r))}n(Qr,"parseTree");var nm={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},om=Zr(nm);function Va(e){let t=e;return Hr(t,om),t=ti(t),t=Ht(t),Wn(t),ve(t,r=>{if(r.label==="class"||r.label==="interface")for(let o of r.subs)!we(o)&&(o.label===void 0||o.label==="annotation")&&(o.label="member")},"bottomUp"),t}n(Va,"processJava");var im={heading:/^# /,subheading:/^## /,subsubheading:/### /},sm=Zr(im);function Ga(e){let t=e;if(Hr(t,sm),we(t))return t;function r(u){if(u.label==="heading")return 1;if(u.label==="subheading")return 2;if(u.label==="subsubheading")return 3}n(r,"headingLevel");let o=[t],a=[...t.subs];t.subs=[];for(let u of a){let i=r(u);if(i===void 0||we(u))o[o.length-1].subs.push(u);else{for(;o.length<i;)o.push(o[o.length-1]);for(o[i-1].subs.push(u),o[i]=u;o.length>i+1;)o.pop()}}return t=Wa(t),t=Ht(t),Wn(t),t}n(Ga,"processMarkdown");function za(e){return" ".repeat(e.indentation)+e.sourceLine+`
`}n(za,"deparseLine");ri("markdown",Ga);ri("java",Va);var am={worthUp:.9,worthSibling:.88,worthDown:.8};function ni(e,t=am){let r=Kt(e,o=>o?1:void 0);return ve(r,o=>{var u;if(we(o))return;let a=o.subs.reduce((i,s)=>{var l;return Math.max(i,(l=s.label)!=null?l:0)},0);o.label=Math.max((u=o.label)!=null?u:0,a*t.worthUp)},"bottomUp"),ve(r,o=>{if(we(o))return;let a=o.subs.map(s=>{var l;return(l=s.label)!=null?l:0}),u=[...a];for(let s=0;s<a.length;s++)a[s]!==0&&(u=u.map((l,c)=>Math.max(l,Math.pow(t.worthSibling,Math.abs(s-c))*a[s])));let i=o.label;i!==void 0&&(u=u.map(s=>Math.max(s,t.worthDown*i))),o.subs.forEach((s,l)=>s.label=u[l])},"topDown"),um(r)}n(ni,"fromTreeWithFocussedLines");function um(e){let t=ei(e,[],(r,o)=>{var a,u;return(r.type==="line"||r.type==="blank")&&o.push(r.type==="line"?[za(r).trimEnd(),(a=r.label)!=null?a:0]:["",(u=r.label)!=null?u:0]),o},"topDown");return new Zt(t)}n(um,"fromTreeWithValuedLines");function qa(e,t=!0,r=!0){let o=typeof e=="string"?Qr(e):Qr(e.source,e.languageId);Ht(o);let a=Kt(o,u=>t&&u!=="closer");return ve(a,u=>{u.label===void 0&&(u.label=t&&u.label!==!1)},"topDown"),t&&ve(a,u=>{if(u.label){let i=!1;for(let s of[...u.subs].reverse())s.label&&!i?i=!0:s.label=!1}else for(let i of u.subs)i.label=!1;u.subs.length>0&&(u.label=!1)},"topDown"),r&&ve(a,u=>{u.label||(u.label=(zt(u)||we(u))&&u.lineNumber==0)},"topDown"),ni(a)}n(qa,"elidableTextForSourceCode");var oi=class oi extends Error{constructor(r,o){super(r);this.cause=o;this.code="CopilotPromptLoadFailure"}};n(oi,"CopilotPromptLoadFailure");var Nt=oi;var mr=Gt(su()),uu=require("fs"),lu=require("path");var au=new Map;function ot(e="cl100k_base"){let t=au.get(e);return t!==void 0||(e==="mock"?t=new wi:t=new Ii(e),au.set(e,t)),t}n(ot,"getTokenizer");function vm(e){if(!e.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let t=(0,uu.readFileSync)(e,"utf-8"),r=new Map;for(let o of t.split(`
`)){if(!o)continue;let a=Buffer.from(o,"base64");r.set(a,r.size)}return r}n(vm,"parseTikTokenNoIndex");var xi=class xi{constructor(t){try{this._tokenizer=(0,mr.createTokenizer)(vm((0,lu.join)(__dirname,`./resources/${t}.tiktoken.noindex`)),(0,mr.getSpecialTokensByEncoder)(t),(0,mr.getRegexByEncoder)(t),32768)}catch(r){throw r instanceof Error?new Nt("Could not load tokenizer",r):r}}tokenize(t){return this._tokenizer.encode(t)}detokenize(t){return this._tokenizer.decode(t)}tokenLength(t){return this.tokenize(t).length}tokenizeStrings(t){return this.tokenize(t).map(o=>this.detokenize([o]))}takeLastTokens(t,r){if(r<=0)return"";let o=4,a=1,u=Math.min(t.length,r*o),i=t.slice(-u),s=this.tokenize(i);for(;s.length<r+2&&u<t.length;)u=Math.min(t.length,u+r*a),i=t.slice(-u),s=this.tokenize(i);return s.length<r?t:(s=s.slice(-r),this.detokenize(s))}takeFirstTokens(t,r){if(r<=0)return{text:"",tokens:[]};let o=4,a=1,u=Math.min(t.length,r*o),i=t.slice(0,u),s=this.tokenize(i);for(;s.length<r+2&&u<t.length;)u=Math.min(t.length,u+r*a),i=t.slice(0,u),s=this.tokenize(i);return s.length<r?{text:t,tokens:s}:(s=s.slice(0,r),{text:this.detokenize(s),tokens:s})}takeLastLinesTokens(t,r){let o=this.takeLastTokens(t,r);if(o.length===t.length||t[t.length-o.length-1]===`
`)return o;let a=o.indexOf(`
`);return o.substring(a+1)}};n(xi,"TTokenizer");var Ii=xi,Si=class Si{constructor(){this.hash=n(t=>{let r=0;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);r=(r<<5)-r+a,r&=r&65535}return r},"hash")}tokenize(t){return this.tokenizeStrings(t).map(this.hash)}detokenize(t){return t.map(r=>r.toString()).join(" ")}tokenizeStrings(t){return t.split(/\b/)}tokenLength(t){return this.tokenizeStrings(t).length}takeLastTokens(t,r){return this.tokenizeStrings(t).slice(-r).join("")}takeFirstTokens(t,r){let o=this.tokenizeStrings(t).slice(0,r);return{text:o.join(""),tokens:o.map(this.hash)}}takeLastLinesTokens(t,r){let o=this.takeLastTokens(t,r);if(o.length===t.length||t[t.length-o.length-1]===`
`)return o;let a=o.indexOf(`
`);return o.substring(a+1)}};n(Si,"MockTokenizer");var wi=Si;var Hn=class Hn{constructor(t,r,o=ot().tokenLength(t+`
`),a="strict"){this.text=t;this._value=r;this._cost=o;if(t.includes(`
`)&&a!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&a!=="none")throw new Error("LineWithValueAndCost: value is negative");if(o<0&&a!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(a=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}get value(){return this._value}get cost(){return this._cost}adjustValue(t){return this._value*=t,this}recost(t=r=>ot().tokenLength(r+`
`)){return this._cost=t(this.text),this}copy(){return new Hn(this.text,this.value,this.cost,"none")}};n(Hn,"LineWithValueAndCost");var Yr=Hn;var Zn=class Zn{constructor(t){this.lines=[];let r=[];for(let o of t){let a=Array.isArray(o)?o[1]:1,u=Array.isArray(o)?o[0]:o;typeof u=="string"?u.split(`
`).forEach(i=>r.push(new Yr(i,a))):u instanceof Zn?u.lines.forEach(i=>r.push(i.copy().adjustValue(a))):"source"in u&&"languageId"in u&&qa(u).lines.forEach(i=>r.push(i.copy().adjustValue(a)))}this.lines=r}adjust(t){this.lines.forEach(r=>r.adjustValue(t))}recost(t=r=>ot().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(t))}makePrompt(t,r="[...]",o=!0,a="removeLeastDesirable",u=ot()){let i=this.lines.map(s=>s.copy());return Mm(i,t,r,o,a,u)}};n(Zn,"ElidableText");var Zt=Zn;function Mm(e,t,r,o,a,u){var m,f,p,g,h,w,I,L,P,F,N,U,B;if(u.tokenLength(r+`
`)>t)throw new Error("maxTokens must be larger than the ellipsis length");a==="removeLeastBangForBuck"&&e.forEach(E=>E.adjustValue(1/E.cost));let i=e.reduce((E,O)=>Math.max(E,O.value),0)+1,s=e.reduce((E,O)=>Math.max(E,O.text.length),0)+1,l=r.trim(),c=e.reduce((E,O)=>E+O.cost,0),d=e.length+1;for(;c>t&&d-->=-1;){let E=e.reduce((T,M)=>M.value<T.value?M:T),O=e.indexOf(E),nt=(m=e.slice(0,O+1).reverse().find(T=>T.text.trim()!==""))!=null?m:{text:""},dt=o?Math.min((p=(f=nt.text.match(/^\s*/))==null?void 0:f[0].length)!=null?p:0,((g=e[O-1])==null?void 0:g.text.trim())===l?(I=(w=(h=e[O-1])==null?void 0:h.text.match(/^\s*/))==null?void 0:w[0].length)!=null?I:0:s,((L=e[O+1])==null?void 0:L.text.trim())===l?(N=(F=(P=e[O+1])==null?void 0:P.text.match(/^\s*/))==null?void 0:F[0].length)!=null?N:0:s):0,It=" ".repeat(dt)+r,v=new Yr(It,i,u.tokenLength(It+`
`),"loose");e.splice(O,1,v),((U=e[O+1])==null?void 0:U.text.trim())===l&&e.splice(O+1,1),((B=e[O-1])==null?void 0:B.text.trim())===l&&e.splice(O-1,1);let x=e.reduce((T,M)=>T+M.cost,0);x>=c&&e.every(T=>T.value===i)&&(o=!1),c=x}if(d<0)throw new Error("Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text");return e.map(E=>E.text).join(`
`)}n(Mm,"makePrompt");function it(){}n(it,"Diff");it.prototype={diff:n(function(t,r){var o,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=a.callback;typeof a=="function"&&(u=a,a={});var i=this;function s(F){return F=i.postProcess(F,a),u?(setTimeout(function(){u(F)},0),!0):F}n(s,"done"),t=this.castInput(t,a),r=this.castInput(r,a),t=this.removeEmpty(this.tokenize(t,a)),r=this.removeEmpty(this.tokenize(r,a));var l=r.length,c=t.length,d=1,m=l+c;a.maxEditLength!=null&&(m=Math.min(m,a.maxEditLength));var f=(o=a.timeout)!==null&&o!==void 0?o:1/0,p=Date.now()+f,g=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(g[0],r,t,0,a);if(g[0].oldPos+1>=c&&h+1>=l)return s(cu(i,g[0].lastComponent,r,t,i.useLongestToken));var w=-1/0,I=1/0;function L(){for(var F=Math.max(w,-d);F<=Math.min(I,d);F+=2){var N=void 0,U=g[F-1],B=g[F+1];U&&(g[F-1]=void 0);var E=!1;if(B){var O=B.oldPos-F;E=B&&0<=O&&O<l}var nt=U&&U.oldPos+1<c;if(!E&&!nt){g[F]=void 0;continue}if(!nt||E&&U.oldPos<B.oldPos?N=i.addToPath(B,!0,!1,0,a):N=i.addToPath(U,!1,!0,1,a),h=i.extractCommon(N,r,t,F,a),N.oldPos+1>=c&&h+1>=l)return s(cu(i,N.lastComponent,r,t,i.useLongestToken));g[F]=N,N.oldPos+1>=c&&(I=Math.min(I,F-1)),h+1>=l&&(w=Math.max(w,F+1))}d++}if(n(L,"execEditLength"),u)n(function F(){setTimeout(function(){if(d>m||Date.now()>p)return u();L()||F()},0)},"exec")();else for(;d<=m&&Date.now()<=p;){var P=L();if(P)return P}},"diff"),addToPath:n(function(t,r,o,a,u){var i=t.lastComponent;return i&&!u.oneChangePerToken&&i.added===r&&i.removed===o?{oldPos:t.oldPos+a,lastComponent:{count:i.count+1,added:r,removed:o,previousComponent:i.previousComponent}}:{oldPos:t.oldPos+a,lastComponent:{count:1,added:r,removed:o,previousComponent:i}}},"addToPath"),extractCommon:n(function(t,r,o,a,u){for(var i=r.length,s=o.length,l=t.oldPos,c=l-a,d=0;c+1<i&&l+1<s&&this.equals(o[l+1],r[c+1],u);)c++,l++,d++,u.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return d&&!u.oneChangePerToken&&(t.lastComponent={count:d,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=l,c},"extractCommon"),equals:n(function(t,r,o){return o.comparator?o.comparator(t,r):t===r||o.ignoreCase&&t.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:n(function(t){for(var r=[],o=0;o<t.length;o++)t[o]&&r.push(t[o]);return r},"removeEmpty"),castInput:n(function(t){return t},"castInput"),tokenize:n(function(t){return Array.from(t)},"tokenize"),join:n(function(t){return t.join("")},"join"),postProcess:n(function(t){return t},"postProcess")};function cu(e,t,r,o,a){for(var u=[],i;t;)u.push(t),i=t.previousComponent,delete t.previousComponent,t=i;u.reverse();for(var s=0,l=u.length,c=0,d=0;s<l;s++){var m=u[s];if(m.removed)m.value=e.join(o.slice(d,d+m.count)),d+=m.count;else{if(!m.added&&a){var f=r.slice(c,c+m.count);f=f.map(function(p,g){var h=o[d+g];return h.length>p.length?h:p}),m.value=e.join(f)}else m.value=e.join(r.slice(c,c+m.count));c+=m.count,m.added||(d+=m.count)}}return u}n(cu,"buildValues");var oI=new it;function du(e,t){var r;for(r=0;r<e.length&&r<t.length;r++)if(e[r]!=t[r])return e.slice(0,r);return e.slice(0,r)}n(du,"longestCommonPrefix");function mu(e,t){var r;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(r=0;r<e.length&&r<t.length;r++)if(e[e.length-(r+1)]!=t[t.length-(r+1)])return e.slice(-r);return e.slice(-r)}n(mu,"longestCommonSuffix");function Ei(e,t,r){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return r+e.slice(t.length)}n(Ei,"replacePrefix");function Ti(e,t,r){if(!t)return e+r;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+r}n(Ti,"replaceSuffix");function en(e,t){return Ei(e,t,"")}n(en,"removePrefix");function Qn(e,t){return Ti(e,t,"")}n(Qn,"removeSuffix");function fu(e,t){return t.slice(0,Pm(e,t))}n(fu,"maximumOverlap");function Pm(e,t){var r=0;e.length>t.length&&(r=e.length-t.length);var o=t.length;e.length<t.length&&(o=e.length);var a=Array(o),u=0;a[0]=0;for(var i=1;i<o;i++){for(t[i]==t[u]?a[i]=a[u]:a[i]=u;u>0&&t[i]!=t[u];)u=a[u];t[i]==t[u]&&u++}u=0;for(var s=r;s<e.length;s++){for(;u>0&&e[s]!=t[u];)u=a[u];e[s]==t[u]&&u++}return u}n(Pm,"overlapCount");var Jn="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Rm=new RegExp("[".concat(Jn,"]+|\\s+|[^").concat(Jn,"]"),"ug"),Xn=new it;Xn.equals=function(e,t,r){return r.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()};Xn.tokenize=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(t.intlSegmenter){if(t.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(t.intlSegmenter.segment(e),function(u){return u.segment})}else r=e.match(Rm)||[];var o=[],a=null;return r.forEach(function(u){/\s/.test(u)?a==null?o.push(u):o.push(o.pop()+u):/\s/.test(a)?o[o.length-1]==a?o.push(o.pop()+u):o.push(a+u):o.push(u),a=u}),o};Xn.join=function(e){return e.map(function(t,r){return r==0?t:t.replace(/^\s+/,"")}).join("")};Xn.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var r=null,o=null,a=null;return e.forEach(function(u){u.added?o=u:u.removed?a=u:((o||a)&&pu(r,a,o,u),r=u,o=null,a=null)}),(o||a)&&pu(r,a,o,null),e};function pu(e,t,r,o){if(t&&r){var a=t.value.match(/^\s*/)[0],u=t.value.match(/\s*$/)[0],i=r.value.match(/^\s*/)[0],s=r.value.match(/\s*$/)[0];if(e){var l=du(a,i);e.value=Ti(e.value,i,l),t.value=en(t.value,l),r.value=en(r.value,l)}if(o){var c=mu(u,s);o.value=Ei(o.value,s,c),t.value=Qn(t.value,c),r.value=Qn(r.value,c)}}else if(r)e&&(r.value=r.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(e&&o){var d=o.value.match(/^\s*/)[0],m=t.value.match(/^\s*/)[0],f=t.value.match(/\s*$/)[0],p=du(d,m);t.value=en(t.value,p);var g=mu(en(d,p),f);t.value=Qn(t.value,g),o.value=Ei(o.value,d,g),e.value=Ti(e.value,d,d.slice(0,d.length-g.length))}else if(o){var h=o.value.match(/^\s*/)[0],w=t.value.match(/\s*$/)[0],I=fu(w,h);t.value=Qn(t.value,I)}else if(e){var L=e.value.match(/\s*$/)[0],P=t.value.match(/^\s*/)[0],F=fu(L,P);t.value=en(t.value,F)}}n(pu,"dedupeWhitespaceInChangeObjects");var Nm=new it;Nm.tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(Jn,"]+|[^\\S\\n\\r]+|[^").concat(Jn,"]"),"ug");return e.match(t)||[]};var Ri=new it;Ri.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var r=[],o=e.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var a=0;a<o.length;a++){var u=o[a];a%2&&!t.newlineIsToken?r[r.length-1]+=u:r.push(u)}return r};Ri.equals=function(e,t,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),it.prototype.equals.call(this,e,t,r)};var Lm=new it;Lm.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var Fm=new it;Fm.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function vi(e){"@babel/helpers - typeof";return vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vi(e)}n(vi,"_typeof");var tn=new it;tn.useLongestToken=!0;tn.tokenize=Ri.tokenize;tn.castInput=function(e,t){var r=t.undefinedReplacement,o=t.stringifyReplacer,a=o===void 0?function(u,i){return typeof i>"u"?r:i}:o;return typeof e=="string"?e:JSON.stringify(Mi(e,null,null,a),a,"  ")};tn.equals=function(e,t,r){return it.prototype.equals.call(tn,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),r)};function Mi(e,t,r,o,a){t=t||[],r=r||[],o&&(e=o(a,e));var u;for(u=0;u<t.length;u+=1)if(t[u]===e)return r[u];var i;if(Object.prototype.toString.call(e)==="[object Array]"){for(t.push(e),i=new Array(e.length),r.push(i),u=0;u<e.length;u+=1)i[u]=Mi(e[u],t,r,o,a);return t.pop(),r.pop(),i}if(e&&e.toJSON&&(e=e.toJSON()),vi(e)==="object"&&e!==null){t.push(e),i={},r.push(i);var s=[],l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&s.push(l);for(s.sort(),u=0;u<s.length;u+=1)l=s[u],i[l]=Mi(e[l],t,r,o,l);t.pop(),r.pop()}else i=e;return i}n(Mi,"canonicalize");var Pi=new it;Pi.tokenize=function(e){return e.slice()};Pi.join=Pi.removeEmpty=function(e){return e};var Cm={tokenizerName:"cl100k_base"};function Om(e){return{...Cm,...e}}n(Om,"cursorContextOptions");function fr(e,t={}){let r=Om(t),o=ot(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let a=e.source.slice(0,e.offset);return r.maxLineCount!==void 0&&(a=a.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(a=o.takeLastLinesTokens(a,r.maxTokenLength)),{context:a,lineCount:a.split(`
`).length,tokenLength:o.tokenLength(a),tokenizerName:r.tokenizerName}}n(fr,"getCursorContext");var Fi=class Fi{constructor(t){this.keys=[];this.cache={};this.size=t}put(t,r){var o;if(this.cache[t]=r,this.keys.length>this.size){this.keys.push(t);let a=(o=this.keys.shift())!=null?o:"";delete this.cache[a]}}get(t){return this.cache[t]}};n(Fi,"FifoCache");var Ni=Fi;var ki=class ki{constructor(t){var r;this.stopsForLanguage=(r=jm.get(t.languageId))!=null?r:Bm}tokenize(t){return new Set(Um(t).filter(r=>!this.stopsForLanguage.has(r)))}};n(ki,"Tokenizer");var Li=ki,_u=new Ni(20),Ai=class Ai{constructor(t){this.referenceDoc=t,this.tokenizer=new Li(t)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){var t;return(t=this.referenceTokensCache)!=null?t:this.referenceTokensCache=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(t,r="descending"){return r=="ascending"?t.sort((o,a)=>o.score>a.score?1:-1):r=="descending"?t.sort((o,a)=>o.score>a.score?-1:1):t}async retrieveAllSnippets(t,r="descending"){var c;let o=[];if(t.source.length===0||(await this.referenceTokens).size===0)return o;let a=t.source.split(`
`),u=this.id()+":"+t.source,i=(c=_u.get(u))!=null?c:[],s=i.length==0,l=s?a.map(d=>this.tokenizer.tokenize(d),this.tokenizer):[];for(let[d,[m,f]]of this.getWindowsDelineations(a).entries()){if(s){let h=new Set;l.slice(m,f).forEach(w=>w.forEach(I=>h.add(I),h)),i.push(h)}let p=i[d],g=this.similarityScore(p,await this.referenceTokens);if(o.length&&m>0&&o[o.length-1].endLine>m){o[o.length-1].score<g&&(o[o.length-1].score=g,o[o.length-1].startLine=m,o[o.length-1].endLine=f);continue}o.push({score:g,startLine:m,endLine:f})}return s&&_u.put(u,i),this.sortScoredSnippets(o,r)}findMatches(t,r){return this.findBestMatch(t,r)}async findBestMatch(t,r){if(t.source.length===0||(await this.referenceTokens).size===0)return[];let o=t.source.split(`
`),a=await this.retrieveAllSnippets(t,"descending");if(a.length===0)return[];let u=[];for(let i=0;i<a.length&&i<r;i++)if(a[i].score!==0){let s=o.slice(a[i].startLine,a[i].endLine).join(`
`);u.push({snippet:s,semantics:"snippet",provider:"similar-files",...a[i]})}return u}};n(Ai,"WindowedMatcher");var pr=Ai;function Um(e){return e.split(/[^a-zA-Z0-9]/).filter(t=>t.length>0)}n(Um,"splitIntoWords");var Dm=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Bm=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Dm]),jm=new Map([]);function Yn(e,t){let r=[],o=t.length;if(o==0)return[];if(o<e)return[[0,o]];for(let a=0;a<o-e+1;a++)r.push([a,a+e]);return r}n(Yn,"getBasicWindowDelineations");var rn=class rn extends pr{constructor(t,r){super(t),this.windowLength=r}id(){return"fixed:"+this.windowLength}getWindowsDelineations(t){return Yn(this.windowLength,t)}_getCursorContextInfo(t){return fr(t,{maxLineCount:this.windowLength})}similarityScore(t,r){return Wm(t,r)}};n(rn,"FixedWindowSizeJaccardMatcher"),rn.FACTORY=n(t=>({to:n(r=>new rn(r,t),"to")}),"FACTORY");var eo=rn;function Wm(e,t){let r=new Set;return e.forEach(o=>{t.has(o)&&r.add(o)}),r.size/(e.size+t.size-r.size)}n(Wm,"computeScore");var yu=require("fs"),to=Gt(require("path")),ro=Gt(gu());var hu={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp"};function bu(e){if(!(e in hu))throw new Error(`Unrecognized language: ${e}`);return hu[e]}n(bu,"languageIdToWasmLanguage");var Ci=new Map;async function $m(e){let t,r=to.default.resolve(to.default.extname(__filename)!==".ts"?__dirname:to.default.resolve(__dirname,"../../dist"),`tree-sitter-${e}.wasm`);try{t=await yu.promises.readFile(r)}catch(o){throw o instanceof Error&&"code"in o&&typeof o.code=="string"&&o.name==="Error"?new Nt(`Could not load tree-sitter-${e}.wasm`,o):o}return ro.default.Language.load(t)}n($m,"loadWasmLanguage");function Vm(e){let t=bu(e);if(!Ci.has(t)){let r=$m(t);Ci.set(t,r)}return Ci.get(t)}n(Vm,"getLanguage");var Ui=class Ui extends Error{constructor(r,o){super(r);this.cause=o}};n(Ui,"WrappedError");var Oi=Ui;async function Qt(e,t){await ro.default.init();let r;try{r=new ro.default}catch(u){throw u&&typeof u=="object"&&"message"in u&&typeof u.message=="string"&&u.message.includes("table index is out of bounds")?new Oi(`Could not init Parse for language <${e}>`,u):u}let o=await Vm(e);r.setLanguage(o);let a=r.parse(t);return r.delete(),a}n(Qt,"parseTreeSitter");function Gm(e,t){let r=[];for(let o of e){if(!o[1]){let a=t.tree.getLanguage();o[1]=a.query(o[0])}r.push(...o[1].matches(t))}return r}n(Gm,"innerQuery");var zm=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function Iu(e){return Gm([zm],e).length==1}n(Iu,"queryPythonIsDocstring");var Ft=class Ft extends pr{constructor(t,r){super(t),this.windowLength=r}id(){return"fixed:"+this.windowLength}getWindowsDelineations(t){return Yn(this.windowLength,t)}_getCursorContextInfo(t){return fr(t,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=Ft.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){var a;let t=(a=await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))==null?void 0:a.startIndex,r=this.referenceDoc.offset,o=t?this.referenceDoc.source.slice(t,r):fr(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(o)}static syntaxAwareSupportsLanguage(t){switch(t){case"csharp":return!0;default:return!1}}similarityScore(t,r){return qm(t,r)}async getEnclosingMemberStart(t,r){var a;let o;try{o=await Qt(this.referenceDoc.languageId,t);let u=o.rootNode.namedDescendantForIndex(r);for(;u&&!(Ft.isMember(u)||Ft.isBlock(u));)u=(a=u.parent)!=null?a:void 0;return u}finally{o==null||o.delete()}}static isMember(t){switch(t==null?void 0:t.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(t){switch(t==null?void 0:t.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};n(Ft,"BlockTokenSubsetMatcher"),Ft.FACTORY=n(t=>({to:n(r=>new Ft(r,t),"to")}),"FACTORY");var no=Ft;function qm(e,t){let r=new Set;return t.forEach(o=>{e.has(o)&&r.add(o)}),r.size}n(qm,"computeScore");function Km(e,t){return(t.useSubsetMatching?no.FACTORY(t.snippetLength):eo.FACTORY(t.snippetLength)).to(e)}n(Km,"getMatcher");async function wu(e,t,r){let o=Km(e,r);return r.maxTopSnippets===0?[]:(await t.filter(u=>u.source.length<r.maxCharPerFile&&u.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(u,i)=>(await u).concat((await o.findMatches(i,r.maxSnippetsPerFile)).map(s=>({relativePath:i.relativePath,...s}))),Promise.resolve([]))).filter(u=>u.score&&u.snippet&&u.score>r.threshold).sort((u,i)=>u.score-i.score).slice(-r.maxTopSnippets)}n(wu,"getSimilarSnippets");var Me={};Qo(Me,{HasPropertyKey:()=>oo,IsArray:()=>le,IsAsyncIterator:()=>Bi,IsBigInt:()=>nn,IsBoolean:()=>St,IsDate:()=>Jt,IsFunction:()=>ji,IsIterator:()=>Wi,IsNull:()=>$i,IsNumber:()=>Ve,IsObject:()=>H,IsRegExp:()=>on,IsString:()=>J,IsSymbol:()=>Vi,IsUint8Array:()=>Et,IsUndefined:()=>he});function oo(e,t){return t in e}n(oo,"HasPropertyKey");function Bi(e){return H(e)&&!le(e)&&!Et(e)&&Symbol.asyncIterator in e}n(Bi,"IsAsyncIterator");function le(e){return Array.isArray(e)}n(le,"IsArray");function nn(e){return typeof e=="bigint"}n(nn,"IsBigInt");function St(e){return typeof e=="boolean"}n(St,"IsBoolean");function Jt(e){return e instanceof globalThis.Date}n(Jt,"IsDate");function ji(e){return typeof e=="function"}n(ji,"IsFunction");function Wi(e){return H(e)&&!le(e)&&!Et(e)&&Symbol.iterator in e}n(Wi,"IsIterator");function $i(e){return e===null}n($i,"IsNull");function Ve(e){return typeof e=="number"}n(Ve,"IsNumber");function H(e){return typeof e=="object"&&e!==null}n(H,"IsObject");function on(e){return e instanceof globalThis.RegExp}n(on,"IsRegExp");function J(e){return typeof e=="string"}n(J,"IsString");function Vi(e){return typeof e=="symbol"}n(Vi,"IsSymbol");function Et(e){return e instanceof globalThis.Uint8Array}n(Et,"IsUint8Array");function he(e){return e===void 0}n(he,"IsUndefined");function Zm(e){return e.map(t=>io(t))}n(Zm,"ArrayType");function Qm(e){return new Date(e.getTime())}n(Qm,"DateType");function Jm(e){return new Uint8Array(e)}n(Jm,"Uint8ArrayType");function Xm(e){return new RegExp(e.source,e.flags)}n(Xm,"RegExpType");function Ym(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=io(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=io(e[r]);return t}n(Ym,"ObjectType");function io(e){return le(e)?Zm(e):Jt(e)?Qm(e):Et(e)?Jm(e):on(e)?Xm(e):H(e)?Ym(e):e}n(io,"Visit");function re(e){return io(e)}n(re,"Clone");function xu(e,t){return t===void 0?re(e):re({...t,...e})}n(xu,"CloneType");function Su(e){return e!==null&&typeof e=="object"}n(Su,"IsObject");function Eu(e){return Array.isArray(e)&&!ArrayBuffer.isView(e)}n(Eu,"IsArray");function Tu(e){return e===void 0}n(Tu,"IsUndefined");function vu(e){return typeof e=="number"}n(vu,"IsNumber");var so;(function(e){e.InstanceMode="default",e.ExactOptionalPropertyTypes=!1,e.AllowArrayObject=!1,e.AllowNaN=!1,e.AllowNullVoid=!1;function t(i,s){return e.ExactOptionalPropertyTypes?s in i:i[s]!==void 0}n(t,"IsExactOptionalProperty"),e.IsExactOptionalProperty=t;function r(i){let s=Su(i);return e.AllowArrayObject?s:s&&!Eu(i)}n(r,"IsObjectLike"),e.IsObjectLike=r;function o(i){return r(i)&&!(i instanceof Date)&&!(i instanceof Uint8Array)}n(o,"IsRecordLike"),e.IsRecordLike=o;function a(i){return e.AllowNaN?vu(i):Number.isFinite(i)}n(a,"IsNumberLike"),e.IsNumberLike=a;function u(i){let s=Tu(i);return e.AllowNullVoid?s||i===null:s}n(u,"IsVoidLike"),e.IsVoidLike=u})(so||(so={}));function ef(e){return globalThis.Object.freeze(e).map(t=>sn(t))}n(ef,"ImmutableArray");function tf(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=sn(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=sn(e[r]);return globalThis.Object.freeze(t)}n(tf,"ImmutableObject");function sn(e){return le(e)?ef(e):Jt(e)?e:Et(e)?e:on(e)?e:H(e)?tf(e):e}n(sn,"Immutable");function b(e,t){let r=t!==void 0?{...t,...e}:e;switch(so.InstanceMode){case"freeze":return sn(r);case"clone":return re(r);default:return r}}n(b,"CreateType");var Gi=class Gi extends Error{constructor(t){super(t)}};n(Gi,"TypeBoxError");var be=Gi;var xe=Symbol.for("TypeBox.Transform"),st=Symbol.for("TypeBox.Readonly"),Se=Symbol.for("TypeBox.Optional"),Ge=Symbol.for("TypeBox.Hint"),S=Symbol.for("TypeBox.Kind");function ao(e){return H(e)&&e[st]==="Readonly"}n(ao,"IsReadonly");function ze(e){return H(e)&&e[Se]==="Optional"}n(ze,"IsOptional");function zi(e){return j(e,"Any")}n(zi,"IsAny");function Tt(e){return j(e,"Array")}n(Tt,"IsArray");function an(e){return j(e,"AsyncIterator")}n(an,"IsAsyncIterator");function qi(e){return j(e,"BigInt")}n(qi,"IsBigInt");function Ki(e){return j(e,"Boolean")}n(Ki,"IsBoolean");function Ae(e){return j(e,"Computed")}n(Ae,"IsComputed");function un(e){return j(e,"Constructor")}n(un,"IsConstructor");function rf(e){return j(e,"Date")}n(rf,"IsDate");function ln(e){return j(e,"Function")}n(ln,"IsFunction");function Xt(e){return j(e,"Integer")}n(Xt,"IsInteger");function ce(e){return j(e,"Intersect")}n(ce,"IsIntersect");function cn(e){return j(e,"Iterator")}n(cn,"IsIterator");function j(e,t){return H(e)&&S in e&&e[S]===t}n(j,"IsKindOf");function uo(e){return St(e)||Ve(e)||J(e)}n(uo,"IsLiteralValue");function vt(e){return j(e,"Literal")}n(vt,"IsLiteral");function Be(e){return j(e,"MappedKey")}n(Be,"IsMappedKey");function ne(e){return j(e,"MappedResult")}n(ne,"IsMappedResult");function kt(e){return j(e,"Never")}n(kt,"IsNever");function nf(e){return j(e,"Not")}n(nf,"IsNot");function of(e){return j(e,"Null")}n(of,"IsNull");function Yt(e){return j(e,"Number")}n(Yt,"IsNumber");function ye(e){return j(e,"Object")}n(ye,"IsObject");function dn(e){return j(e,"Promise")}n(dn,"IsPromise");function Hi(e){return j(e,"Record")}n(Hi,"IsRecord");function se(e){return j(e,"Ref")}n(se,"IsRef");function Zi(e){return j(e,"RegExp")}n(Zi,"IsRegExp");function mn(e){return j(e,"String")}n(mn,"IsString");function sf(e){return j(e,"Symbol")}n(sf,"IsSymbol");function je(e){return j(e,"TemplateLiteral")}n(je,"IsTemplateLiteral");function af(e){return j(e,"This")}n(af,"IsThis");function gr(e){return H(e)&&xe in e}n(gr,"IsTransform");function at(e){return j(e,"Tuple")}n(at,"IsTuple");function uf(e){return j(e,"Undefined")}n(uf,"IsUndefined");function V(e){return j(e,"Union")}n(V,"IsUnion");function lf(e){return j(e,"Uint8Array")}n(lf,"IsUint8Array");function cf(e){return j(e,"Unknown")}n(cf,"IsUnknown");function df(e){return j(e,"Unsafe")}n(df,"IsUnsafe");function mf(e){return j(e,"Void")}n(mf,"IsVoid");function ff(e){return H(e)&&S in e&&J(e[S])}n(ff,"IsKind");function We(e){return zi(e)||Tt(e)||Ki(e)||qi(e)||an(e)||Ae(e)||un(e)||rf(e)||ln(e)||Xt(e)||ce(e)||cn(e)||vt(e)||Be(e)||ne(e)||kt(e)||nf(e)||of(e)||Yt(e)||ye(e)||dn(e)||Hi(e)||se(e)||Zi(e)||mn(e)||sf(e)||je(e)||af(e)||at(e)||uf(e)||V(e)||lf(e)||cf(e)||df(e)||mf(e)||ff(e)}n(We,"IsSchema");var _={};Qo(_,{IsAny:()=>Nu,IsArray:()=>Lu,IsAsyncIterator:()=>Fu,IsBigInt:()=>ku,IsBoolean:()=>Au,IsComputed:()=>Cu,IsConstructor:()=>Ou,IsDate:()=>Uu,IsFunction:()=>Du,IsImport:()=>If,IsInteger:()=>Bu,IsIntersect:()=>ju,IsIterator:()=>Wu,IsKind:()=>fl,IsKindOf:()=>D,IsLiteral:()=>pn,IsLiteralBoolean:()=>wf,IsLiteralNumber:()=>Vu,IsLiteralString:()=>$u,IsLiteralValue:()=>Gu,IsMappedKey:()=>zu,IsMappedResult:()=>qu,IsNever:()=>Ku,IsNot:()=>Hu,IsNull:()=>Zu,IsNumber:()=>Qu,IsObject:()=>Ju,IsOptional:()=>bf,IsPromise:()=>Xu,IsProperties:()=>lo,IsReadonly:()=>yf,IsRecord:()=>Yu,IsRecursive:()=>xf,IsRef:()=>el,IsRegExp:()=>tl,IsSchema:()=>Ie,IsString:()=>rl,IsSymbol:()=>nl,IsTemplateLiteral:()=>ol,IsThis:()=>il,IsTransform:()=>sl,IsTuple:()=>al,IsUint8Array:()=>ll,IsUndefined:()=>ul,IsUnion:()=>Yi,IsUnionLiteral:()=>Sf,IsUnknown:()=>cl,IsUnsafe:()=>dl,IsVoid:()=>ml,TypeGuardUnknownTypeError:()=>Qi});var es=class es extends be{};n(es,"TypeGuardUnknownTypeError");var Qi=es,_f=["Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function Mu(e){try{return new RegExp(e),!0}catch{return!1}}n(Mu,"IsPattern");function Ji(e){if(!J(e))return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}n(Ji,"IsControlCharacterFree");function Pu(e){return Xi(e)||Ie(e)}n(Pu,"IsAdditionalProperties");function fn(e){return he(e)||nn(e)}n(fn,"IsOptionalBigInt");function X(e){return he(e)||Ve(e)}n(X,"IsOptionalNumber");function Xi(e){return he(e)||St(e)}n(Xi,"IsOptionalBoolean");function Z(e){return he(e)||J(e)}n(Z,"IsOptionalString");function gf(e){return he(e)||J(e)&&Ji(e)&&Mu(e)}n(gf,"IsOptionalPattern");function hf(e){return he(e)||J(e)&&Ji(e)}n(hf,"IsOptionalFormat");function Ru(e){return he(e)||Ie(e)}n(Ru,"IsOptionalSchema");function yf(e){return H(e)&&e[st]==="Readonly"}n(yf,"IsReadonly");function bf(e){return H(e)&&e[Se]==="Optional"}n(bf,"IsOptional");function Nu(e){return D(e,"Any")&&Z(e.$id)}n(Nu,"IsAny");function Lu(e){return D(e,"Array")&&e.type==="array"&&Z(e.$id)&&Ie(e.items)&&X(e.minItems)&&X(e.maxItems)&&Xi(e.uniqueItems)&&Ru(e.contains)&&X(e.minContains)&&X(e.maxContains)}n(Lu,"IsArray");function Fu(e){return D(e,"AsyncIterator")&&e.type==="AsyncIterator"&&Z(e.$id)&&Ie(e.items)}n(Fu,"IsAsyncIterator");function ku(e){return D(e,"BigInt")&&e.type==="bigint"&&Z(e.$id)&&fn(e.exclusiveMaximum)&&fn(e.exclusiveMinimum)&&fn(e.maximum)&&fn(e.minimum)&&fn(e.multipleOf)}n(ku,"IsBigInt");function Au(e){return D(e,"Boolean")&&e.type==="boolean"&&Z(e.$id)}n(Au,"IsBoolean");function Cu(e){return D(e,"Computed")&&J(e.target)&&le(e.parameters)&&e.parameters.every(t=>Ie(t))}n(Cu,"IsComputed");function Ou(e){return D(e,"Constructor")&&e.type==="Constructor"&&Z(e.$id)&&le(e.parameters)&&e.parameters.every(t=>Ie(t))&&Ie(e.returns)}n(Ou,"IsConstructor");function Uu(e){return D(e,"Date")&&e.type==="Date"&&Z(e.$id)&&X(e.exclusiveMaximumTimestamp)&&X(e.exclusiveMinimumTimestamp)&&X(e.maximumTimestamp)&&X(e.minimumTimestamp)&&X(e.multipleOfTimestamp)}n(Uu,"IsDate");function Du(e){return D(e,"Function")&&e.type==="Function"&&Z(e.$id)&&le(e.parameters)&&e.parameters.every(t=>Ie(t))&&Ie(e.returns)}n(Du,"IsFunction");function If(e){return D(e,"Import")&&oo(e,"$defs")&&H(e.$defs)&&lo(e.$defs)&&oo(e,"$ref")&&J(e.$ref)&&e.$ref in e.$defs}n(If,"IsImport");function Bu(e){return D(e,"Integer")&&e.type==="integer"&&Z(e.$id)&&X(e.exclusiveMaximum)&&X(e.exclusiveMinimum)&&X(e.maximum)&&X(e.minimum)&&X(e.multipleOf)}n(Bu,"IsInteger");function lo(e){return H(e)&&Object.entries(e).every(([t,r])=>Ji(t)&&Ie(r))}n(lo,"IsProperties");function ju(e){return D(e,"Intersect")&&!(J(e.type)&&e.type!=="object")&&le(e.allOf)&&e.allOf.every(t=>Ie(t)&&!sl(t))&&Z(e.type)&&(Xi(e.unevaluatedProperties)||Ru(e.unevaluatedProperties))&&Z(e.$id)}n(ju,"IsIntersect");function Wu(e){return D(e,"Iterator")&&e.type==="Iterator"&&Z(e.$id)&&Ie(e.items)}n(Wu,"IsIterator");function D(e,t){return H(e)&&S in e&&e[S]===t}n(D,"IsKindOf");function $u(e){return pn(e)&&J(e.const)}n($u,"IsLiteralString");function Vu(e){return pn(e)&&Ve(e.const)}n(Vu,"IsLiteralNumber");function wf(e){return pn(e)&&St(e.const)}n(wf,"IsLiteralBoolean");function pn(e){return D(e,"Literal")&&Z(e.$id)&&Gu(e.const)}n(pn,"IsLiteral");function Gu(e){return St(e)||Ve(e)||J(e)}n(Gu,"IsLiteralValue");function zu(e){return D(e,"MappedKey")&&le(e.keys)&&e.keys.every(t=>Ve(t)||J(t))}n(zu,"IsMappedKey");function qu(e){return D(e,"MappedResult")&&lo(e.properties)}n(qu,"IsMappedResult");function Ku(e){return D(e,"Never")&&H(e.not)&&Object.getOwnPropertyNames(e.not).length===0}n(Ku,"IsNever");function Hu(e){return D(e,"Not")&&Ie(e.not)}n(Hu,"IsNot");function Zu(e){return D(e,"Null")&&e.type==="null"&&Z(e.$id)}n(Zu,"IsNull");function Qu(e){return D(e,"Number")&&e.type==="number"&&Z(e.$id)&&X(e.exclusiveMaximum)&&X(e.exclusiveMinimum)&&X(e.maximum)&&X(e.minimum)&&X(e.multipleOf)}n(Qu,"IsNumber");function Ju(e){return D(e,"Object")&&e.type==="object"&&Z(e.$id)&&lo(e.properties)&&Pu(e.additionalProperties)&&X(e.minProperties)&&X(e.maxProperties)}n(Ju,"IsObject");function Xu(e){return D(e,"Promise")&&e.type==="Promise"&&Z(e.$id)&&Ie(e.item)}n(Xu,"IsPromise");function Yu(e){return D(e,"Record")&&e.type==="object"&&Z(e.$id)&&Pu(e.additionalProperties)&&H(e.patternProperties)&&(t=>{let r=Object.getOwnPropertyNames(t.patternProperties);return r.length===1&&Mu(r[0])&&H(t.patternProperties)&&Ie(t.patternProperties[r[0]])})(e)}n(Yu,"IsRecord");function xf(e){return H(e)&&Ge in e&&e[Ge]==="Recursive"}n(xf,"IsRecursive");function el(e){return D(e,"Ref")&&Z(e.$id)&&J(e.$ref)}n(el,"IsRef");function tl(e){return D(e,"RegExp")&&Z(e.$id)&&J(e.source)&&J(e.flags)&&X(e.maxLength)&&X(e.minLength)}n(tl,"IsRegExp");function rl(e){return D(e,"String")&&e.type==="string"&&Z(e.$id)&&X(e.minLength)&&X(e.maxLength)&&gf(e.pattern)&&hf(e.format)}n(rl,"IsString");function nl(e){return D(e,"Symbol")&&e.type==="symbol"&&Z(e.$id)}n(nl,"IsSymbol");function ol(e){return D(e,"TemplateLiteral")&&e.type==="string"&&J(e.pattern)&&e.pattern[0]==="^"&&e.pattern[e.pattern.length-1]==="$"}n(ol,"IsTemplateLiteral");function il(e){return D(e,"This")&&Z(e.$id)&&J(e.$ref)}n(il,"IsThis");function sl(e){return H(e)&&xe in e}n(sl,"IsTransform");function al(e){return D(e,"Tuple")&&e.type==="array"&&Z(e.$id)&&Ve(e.minItems)&&Ve(e.maxItems)&&e.minItems===e.maxItems&&(he(e.items)&&he(e.additionalItems)&&e.minItems===0||le(e.items)&&e.items.every(t=>Ie(t)))}n(al,"IsTuple");function ul(e){return D(e,"Undefined")&&e.type==="undefined"&&Z(e.$id)}n(ul,"IsUndefined");function Sf(e){return Yi(e)&&e.anyOf.every(t=>$u(t)||Vu(t))}n(Sf,"IsUnionLiteral");function Yi(e){return D(e,"Union")&&Z(e.$id)&&H(e)&&le(e.anyOf)&&e.anyOf.every(t=>Ie(t))}n(Yi,"IsUnion");function ll(e){return D(e,"Uint8Array")&&e.type==="Uint8Array"&&Z(e.$id)&&X(e.minByteLength)&&X(e.maxByteLength)}n(ll,"IsUint8Array");function cl(e){return D(e,"Unknown")&&Z(e.$id)}n(cl,"IsUnknown");function dl(e){return D(e,"Unsafe")}n(dl,"IsUnsafe");function ml(e){return D(e,"Void")&&e.type==="void"&&Z(e.$id)}n(ml,"IsVoid");function fl(e){return H(e)&&S in e&&J(e[S])&&!_f.includes(e[S])}n(fl,"IsKind");function Ie(e){return H(e)&&(Nu(e)||Lu(e)||Au(e)||ku(e)||Fu(e)||Cu(e)||Ou(e)||Uu(e)||Du(e)||Bu(e)||ju(e)||Wu(e)||pn(e)||zu(e)||qu(e)||Ku(e)||Hu(e)||Zu(e)||Qu(e)||Ju(e)||Xu(e)||Yu(e)||el(e)||tl(e)||rl(e)||nl(e)||ol(e)||il(e)||al(e)||ul(e)||Yi(e)||ll(e)||cl(e)||dl(e)||ml(e)||fl(e))}n(Ie,"IsSchema");var ts="(true|false)",_n="(0|[1-9][0-9]*)",rs="(.*)",Ef="(?!.*)",Ow=`^${ts}$`,er=`^${_n}$`,tr=`^${rs}$`,pl=`^${Ef}$`;function _l(e,t){return e.includes(t)}n(_l,"SetIncludes");function gl(e){return[...new Set(e)]}n(gl,"SetDistinct");function Tf(e,t){return e.filter(r=>t.includes(r))}n(Tf,"SetIntersect");function vf(e,t){return e.reduce((r,o)=>Tf(r,o),t)}n(vf,"SetIntersectManyResolve");function hl(e){return e.length===1?e[0]:e.length>1?vf(e.slice(1),e[0]):[]}n(hl,"SetIntersectMany");function yl(e){let t=[];for(let r of e)t.push(...r);return t}n(yl,"SetUnionMany");function At(e){return b({[S]:"Any"},e)}n(At,"Any");function hr(e,t){return b({[S]:"Array",type:"array",items:e},t)}n(hr,"Array");function yr(e,t){return b({[S]:"AsyncIterator",type:"AsyncIterator",items:e},t)}n(yr,"AsyncIterator");function G(e,t,r){return b({[S]:"Computed",target:e,parameters:t},r)}n(G,"Computed");function Mf(e,t){let{[t]:r,...o}=e;return o}n(Mf,"DiscardKey");function ae(e,t){return t.reduce((r,o)=>Mf(r,o),e)}n(ae,"Discard");function Y(e){return b({[S]:"Never",not:{}},e)}n(Y,"Never");function W(e){return b({[S]:"MappedResult",properties:e})}n(W,"MappedResult");function br(e,t,r){return b({[S]:"Constructor",type:"Constructor",parameters:e,returns:t},r)}n(br,"Constructor");function pt(e,t,r){return b({[S]:"Function",type:"Function",parameters:e,returns:t},r)}n(pt,"Function");function gn(e,t){return b({[S]:"Union",anyOf:e},t)}n(gn,"UnionCreate");function Pf(e){return e.some(t=>ze(t))}n(Pf,"IsUnionOptional");function bl(e){return e.map(t=>ze(t)?Rf(t):t)}n(bl,"RemoveOptionalFromRest");function Rf(e){return ae(e,[Se])}n(Rf,"RemoveOptionalFromType");function Nf(e,t){return Pf(e)?Ce(gn(bl(e),t)):gn(bl(e),t)}n(Nf,"ResolveUnion");function _t(e,t){return e.length===1?b(e[0],t):e.length===0?Y(t):Nf(e,t)}n(_t,"UnionEvaluated");function q(e,t){return e.length===0?Y(t):e.length===1?b(e[0],t):gn(e,t)}n(q,"Union");var os=class os extends be{};n(os,"TemplateLiteralParserError");var co=os;function Lf(e){return e.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}n(Lf,"Unescape");function ns(e,t,r){return e[t]===r&&e.charCodeAt(t-1)!==92}n(ns,"IsNonEscaped");function Mt(e,t){return ns(e,t,"(")}n(Mt,"IsOpenParen");function hn(e,t){return ns(e,t,")")}n(hn,"IsCloseParen");function Il(e,t){return ns(e,t,"|")}n(Il,"IsSeparator");function Ff(e){if(!(Mt(e,0)&&hn(e,e.length-1)))return!1;let t=0;for(let r=0;r<e.length;r++)if(Mt(e,r)&&(t+=1),hn(e,r)&&(t-=1),t===0&&r!==e.length-1)return!1;return!0}n(Ff,"IsGroup");function kf(e){return e.slice(1,e.length-1)}n(kf,"InGroup");function Af(e){let t=0;for(let r=0;r<e.length;r++)if(Mt(e,r)&&(t+=1),hn(e,r)&&(t-=1),Il(e,r)&&t===0)return!0;return!1}n(Af,"IsPrecedenceOr");function Cf(e){for(let t=0;t<e.length;t++)if(Mt(e,t))return!0;return!1}n(Cf,"IsPrecedenceAnd");function Of(e){let[t,r]=[0,0],o=[];for(let u=0;u<e.length;u++)if(Mt(e,u)&&(t+=1),hn(e,u)&&(t-=1),Il(e,u)&&t===0){let i=e.slice(r,u);i.length>0&&o.push(Ir(i)),r=u+1}let a=e.slice(r);return a.length>0&&o.push(Ir(a)),o.length===0?{type:"const",const:""}:o.length===1?o[0]:{type:"or",expr:o}}n(Of,"Or");function Uf(e){function t(a,u){if(!Mt(a,u))throw new co("TemplateLiteralParser: Index must point to open parens");let i=0;for(let s=u;s<a.length;s++)if(Mt(a,s)&&(i+=1),hn(a,s)&&(i-=1),i===0)return[u,s];throw new co("TemplateLiteralParser: Unclosed group parens in expression")}n(t,"Group");function r(a,u){for(let i=u;i<a.length;i++)if(Mt(a,i))return[u,i];return[u,a.length]}n(r,"Range");let o=[];for(let a=0;a<e.length;a++)if(Mt(e,a)){let[u,i]=t(e,a),s=e.slice(u,i+1);o.push(Ir(s)),a=i}else{let[u,i]=r(e,a),s=e.slice(u,i);s.length>0&&o.push(Ir(s)),a=i-1}return o.length===0?{type:"const",const:""}:o.length===1?o[0]:{type:"and",expr:o}}n(Uf,"And");function Ir(e){return Ff(e)?Ir(kf(e)):Af(e)?Of(e):Cf(e)?Uf(e):{type:"const",const:Lf(e)}}n(Ir,"TemplateLiteralParse");function wr(e){return Ir(e.slice(1,e.length-1))}n(wr,"TemplateLiteralParseExact");var ss=class ss extends be{};n(ss,"TemplateLiteralFiniteError");var is=ss;function Df(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="0"&&e.expr[1].type==="const"&&e.expr[1].const==="[1-9][0-9]*"}n(Df,"IsNumberExpression");function Bf(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="true"&&e.expr[1].type==="const"&&e.expr[1].const==="false"}n(Bf,"IsBooleanExpression");function jf(e){return e.type==="const"&&e.const===".*"}n(jf,"IsStringExpression");function rr(e){return Df(e)||jf(e)?!1:Bf(e)?!0:e.type==="and"?e.expr.every(t=>rr(t)):e.type==="or"?e.expr.every(t=>rr(t)):e.type==="const"?!0:(()=>{throw new is("Unknown expression type")})()}n(rr,"IsTemplateLiteralExpressionFinite");function wl(e){let t=wr(e.pattern);return rr(t)}n(wl,"IsTemplateLiteralFinite");var us=class us extends be{};n(us,"TemplateLiteralGenerateError");var as=us;function*xl(e){if(e.length===1)return yield*e[0];for(let t of e[0])for(let r of xl(e.slice(1)))yield`${t}${r}`}n(xl,"GenerateReduce");function*Wf(e){return yield*xl(e.expr.map(t=>[...yn(t)]))}n(Wf,"GenerateAnd");function*$f(e){for(let t of e.expr)yield*yn(t)}n($f,"GenerateOr");function*Vf(e){return yield e.const}n(Vf,"GenerateConst");function*yn(e){return e.type==="and"?yield*Wf(e):e.type==="or"?yield*$f(e):e.type==="const"?yield*Vf(e):(()=>{throw new as("Unknown expression")})()}n(yn,"TemplateLiteralExpressionGenerate");function mo(e){let t=wr(e.pattern);return rr(t)?[...yn(t)]:[]}n(mo,"TemplateLiteralGenerate");function z(e,t){return b({[S]:"Literal",const:e,type:typeof e},t)}n(z,"Literal");function fo(e){return b({[S]:"Boolean",type:"boolean"},e)}n(fo,"Boolean");function xr(e){return b({[S]:"BigInt",type:"bigint"},e)}n(xr,"BigInt");function gt(e){return b({[S]:"Number",type:"number"},e)}n(gt,"Number");function Ct(e){return b({[S]:"String",type:"string"},e)}n(Ct,"String");function*Gf(e){let t=e.trim().replace(/"|'/g,"");return t==="boolean"?yield fo():t==="number"?yield gt():t==="bigint"?yield xr():t==="string"?yield Ct():yield(()=>{let r=t.split("|").map(o=>z(o.trim()));return r.length===0?Y():r.length===1?r[0]:_t(r)})()}n(Gf,"FromUnion");function*zf(e){if(e[1]!=="{"){let t=z("$"),r=ls(e.slice(1));return yield*[t,...r]}for(let t=2;t<e.length;t++)if(e[t]==="}"){let r=Gf(e.slice(2,t)),o=ls(e.slice(t+1));return yield*[...r,...o]}yield z(e)}n(zf,"FromTerminal");function*ls(e){for(let t=0;t<e.length;t++)if(e[t]==="$"){let r=z(e.slice(0,t)),o=zf(e.slice(t));return yield*[r,...o]}yield z(e)}n(ls,"FromSyntax");function Sl(e){return[...ls(e)]}n(Sl,"TemplateLiteralSyntax");var ms=class ms extends be{};n(ms,"TemplateLiteralPatternError");var cs=ms;function qf(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n(qf,"Escape");function El(e,t){return je(e)?e.pattern.slice(1,e.pattern.length-1):V(e)?`(${e.anyOf.map(r=>El(r,t)).join("|")})`:Yt(e)?`${t}${_n}`:Xt(e)?`${t}${_n}`:qi(e)?`${t}${_n}`:mn(e)?`${t}${rs}`:vt(e)?`${t}${qf(e.const.toString())}`:Ki(e)?`${t}${ts}`:(()=>{throw new cs(`Unexpected Kind '${e[S]}'`)})()}n(El,"Visit");function ds(e){return`^${e.map(t=>El(t,"")).join("")}$`}n(ds,"TemplateLiteralPattern");function nr(e){let r=mo(e).map(o=>z(o));return _t(r)}n(nr,"TemplateLiteralToUnion");function po(e,t){let r=J(e)?ds(Sl(e)):ds(e);return b({[S]:"TemplateLiteral",type:"string",pattern:r},t)}n(po,"TemplateLiteral");function Kf(e){return mo(e).map(r=>r.toString())}n(Kf,"FromTemplateLiteral");function Hf(e){let t=[];for(let r of e)t.push(...Oe(r));return t}n(Hf,"FromUnion");function Zf(e){return[e.toString()]}n(Zf,"FromLiteral");function Oe(e){return[...new Set(je(e)?Kf(e):V(e)?Hf(e.anyOf):vt(e)?Zf(e.const):Yt(e)?["[number]"]:Xt(e)?["[number]"]:[])]}n(Oe,"IndexPropertyKeys");function Qf(e,t,r){let o={};for(let a of Object.getOwnPropertyNames(t))o[a]=Ot(e,Oe(t[a]),r);return o}n(Qf,"FromProperties");function Jf(e,t,r){return Qf(e,t.properties,r)}n(Jf,"FromMappedResult");function Tl(e,t,r){let o=Jf(e,t,r);return W(o)}n(Tl,"IndexFromMappedResult");function Ml(e,t){return e.map(r=>Pl(r,t))}n(Ml,"FromRest");function Xf(e){return e.filter(t=>!kt(t))}n(Xf,"FromIntersectRest");function Yf(e,t){return _o(Xf(Ml(e,t)))}n(Yf,"FromIntersect");function ep(e){return e.some(t=>kt(t))?[]:e}n(ep,"FromUnionRest");function tp(e,t){return _t(ep(Ml(e,t)))}n(tp,"FromUnion");function rp(e,t){return t in e?e[t]:t==="[number]"?_t(e):Y()}n(rp,"FromTuple");function np(e,t){return t==="[number]"?e:Y()}n(np,"FromArray");function op(e,t){return t in e?e[t]:Y()}n(op,"FromProperty");function Pl(e,t){var r;return ce(e)?Yf(e.allOf,t):V(e)?tp(e.anyOf,t):at(e)?rp((r=e.items)!=null?r:[],t):Tt(e)?np(e.items,t):ye(e)?op(e.properties,t):Y()}n(Pl,"IndexFromPropertyKey");function ps(e,t){return t.map(r=>Pl(e,r))}n(ps,"IndexFromPropertyKeys");function vl(e,t){return _t(ps(e,t))}n(vl,"FromSchema");function Ot(e,t,r){if(se(e)||se(t)){let o="Index types using Ref parameters require both Type and Key to be of TSchema";if(!We(e)||!We(t))throw new be(o);return G("Index",[e,t])}return ne(t)?Tl(e,t,r):Be(t)?Rl(e,t,r):b(We(t)?vl(e,Oe(t)):vl(e,t),r)}n(Ot,"Index");function ip(e,t,r){return{[t]:Ot(e,[t],re(r))}}n(ip,"MappedIndexPropertyKey");function sp(e,t,r){return t.reduce((o,a)=>({...o,...ip(e,a,r)}),{})}n(sp,"MappedIndexPropertyKeys");function ap(e,t,r){return sp(e,t.keys,r)}n(ap,"MappedIndexProperties");function Rl(e,t,r){let o=ap(e,t,r);return W(o)}n(Rl,"IndexFromMappedKey");function Sr(e,t){return b({[S]:"Iterator",type:"Iterator",items:e},t)}n(Sr,"Iterator");function up(e){let t=[];for(let r in e)ze(e[r])||t.push(r);return t}n(up,"RequiredKeys");function lp(e,t){let r=up(e),o=r.length>0?{[S]:"Object",type:"object",properties:e,required:r}:{[S]:"Object",type:"object",properties:e};return b(o,t)}n(lp,"_Object");var ee=lp;function go(e,t){return b({[S]:"Promise",type:"Promise",item:e},t)}n(go,"Promise");function cp(e){return b(ae(e,[st]))}n(cp,"RemoveReadonly");function dp(e){return b({...e,[st]:"Readonly"})}n(dp,"AddReadonly");function mp(e,t){return t===!1?cp(e):dp(e)}n(mp,"ReadonlyWithFlag");function qe(e,t){let r=t!=null?t:!0;return ne(e)?Nl(e,r):mp(e,r)}n(qe,"Readonly");function fp(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(e))r[o]=qe(e[o],t);return r}n(fp,"FromProperties");function pp(e,t){return fp(e.properties,t)}n(pp,"FromMappedResult");function Nl(e,t){let r=pp(e,t);return W(r)}n(Nl,"ReadonlyFromMappedResult");function Ke(e,t){return b(e.length>0?{[S]:"Tuple",type:"array",items:e,additionalItems:!1,minItems:e.length,maxItems:e.length}:{[S]:"Tuple",type:"array",minItems:e.length,maxItems:e.length},t)}n(Ke,"Tuple");function Ll(e,t){return e in t?He(e,t[e]):W(t)}n(Ll,"FromMappedResult");function _p(e){return{[e]:z(e)}}n(_p,"MappedKeyToKnownMappedResultProperties");function gp(e){let t={};for(let r of e)t[r]=z(r);return t}n(gp,"MappedKeyToUnknownMappedResultProperties");function hp(e,t){return _l(t,e)?_p(e):gp(t)}n(hp,"MappedKeyToMappedResultProperties");function yp(e,t){let r=hp(e,t);return Ll(e,r)}n(yp,"FromMappedKey");function bn(e,t){return t.map(r=>He(e,r))}n(bn,"FromRest");function bp(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(t))r[o]=He(e,t[o]);return r}n(bp,"FromProperties");function He(e,t){var o;let r={...t};return ze(t)?Ce(He(e,ae(t,[Se]))):ao(t)?qe(He(e,ae(t,[st]))):ne(t)?Ll(e,t.properties):Be(t)?yp(e,t.keys):un(t)?br(bn(e,t.parameters),He(e,t.returns),r):ln(t)?pt(bn(e,t.parameters),He(e,t.returns),r):an(t)?yr(He(e,t.items),r):cn(t)?Sr(He(e,t.items),r):ce(t)?Pe(bn(e,t.allOf),r):V(t)?q(bn(e,t.anyOf),r):at(t)?Ke(bn(e,(o=t.items)!=null?o:[]),r):ye(t)?ee(bp(e,t.properties),r):Tt(t)?hr(He(e,t.items),r):dn(t)?go(He(e,t.item),r):t}n(He,"FromSchemaType");function Ip(e,t){let r={};for(let o of e)r[o]=He(o,t);return r}n(Ip,"MappedFunctionReturnType");function Fl(e,t,r){let o=We(e)?Oe(e):e,a=t({[S]:"MappedKey",keys:o}),u=Ip(o,a);return ee(u,r)}n(Fl,"Mapped");function wp(e){return b(ae(e,[Se]))}n(wp,"RemoveOptional");function xp(e){return b({...e,[Se]:"Optional"})}n(xp,"AddOptional");function Sp(e,t){return t===!1?wp(e):xp(e)}n(Sp,"OptionalWithFlag");function Ce(e,t){let r=t!=null?t:!0;return ne(e)?kl(e,r):Sp(e,r)}n(Ce,"Optional");function Ep(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(e))r[o]=Ce(e[o],t);return r}n(Ep,"FromProperties");function Tp(e,t){return Ep(e.properties,t)}n(Tp,"FromMappedResult");function kl(e,t){let r=Tp(e,t);return W(r)}n(kl,"OptionalFromMappedResult");function In(e,t={}){let r=e.every(a=>ye(a)),o=We(t.unevaluatedProperties)?{unevaluatedProperties:t.unevaluatedProperties}:{};return b(t.unevaluatedProperties===!1||We(t.unevaluatedProperties)||r?{...o,[S]:"Intersect",type:"object",allOf:e}:{...o,[S]:"Intersect",allOf:e},t)}n(In,"IntersectCreate");function vp(e){return e.every(t=>ze(t))}n(vp,"IsIntersectOptional");function Mp(e){return ae(e,[Se])}n(Mp,"RemoveOptionalFromType");function Al(e){return e.map(t=>ze(t)?Mp(t):t)}n(Al,"RemoveOptionalFromRest");function Pp(e,t){return vp(e)?Ce(In(Al(e),t)):In(Al(e),t)}n(Pp,"ResolveIntersect");function _o(e,t={}){if(e.length===1)return b(e[0],t);if(e.length===0)return Y(t);if(e.some(r=>gr(r)))throw new Error("Cannot intersect transform types");return Pp(e,t)}n(_o,"IntersectEvaluated");function Pe(e,t){if(e.length===1)return b(e[0],t);if(e.length===0)return Y(t);if(e.some(r=>gr(r)))throw new Error("Cannot intersect transform types");return In(e,t)}n(Pe,"Intersect");function Ze(...e){let[t,r]=typeof e[0]=="string"?[e[0],e[1]]:[e[0].$id,e[1]];if(typeof t!="string")throw new be("Ref: $ref must be a string");return b({[S]:"Ref",$ref:t},r)}n(Ze,"Ref");function Rp(e,t){return G("Awaited",[G(e,t)])}n(Rp,"FromComputed");function Np(e){return G("Awaited",[Ze(e)])}n(Np,"FromRef");function Lp(e){return Pe(Cl(e))}n(Lp,"FromIntersect");function Fp(e){return q(Cl(e))}n(Fp,"FromUnion");function kp(e){return Er(e)}n(kp,"FromPromise");function Cl(e){return e.map(t=>Er(t))}n(Cl,"FromRest");function Er(e,t){return b(Ae(e)?Rp(e.target,e.parameters):ce(e)?Lp(e.allOf):V(e)?Fp(e.anyOf):dn(e)?kp(e.item):se(e)?Np(e.$ref):e,t)}n(Er,"Awaited");function Ol(e){let t=[];for(let r of e)t.push(wn(r));return t}n(Ol,"FromRest");function Ap(e){let t=Ol(e);return yl(t)}n(Ap,"FromIntersect");function Cp(e){let t=Ol(e);return hl(t)}n(Cp,"FromUnion");function Op(e){return e.map((t,r)=>r.toString())}n(Op,"FromTuple");function Up(e){return["[number]"]}n(Up,"FromArray");function Dp(e){return globalThis.Object.getOwnPropertyNames(e)}n(Dp,"FromProperties");function Bp(e){return jp?globalThis.Object.getOwnPropertyNames(e).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}n(Bp,"FromPatternProperties");function wn(e){var t;return ce(e)?Ap(e.allOf):V(e)?Cp(e.anyOf):at(e)?Op((t=e.items)!=null?t:[]):Tt(e)?Up(e.items):ye(e)?Dp(e.properties):Hi(e)?Bp(e.patternProperties):[]}n(wn,"KeyOfPropertyKeys");var jp=!1;function Wp(e,t){return G("KeyOf",[G(e,t)])}n(Wp,"FromComputed");function $p(e){return G("KeyOf",[Ze(e)])}n($p,"FromRef");function Vp(e,t){let r=wn(e),o=Gp(r),a=_t(o);return b(a,t)}n(Vp,"KeyOfFromType");function Gp(e){return e.map(t=>t==="[number]"?gt():z(t))}n(Gp,"KeyOfPropertyKeysToRest");function Tr(e,t){return Ae(e)?Wp(e.target,e.parameters):se(e)?$p(e.$ref):ne(e)?Ul(e,t):Vp(e,t)}n(Tr,"KeyOf");function zp(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(e))r[o]=Tr(e[o],re(t));return r}n(zp,"FromProperties");function qp(e,t){return zp(e.properties,t)}n(qp,"FromMappedResult");function Ul(e,t){let r=qp(e,t);return W(r)}n(Ul,"KeyOfFromMappedResult");function Kp(e){let t=[];for(let r of e)t.push(...wn(r));return gl(t)}n(Kp,"CompositeKeys");function Hp(e){return e.filter(t=>!kt(t))}n(Hp,"FilterNever");function Zp(e,t){let r=[];for(let o of e)r.push(...ps(o,[t]));return Hp(r)}n(Zp,"CompositeProperty");function Qp(e,t){let r={};for(let o of t)r[o]=_o(Zp(e,o));return r}n(Qp,"CompositeProperties");function Dl(e,t){let r=Kp(e),o=Qp(e,r);return ee(o,t)}n(Dl,"Composite");function ho(e){return b({[S]:"Date",type:"Date"},e)}n(ho,"Date");function yo(e){return b({[S]:"Null",type:"null"},e)}n(yo,"Null");function bo(e){return b({[S]:"Symbol",type:"symbol"},e)}n(bo,"Symbol");function Io(e){return b({[S]:"Undefined",type:"undefined"},e)}n(Io,"Undefined");function wo(e){return b({[S]:"Uint8Array",type:"Uint8Array"},e)}n(wo,"Uint8Array");function vr(e){return b({[S]:"Unknown"},e)}n(vr,"Unknown");function Jp(e){return e.map(t=>_s(t,!1))}n(Jp,"FromArray");function Xp(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=qe(_s(e[r],!1));return t}n(Xp,"FromProperties");function xo(e,t){return t===!0?e:qe(e)}n(xo,"ConditionalReadonly");function _s(e,t){return Bi(e)?xo(At(),t):Wi(e)?xo(At(),t):le(e)?qe(Ke(Jp(e))):Et(e)?wo():Jt(e)?ho():H(e)?xo(ee(Xp(e)),t):ji(e)?xo(pt([],vr()),t):he(e)?Io():$i(e)?yo():Vi(e)?bo():nn(e)?xr():Ve(e)?z(e):St(e)?z(e):J(e)?z(e):ee({})}n(_s,"FromValue");function Bl(e,t){return b(_s(e,!0),t)}n(Bl,"Const");function jl(e,t){return Ke(e.parameters,t)}n(jl,"ConstructorParameters");function Wl(e,t){if(he(e))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(e).filter(u=>isNaN(u)).map(u=>e[u]),a=[...new Set(r)].map(u=>z(u));return q(a,{...t,[Ge]:"Enum"})}n(Wl,"Enum");var xs=class xs extends be{};n(xs,"ExtendsResolverError");var hs=xs,y;(function(e){e[e.Union=0]="Union",e[e.True=1]="True",e[e.False=2]="False"})(y||(y={}));function Qe(e){return e===y.False?e:y.True}n(Qe,"IntoBooleanResult");function Mr(e){throw new hs(e)}n(Mr,"Throw");function fe(e){return _.IsNever(e)||_.IsIntersect(e)||_.IsUnion(e)||_.IsUnknown(e)||_.IsAny(e)}n(fe,"IsStructuralRight");function pe(e,t){return _.IsNever(t)?Hl(e,t):_.IsIntersect(t)?So(e,t):_.IsUnion(t)?ws(e,t):_.IsUnknown(t)?Xl(e,t):_.IsAny(t)?Is(e,t):Mr("StructuralRight")}n(pe,"StructuralRight");function Is(e,t){return y.True}n(Is,"FromAnyRight");function Yp(e,t){return _.IsIntersect(t)?So(e,t):_.IsUnion(t)&&t.anyOf.some(r=>_.IsAny(r)||_.IsUnknown(r))?y.True:_.IsUnion(t)?y.Union:_.IsUnknown(t)||_.IsAny(t)?y.True:y.Union}n(Yp,"FromAny");function e_(e,t){return _.IsUnknown(e)?y.False:_.IsAny(e)?y.Union:_.IsNever(e)?y.True:y.False}n(e_,"FromArrayRight");function t_(e,t){return _.IsObject(t)&&Eo(t)?y.True:fe(t)?pe(e,t):_.IsArray(t)?Qe(Q(e.items,t.items)):y.False}n(t_,"FromArray");function r_(e,t){return fe(t)?pe(e,t):_.IsAsyncIterator(t)?Qe(Q(e.items,t.items)):y.False}n(r_,"FromAsyncIterator");function n_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsBigInt(t)?y.True:y.False}n(n_,"FromBigInt");function ql(e,t){return _.IsLiteralBoolean(e)||_.IsBoolean(e)?y.True:y.False}n(ql,"FromBooleanRight");function o_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsBoolean(t)?y.True:y.False}n(o_,"FromBoolean");function i_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsConstructor(t)?e.parameters.length>t.parameters.length?y.False:e.parameters.every((r,o)=>Qe(Q(t.parameters[o],r))===y.True)?Qe(Q(e.returns,t.returns)):y.False:y.False}n(i_,"FromConstructor");function s_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsDate(t)?y.True:y.False}n(s_,"FromDate");function a_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsFunction(t)?e.parameters.length>t.parameters.length?y.False:e.parameters.every((r,o)=>Qe(Q(t.parameters[o],r))===y.True)?Qe(Q(e.returns,t.returns)):y.False:y.False}n(a_,"FromFunction");function Kl(e,t){return _.IsLiteral(e)&&Me.IsNumber(e.const)||_.IsNumber(e)||_.IsInteger(e)?y.True:y.False}n(Kl,"FromIntegerRight");function u_(e,t){return _.IsInteger(t)||_.IsNumber(t)?y.True:fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):y.False}n(u_,"FromInteger");function So(e,t){return t.allOf.every(r=>Q(e,r)===y.True)?y.True:y.False}n(So,"FromIntersectRight");function l_(e,t){return e.allOf.some(r=>Q(r,t)===y.True)?y.True:y.False}n(l_,"FromIntersect");function c_(e,t){return fe(t)?pe(e,t):_.IsIterator(t)?Qe(Q(e.items,t.items)):y.False}n(c_,"FromIterator");function d_(e,t){return _.IsLiteral(t)&&t.const===e.const?y.True:fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsString(t)?Jl(e,t):_.IsNumber(t)?Zl(e,t):_.IsInteger(t)?Kl(e,t):_.IsBoolean(t)?ql(e,t):y.False}n(d_,"FromLiteral");function Hl(e,t){return y.False}n(Hl,"FromNeverRight");function m_(e,t){return y.True}n(m_,"FromNever");function $l(e){let[t,r]=[e,0];for(;_.IsNot(t);)t=t.not,r+=1;return r%2===0?t:vr()}n($l,"UnwrapTNot");function f_(e,t){return _.IsNot(e)?Q($l(e),t):_.IsNot(t)?Q(e,$l(t)):Mr("Invalid fallthrough for Not")}n(f_,"FromNot");function p_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsNull(t)?y.True:y.False}n(p_,"FromNull");function Zl(e,t){return _.IsLiteralNumber(e)||_.IsNumber(e)||_.IsInteger(e)?y.True:y.False}n(Zl,"FromNumberRight");function __(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsInteger(t)||_.IsNumber(t)?y.True:y.False}n(__,"FromNumber");function Ue(e,t){return Object.getOwnPropertyNames(e.properties).length===t}n(Ue,"IsObjectPropertyCount");function Vl(e){return Eo(e)}n(Vl,"IsObjectStringLike");function Gl(e){return Ue(e,0)||Ue(e,1)&&"description"in e.properties&&_.IsUnion(e.properties.description)&&e.properties.description.anyOf.length===2&&(_.IsString(e.properties.description.anyOf[0])&&_.IsUndefined(e.properties.description.anyOf[1])||_.IsString(e.properties.description.anyOf[1])&&_.IsUndefined(e.properties.description.anyOf[0]))}n(Gl,"IsObjectSymbolLike");function gs(e){return Ue(e,0)}n(gs,"IsObjectNumberLike");function zl(e){return Ue(e,0)}n(zl,"IsObjectBooleanLike");function g_(e){return Ue(e,0)}n(g_,"IsObjectBigIntLike");function h_(e){return Ue(e,0)}n(h_,"IsObjectDateLike");function y_(e){return Eo(e)}n(y_,"IsObjectUint8ArrayLike");function b_(e){let t=gt();return Ue(e,0)||Ue(e,1)&&"length"in e.properties&&Qe(Q(e.properties.length,t))===y.True}n(b_,"IsObjectFunctionLike");function I_(e){return Ue(e,0)}n(I_,"IsObjectConstructorLike");function Eo(e){let t=gt();return Ue(e,0)||Ue(e,1)&&"length"in e.properties&&Qe(Q(e.properties.length,t))===y.True}n(Eo,"IsObjectArrayLike");function w_(e){let t=pt([At()],At());return Ue(e,0)||Ue(e,1)&&"then"in e.properties&&Qe(Q(e.properties.then,t))===y.True}n(w_,"IsObjectPromiseLike");function Ql(e,t){return Q(e,t)===y.False||_.IsOptional(e)&&!_.IsOptional(t)?y.False:y.True}n(Ql,"Property");function Re(e,t){return _.IsUnknown(e)?y.False:_.IsAny(e)?y.Union:_.IsNever(e)||_.IsLiteralString(e)&&Vl(t)||_.IsLiteralNumber(e)&&gs(t)||_.IsLiteralBoolean(e)&&zl(t)||_.IsSymbol(e)&&Gl(t)||_.IsBigInt(e)&&g_(t)||_.IsString(e)&&Vl(t)||_.IsSymbol(e)&&Gl(t)||_.IsNumber(e)&&gs(t)||_.IsInteger(e)&&gs(t)||_.IsBoolean(e)&&zl(t)||_.IsUint8Array(e)&&y_(t)||_.IsDate(e)&&h_(t)||_.IsConstructor(e)&&I_(t)||_.IsFunction(e)&&b_(t)?y.True:_.IsRecord(e)&&_.IsString(ys(e))?t[Ge]==="Record"?y.True:y.False:_.IsRecord(e)&&_.IsNumber(ys(e))?Ue(t,0)?y.True:y.False:y.False}n(Re,"FromObjectRight");function x_(e,t){return fe(t)?pe(e,t):_.IsRecord(t)?Je(e,t):_.IsObject(t)?(()=>{for(let r of Object.getOwnPropertyNames(t.properties)){if(!(r in e.properties)&&!_.IsOptional(t.properties[r]))return y.False;if(_.IsOptional(t.properties[r]))return y.True;if(Ql(e.properties[r],t.properties[r])===y.False)return y.False}return y.True})():y.False}n(x_,"FromObject");function S_(e,t){return fe(t)?pe(e,t):_.IsObject(t)&&w_(t)?y.True:_.IsPromise(t)?Qe(Q(e.item,t.item)):y.False}n(S_,"FromPromise");function ys(e){return er in e.patternProperties?gt():tr in e.patternProperties?Ct():Mr("Unknown record key pattern")}n(ys,"RecordKey");function bs(e){return er in e.patternProperties?e.patternProperties[er]:tr in e.patternProperties?e.patternProperties[tr]:Mr("Unable to get record value schema")}n(bs,"RecordValue");function Je(e,t){let[r,o]=[ys(t),bs(t)];return _.IsLiteralString(e)&&_.IsNumber(r)&&Qe(Q(e,o))===y.True?y.True:_.IsUint8Array(e)&&_.IsNumber(r)||_.IsString(e)&&_.IsNumber(r)||_.IsArray(e)&&_.IsNumber(r)?Q(e,o):_.IsObject(e)?(()=>{for(let a of Object.getOwnPropertyNames(e.properties))if(Ql(o,e.properties[a])===y.False)return y.False;return y.True})():y.False}n(Je,"FromRecordRight");function E_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Q(bs(e),bs(t)):y.False}n(E_,"FromRecord");function T_(e,t){let r=_.IsRegExp(e)?Ct():e,o=_.IsRegExp(t)?Ct():t;return Q(r,o)}n(T_,"FromRegExp");function Jl(e,t){return _.IsLiteral(e)&&Me.IsString(e.const)||_.IsString(e)?y.True:y.False}n(Jl,"FromStringRight");function v_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsString(t)?y.True:y.False}n(v_,"FromString");function M_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsSymbol(t)?y.True:y.False}n(M_,"FromSymbol");function P_(e,t){return _.IsTemplateLiteral(e)?Q(nr(e),t):_.IsTemplateLiteral(t)?Q(e,nr(t)):Mr("Invalid fallthrough for TemplateLiteral")}n(P_,"FromTemplateLiteral");function R_(e,t){return _.IsArray(t)&&e.items!==void 0&&e.items.every(r=>Q(r,t.items)===y.True)}n(R_,"IsArrayOfTuple");function N_(e,t){return _.IsNever(e)?y.True:_.IsUnknown(e)?y.False:_.IsAny(e)?y.Union:y.False}n(N_,"FromTupleRight");function L_(e,t){return fe(t)?pe(e,t):_.IsObject(t)&&Eo(t)||_.IsArray(t)&&R_(e,t)?y.True:_.IsTuple(t)?Me.IsUndefined(e.items)&&!Me.IsUndefined(t.items)||!Me.IsUndefined(e.items)&&Me.IsUndefined(t.items)?y.False:Me.IsUndefined(e.items)&&!Me.IsUndefined(t.items)||e.items.every((r,o)=>Q(r,t.items[o])===y.True)?y.True:y.False:y.False}n(L_,"FromTuple");function F_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsUint8Array(t)?y.True:y.False}n(F_,"FromUint8Array");function k_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Re(e,t):_.IsRecord(t)?Je(e,t):_.IsVoid(t)?O_(e,t):_.IsUndefined(t)?y.True:y.False}n(k_,"FromUndefined");function ws(e,t){return t.anyOf.some(r=>Q(e,r)===y.True)?y.True:y.False}n(ws,"FromUnionRight");function A_(e,t){return e.anyOf.every(r=>Q(r,t)===y.True)?y.True:y.False}n(A_,"FromUnion");function Xl(e,t){return y.True}n(Xl,"FromUnknownRight");function C_(e,t){return _.IsNever(t)?Hl(e,t):_.IsIntersect(t)?So(e,t):_.IsUnion(t)?ws(e,t):_.IsAny(t)?Is(e,t):_.IsString(t)?Jl(e,t):_.IsNumber(t)?Zl(e,t):_.IsInteger(t)?Kl(e,t):_.IsBoolean(t)?ql(e,t):_.IsArray(t)?e_(e,t):_.IsTuple(t)?N_(e,t):_.IsObject(t)?Re(e,t):_.IsUnknown(t)?y.True:y.False}n(C_,"FromUnknown");function O_(e,t){return _.IsUndefined(e)||_.IsUndefined(e)?y.True:y.False}n(O_,"FromVoidRight");function U_(e,t){return _.IsIntersect(t)?So(e,t):_.IsUnion(t)?ws(e,t):_.IsUnknown(t)?Xl(e,t):_.IsAny(t)?Is(e,t):_.IsObject(t)?Re(e,t):_.IsVoid(t)?y.True:y.False}n(U_,"FromVoid");function Q(e,t){return _.IsTemplateLiteral(e)||_.IsTemplateLiteral(t)?P_(e,t):_.IsRegExp(e)||_.IsRegExp(t)?T_(e,t):_.IsNot(e)||_.IsNot(t)?f_(e,t):_.IsAny(e)?Yp(e,t):_.IsArray(e)?t_(e,t):_.IsBigInt(e)?n_(e,t):_.IsBoolean(e)?o_(e,t):_.IsAsyncIterator(e)?r_(e,t):_.IsConstructor(e)?i_(e,t):_.IsDate(e)?s_(e,t):_.IsFunction(e)?a_(e,t):_.IsInteger(e)?u_(e,t):_.IsIntersect(e)?l_(e,t):_.IsIterator(e)?c_(e,t):_.IsLiteral(e)?d_(e,t):_.IsNever(e)?m_(e,t):_.IsNull(e)?p_(e,t):_.IsNumber(e)?__(e,t):_.IsObject(e)?x_(e,t):_.IsRecord(e)?E_(e,t):_.IsString(e)?v_(e,t):_.IsSymbol(e)?M_(e,t):_.IsTuple(e)?L_(e,t):_.IsPromise(e)?S_(e,t):_.IsUint8Array(e)?F_(e,t):_.IsUndefined(e)?k_(e,t):_.IsUnion(e)?A_(e,t):_.IsUnknown(e)?C_(e,t):_.IsVoid(e)?U_(e,t):Mr(`Unknown left type operand '${e[S]}'`)}n(Q,"Visit");function Ut(e,t){return Q(e,t)}n(Ut,"ExtendsCheck");function D_(e,t,r,o,a){let u={};for(let i of globalThis.Object.getOwnPropertyNames(e))u[i]=Pr(e[i],t,r,o,re(a));return u}n(D_,"FromProperties");function B_(e,t,r,o,a){return D_(e.properties,t,r,o,a)}n(B_,"FromMappedResult");function Yl(e,t,r,o,a){let u=B_(e,t,r,o,a);return W(u)}n(Yl,"ExtendsFromMappedResult");function j_(e,t,r,o){let a=Ut(e,t);return a===y.Union?q([r,o]):a===y.True?r:o}n(j_,"ExtendsResolve");function Pr(e,t,r,o,a){return ne(e)?Yl(e,t,r,o,a):Be(e)?b(ec(e,t,r,o,a)):b(j_(e,t,r,o),a)}n(Pr,"Extends");function W_(e,t,r,o,a){return{[e]:Pr(z(e),t,r,o,re(a))}}n(W_,"FromPropertyKey");function $_(e,t,r,o,a){return e.reduce((u,i)=>({...u,...W_(i,t,r,o,a)}),{})}n($_,"FromPropertyKeys");function V_(e,t,r,o,a){return $_(e.keys,t,r,o,a)}n(V_,"FromMappedKey");function ec(e,t,r,o,a){let u=V_(e,t,r,o,a);return W(u)}n(ec,"ExtendsFromMappedKey");function tc(e,t){return Rr(nr(e),t)}n(tc,"ExcludeFromTemplateLiteral");function G_(e,t){let r=e.filter(o=>Ut(o,t)===y.False);return r.length===1?r[0]:q(r)}n(G_,"ExcludeRest");function Rr(e,t,r={}){return je(e)?b(tc(e,t),r):ne(e)?b(rc(e,t),r):b(V(e)?G_(e.anyOf,t):Ut(e,t)!==y.False?Y():e,r)}n(Rr,"Exclude");function z_(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(e))r[o]=Rr(e[o],t);return r}n(z_,"FromProperties");function q_(e,t){return z_(e.properties,t)}n(q_,"FromMappedResult");function rc(e,t){let r=q_(e,t);return W(r)}n(rc,"ExcludeFromMappedResult");function nc(e,t){return Nr(nr(e),t)}n(nc,"ExtractFromTemplateLiteral");function K_(e,t){let r=e.filter(o=>Ut(o,t)!==y.False);return r.length===1?r[0]:q(r)}n(K_,"ExtractRest");function Nr(e,t,r){return je(e)?b(nc(e,t),r):ne(e)?b(oc(e,t),r):b(V(e)?K_(e.anyOf,t):Ut(e,t)!==y.False?e:Y(),r)}n(Nr,"Extract");function H_(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(e))r[o]=Nr(e[o],t);return r}n(H_,"FromProperties");function Z_(e,t){return H_(e.properties,t)}n(Z_,"FromMappedResult");function oc(e,t){let r=Z_(e,t);return W(r)}n(oc,"ExtractFromMappedResult");function ic(e,t){return b(e.returns,t)}n(ic,"InstanceType");function sc(e){return b({[S]:"Integer",type:"integer"},e)}n(sc,"Integer");function Q_(e,t,r){return{[e]:ut(z(e),t,re(r))}}n(Q_,"MappedIntrinsicPropertyKey");function J_(e,t,r){return e.reduce((a,u)=>({...a,...Q_(u,t,r)}),{})}n(J_,"MappedIntrinsicPropertyKeys");function X_(e,t,r){return J_(e.keys,t,r)}n(X_,"MappedIntrinsicProperties");function ac(e,t,r){let o=X_(e,t,r);return W(o)}n(ac,"IntrinsicFromMappedKey");function Y_(e){let[t,r]=[e.slice(0,1),e.slice(1)];return[t.toLowerCase(),r].join("")}n(Y_,"ApplyUncapitalize");function eg(e){let[t,r]=[e.slice(0,1),e.slice(1)];return[t.toUpperCase(),r].join("")}n(eg,"ApplyCapitalize");function tg(e){return e.toUpperCase()}n(tg,"ApplyUppercase");function rg(e){return e.toLowerCase()}n(rg,"ApplyLowercase");function ng(e,t,r){let o=wr(e.pattern);if(!rr(o))return{...e,pattern:uc(e.pattern,t)};let i=[...yn(o)].map(c=>z(c)),s=lc(i,t),l=q(s);return po([l],r)}n(ng,"FromTemplateLiteral");function uc(e,t){return typeof e=="string"?t==="Uncapitalize"?Y_(e):t==="Capitalize"?eg(e):t==="Uppercase"?tg(e):t==="Lowercase"?rg(e):e:e.toString()}n(uc,"FromLiteralValue");function lc(e,t){return e.map(r=>ut(r,t))}n(lc,"FromRest");function ut(e,t,r={}){return Be(e)?ac(e,t,r):je(e)?ng(e,t,r):V(e)?q(lc(e.anyOf,t),r):vt(e)?z(uc(e.const,t),r):b(e,r)}n(ut,"Intrinsic");function cc(e,t={}){return ut(e,"Capitalize",t)}n(cc,"Capitalize");function dc(e,t={}){return ut(e,"Lowercase",t)}n(dc,"Lowercase");function mc(e,t={}){return ut(e,"Uncapitalize",t)}n(mc,"Uncapitalize");function fc(e,t={}){return ut(e,"Uppercase",t)}n(fc,"Uppercase");function og(e,t,r){let o={};for(let a of globalThis.Object.getOwnPropertyNames(e))o[a]=Dt(e[a],t,re(r));return o}n(og,"FromProperties");function ig(e,t,r){return og(e.properties,t,r)}n(ig,"FromMappedResult");function pc(e,t,r){let o=ig(e,t,r);return W(o)}n(pc,"OmitFromMappedResult");function sg(e,t){return e.map(r=>Ss(r,t))}n(sg,"FromIntersect");function ag(e,t){return e.map(r=>Ss(r,t))}n(ag,"FromUnion");function ug(e,t){let{[t]:r,...o}=e;return o}n(ug,"FromProperty");function lg(e,t){return t.reduce((r,o)=>ug(r,o),e)}n(lg,"FromProperties");function cg(e,t){let r=ae(e,[xe,"$id","required","properties"]),o=lg(e.properties,t);return ee(o,r)}n(cg,"FromObject");function dg(e){let t=e.reduce((r,o)=>uo(o)?[...r,z(o)]:r,[]);return q(t)}n(dg,"UnionFromPropertyKeys");function Ss(e,t){return ce(e)?Pe(sg(e.allOf,t)):V(e)?q(ag(e.anyOf,t)):ye(e)?cg(e,t):ee({})}n(Ss,"OmitResolve");function Dt(e,t,r){let o=le(t)?dg(t):t,a=We(t)?Oe(t):t,u=se(e),i=se(t);return ne(e)?pc(e,a,r):Be(t)?_c(e,t,r):u&&i?G("Omit",[e,o],r):!u&&i?G("Omit",[e,o],r):u&&!i?G("Omit",[e,o],r):b({...Ss(e,a),...r})}n(Dt,"Omit");function mg(e,t,r){return{[t]:Dt(e,[t],re(r))}}n(mg,"FromPropertyKey");function fg(e,t,r){return t.reduce((o,a)=>({...o,...mg(e,a,r)}),{})}n(fg,"FromPropertyKeys");function pg(e,t,r){return fg(e,t.keys,r)}n(pg,"FromMappedKey");function _c(e,t,r){let o=pg(e,t,r);return W(o)}n(_c,"OmitFromMappedKey");function _g(e,t,r){let o={};for(let a of globalThis.Object.getOwnPropertyNames(e))o[a]=Bt(e[a],t,re(r));return o}n(_g,"FromProperties");function gg(e,t,r){return _g(e.properties,t,r)}n(gg,"FromMappedResult");function gc(e,t,r){let o=gg(e,t,r);return W(o)}n(gc,"PickFromMappedResult");function hg(e,t){return e.map(r=>Es(r,t))}n(hg,"FromIntersect");function yg(e,t){return e.map(r=>Es(r,t))}n(yg,"FromUnion");function bg(e,t){let r={};for(let o of t)o in e&&(r[o]=e[o]);return r}n(bg,"FromProperties");function Ig(e,t){let r=ae(e,[xe,"$id","required","properties"]),o=bg(e.properties,t);return ee(o,r)}n(Ig,"FromObject");function wg(e){let t=e.reduce((r,o)=>uo(o)?[...r,z(o)]:r,[]);return q(t)}n(wg,"UnionFromPropertyKeys");function Es(e,t){return ce(e)?Pe(hg(e.allOf,t)):V(e)?q(yg(e.anyOf,t)):ye(e)?Ig(e,t):ee({})}n(Es,"PickResolve");function Bt(e,t,r){let o=le(t)?wg(t):t,a=We(t)?Oe(t):t,u=se(e),i=se(t);return ne(e)?gc(e,a,r):Be(t)?hc(e,t,r):u&&i?G("Pick",[e,o],r):!u&&i?G("Pick",[e,o],r):u&&!i?G("Pick",[e,o],r):b({...Es(e,a),...r})}n(Bt,"Pick");function xg(e,t,r){return{[t]:Bt(e,[t],re(r))}}n(xg,"FromPropertyKey");function Sg(e,t,r){return t.reduce((o,a)=>({...o,...xg(e,a,r)}),{})}n(Sg,"FromPropertyKeys");function Eg(e,t,r){return Sg(e,t.keys,r)}n(Eg,"FromMappedKey");function hc(e,t,r){let o=Eg(e,t,r);return W(o)}n(hc,"PickFromMappedKey");function Tg(e,t){return G("Partial",[G(e,t)])}n(Tg,"FromComputed");function vg(e){return G("Partial",[Ze(e)])}n(vg,"FromRef");function Mg(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=Ce(e[r]);return t}n(Mg,"FromProperties");function Pg(e){let t=ae(e,[xe,"$id","required","properties"]),r=Mg(e.properties);return ee(r,t)}n(Pg,"FromObject");function yc(e){return e.map(t=>bc(t))}n(yc,"FromRest");function bc(e){return Ae(e)?Tg(e.target,e.parameters):se(e)?vg(e.$ref):ce(e)?Pe(yc(e.allOf)):V(e)?q(yc(e.anyOf)):ye(e)?Pg(e):ee({})}n(bc,"PartialResolve");function Lr(e,t){return ne(e)?Ic(e,t):b({...bc(e),...t})}n(Lr,"Partial");function Rg(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(e))r[o]=Lr(e[o],re(t));return r}n(Rg,"FromProperties");function Ng(e,t){return Rg(e.properties,t)}n(Ng,"FromMappedResult");function Ic(e,t){let r=Ng(e,t);return W(r)}n(Ic,"PartialFromMappedResult");function or(e,t,r){return b({[S]:"Record",type:"object",patternProperties:{[e]:t}},r)}n(or,"RecordCreateFromPattern");function Ts(e,t,r){let o={};for(let a of e)o[a]=t;return ee(o,{...r,[Ge]:"Record"})}n(Ts,"RecordCreateFromKeys");function Lg(e,t,r){return wl(e)?Ts(Oe(e),t,r):or(e.pattern,t,r)}n(Lg,"FromTemplateLiteralKey");function Fg(e,t,r){return Ts(Oe(q(e)),t,r)}n(Fg,"FromUnionKey");function kg(e,t,r){return Ts([e.toString()],t,r)}n(kg,"FromLiteralKey");function Ag(e,t,r){return or(e.source,t,r)}n(Ag,"FromRegExpKey");function Cg(e,t,r){let o=he(e.pattern)?tr:e.pattern;return or(o,t,r)}n(Cg,"FromStringKey");function Og(e,t,r){return or(tr,t,r)}n(Og,"FromAnyKey");function Ug(e,t,r){return or(pl,t,r)}n(Ug,"FromNeverKey");function Dg(e,t,r){return or(er,t,r)}n(Dg,"FromIntegerKey");function Bg(e,t,r){return or(er,t,r)}n(Bg,"FromNumberKey");function To(e,t,r={}){return Ae(t)?G("Record",[e,G(t.target,t.parameters)],r):Ae(e)?G("Record",[G(t.target,t.parameters),t],r):se(e)?G("Record",[Ze(e.$ref),t]):V(e)?Fg(e.anyOf,t,r):je(e)?Lg(e,t,r):vt(e)?kg(e.const,t,r):Xt(e)?Dg(e,t,r):Yt(e)?Bg(e,t,r):Zi(e)?Ag(e,t,r):mn(e)?Cg(e,t,r):zi(e)?Og(e,t,r):kt(e)?Ug(e,t,r):Y(r)}n(To,"Record");function jg(e,t){return G("Required",[G(e,t)])}n(jg,"FromComputed");function Wg(e){return G("Required",[Ze(e)])}n(Wg,"FromRef");function $g(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=ae(e[r],[Se]);return t}n($g,"FromProperties");function Vg(e){let t=ae(e,[xe,"$id","required","properties"]),r=$g(e.properties);return ee(r,t)}n(Vg,"FromObject");function wc(e){return e.map(t=>xc(t))}n(wc,"FromRest");function xc(e){return Ae(e)?jg(e.target,e.parameters):se(e)?Wg(e.$ref):ce(e)?Pe(wc(e.allOf)):V(e)?q(wc(e.anyOf)):ye(e)?Vg(e):ee({})}n(xc,"RequiredResolve");function Fr(e,t){return ne(e)?Sc(e,t):b({...xc(e),...t})}n(Fr,"Required");function Gg(e,t){let r={};for(let o of globalThis.Object.getOwnPropertyNames(e))r[o]=Fr(e[o],t);return r}n(Gg,"FromProperties");function zg(e,t){return Gg(e.properties,t)}n(zg,"FromMappedResult");function Sc(e,t){let r=zg(e,t);return W(r)}n(Sc,"RequiredFromMappedResult");function qg(e,t){return t.map(r=>se(r)?Ec(e,r.$ref):Xe(e,r))}n(qg,"DerefParameters");function Ec(e,t){return t in e?se(e[t])?Ec(e,e[t].$ref):Xe(e,e[t]):Y()}n(Ec,"Deref");function Kg(e){return Er(e[0])}n(Kg,"FromAwaited");function Hg(e){return Ot(e[0],e[1])}n(Hg,"FromIndex");function Zg(e){return Tr(e[0])}n(Zg,"FromKeyOf");function Qg(e){return Lr(e[0])}n(Qg,"FromPartial");function Jg(e){return Dt(e[0],e[1])}n(Jg,"FromOmit");function Xg(e){return Bt(e[0],e[1])}n(Xg,"FromPick");function Yg(e){return To(e[0],e[1])}n(Yg,"FromRecord");function eh(e){return Fr(e[0])}n(eh,"FromRequired");function th(e,t,r){let o=qg(e,r);return t==="Awaited"?Kg(o):t==="Index"?Hg(o):t==="KeyOf"?Zg(o):t==="Partial"?Qg(o):t==="Omit"?Jg(o):t==="Pick"?Xg(o):t==="Record"?Yg(o):t==="Required"?eh(o):Y()}n(th,"FromComputed");function rh(e,t){return ee(globalThis.Object.keys(t).reduce((r,o)=>({...r,[o]:Xe(e,t[o])}),{}))}n(rh,"FromObject");function nh(e,t,r){return br(xn(e,t),Xe(e,r))}n(nh,"FromConstructor");function oh(e,t,r){return pt(xn(e,t),Xe(e,r))}n(oh,"FromFunction");function ih(e,t){return Ke(xn(e,t))}n(ih,"FromTuple");function sh(e,t){return Pe(xn(e,t))}n(sh,"FromIntersect");function ah(e,t){return q(xn(e,t))}n(ah,"FromUnion");function uh(e,t){return hr(Xe(e,t))}n(uh,"FromArray");function lh(e,t){return yr(Xe(e,t))}n(lh,"FromAsyncIterator");function ch(e,t){return Sr(Xe(e,t))}n(ch,"FromIterator");function xn(e,t){return t.map(r=>Xe(e,r))}n(xn,"FromRest");function Xe(e,t){return ze(t)?b(Xe(e,ae(t,[Se])),t):ao(t)?b(Xe(e,ae(t,[st])),t):Tt(t)?b(uh(e,t.items),t):an(t)?b(lh(e,t.items),t):Ae(t)?b(th(e,t.target,t.parameters)):un(t)?b(nh(e,t.parameters,t.returns),t):ln(t)?b(oh(e,t.parameters,t.returns),t):ce(t)?b(sh(e,t.allOf),t):cn(t)?b(ch(e,t.items),t):ye(t)?b(rh(e,t.properties),t):at(t)?b(ih(e,t.items||[]),t):V(t)?b(ah(e,t.anyOf),t):t}n(Xe,"FromType");function dh(e,t){return t in e?Xe(e,e[t]):Y()}n(dh,"ComputeType");function Tc(e){return globalThis.Object.getOwnPropertyNames(e).reduce((t,r)=>({...t,[r]:dh(e,r)}),{})}n(Tc,"ComputeModuleProperties");var Ms=class Ms{constructor(t){let r=Tc(t),o=this.WithIdentifiers(r);this.$defs=o}Import(t,r){let o={...this.$defs,[t]:b(this.$defs[t],r)};return b({[S]:"Import",$defs:o,$ref:t})}WithIdentifiers(t){return globalThis.Object.getOwnPropertyNames(t).reduce((r,o)=>({...r,[o]:{...t[o],$id:o}}),{})}};n(Ms,"TModule");var vs=Ms;function vc(e){return new vs(e)}n(vc,"Module");function Mc(e,t){return b({[S]:"Not",not:e},t)}n(Mc,"Not");function Pc(e,t){return Ke(e.parameters,t)}n(Pc,"Parameters");function Rc(e){return qe(Ce(e))}n(Rc,"ReadonlyOptional");var mh=0;function Nc(e,t={}){he(t.$id)&&(t.$id=`T${mh++}`);let r=xu(e({[S]:"This",$ref:`${t.$id}`}));return r.$id=t.$id,b({[Ge]:"Recursive",...r},t)}n(Nc,"Recursive");function Lc(e,t){let r=J(e)?new globalThis.RegExp(e):e;return b({[S]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},t)}n(Lc,"RegExp");function fh(e){var t;return ce(e)?e.allOf:V(e)?e.anyOf:at(e)?(t=e.items)!=null?t:[]:[]}n(fh,"RestResolve");function Fc(e){return fh(e)}n(Fc,"Rest");function kc(e,t){return b(e.returns,t)}n(kc,"ReturnType");var Ns=class Ns{constructor(t){this.schema=t}Decode(t){return new Rs(this.schema,t)}};n(Ns,"TransformDecodeBuilder");var Ps=Ns,Ls=class Ls{constructor(t,r){this.schema=t,this.decode=r}EncodeTransform(t,r){let u={Encode:n(i=>r[xe].Encode(t(i)),"Encode"),Decode:n(i=>this.decode(r[xe].Decode(i)),"Decode")};return{...r,[xe]:u}}EncodeSchema(t,r){let o={Decode:this.decode,Encode:t};return{...r,[xe]:o}}Encode(t){return gr(this.schema)?this.EncodeTransform(t,this.schema):this.EncodeSchema(t,this.schema)}};n(Ls,"TransformEncodeBuilder");var Rs=Ls;function Ac(e){return new Ps(e)}n(Ac,"Transform");function Cc(e={}){var t;return b({[S]:(t=e[S])!=null?t:"Unsafe"},e)}n(Cc,"Unsafe");function Oc(e){return b({[S]:"Void",type:"void"},e)}n(Oc,"Void");var Fs={};Qo(Fs,{Any:()=>At,Array:()=>hr,AsyncIterator:()=>yr,Awaited:()=>Er,BigInt:()=>xr,Boolean:()=>fo,Capitalize:()=>cc,Composite:()=>Dl,Const:()=>Bl,Constructor:()=>br,ConstructorParameters:()=>jl,Date:()=>ho,Enum:()=>Wl,Exclude:()=>Rr,Extends:()=>Pr,Extract:()=>Nr,Function:()=>pt,Index:()=>Ot,InstanceType:()=>ic,Integer:()=>sc,Intersect:()=>Pe,Iterator:()=>Sr,KeyOf:()=>Tr,Literal:()=>z,Lowercase:()=>dc,Mapped:()=>Fl,Module:()=>vc,Never:()=>Y,Not:()=>Mc,Null:()=>yo,Number:()=>gt,Object:()=>ee,Omit:()=>Dt,Optional:()=>Ce,Parameters:()=>Pc,Partial:()=>Lr,Pick:()=>Bt,Promise:()=>go,Readonly:()=>qe,ReadonlyOptional:()=>Rc,Record:()=>To,Recursive:()=>Nc,Ref:()=>Ze,RegExp:()=>Lc,Required:()=>Fr,Rest:()=>Fc,ReturnType:()=>kc,String:()=>Ct,Symbol:()=>bo,TemplateLiteral:()=>po,Transform:()=>Ac,Tuple:()=>Ke,Uint8Array:()=>wo,Uncapitalize:()=>mc,Undefined:()=>Io,Union:()=>q,Unknown:()=>vr,Unsafe:()=>Cc,Uppercase:()=>fc,Void:()=>Oc});var ht=Fs;var ph=500,WF=8192-ph;var _h=ht.Object({relativePath:ht.Optional(ht.String()),uri:ht.String(),source:ht.String(),languageId:ht.String()}),$F=ht.Intersect([_h,ht.Object({offset:ht.Number()})]);var ko=Gt(require("path")),bt=require("worker_threads");function ry(e){return new Promise(t=>{setTimeout(()=>t(`delay: ${e}`),e)})}n(ry,"sleep");var yd=["getSimilarSnippets","sleep"],na=class na{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=wu;this.sleep=ry;var t;!bt.isMainThread&&((t=bt.workerData)!=null&&t.port)&&(hd(),process.cwd=()=>bt.workerData.cwd,this.configureWorkerResponse(bt.workerData.port))}initWorker(){let{port1:t,port2:r}=new bt.MessageChannel;this.port=t,this.worker=new bt.Worker(ko.default.resolve(ko.default.extname(__filename)!==".ts"?__dirname:ko.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:r,cwd:process.cwd()},transferList:[r]}),this.port.on("message",o=>this.handleMessage(o)),this.port.on("error",o=>this.handleError(o))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let t of yd)this.fns.set(t,this[t]),this.proxy(t)}unproxyFunctions(){for(let t of yd){let r=this.fns.get(t);if(r)this[t]=r;else throw new Error(`Unproxy function not found: ${t}`)}}configureWorkerResponse(t){this.port=t,this.port.on("message",r=>void this.onMessage(r))}async onMessage({id:t,fn:r,args:o}){let a=this[r];if(!a)throw new Error(`Function not found: ${r}`);try{let u=await a.apply(this,o);this.port.postMessage({id:t,res:u})}catch(u){if(!(u instanceof Error))throw u;typeof u.code=="string"?this.port.postMessage({id:t,err:u,code:u.code}):this.port.postMessage({id:t,err:u})}}handleMessage({id:t,err:r,code:o,res:a}){let u=this.handlers.get(t);u&&(this.handlers.delete(t),r?(r.code=o,u.reject(r)):u.resolve(a))}handleError(t){var o;console.log(t);let r;if(t instanceof Error){r=t,r.code==="MODULE_NOT_FOUND"&&((o=r.message)!=null&&o.endsWith("workerProxy.js'"))&&(r=new Nt("Failed to load workerProxy.js"));let a=new Error().stack;r.stack&&(a!=null&&a.match(/^Error\n/))&&(r.stack+=a.replace(/^Error/,""))}else t&&typeof t=="object"&&"name"in t&&t.name==="ExitStatus"&&"status"in t&&typeof t.status=="number"?(r=new Error(`workerProxy.js exited with status ${t.status}`),r.code=`CopilotPromptWorkerExit${t.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(t)}`);for(let a of this.handlers.values())a.reject(r);throw r}proxy(t){this[t]=function(...r){let o=this.nextHandlerId++;return new Promise((a,u)=>{var i;this.handlers.set(o,{resolve:a,reject:u}),(i=this.port)==null||i.postMessage({id:o,fn:t,args:r})})}}};n(na,"WorkerProxy");var ra=na,ny=new ra;var oa=class oa{constructor(t,r,o){this.languageId=t;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=o}async getNodeMatchAtPosition(t,r,o){let a=await Qt(this.languageId,t);try{let i=a.rootNode.descendantForIndex(r);for(;i;){let s=this.nodeMatch[i.type];if(s){if(!this.nodeTypesWithBlockOrStmtChild.has(i.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(i.type),c=l==""?i.namedChildren[0]:i.childForFieldName(l);if((c==null?void 0:c.type)==s)break}i=i.parent}return i?o(i):void 0}finally{a.delete()}}getNextBlockAtPosition(t,r,o){return this.getNodeMatchAtPosition(t,r,a=>{let u=a.children.reverse().find(i=>i.type==this.nodeMatch[a.type]);if(u){if(this.languageId=="python"&&u.parent){let i=u.parent.type==":"?u.parent.parent:u.parent,s=i==null?void 0:i.nextSibling;for(;s&&s.type=="comment";){let l=s.startPosition.row==u.endPosition.row&&s.startPosition.column>=u.endPosition.column,c=s.startPosition.row>i.endPosition.row&&s.startPosition.column>i.startPosition.column;if(l||c)u=s,s=s.nextSibling;else break}}if(!(u.endIndex>=u.tree.rootNode.endIndex-1&&(u.hasError()||u.parent.hasError())))return o(u)}})}async isBlockBodyFinished(t,r,o){let a=(t+r).trimEnd(),u=await this.getNextBlockAtPosition(a,o,i=>i.endIndex);if(u!==void 0&&u<a.length){let i=u-t.length;return i>0?i:void 0}}getNodeStart(t,r){let o=t.trimEnd();return this.getNodeMatchAtPosition(o,r,a=>a.startIndex)}};n(oa,"BaseBlockParser");var Ao=oa,ia=class ia extends Ao{constructor(r,o,a,u,i){super(r,u,i);this.blockEmptyMatch=o;this.lineMatch=a}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,o){let a=await this.getNextBlockAtPosition(r,o,u=>{u.startIndex<o&&(o=u.startIndex);let i=r.substring(o,u.endIndex).trim();return i==""||i.replace(/\s/g,"")==this.blockEmptyMatch});return a===void 0||a}async isEmptyBlockStart(r,o){return o=Id(r,o),this.isBlockStart(iy(r,o))&&this.isBlockBodyEmpty(r,o)}};n(ia,"RegexBasedBlockParser");var Co=ia;function iy(e,t){let r=e.lastIndexOf(`
`,t-1),o=e.indexOf(`
`,t);return o<0&&(o=e.length),e.slice(r+1,o)}n(iy,"getLineAtOffset");function Id(e,t){let r=t;for(;r>0&&/\s/.test(e.charAt(r-1));)r--;return r}n(Id,"rewindToNearestNonWs");function bd(e,t){let r=e.startIndex,o=e.startIndex-e.startPosition.column,a=t.substring(o,r);if(/^\s*$/.test(a))return a}n(bd,"indent");function sy(e,t,r){if(t.startPosition.row<=e.startPosition.row)return!1;let o=bd(e,r),a=bd(t,r);return o!==void 0&&a!==void 0&&o.startsWith(a)}n(sy,"outdented");var sa=class sa extends Ao{constructor(r,o,a,u,i,s,l){super(r,o,a);this.startKeywords=u;this.blockNodeType=i;this.emptyStatementType=s;this.curlyBraceLanguage=l}isBlockEmpty(r,o){var u,i;let a=r.text.trim();return this.curlyBraceLanguage&&(a.startsWith("{")&&(a=a.slice(1)),a.endsWith("}")&&(a=a.slice(0,-1)),a=a.trim()),!!(a.length==0||this.languageId=="python"&&(((u=r.parent)==null?void 0:u.type)=="class_definition"||((i=r.parent)==null?void 0:i.type)=="function_definition")&&r.children.length==1&&Iu(r.parent))}async isEmptyBlockStart(r,o){var u,i,s,l;if(o>r.length)throw new RangeError("Invalid offset");for(let c=o;c<r.length&&r.charAt(c)!=`
`;c++)if(/\S/.test(r.charAt(c)))return!1;o=Id(r,o);let a=await Qt(this.languageId,r);try{let c=a.rootNode.descendantForIndex(o-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let g=c;for(;g.parent;){if(g.type=="function_signature"||g.type=="method_signature"){let h=c.nextSibling;return h&&g.hasError()&&sy(g,h,r)?!0:!g.children.find(I=>I.type==";")&&g.endIndex<=o}g=g.parent}}let d=null,m=null,f=null,p=c;for(;p!=null;){if(p.type==this.blockNodeType){m=p;break}if(this.nodeMatch[p.type]){f=p;break}if(p.type=="ERROR"){d=p;break}p=p.parent}if(m!=null){if(!m.parent||!this.nodeMatch[m.parent.type])return!1;if(this.languageId=="python"){let g=m.previousSibling;if(g!=null&&g.hasError()&&(g.text.startsWith('"""')||g.text.startsWith("'''")))return!0}return this.isBlockEmpty(m,o)}if(d!=null){if(((u=d.previousSibling)==null?void 0:u.type)=="module"||((i=d.previousSibling)==null?void 0:i.type)=="internal_module"||((s=d.previousSibling)==null?void 0:s.type)=="def")return!0;let g=[...d.children].reverse(),h=g.find(I=>this.startKeywords.includes(I.type)),w=g.find(I=>I.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(w=(l=g.find(P=>P.hasError()))==null?void 0:l.children.find(P=>P.type=="block"));let I,L=0;for(let P of d.children){if(P.type==":"&&L==0){I=P;break}P.type=="("&&(L+=1),P.type==")"&&(L-=1)}if(I&&h.endIndex<=I.startIndex&&I.nextSibling){if(h.type=="def"){let P=I.nextSibling;if(P.type=='"'||P.type=="'"||P.type=="ERROR"&&(P.text=='"""'||P.text=="'''"))return!0}return!1}break}case"javascript":{let I=g.find(F=>F.type=="formal_parameters");if(h.type=="class"&&I)return!0;let L=g.find(F=>F.type=="{");if(L&&L.startIndex>h.endIndex&&L.nextSibling!=null||g.find(F=>F.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let I=g.find(P=>P.type=="{");if(I&&I.startIndex>h.endIndex&&I.nextSibling!=null||g.find(P=>P.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return w&&w.startIndex>h.endIndex?this.isBlockEmpty(w,o):!0}}if(f!=null){let g=this.nodeMatch[f.type],h=f.children.slice().reverse().find(w=>w.type==g);if(h)return this.isBlockEmpty(h,o);if(this.nodeTypesWithBlockOrStmtChild.has(f.type)){let w=this.nodeTypesWithBlockOrStmtChild.get(f.type),I=w==""?f.children[0]:f.childForFieldName(w);if(I&&I.type!=this.blockNodeType&&I.type!=this.emptyStatementType)return!1}return!0}return!1}finally{a.delete()}}};n(sa,"TreeSitterBasedBlockParser");var lr=sa,sA={python:new lr("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new lr("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new lr("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new lr("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new Co("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new Co("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new lr("csharp",{},new Map([]),[],"block",null,!0)};function Sd(e){switch(e){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}n(Sd,"isTypeDefinition");var Dr=class Dr{constructor(t,r){this.start=t,this.length=r}static fromBounds(t,r){return new Dr(t,r-t)}get end(){return this.start+this.length}contains(t){return this.start<=t&&this.end>=t}containsRange(t){return this.start<=t.start&&this.end>=t.end}equals(t){return this.start===t.start&&this.length===t.length}getText(t){return t.slice(this.start,this.end)}getTextWithIndentation(t,r){let o=[],a=this.start;for(a=xd(t,t.length,a),wd(o,r);a<this.end;)t[a]!=="\r"&&t[a]!==`
`?o.push(t[a++]):t[a]==="\r"&&a<t.length&&t[a+1]!==`
`||t[a]===`
`?(o.push(`
`),a=xd(t,t.length,++a),wd(o,r)):a++;return o.join("")}};n(Dr,"TextRange"),Dr.empty=new Dr(0,0);var ct=Dr;function wd(e,t){for(let r=0;r<t;r++)e.push(" ")}n(wd,"appendIndent");function xd(e,t,r){for(;r<t&&(e[r]===" "||e[r]==="	");)r++;return r}n(xd,"consumeIndent");var aa=class aa{constructor(t,r,o,a,u,i,s,l,c){this.fileName=t;this.fullyQualifiedName=r;this.unqualifiedName=o;this.commentRange=a;this.nameRange=u;this.bodyRange=i;this.extentRange=s;this.kind=l;this.refKind=c}equals(t){return this.fileName===t.fileName&&this.fullyQualifiedName===t.fullyQualifiedName&&this.unqualifiedName===t.unqualifiedName&&this.commentRange.equals(t.commentRange)&&this.nameRange.equals(t.nameRange)&&this.bodyRange.equals(t.bodyRange)&&this.extentRange.equals(t.extentRange)&&this.kind===t.kind&&this.refKind===t.refKind}};n(aa,"SymbolRange");var Br=aa,Rn=class Rn{constructor(){this.queriesCache=new Map}async executeQuery(t,r,o){let a;try{a=await Qt(this.languageId,r);let u=a.getLanguage(),s=this.getOrCreateQuery(u,o).matches(a.rootNode),l=new Dn,c=[];for(let d of s){let m=this.createSymbolRange(l,t,r,d.captures);m&&c.push(m)}return c}finally{a==null||a.delete()}}getOrCreateQuery(t,r){let o=this.queriesCache.get(r);return o||(o=t.query(r),this.queriesCache.set(r,o)),o}createSymbolRange(t,r,o,a){let u=0,i=0,s=0,l=0,c=0,d=0,m=0,f=0,p=null;for(let w=0;w<a.length;w++){let I=a[w].name;I==="name"?(c=a[w].node.startIndex,d=a[w].node.endIndex):I==="reference"?(c=a[w].node.startIndex,d=a[w].node.endIndex,s=a[w].node.startIndex,l=a[w].node.endIndex,p=I):I==="body"?(m=a[w].node.startIndex,f=a[w].node.endIndex):I==="comment"?(u=u===0?a[w].node.startIndex:Math.min(u,a[w].node.startIndex),i=Math.max(i,a[w].node.endIndex)):(s=a[w].node.startIndex,l=a[w].node.endIndex,p=I)}p==="definition.module.filescoped"&&(f=o.length,l=f);let g=ct.fromBounds(s,l),h=s>0||l>0||c>0||d>0?new Br(r,"","",ct.fromBounds(u,i),ct.fromBounds(c,d),ct.fromBounds(m,f),g,Rn.kindFromString(p),0):null;if(h){Rn.updateScopesForSymbol(t,h);let w=h.nameRange.getText(o);return new Br(r,this.createNameFromScopes(o,t.toArray()),w.substring(w.lastIndexOf(".")+1),h.commentRange,h.nameRange,h.bodyRange,h.extentRange,h.kind,0)}return null}static updateScopesForSymbol(t,r){var o;for(;t.tryPeek()&&!((o=t.peek())!=null&&o.extentRange.containsRange(r.extentRange));)t.pop();t.push(r)}static kindFromString(t){switch(t){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;default:throw new Error("NotSupportedException")}}};n(Rn,"SymbolExtractorBase");var Nn=Rn;var ua=class ua extends Nn{get languageId(){return"python"}extractSymbols(t,r){return this.executeQuery(t,r,ay)}createNameFromScopes(t,r){return r.map(o=>o.nameRange.getText(t)).join(".")}};n(ua,"PythonSymbolExtractor");var Oo=ua,la=class la extends Nn{get languageId(){return"python"}createNameFromScopes(t,r){return r.length>0?r[r.length-1].nameRange.getText(t):""}extractReferences(t,r){return this.executeQuery(t,r,uy)}async extractLocalReferences(t,r,o){let a=await this.executeQuery(t,r,ly),u=a.filter(l=>l.kind!==9),i=a.filter(l=>l.kind===9&&l.extentRange.containsRange(o)),s=[];for(let l of i)s.push(...u.filter(c=>l.extentRange.containsRange(c.extentRange)));return s}};n(la,"PythonReferenceExtractor");var Uo=la,ay=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,uy=`
(call function: (_) @name) @reference
`,ly=`
(call function: (_) @name) @reference
`;var Ed=[new Oo],Td=[new Uo];var da=require("os"),ma=require("path");var vd;(()=>{"use strict";var e={470:a=>{function u(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}n(u,"e");function i(l,c){for(var d,m="",f=0,p=-1,g=0,h=0;h<=l.length;++h){if(h<l.length)d=l.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(p===h-1||g===1))if(p!==h-1&&g===2){if(m.length<2||f!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var w=m.lastIndexOf("/");if(w!==m.length-1){w===-1?(m="",f=0):f=(m=m.slice(0,w)).length-1-m.lastIndexOf("/"),p=h,g=0;continue}}else if(m.length===2||m.length===1){m="",f=0,p=h,g=0;continue}}c&&(m.length>0?m+="/..":m="..",f=2)}else m.length>0?m+="/"+l.slice(p+1,h):m=l.slice(p+1,h),f=h-p-1;p=h,g=0}else d===46&&g!==-1?++g:g=-1}return m}n(i,"r");var s={resolve:n(function(){for(var l,c="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var f;m>=0?f=arguments[m]:(l===void 0&&(l=process.cwd()),f=l),u(f),f.length!==0&&(c=f+"/"+c,d=f.charCodeAt(0)===47)}return c=i(c,!d),d?c.length>0?"/"+c:"/":c.length>0?c:"."},"resolve"),normalize:n(function(l){if(u(l),l.length===0)return".";var c=l.charCodeAt(0)===47,d=l.charCodeAt(l.length-1)===47;return(l=i(l,!c)).length!==0||c||(l="."),l.length>0&&d&&(l+="/"),c?"/"+l:l},"normalize"),isAbsolute:n(function(l){return u(l),l.length>0&&l.charCodeAt(0)===47},"isAbsolute"),join:n(function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var d=arguments[c];u(d),d.length>0&&(l===void 0?l=d:l+="/"+d)}return l===void 0?".":s.normalize(l)},"join"),relative:n(function(l,c){if(u(l),u(c),l===c||(l=s.resolve(l))===(c=s.resolve(c)))return"";for(var d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var m=l.length,f=m-d,p=1;p<c.length&&c.charCodeAt(p)===47;++p);for(var g=c.length-p,h=f<g?f:g,w=-1,I=0;I<=h;++I){if(I===h){if(g>h){if(c.charCodeAt(p+I)===47)return c.slice(p+I+1);if(I===0)return c.slice(p+I)}else f>h&&(l.charCodeAt(d+I)===47?w=I:I===0&&(w=0));break}var L=l.charCodeAt(d+I);if(L!==c.charCodeAt(p+I))break;L===47&&(w=I)}var P="";for(I=d+w+1;I<=m;++I)I!==m&&l.charCodeAt(I)!==47||(P.length===0?P+="..":P+="/..");return P.length>0?P+c.slice(p+w):(p+=w,c.charCodeAt(p)===47&&++p,c.slice(p))},"relative"),_makeLong:n(function(l){return l},"_makeLong"),dirname:n(function(l){if(u(l),l.length===0)return".";for(var c=l.charCodeAt(0),d=c===47,m=-1,f=!0,p=l.length-1;p>=1;--p)if((c=l.charCodeAt(p))===47){if(!f){m=p;break}}else f=!1;return m===-1?d?"/":".":d&&m===1?"//":l.slice(0,m)},"dirname"),basename:n(function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');u(l);var d,m=0,f=-1,p=!0;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var g=c.length-1,h=-1;for(d=l.length-1;d>=0;--d){var w=l.charCodeAt(d);if(w===47){if(!p){m=d+1;break}}else h===-1&&(p=!1,h=d+1),g>=0&&(w===c.charCodeAt(g)?--g==-1&&(f=d):(g=-1,f=h))}return m===f?f=h:f===-1&&(f=l.length),l.slice(m,f)}for(d=l.length-1;d>=0;--d)if(l.charCodeAt(d)===47){if(!p){m=d+1;break}}else f===-1&&(p=!1,f=d+1);return f===-1?"":l.slice(m,f)},"basename"),extname:n(function(l){u(l);for(var c=-1,d=0,m=-1,f=!0,p=0,g=l.length-1;g>=0;--g){var h=l.charCodeAt(g);if(h!==47)m===-1&&(f=!1,m=g+1),h===46?c===-1?c=g:p!==1&&(p=1):c!==-1&&(p=-1);else if(!f){d=g+1;break}}return c===-1||m===-1||p===0||p===1&&c===m-1&&c===d+1?"":l.slice(c,m)},"extname"),format:n(function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(c,d){var m=d.dir||d.root,f=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+f:m+"/"+f:f}(0,l)},"format"),parse:n(function(l){u(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var d,m=l.charCodeAt(0),f=m===47;f?(c.root="/",d=1):d=0;for(var p=-1,g=0,h=-1,w=!0,I=l.length-1,L=0;I>=d;--I)if((m=l.charCodeAt(I))!==47)h===-1&&(w=!1,h=I+1),m===46?p===-1?p=I:L!==1&&(L=1):p!==-1&&(L=-1);else if(!w){g=I+1;break}return p===-1||h===-1||L===0||L===1&&p===h-1&&p===g+1?h!==-1&&(c.base=c.name=g===0&&f?l.slice(1,h):l.slice(g,h)):(g===0&&f?(c.name=l.slice(1,p),c.base=l.slice(1,h)):(c.name=l.slice(g,p),c.base=l.slice(g,h)),c.ext=l.slice(p,h)),g>0?c.dir=l.slice(0,g-1):f&&(c.dir="/"),c},"parse"),sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,a.exports=s}},t={};function r(a){var u=t[a];if(u!==void 0)return u.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,r),i.exports}n(r,"r"),r.d=(a,u)=>{for(var i in u)r.o(u,i)&&!r.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:u[i]})},r.o=(a,u)=>Object.prototype.hasOwnProperty.call(a,u),r.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};(()=>{let a;r.r(o),r.d(o,{URI:n(()=>f,"URI"),Utils:n(()=>nt,"Utils")}),typeof process=="object"?a=process.platform==="win32":typeof navigator=="object"&&(a=navigator.userAgent.indexOf("Windows")>=0);let u=/^\w[\w\d+.-]*$/,i=/^\//,s=/^\/\//;function l(v,x){if(!v.scheme&&x)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${v.authority}", path: "${v.path}", query: "${v.query}", fragment: "${v.fragment}"}`);if(v.scheme&&!u.test(v.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(v.path){if(v.authority){if(!i.test(v.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(s.test(v.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}n(l,"s");let c="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,dt=class dt{constructor(x,T,M,K,A,k=!1){Rt(this,"scheme");Rt(this,"authority");Rt(this,"path");Rt(this,"query");Rt(this,"fragment");typeof x=="object"?(this.scheme=x.scheme||c,this.authority=x.authority||c,this.path=x.path||c,this.query=x.query||c,this.fragment=x.fragment||c):(this.scheme=function(ke,ge){return ke||ge?ke:"file"}(x,k),this.authority=T||c,this.path=function(ke,ge){switch(ke){case"https":case"http":case"file":ge?ge[0]!==d&&(ge=d+ge):ge=d}return ge}(this.scheme,M||c),this.query=K||c,this.fragment=A||c,l(this,k))}static isUri(x){return x instanceof dt||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="string"&&typeof x.with=="function"&&typeof x.toString=="function"}get fsPath(){return L(this,!1)}with(x){if(!x)return this;let{scheme:T,authority:M,path:K,query:A,fragment:k}=x;return T===void 0?T=this.scheme:T===null&&(T=c),M===void 0?M=this.authority:M===null&&(M=c),K===void 0?K=this.path:K===null&&(K=c),A===void 0?A=this.query:A===null&&(A=c),k===void 0?k=this.fragment:k===null&&(k=c),T===this.scheme&&M===this.authority&&K===this.path&&A===this.query&&k===this.fragment?this:new g(T,M,K,A,k)}static parse(x,T=!1){let M=m.exec(x);return M?new g(M[2]||c,U(M[4]||c),U(M[5]||c),U(M[7]||c),U(M[9]||c),T):new g(c,c,c,c,c)}static file(x){let T=c;if(a&&(x=x.replace(/\\/g,d)),x[0]===d&&x[1]===d){let M=x.indexOf(d,2);M===-1?(T=x.substring(2),x=d):(T=x.substring(2,M),x=x.substring(M)||d)}return new g("file",T,x,c,c)}static from(x){let T=new g(x.scheme,x.authority,x.path,x.query,x.fragment);return l(T,!0),T}toString(x=!1){return P(this,x)}toJSON(){return this}static revive(x){if(x){if(x instanceof dt)return x;{let T=new g(x);return T._formatted=x.external,T._fsPath=x._sep===p?x.fsPath:null,T}}return x}};n(dt,"f");let f=dt,p=a?1:void 0,It=class It extends f{constructor(){super(...arguments);Rt(this,"_formatted",null);Rt(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=L(this,!1)),this._fsPath}toString(T=!1){return T?P(this,!0):(this._formatted||(this._formatted=P(this,!1)),this._formatted)}toJSON(){let T={$mid:1};return this._fsPath&&(T.fsPath=this._fsPath,T._sep=p),this._formatted&&(T.external=this._formatted),this.path&&(T.path=this.path),this.scheme&&(T.scheme=this.scheme),this.authority&&(T.authority=this.authority),this.query&&(T.query=this.query),this.fragment&&(T.fragment=this.fragment),T}};n(It,"l");let g=It,h={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function w(v,x,T){let M,K=-1;for(let A=0;A<v.length;A++){let k=v.charCodeAt(A);if(k>=97&&k<=122||k>=65&&k<=90||k>=48&&k<=57||k===45||k===46||k===95||k===126||x&&k===47||T&&k===91||T&&k===93||T&&k===58)K!==-1&&(M+=encodeURIComponent(v.substring(K,A)),K=-1),M!==void 0&&(M+=v.charAt(A));else{M===void 0&&(M=v.substr(0,A));let ke=h[k];ke!==void 0?(K!==-1&&(M+=encodeURIComponent(v.substring(K,A)),K=-1),M+=ke):K===-1&&(K=A)}}return K!==-1&&(M+=encodeURIComponent(v.substring(K))),M!==void 0?M:v}n(w,"d");function I(v){let x;for(let T=0;T<v.length;T++){let M=v.charCodeAt(T);M===35||M===63?(x===void 0&&(x=v.substr(0,T)),x+=h[M]):x!==void 0&&(x+=v[T])}return x!==void 0?x:v}n(I,"p");function L(v,x){let T;return T=v.authority&&v.path.length>1&&v.scheme==="file"?`//${v.authority}${v.path}`:v.path.charCodeAt(0)===47&&(v.path.charCodeAt(1)>=65&&v.path.charCodeAt(1)<=90||v.path.charCodeAt(1)>=97&&v.path.charCodeAt(1)<=122)&&v.path.charCodeAt(2)===58?x?v.path.substr(1):v.path[1].toLowerCase()+v.path.substr(2):v.path,a&&(T=T.replace(/\//g,"\\")),T}n(L,"m");function P(v,x){let T=x?I:w,M="",{scheme:K,authority:A,path:k,query:ke,fragment:ge}=v;if(K&&(M+=K,M+=":"),(A||K==="file")&&(M+=d,M+=d),A){let ie=A.indexOf("@");if(ie!==-1){let wt=A.substr(0,ie);A=A.substr(ie+1),ie=wt.lastIndexOf(":"),ie===-1?M+=T(wt,!1,!1):(M+=T(wt.substr(0,ie),!1,!1),M+=":",M+=T(wt.substr(ie+1),!1,!0)),M+="@"}A=A.toLowerCase(),ie=A.lastIndexOf(":"),ie===-1?M+=T(A,!1,!0):(M+=T(A.substr(0,ie),!1,!0),M+=A.substr(ie))}if(k){if(k.length>=3&&k.charCodeAt(0)===47&&k.charCodeAt(2)===58){let ie=k.charCodeAt(1);ie>=65&&ie<=90&&(k=`/${String.fromCharCode(ie+32)}:${k.substr(3)}`)}else if(k.length>=2&&k.charCodeAt(1)===58){let ie=k.charCodeAt(0);ie>=65&&ie<=90&&(k=`${String.fromCharCode(ie+32)}:${k.substr(2)}`)}M+=T(k,!0,!1)}return ke&&(M+="?",M+=T(ke,!1,!1)),ge&&(M+="#",M+=x?ge:w(ge,!1,!1)),M}n(P,"y");function F(v){try{return decodeURIComponent(v)}catch{return v.length>3?v.substr(0,3)+F(v.substr(3)):v}}n(F,"v");let N=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function U(v){return v.match(N)?v.replace(N,x=>F(x)):v}n(U,"C");var B=r(470);let E=B.posix||B,O="/";var nt;(function(v){v.joinPath=function(x,...T){return x.with({path:E.join(x.path,...T)})},v.resolvePath=function(x,...T){let M=x.path,K=!1;M[0]!==O&&(M=O+M,K=!0);let A=E.resolve(M,...T);return K&&A[0]===O&&!x.authority&&(A=A.substring(1)),x.with({path:A})},v.dirname=function(x){if(x.path.length===0||x.path===O)return x;let T=E.dirname(x.path);return T.length===1&&T.charCodeAt(0)===46&&(T=""),x.with({path:T})},v.basename=function(x){return E.basename(x.path)},v.extname=function(x){return E.extname(x.path)}})(nt||(nt={}))})(),vd=o})();var{URI:ca,Utils:cy}=vd;function Ln(e,t=!1){try{let r=e.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return r?ca.parse(r[1]+r[2],t):ca.parse(e,t)}catch(r){let o=new Error(`Could not parse <${e}>`);throw o.cause=r,o}}n(Ln,"parseUri");function dy(e){return["file","notebook","vscode-notebook","vscode-notebook-cell"].includes(e)}n(dy,"isFsScheme");function my(e){return dy(e.scheme)&&(!e.authority||(0,da.platform)()=="win32")}n(my,"isFsUri");function Md(e){try{typeof e=="string"&&(e=Ln(e,!0))}catch{return}if(my(e))if((0,da.platform)()==="win32"){let t=e.path;return e.authority?t=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(t)&&(t=t.substring(1)),(0,ma.normalize)(t)}else return e.authority?void 0:e.path}n(Md,"getFsPath");var Pd=require("fs");async function Rd(e,t,r,o){let a=new Map,u=0;for(let d of e){let m=d.node.fileName.toLowerCase(),f=a.get(m);f?f.symbols.push(d):a.set(m,{symbols:[d],topRank:u}),u++}if(a.delete(r.toLowerCase()),a.size===0)return[];let i=t,s=t/Math.min(3,a.size),l=[],c=Array.from(a.keys());c.sort((d,m)=>{let f=a.get(d).topRank,p=a.get(m).topRank;return f-p});for(let d of c){let m=a.get(d).symbols;if(i<=0)break;let f=(await fy(m)).makePrompt(Math.min(s,i));i-=o.tokenLength(f),l.push({uri:d,value:f})}return l}n(Rd,"symbolRangesToCodeSnippets");async function fy(e){if(e.length===0)return new Zt([]);let t=e[0].node.fileName,r=[],o=Ln(t).fsPath,a=(await Pd.promises.readFile(o)).toString(),u=1;for(let i of e)Nd(i,a,u).forEach(s=>r.push(s)),u/=2;return new Zt(r)}n(fy,"sameFileSymbolRangeToElidableText");function Nd(e,t,r){let o=[],a=e.node,u=t.substring(fa(t,a.commentRange.start),a.commentRange.end);o.push([pa(u),r-2e-4]);let i=t.substring(fa(t,a.commentRange.length===0?a.extentRange.start:a.commentRange.end),a.bodyRange.start);if(o.push([pa(i),r-1e-4]),e.children.length>0)for(let s of e.children)o.push(...Nd(s,t,r-2e-4));else{let s=t.substring(fa(t,a.bodyRange.start),a.bodyRange.end);o.push([pa(s),r-3e-4])}return o.filter(s=>s[0].length>0)}n(Nd,"prepareForElidableText");function fa(e,t){let o=e.substring(0,t).match(/[\r\n].*$/);return o!=null&&o.index?o.index+1:0}n(fa,"shiftLeftToNearestLineEnding");function pa(e){return e.replace(/^[\r\n]+|[\r\n\s\t]+$/g,"")}n(pa,"trimLineEndingsAndTrailingWhitespace");var ha=class ha{constructor(t,r){this.referenceExtractors=new Map;this.index=t;for(let o of r)this.referenceExtractors.set(o.languageId,o)}};n(ha,"ContextRetrievalStrategy");var _a=ha,ya=class ya extends _a{constructor(t,r){super(t,r)}async getContextAtPositionAsync(t,r,o,a){let u=this.referenceExtractors.get(a);if(!u)return[];let i=await u.extractReferences(t,r),s=new Set(i),l=Array.from(s);l.sort((m,f)=>this.compareSymbolRanges(m,f,o));let c=[],d=await this.index.findPotentialDefinitionsAsync(l.map(m=>m.unqualifiedName),!0);for(let m of d)c.push(await this.makeSymbolRangeNodeFromDefinition(m));return c}async makeSymbolRangeNodeFromDefinition(t){if(Sd(t.kind)){let r=await this.index.findSymbolsContainedByRangeAsync(t.fileName,t.bodyRange.start,t.bodyRange.end),o=await Promise.all(r.map(a=>this.makeSymbolRangeNodeFromDefinition(a)));return{node:t,children:o}}else return{node:t,children:[]}}compareSymbolRanges(t,r,o){let a=Math.abs(t.extentRange.start-o),u=Math.abs(r.extentRange.start-o);return a-u}};n(ya,"DynamicallyTypedRetrievalStrategy");var ga=ya,ba=class ba{constructor(t,r){this.strategies=new Map;let o=new ga(t,r);this.strategies.set("python",o)}async getStringifiedContextAtPositionAsync(t,r,o,a,u){let i=await this.getContextAtPositionAsync(t,r,o,a),s=ot();return Rd(i,u,t,s)}async getContextAtPositionAsync(t,r,o,a){return this.strategies.has(a)?this.strategies.get(a).getContextAtPositionAsync(t,r,o,a):[]}};n(ba,"SyntaxAwareContextRetrieval");var Do=ba;var cr={Id:"id"},et={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},$={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};var wa=class wa{constructor(t,r,o){this.tableName=t;this.createOptimizations=r;this.extraCreateDeclarations=o;this.primaryKey=new Ia(cr.Id)}createTableQueries(){var t;return(t=this.createTableString)!=null||(this.createTableString=this.generateCreateTableString()),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let t=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&t.push(this.extraCreateDeclarations),t.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${t.join(`,
`)}`,")"].join(`
`)}insertQuery(t,r){var a;(a=this.cachedInsertQueryStrings)!=null||(this.cachedInsertQueryStrings=this.generateInsertQueryStrings());let o=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return t&&o.push("ON CONFLICT DO NOTHING"),o.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(t=>t.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}};n(wa,"SQLTableQueryGenerator");var Bo=wa,jr=class jr extends Bo{constructor(){super(jr.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${jr.tableName}' ('${et.FilePath}');`]);this.fields=[new Cn(et.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new De(et.LastWriteTimeUtc,{notNull:!0})]}};n(jr,"DocumentQueryGenerator"),jr.tableName="Document";var Fn=jr,dr=class dr extends Bo{constructor(){super(dr.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${dr.tableName}' ('${$.DocumentId}', '${$.ExtentStart}', '${$.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${dr.tableName}' ('${$.UnqualifiedName}');`],`FOREIGN KEY(${$.DocumentId}) REFERENCES Document(${cr.Id}) ON DELETE CASCADE`);this.fields=[new De($.DocumentId),new Cn($.FullyQualifiedName,{notNull:!0}),new Cn($.UnqualifiedName,{notNull:!0,collate:!0,noCase:!0}),new De($.CommentStart,{notNull:!0}),new De($.CommentLength,{notNull:!0}),new De($.NameStart,{notNull:!0}),new De($.NameLength,{notNull:!0}),new De($.BodyStart,{notNull:!0}),new De($.BodyLength,{notNull:!0}),new De($.ExtentStart,{notNull:!0}),new De($.ExtentLength,{notNull:!0}),new De($.SymbolKind,{notNull:!0}),new De($.RefKind,{notNull:!0})]}};n(dr,"SymbolQueryGenerator"),dr.tableName="Symbol";var kn=dr,xa=class xa{constructor(t,r){this.name=t;var o;this.notNull=(o=r==null?void 0:r.notNull)!=null?o:!1}};n(xa,"SQLField");var An=xa,Sa=class Sa extends An{constructor(t,r){var o,a,u;super(t,{notNull:r==null?void 0:r.notNull}),this.collate=(o=r==null?void 0:r.collate)!=null?o:!1,this.noCase=(a=r==null?void 0:r.noCase)!=null?a:!1,this.unique=(u=r==null?void 0:r.unique)!=null?u:!1}initColumnString(){let t=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,o=this.notNull?"NOT NULL":void 0,a=this.unique?"UNIQUE":void 0,u=[t,r,o,a].filter(i=>i).join(" ");return`'${this.name}' VARCHAR(500) ${u}`}};n(Sa,"StringColumn");var Cn=Sa,Ea=class Ea extends An{initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}};n(Ea,"NumberColumn");var De=Ea,Ta=class Ta extends An{initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};n(Ta,"NumberPrimaryKeyColumn");var Ia=Ta;var va=class va{constructor(t){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(t)}async doInit(t){let r=await t;return await this.create(r),r}async create(t){let r=n(a=>new Promise((u,i)=>{t.run(a,s=>{s?i(s):u()})}),"runQuery"),o=this.queryGenerator.createTableQueries();for(let a of o)await r(a)}async insert(t,r){let o=await this.init;return new Promise((a,u)=>{let i=this.queryGenerator.insertQuery(r,t.length);o.run(i,t.map(s=>Object.values(s)).flat(),function(s){s?u(s):a(this)})})}async getAllRows(){let t=await this.init;return tt(t,`SELECT * FROM ${this.queryGenerator.tableName}`,[])}async deleteRow(t){let r=await this.init;return tt(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${cr.Id} = ?`,[t])}};n(va,"SQLTable");var jo=va,Wr=class Wr extends jo{createQueryGenerator(){return new Fn}async updateTimestamp(t,r){let o=await this.init;await tt(o,`UPDATE ${Wr.tableName} SET ${et.LastWriteTimeUtc} = ? WHERE ${et.FilePath} = ?`,[r,t])}async deleteAllWithPath(t){let r=await this.init;await tt(r,`DELETE FROM ${Wr.tableName} WHERE ${et.FilePath} = ?`,[t])}async getDocumentByFilePath(t){let r=await this.init;return tt(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${et.FilePath} = ?`,[t])}};n(Wr,"DocumentTable"),Wr.tableName=Fn.tableName;var $t=Wr,On=class On extends jo{createQueryGenerator(){return new kn}async clearAllSymbolsFromDocument(t){let r=await this.init;return tt(r,`DELETE FROM ${On.tableName} WHERE ${$.DocumentId} = ?`,[t])}};n(On,"SymbolTable"),On.tableName=kn.tableName;var Te=On;async function tt(e,t,r){return new Promise((o,a)=>e.all(t,r,(u,i)=>{u&&a(u),o(i)}))}n(tt,"runPromisifiedDBQuery");var Gd=Gt(Vd());var La=class La{constructor(t){this.databaseFileName=t;this.innerJoinStatement=`INNER JOIN ${$t.tableName} ON ${Te.tableName}.${$.DocumentId} = ${$t.tableName}.${cr.Id}`;this.db=this.initDb(t),this.documentTable=new $t(this.db),this.symbolTable=new Te(this.db)}async initDb(t){let r=await new Promise((o,a)=>{let u=new Gd.Database(t,i=>{i?(console.error("Error opening database",i),a(i)):o(u)})});return await tt(r,"pragma journal_mode=wal",[]),await tt(r,"pragma synchronous=normal",[]),await tt(r,"pragma optimize=0x10002",[]),await tt(r,"pragma foreign_keys = ON",[]),r}async close(){let t=await this.db;return await this.documentTable.init,await this.symbolTable.init,new Promise((r,o)=>{t.close(a=>a?o(a):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(t,r){return await this.query([`SELECT * FROM ${Te.tableName}`,this.innerJoinStatement,`WHERE ${$.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${$.UnqualifiedName}`,"LIMIT ?"].join(`
`),[t,t,r])}async querySymbolsUsingUnqualifiedNames(t){let r=t.map(()=>"?").join(", ");return await this.query([`SELECT * FROM ${Te.tableName}`,this.innerJoinStatement,`WHERE ${$.UnqualifiedName} IN (${r})`].join(`
`),t)}async querySymbolsUsingFullyQualifiedName(t){return this.query([`SELECT * FROM ${Te.tableName}`,this.innerJoinStatement,`WHERE ${$.FullyQualifiedName} = ?`].join(`
`),[t])}async querySymbolsContainingPosition(t,r){return this.query([`SELECT * FROM ${Te.tableName}`,this.innerJoinStatement,`WHERE ${$t.tableName}.${et.FilePath} = ? AND ${Te.tableName}.${$.ExtentStart} <= ? AND (${Te.tableName}.${$.ExtentStart} + ${Te.tableName}.${$.ExtentLength}) >= ?`].join(`
`),[t,r,r])}async querySymbolsContainedByRange(t,r,o){return this.query([`SELECT * FROM ${Te.tableName}`,this.innerJoinStatement,`WHERE ${$t.tableName}.${et.FilePath} = ? AND ${Te.tableName}.${$.ExtentStart} >= ? AND (${Te.tableName}.${$.ExtentStart} + ${Te.tableName}.${$.ExtentLength}) <= ?`,`ORDER BY ${Te.tableName}.${$.ExtentStart}`].join(`
`),[t,r,o])}async insertSymbols(t){return await this.symbolTable.insert(t,!1)}async insertDocument(t,r,o=!1){return await this.documentTable.insert([{filePath:t,lastWriteTimeUtc:r}],o)}async clearAllSymbolsFromDocument(t){return this.symbolTable.clearAllSymbolsFromDocument(t)}async updateDocumentTimestamp(t,r){return this.documentTable.updateTimestamp(t,r)}async deleteAllDocumentsWithPath(t){return this.documentTable.deleteAllWithPath(t)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(t){return this.documentTable.getDocumentByFilePath(t)}async query(t,r){let o=await this.db;return await this.documentTable.init,await this.symbolTable.init,tt(o,t,r)}};n(La,"DocumentSymbolDatabase");var Vo=La;var Fa=class Fa{constructor(t){this.database=new Vo(t)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(t,r,o){let a=await this.getOrCreateDocumentAsync(t,r);await this.database.clearAllSymbolsFromDocument(a.id),o.length>0&&await this.database.insertSymbols(o.map(u=>({documentId:a.id,fullyQualifiedName:u.fullyQualifiedName,unqualifiedName:u.unqualifiedName,commentStart:u.commentRange.start,commentLength:u.commentRange.length,nameStart:u.nameRange.start,nameLength:u.nameRange.length,bodyStart:u.bodyRange.start,bodyLength:u.bodyRange.length,extentStart:u.extentRange.start,extentLength:u.extentRange.length,symbolKind:u.kind,refKind:u.refKind}))),await this.database.updateDocumentTimestamp(t,r)}async addDocumentsAsync(t){for(let r of t)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(t){return await this.database.deleteAllDocumentsWithPath(t.toLowerCase())}async updateDocumentTimestampAsync(t,r){return await this.database.updateDocumentTimestamp(t.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(t,r){return Gr(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(t,r))}async findPotentialDefinitionsAsync(t,r){var l;t=Array.from(new Set(t));let o=[],a=500,u=0;for(;u<t.length;){let c=t.slice(u,u+a);u+=a;let d=await this.database.querySymbolsUsingUnqualifiedNames(c);o.push(...d)}if(!r){let c=new Set(t),d=o.filter(m=>c.has(m.unqualifiedName));return Gr(d)}let i=new Map;for(let c of o){let d=(l=i.get(c.unqualifiedName.toLowerCase()))!=null?l:0;i.set(c.unqualifiedName.toLowerCase(),d+1)}let s=o.filter(c=>!i.has(c.unqualifiedName.toLowerCase())||i.get(c.unqualifiedName.toLowerCase())<20);return s.sort((c,d)=>t.findIndex(m=>c.unqualifiedName.toLowerCase()===m.toLowerCase())-t.findIndex(m=>d.unqualifiedName.toLowerCase()===m.toLowerCase())),Gr(s)}async getDefinitionsAsync(t){return Gr(await this.database.querySymbolsUsingFullyQualifiedName(t))}async findSymbolsContainingPositionAsync(t,r){let o=await this.database.querySymbolsContainingPosition(t.toLowerCase(),r);return Gr(o)}async findSymbolsContainedByRangeAsync(t,r,o){return Gr(await this.database.querySymbolsContainedByRange(t.toLowerCase(),r,o))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(t){let r=await this.database.getDocument(t);if(r!=null&&r.at(0))return r[0]}async getOrCreateDocumentAsync(t,r){let o=await this.database.getDocument(t);if(o!=null&&o.at(0))return o[0];await this.database.insertDocument(t,r,!0);let a=await this.database.getDocument(t);if(!a)throw Error("Unable to insert document");return a[0]}};n(Fa,"SQLStorageReaderWriter");var Go=Fa;function Gr(e){return e.map(t=>new Br(t.filePath,t.fullyQualifiedName,t.unqualifiedName,new ct(t.commentStart,t.commentLength),new ct(t.nameStart,t.nameLength),new ct(t.bodyStart,t.bodyLength),new ct(t.extentStart,t.extentLength),t.symbolKind,t.refKind))}n(Gr,"symbolsToSymbolRanges");var qo=Gt(require("fs/promises"));var ka=class ka{constructor(t,r){this.storage=new Go(t),this.symbolExtractors=r}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(t,r){let o=Md(Ln(t));if(!o)throw Error(`Cannot resolve a readable file path from ${t}`);let a;try{a=await qo.stat(o)}catch{await this.storage.deleteDocumentAsync(t);return}let u=a.mtimeMs,i=await this.storage.getDocumentAsync(t);if(i&&i.lastWriteTimeUtc>=u)return;let s=this.symbolExtractors.find(d=>d.languageId==r);if(!s)return;let l=(await qo.readFile(o)).toString(),c=await s.extractSymbols(t,l);await this.storage.insertOrReplaceDocumentSymbolsAsync(t,u,c)}};n(ka,"Index");var zo=ka;function zd(e){let t=e;return typeof(t==null?void 0:t.cwd)=="string"&&Array.isArray(t==null?void 0:t.indexWorkspaceRoots)&&t.indexWorkspaceRoots.every(r=>Iy(r))}n(zd,"isIndexWorkerData");var Ca=class Ca{constructor(t){this.id=t}};n(Ca,"IndexMessage");var Aa=Ca,zr={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex"};var Oa=class Oa extends Aa{constructor(r,o,a){super(r);this.error=o;this.data=a;this.operation=zr.Response}};n(Oa,"ResponseMessage");var Vt=Oa;function Iy(e){return"databaseFilePath"in e&&"rootPath"in e}n(Iy,"isIndexableWorkspaceFolder");var Ko=Gt(require("path")),qr=require("worker_threads");var Da=class Da{constructor(t){this.index=new zo(t,Ed),this.contextRetreival=new Do(this.index.reader,Td)}};n(Da,"IndexInfo");var Ho=Da,Zo=class Zo{constructor(t,r){this.indices=new Map;for(let o of r)this.indices.set(Ko.default.normalize(o.rootPath),new Ho(o.databaseFilePath));t.on("message",o=>void Zo.dispatchMessage(o,this.indices))}static async dispatchMessage(t,r){var a,u;let o=n(i=>{for(let[s,l]of r)if(Ko.default.normalize(i).startsWith(s))return l},"getIndexInfo");try{if(t.operation===zr.AddOrInvalidated){let i=t,s=(a=o(i.filePath))==null?void 0:a.index,l;s?await s.indexFile(i.filePath,i.languageId):l=new Error(`Index not found for ${i.filePath}`),ue==null||ue.postMessage(new Vt(t.id,l,void 0))}else if(t.operation===zr.GetContext){let i=t,s=(u=o(i.filePath))==null?void 0:u.contextRetreival,l,c;s?c=await s.getStringifiedContextAtPositionAsync(i.filePath,i.code,i.offset,i.languageId,8e3):l=new Error(`ContextRetrieval not found for ${i.filePath}`),ue==null||ue.postMessage(new Vt(t.id,l,c))}else if(t.operation===zr.Exit){for(let i of r.values())await i.index.dispose();r.clear(),ue==null||ue.postMessage(new Vt(t.id,void 0,void 0)),ue==null||ue.close()}else if(t.operation===zr.CreateIndex){let i=t;r.has(i.baseWorkspaceFolderPath)||r.set(Ko.default.normalize(i.baseWorkspaceFolderPath),new Ho(i.baseWorkspaceFolderPath)),ue==null||ue.postMessage(new Vt(t.id,void 0,void 0))}else ue==null||ue.postMessage(new Error(`Unknown operation: ${t.operation}`))}catch(i){if(!(i instanceof Error))throw i;ue==null||ue.postMessage(new Vt(t.id,i,void 0))}}};n(Zo,"IndexWorker");var Ua=Zo,ue=qr.parentPort;if(!ue)throw new Error("This module should only be used in a worker thread.");if(!zd(qr.workerData))throw new Error("Worker data must provide a valid database path.");var wy=qr.workerData.cwd;process.cwd=()=>wy;new Ua(ue,qr.workerData.indexWorkspaceRoots);
//# sourceMappingURL=indexWorker.js.map
